(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7160a840"],{"0695":function(t,e,n){"use strict";var i=n("0f94"),r=n.n(i);r.a},"0a49":function(t,e,n){var i=n("9b43"),r=n("626a"),a=n("4bf8"),o=n("9def"),s=n("cd1c");t.exports=function(t,e){var n=1==t,l=2==t,u=3==t,c=4==t,h=6==t,d=5==t||h,f=e||s;return function(e,s,p){for(var g,m,v=a(e),y=r(v),x=i(s,p,3),_=o(y.length),b=0,w=n?f(e,_):l?f(e,0):void 0;_>b;b++)if((d||b in y)&&(g=y[b],m=x(g,b,v),t))if(n)w[b]=m;else if(m)switch(t){case 3:return!0;case 5:return g;case 6:return b;case 2:w.push(g)}else if(c)return!1;return h?-1:u||c?c:w}}},"0eb9":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tags"},[n("div",{ref:"scrollCon",staticClass:"content"},[n("div",{ref:"scrollBody",staticClass:"scrollDiv",style:{left:t.tagBodyLeft+"px"},on:{DOMMouseScroll:t.handleScroll,mousewheel:t.handleScroll}},[t._l(t.tagList,function(e){return[n("Tag",{attrs:{type:"dot",name:e.id,closable:"homeMain"!==e.name,color:e.name===t.checkedTag?"warning":"default"},on:{"on-close":function(n){t.tagClose(e)}},nativeOn:{click:function(n){t.tagClick(e)}}},[t._v(t._s(e.title))])]})],2)]),n("div",{staticClass:"tagSelect",on:{mouseleave:t.butMouseout}},[n("div",{staticClass:"but",on:{mouseenter:t.butHover}},[t._v("\n\t\t\t标签选项"),n("Icon",{staticClass:"icon",style:{transform:"rotateZ("+t.iconZ+"deg)"},attrs:{type:"md-arrow-dropup",size:"18"}})],1),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.hoverShow,expression:"hoverShow"}]},[n("li",{on:{click:t.closeTags}},[t._v("关闭其他")]),n("li",{on:{click:t.closeAllTags}},[t._v("关闭全部")])])])])},r=[],a=(n("7f7f"),{name:"menuTags",data:function(){return{tagBodyLeft:0,hoverShow:!1,iconZ:180}},computed:{tagList:function(){return this.$store.state.app.tagList},checkedTag:function(){return this.$store.state.app.checkedTag}},methods:{tagClose:function(t){var e=this;this.$store.commit("deleteTag",{item:t,_that:e}),this.$store.commit("setOpenNamesList",t)},tagClick:function(t){var e=t.name+","+t.title;this.$store.commit("setActiveName",e),this.$store.commit("setCheckedTag",t.name),this.$store.commit("setOpenNamesList",t),"homeMain"===t.name?this.$router.push("home"):this.$router.push(t.name)},closeTags:function(){this.$store.commit("closeTags")},closeAllTags:function(){this.$store.commit("closeAllTags",this)},handleScroll:function(t){var e=t.type,n=0;"DOMMouseScroll"!==e&&"mousewheel"!==e||(n=t.wheelDelta?t.wheelDelta:40*-(t.detail||0));var i=0;n>0?i=Math.min(0,this.tagBodyLeft+n):this.$refs.scrollCon.offsetWidth-100<this.$refs.scrollBody.offsetWidth?i=this.tagBodyLeft<-(this.$refs.scrollBody.offsetWidth-this.$refs.scrollCon.offsetWidth+100)?this.tagBodyLeft:Math.max(this.tagBodyLeft+n,this.$refs.scrollCon.offsetWidth-this.$refs.scrollBody.offsetWidth-100):this.tagBodyLeft=0,this.tagBodyLeft=i},butHover:function(){this.hoverShow=!0,this.iconZ=0},butMouseout:function(){this.hoverShow=!1,this.iconZ=180}}}),o=a,s=(n("7bcf"),n("2877")),l=Object(s["a"])(o,i,r,!1,null,"a302e97e",null);e["default"]=l.exports},"0f94":function(t,e,n){},"101e":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"popup"},[n("div",{staticClass:"popupBox"},[t._t("default")],2)])},r=[],a={name:"dropDownBox",data:function(){return{}},methods:{}},o=a,s=(n("5f71"),n("2877")),l=Object(s["a"])(o,i,r,!1,null,"7b45a571",null);e["default"]=l.exports},1169:function(t,e,n){var i=n("2d95");t.exports=Array.isArray||function(t){return"Array"==i(t)}},1202:function(t,e,n){t.exports=n.p+"img/logo.4db61d6d.png"},"167d":function(t,e,n){},1688:function(t,e,n){!function(e,n){t.exports=n()}(window,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=16)}([,,,,,,,,,function(t,e,n){function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=n(17),o=n(12),s=n(14),l={getActivedStyle:function(){},getSelectedStyle:function(){},getStyle:function(){},getPath:function(){}};function u(t,e,n){var i=[];return s.isString(t)?i=[e,t]:s.isArray(t)?(t.unshift(e),i=t):i=[e],n&&i.unshift(n+"-base"),i}a.registerNode("page-base",i({},l)),a.registerEdge("page-base",i({},l)),a.registerGroup("page-base",i({},l)),a.registerGuide("page-base",i({},l)),o.setRegister=function(t,e,n){t.registerNode=function(t,i,r){a.registerNode(t,i,u(r,e+"-base",n))},t.registerEdge=function(t,i,r){a.registerEdge(t,i,u(r,e+"-base",n))},t.registerGroup=function(t,i,r){a.registerGroup(t,i,u(r,e+"-base",n))},t.registerGuide=function(t,i,r){a.registerGuide(t,i,u(r,e+"-base",n))},t.registerBehaviour=function(t,e,n){a.registerBehaviour(t,function(t){var n=t.get("page");n.set("_graph",t),e(n)},n)}},o.setRegister(o,"page"),n(166),t.exports=o},,function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=n(17),a=n(63),o=n(146),s=n(145),l=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}({},r.Util,a,o,s);t.exports=l},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){a(t,e,n[e])})}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=n(65),h=n(14),d=n(27),f=n(176),p=n(175),g=n(173),m=[f,n(172),n(171),p,g,n(170),n(168),n(167)],v=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i={defaultData:null,shortcut:{redo:!0,undo:!0,delete:!0,resetZoom:!0,autoZoom:!0,zoomIn:!0,zoomOut:!0},_controllers:{},_signals:{}};return h.each(m,function(t){h.mix(i,t.CFG)}),h.mix(!0,i,t),(n=s(this,l(e).call(this,i))).isPage=!0,n.type="page",n._init(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,c),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(e,[{key:"getDelegation",value:function(t,e){var n;if(1!==t.length||t[0].isNode||t[0].isGroup){var i=h.getTotalBBox(t.map(function(t){return t.getBBox()}));(n=h.getRectByBox(i,e,d.nodeDelegationStyle)).set("capture",!1)}else t[0].isEdge?n=e.addShape("path",{attrs:r({path:"M0 0L 1 1"},d.edgeDelegationStyle),capture:!1}):(n=h.getRectByBox(t[0],e,d.nodeDelegationStyle)).set("capture",!1);return n}},{key:"focusGraphWrapper",value:function(){this.getGraph().getKeyboardEventWrapper().focus()}},{key:"saveImage",value:function(t){var e,n,i=this,a=this.getGraph(),o=a.getBBox(),s=a.getFitViewPadding();return a.saveImage(r({width:o.width+s[1]+s[3],height:o.height+s[0]+s[2],beforeTransform:function(){e=i.getSelected().map(function(t){return t.id}),n=i.getSelected().map(function(t){return t.id}),i.clearSelected(),i.clearActived()},afterTransform:function(){i.setSelected(e,!0),i.setActived(n,!0)}},t))}},{key:"_init",value:function(){var t=this;h.each(m,function(e){e.INIT&&t[e.INIT]()}),this.bindEvent(),this._cacheBBox()}},{key:"executeCommand",value:function(t,e){var n=this.editor;n?n.executeCommand(t,e):t()}},{key:"_cacheBBox",value:function(){var t=this.getGraph();this.set("bboxCache",t.getBBox())}},{key:"bindEvent",value:function(){var t=this;this.getGraph().on("afterchange",function(){t._cacheBBox()})}},{key:"translateLimt",value:function(t){var e=this.getGraph(),n=this.get("bboxCache"),i=e.getWidth(),r=e.getHeight(),a=[n.minX,n.minY,1],o=[n.maxX,n.maxY,1];return h.vec3.transformMat3(a,a,t),h.vec3.transformMat3(o,o,t),o[0]<100&&h.mat3.translate(t,t,[100-o[0],0]),o[1]<100&&h.mat3.translate(t,t,[0,100-o[1]]),a[1]>r-100&&h.mat3.translate(t,t,[0,r-100-a[1]]),a[0]>i-100&&h.mat3.translate(t,t,[i-100-a[0],0]),!0}},{key:"setSignal",value:function(t,e){this.get("_signals")[t]=e}},{key:"getSignal",value:function(t){return this.get("_signals")[t]}},{key:"setController",value:function(t,e){this.get("_controllers")[t]=e}},{key:"getController",value:function(t){return this.get("_controllers")[t]}},{key:"destroy",value:function(){var t=this.get("_graph"),e=this.get("_controllers");h.each(e,function(t){t.destroy()}),t.destroy()}}]),e}();h.each(m,function(t){h.mix(v.prototype,t.AUGMENT)}),t.exports=v},function(t,e){t.exports={orbitGap:10,nodeDefaultShape:"flow-node",edgeDefaultShape:"flow-smooth",groupDefaultShape:"flow-group",nodeActivedOutterStyle:{lineWidth:0},groupSelectedOutterStyle:{stroke:"#E0F0FF",lineWidth:2},nodeSelectedOutterStyle:{stroke:"#E0F0FF",lineWidth:2},edgeActivedStyle:{stroke:"#1890FF",strokeOpacity:.92},nodeActivedStyle:{fill:"#F3F9FF",stroke:"#1890FF"},groupActivedStyle:{stroke:"#1890FF"},edgeSelectedStyle:{lineWidth:2,strokeOpacity:.92,stroke:"#A3B1BF"},nodeSelectedStyle:{fill:"#F3F9FF",stroke:"#1890FF"},groupSelectedStyle:{stroke:"#1890FF",fillOpacity:.92},nodeStyle:{stroke:"#CED4D9",fill:"#FFFFFF",shadowOffsetX:0,shadowOffsetY:4,shadowBlur:10,shadowColor:"rgba(13, 26, 38, 0.08)",lineWidth:1,radius:4,fillOpacity:.92},edgeStyle:{stroke:"#A3B1BF",strokeOpacity:.92,lineWidth:1,lineAppendWidth:8,endArrow:!0},groupBackgroundPadding:[40,10,10,10],groupLabelOffsetX:10,groupLabelOffsetY:10,edgeLabelStyle:{fill:"#666",textAlign:"center",textBaseline:"middle"},edgeLabelRectPadding:4,edgeLabelRectStyle:{fill:"white"},nodeLabelStyle:{fill:"#666",textAlign:"center",textBaseline:"middle"},groupStyle:{stroke:"#CED4D9",radius:4},groupLabelStyle:{fill:"#666",textAlign:"left",textBaseline:"top"},multiSelectRectStyle:{fill:"#1890FF",fillOpacity:.08,stroke:"#1890FF",opacity:.1},dragNodeHoverToGroupStyle:{stroke:"#1890FF",lineWidth:2},dragNodeLeaveFromGroupStyle:{stroke:"#BAE7FF",lineWidth:2},anchorPointStyle:{radius:3.5,fill:"#fff",stroke:"#1890FF",lineAppendWidth:12},anchorHotsoptStyle:{radius:12,fill:"#1890FF",fillOpacity:.25},anchorHotsoptActivedStyle:{radius:14},anchorPointHoverStyle:{radius:4,fill:"#1890FF",fillOpacity:1,stroke:"#1890FF"},nodeControlPointStyle:{radius:4,fill:"#fff",shadowBlur:4,shadowColor:"#666"},edgeControlPointStyle:{radius:6,symbol:"square",lineAppendWidth:6,fillOpacity:0,strokeOpacity:0},nodeSelectedBoxStyle:{stroke:"#C2C2C2"},cursor:{panningCanvas:"-webkit-grabbing",beforePanCanvas:"-webkit-grab",hoverNode:"move",hoverEffectiveAnchor:"crosshair",hoverEdge:"default",hoverGroup:"move",hoverUnEffectiveAnchor:"default",hoverEdgeControllPoint:"crosshair",multiSelect:"crosshair"},zIndex:{anchorPoint:3,anchorHotsopt:2,selectedBox:1,controlPoint:4},polylineEdgeStyle:{offset:10,borderRadius:5},addToGroupDelayTime:400,outFromGroupDelayTime:400}},function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=n(19),a=n(27),o=r.createDOM("<canvas>").getContext("2d");t.exports=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}({},r,{getPanCanvasBehaviour:function(t){return function(e){var n,i,o=e.getGraph();o.behaviourOn("canvas:mouseenter",function(){e.css({cursor:a.cursor.beforePanCanvas})}),o.behaviourOn("mouseleave",function(t){t.toShape||e.css({cursor:a.cursor.beforePanCanvas})}),o.behaviourOn("dragstart",function(r){(2!==r.button&&!t||!r.shape||r.item&&!1===r.item.dragable)&&(n={x:r.domX,y:r.domY},e.css({cursor:a.cursor.panningCanvas}),i=o.getMatrix(),e.setCapture(!1))}),o.behaviourOn("drag",function(t){if(n){var a=t.domX-n.x,s=t.domY-n.y,l=[];r.mat3.translate(l,i,[a,s]),e.translateLimt(l)&&(o.updateMatrix(l),o.draw())}}),o.behaviourOn("dragend",function(){n=void 0,i=void 0,e.setCapture(!0),e.css({cursor:a.cursor.beforePanCanvas})})}},getLabelTextByTextLineWidth:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:320;o.font=e;var i=o.measureText(t).width;if(i>n){i=0;for(var r=1;r<t.length;r++)(i+=o.measureText(t[r]).width)>=n&&(t=t.substring(0,r)+"\n"+t.substring(r,t.length),r+=1,i=0)}return t}})},,function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=n(184),a=n(19),o=n(38),s=n(177),l=n(17);r.Editor=r,r.Util=a,r.Page=n(9),r.Flow=n(147),r.Koni=n(109),r.Mind=n(104),r.Minimap=n(89),r.Toolbar=n(87),r.Contextmenu=n(86),r.Itempannel=n(85),r.Detailpannel=n(84),r.Command=n(38),r.registerBehaviour=r.Page.registerBehaviour,r.registerNode=r.Page.registerNode,r.registerEdge=r.Page.registerEdge,r.registerGroup=r.Page.registerGroup,r.registerGuide=r.Page.registerGuide,r.registerCommand=o.registerCommand,r.version=s,r.track=function(t){var e={G6Editor:!0};a.isObject(t)?l.track(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}({},e,t)):t?l.track(e):l.track(t)},r.track(!0),t.exports=r},function(t,e,n){window,t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=594)}([,function(t,e,n){"use strict";var i=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function r(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function a(){}var o="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",l="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u=/^#([0-9a-f]{3})$/,c=/^#([0-9a-f]{6})$/,h=new RegExp("^rgb\\("+[o,o,o]+"\\)$"),d=new RegExp("^rgb\\("+[l,l,l]+"\\)$"),f=new RegExp("^rgba\\("+[o,o,o,s]+"\\)$"),p=new RegExp("^rgba\\("+[l,l,l,s]+"\\)$"),g=new RegExp("^hsl\\("+[s,l,l]+"\\)$"),m=new RegExp("^hsla\\("+[s,l,l,s]+"\\)$"),v={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function y(t){var e;return t=(t+"").trim().toLowerCase(),(e=u.exec(t))?new S((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=c.exec(t))?x(parseInt(e[1],16)):(e=h.exec(t))?new S(e[1],e[2],e[3],1):(e=d.exec(t))?new S(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=f.exec(t))?_(e[1],e[2],e[3],e[4]):(e=p.exec(t))?_(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=g.exec(t))?A(e[1],e[2]/100,e[3]/100,1):(e=m.exec(t))?A(e[1],e[2]/100,e[3]/100,e[4]):v.hasOwnProperty(t)?x(v[t]):"transparent"===t?new S(NaN,NaN,NaN,0):null}function x(t){return new S(t>>16&255,t>>8&255,255&t,1)}function _(t,e,n,i){return i<=0&&(t=e=n=NaN),new S(t,e,n,i)}function b(t){return t instanceof a||(t=y(t)),t?new S((t=t.rgb()).r,t.g,t.b,t.opacity):new S}function w(t,e,n,i){return 1===arguments.length?b(t):new S(t,e,n,null==i?1:i)}function S(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function M(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function A(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new I(t,e,n,i)}function C(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof I)return new I(t.h,t.s,t.l,t.opacity);if(t instanceof a||(t=y(t)),!t)return new I;if(t instanceof I)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),s=NaN,l=o-r,u=(o+r)/2;return l?(s=e===o?(n-i)/l+6*(n<i):n===o?(i-e)/l+2:(e-n)/l+4,l/=u<.5?o+r:2-o-r,s*=60):l=u>0&&u<1?0:s,new I(s,l,u,t.opacity)}(t):new I(t,e,n,null==i?1:i)}function I(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function P(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}i(a,y,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),i(S,w,r(a,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new S(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new S(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+M(this.r)+M(this.g)+M(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),i(I,C,r(a,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new I(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new I(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new S(P(t>=240?t-240:t+120,r,i),P(t,r,i),P(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var T=Math.PI/180,O=180/Math.PI,k=.96422,D=1,E=.82521,L=4/29,N=6/29,R=3*N*N,B=N*N*N;function z(t){if(t instanceof F)return new F(t.l,t.a,t.b,t.opacity);if(t instanceof Z){if(isNaN(t.h))return new F(t.l,0,0,t.opacity);var e=t.h*T;return new F(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof S||(t=b(t));var n,i,r=Y(t.r),a=Y(t.g),o=Y(t.b),s=j((.2225045*r+.7168786*a+.0606169*o)/D);return r===a&&a===o?n=i=s:(n=j((.4360747*r+.3850649*a+.1430804*o)/k),i=j((.0139322*r+.0971045*a+.7141733*o)/E)),new F(116*s-16,500*(n-s),200*(s-i),t.opacity)}function V(t,e){return new F(t,0,0,null==e?1:e)}function G(t,e,n,i){return 1===arguments.length?z(t):new F(t,e,n,null==i?1:i)}function F(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function j(t){return t>B?Math.pow(t,1/3):t/R+L}function H(t){return t>N?t*t*t:R*(t-L)}function W(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Y(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function X(t){if(t instanceof Z)return new Z(t.h,t.c,t.l,t.opacity);if(t instanceof F||(t=z(t)),0===t.a&&0===t.b)return new Z(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*O;return new Z(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function U(t,e,n,i){return 1===arguments.length?X(t):new Z(n,e,t,null==i?1:i)}function q(t,e,n,i){return 1===arguments.length?X(t):new Z(t,e,n,null==i?1:i)}function Z(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}i(F,G,r(a,{brighter:function(t){return new F(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new F(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new S(W(3.1338561*(e=k*H(e))-1.6168667*(t=D*H(t))-.4906146*(n=E*H(n))),W(-.9787684*e+1.9161415*t+.033454*n),W(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),i(Z,q,r(a,{brighter:function(t){return new Z(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Z(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return z(this).rgb()}}));var K=-.14861,$=1.78277,J=-.29227,Q=-.90649,tt=1.97294,et=tt*Q,nt=tt*$,it=$*J-Q*K;function rt(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof at)return new at(t.h,t.s,t.l,t.opacity);t instanceof S||(t=b(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(it*i+et*e-nt*n)/(it+et-nt),a=i-r,o=(tt*(n-r)-J*a)/Q,s=Math.sqrt(o*o+a*a)/(tt*r*(1-r)),l=s?Math.atan2(o,a)*O-120:NaN;return new at(l<0?l+360:l,s,r,t.opacity)}(t):new at(t,e,n,null==i?1:i)}function at(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}i(at,rt,r(a,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new at(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new at(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*T,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new S(255*(e+n*(K*i+$*r)),255*(e+n*(J*i+Q*r)),255*(e+n*(tt*i)),this.opacity)}})),n.d(e,"a",function(){return y}),n.d(e,"h",function(){return w}),n.d(e,"e",function(){return C}),n.d(e,"f",function(){return G}),n.d(e,"d",function(){return q}),n.d(e,"g",function(){return U}),n.d(e,"c",function(){return V}),n.d(e,"b",function(){return rt})},,,,,,,,,,,,,,function(t,e,n){"use strict";n.r(e);var i,r,a=0,o=0,s=0,l=1e3,u=0,c=0,h=0,d="object"==typeof performance&&performance.now?performance:Date,f="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function p(){return c||(f(g),c=d.now()+h)}function g(){c=0}function m(){this._call=this._time=this._next=null}function v(t,e,n){var i=new m;return i.restart(t,e,n),i}function y(){p(),++a;for(var t,e=i;e;)(t=c-e._time)>=0&&e._call.call(null,t),e=e._next;--a}function x(){c=(u=d.now())+h,a=o=0;try{y()}finally{a=0,function(){for(var t,e,n=i,a=1/0;n;)n._call?(a>n._time&&(a=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:i=e);r=t,b(a)}(),c=0}}function _(){var t=d.now(),e=t-u;e>l&&(h-=e,u=t)}function b(t){a||(o&&(o=clearTimeout(o)),t-c>24?(t<1/0&&(o=setTimeout(x,t-d.now()-h)),s&&(s=clearInterval(s))):(s||(u=d.now(),s=setInterval(_,l)),a=1,f(x)))}m.prototype=v.prototype={constructor:m,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?p():+n)+(null==e?0:+e),this._next||r===this||(r?r._next=this:i=this,r=this),this._call=t,this._time=n,b()},stop:function(){this._call&&(this._call=null,this._time=1/0,b())}};var w=function(t,e,n){var i=new m;return e=null==e?0:+e,i.restart(function(n){i.stop(),t(n+e)},e,n),i},S=function(t,e,n){var i=new m,r=e;return null==e?(i.restart(t,e,n),i):(e=+e,n=null==n?p():+n,i.restart(function a(o){o+=r,i.restart(a,r+=e,n),t(o)},e,n),i)};n.d(e,"now",function(){return p}),n.d(e,"timer",function(){return v}),n.d(e,"timerFlush",function(){return y}),n.d(e,"timeout",function(){return w}),n.d(e,"interval",function(){return S})},,function(t,e,n){var i=n(408),r={};i.merge(r,i,{mixin:function(t,e){var n=t.CFG?"CFG":"ATTRS";if(t&&e){t._mixins=e,t[n]=t[n]||{};var i={};r.each(e,function(e){r.augment(t,e);var a=e[n];a&&r.merge(i,a)}),t[n]=r.merge(i,t[n])}}}),t.exports=r},,,,,function(t,e,n){var i={},r=n(448),a=n(514),o=n(152),s=n(493),l=n(492),u=n(491);o.mix(i,o,l,u,s,a,r),t.exports=i},,,,,,function(t,e,n){"use strict";function i(t){return+t}function r(t){return t*t}function a(t){return t*(2-t)}function o(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function s(t){return t*t*t}function l(t){return--t*t*t+1}function u(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}n.r(e);var c=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),h=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),d=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),f=Math.PI,p=f/2;function g(t){return 1-Math.cos(t*p)}function m(t){return Math.sin(t*p)}function v(t){return(1-Math.cos(f*t))/2}function y(t){return Math.pow(2,10*t-10)}function x(t){return 1-Math.pow(2,-10*t)}function _(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function b(t){return 1-Math.sqrt(1-t*t)}function w(t){return Math.sqrt(1- --t*t)}function S(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var M=4/11,A=6/11,C=8/11,I=.75,P=9/11,T=10/11,O=.9375,k=21/22,D=63/64,E=1/M/M;function L(t){return 1-N(1-t)}function N(t){return(t=+t)<M?E*t*t:t<C?E*(t-=A)*t+I:t<T?E*(t-=P)*t+O:E*(t-=k)*t+D}function R(t){return((t*=2)<=1?1-N(1-t):N(t-1)+1)/2}var B=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),z=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),V=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),G=2*Math.PI,F=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=G);function r(t){return e*Math.pow(2,10*--t)*Math.sin((i-t)/n)}return r.amplitude=function(e){return t(e,n*G)},r.period=function(n){return t(e,n)},r}(1,.3),j=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=G);function r(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/n)}return r.amplitude=function(e){return t(e,n*G)},r.period=function(n){return t(e,n)},r}(1,.3),H=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=G);function r(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((i-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((i+t)/n))/2}return r.amplitude=function(e){return t(e,n*G)},r.period=function(n){return t(e,n)},r}(1,.3);n.d(e,"easeLinear",function(){return i}),n.d(e,"easeQuad",function(){return o}),n.d(e,"easeQuadIn",function(){return r}),n.d(e,"easeQuadOut",function(){return a}),n.d(e,"easeQuadInOut",function(){return o}),n.d(e,"easeCubic",function(){return u}),n.d(e,"easeCubicIn",function(){return s}),n.d(e,"easeCubicOut",function(){return l}),n.d(e,"easeCubicInOut",function(){return u}),n.d(e,"easePoly",function(){return d}),n.d(e,"easePolyIn",function(){return c}),n.d(e,"easePolyOut",function(){return h}),n.d(e,"easePolyInOut",function(){return d}),n.d(e,"easeSin",function(){return v}),n.d(e,"easeSinIn",function(){return g}),n.d(e,"easeSinOut",function(){return m}),n.d(e,"easeSinInOut",function(){return v}),n.d(e,"easeExp",function(){return _}),n.d(e,"easeExpIn",function(){return y}),n.d(e,"easeExpOut",function(){return x}),n.d(e,"easeExpInOut",function(){return _}),n.d(e,"easeCircle",function(){return S}),n.d(e,"easeCircleIn",function(){return b}),n.d(e,"easeCircleOut",function(){return w}),n.d(e,"easeCircleInOut",function(){return S}),n.d(e,"easeBounce",function(){return N}),n.d(e,"easeBounceIn",function(){return L}),n.d(e,"easeBounceOut",function(){return N}),n.d(e,"easeBounceInOut",function(){return R}),n.d(e,"easeBack",function(){return V}),n.d(e,"easeBackIn",function(){return B}),n.d(e,"easeBackOut",function(){return z}),n.d(e,"easeBackInOut",function(){return V}),n.d(e,"easeElastic",function(){return j}),n.d(e,"easeElasticIn",function(){return F}),n.d(e,"easeElasticOut",function(){return j}),n.d(e,"easeElasticInOut",function(){return H})},function(t,e,n){var i=n(60),r=Array.isArray?Array.isArray:function(t){return i(t,"Array")};t.exports=r},function(t,e,n){var i=n(385),r=n(29);t.exports=function(t,e){if(t)if(r(t))for(var n=0,a=t.length;n<a&&!1!==e(t[n],n);n++);else if(i(t))for(var o in t)if(t.hasOwnProperty(o)&&!1===e(t[o],o))break}},,,,,,,function(t,e,n){var i=n(17),r=n(508),a=n(405),o=n(376),s=function t(e){t.superclass.constructor.call(this,e)};s.ATTRS={},i.extend(s,a);var l={matrix:"matrix",path:"path",points:"points",lineDash:"lineDash"};i.augment(s,r,{isShape:!0,drawInner:function(t){var e=this._attrs;this.createPath(t);var n=t.globalAlpha;if(this.hasFill()){var r=e.fillOpacity;i.isNil(r)||1===r?t.fill():(t.globalAlpha=r,t.fill(),t.globalAlpha=n)}if(this.hasStroke()&&this._attrs.lineWidth>0){var a=e.strokeOpacity;i.isNil(a)||1===a||(t.globalAlpha=a),t.stroke()}this.afterPath(t)},afterPath:function(){},isHitBox:function(){return!0},isHit:function(t,e){var n=[t,e,1];if(this.invert(n),this.isHitBox()){var i=this.getBBox();if(i&&!o.box(i.minX,i.maxX,i.minY,i.maxY,n[0],n[1]))return!1}var r=this._attrs.clip;return r?(r.invert(n,this.get("canvas")),!!r.isPointInPath(n[0],n[1])&&this.isPointInPath(n[0],n[1])):this.isPointInPath(n[0],n[1])},calculateBox:function(){return null},getHitLineWidth:function(){var t=this._attrs,e=t.lineAppendWidth||0;return(t.lineWidth||0)+e},clearTotalMatrix:function(){this._cfg.totalMatrix=null,this._cfg.region=null},clearBBox:function(){this._cfg.box=null,this._cfg.region=null},getBBox:function(){var t=this._cfg.box;return t||((t=this.calculateBox())&&(t.x=t.minX,t.y=t.minY,t.width=t.maxX-t.minX,t.height=t.maxY-t.minY),this._cfg.box=t),t},clone:function(){var t=null,e=this._attrs,n={};return i.each(e,function(t,r){l[r]&&i.isArray(e[r])?n[r]=function(t){for(var e=[],n=0;n<t.length;n++)i.isArray(t[n])?e.push([].concat(t[n])):e.push(t[n]);return e}(e[r]):n[r]=e[r]}),(t=new this.constructor({attrs:n}))._cfg.zIndex=this._cfg.zIndex,t}}),t.exports=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setMatrixArrayType=function(t){e.ARRAY_TYPE=t},e.toRadian=function(t){return t*r},e.equals=function(t,e){return Math.abs(t-e)<=i*Math.max(1,Math.abs(t),Math.abs(e))};var i=e.EPSILON=1e-6;e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,e.RANDOM=Math.random;var r=Math.PI/180},,,,,,,,,function(t,e,n){var i=n(60);t.exports=function(t){return i(t,"Function")}},,,,,,,,,,,,,function(t,e){var n={}.toString;t.exports=function(t,e){return n.call(t)==="[object "+e+"]"}},function(t,e,n){var i;
/*!
     * EventEmitter v5.1.0 - git.io/ee
     * Unlicense - http://unlicense.org/
     * Oliver Caldwell - http://oli.me.uk/
     * @preserve
     */!function(e){"use strict";function r(){}var a=r.prototype,o=e.EventEmitter;function s(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function l(t){return function(){return this[t].apply(this,arguments)}}a.getListeners=function(t){var e,n,i=this._getEvents();if(t instanceof RegExp)for(n in e={},i)i.hasOwnProperty(n)&&t.test(n)&&(e[n]=i[n]);else e=i[t]||(i[t]=[]);return e},a.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},a.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&((e={})[t]=n),e||n},a.addListener=function(t,e){if(!function t(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&t(e.listener)}(e))throw new TypeError("listener must be a function");var n,i=this.getListenersAsObject(t),r="object"==typeof e;for(n in i)i.hasOwnProperty(n)&&-1===s(i[n],e)&&i[n].push(r?e:{listener:e,once:!1});return this},a.on=l("addListener"),a.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},a.once=l("addOnceListener"),a.defineEvent=function(t){return this.getListeners(t),this},a.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},a.removeListener=function(t,e){var n,i,r=this.getListenersAsObject(t);for(i in r)r.hasOwnProperty(i)&&-1!==(n=s(r[i],e))&&r[i].splice(n,1);return this},a.off=l("removeListener"),a.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},a.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},a.manipulateListeners=function(t,e,n){var i,r,a=t?this.removeListener:this.addListener,o=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(i=n.length;i--;)a.call(this,e,n[i]);else for(i in e)e.hasOwnProperty(i)&&(r=e[i])&&("function"==typeof r?a.call(this,i,r):o.call(this,i,r));return this},a.removeEvent=function(t){var e,n=typeof t,i=this._getEvents();if("string"===n)delete i[t];else if(t instanceof RegExp)for(e in i)i.hasOwnProperty(e)&&t.test(e)&&delete i[e];else delete this._events;return this},a.removeAllListeners=l("removeEvent"),a.emitEvent=function(t,e){var n,i,r,a,o=this.getListenersAsObject(t);for(a in o)if(o.hasOwnProperty(a))for(n=o[a].slice(0),r=0;r<n.length;r++)!0===(i=n[r]).once&&this.removeListener(t,i.listener),i.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,i.listener);return this},a.trigger=l("emitEvent"),a.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},a.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},a._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},a._getEvents=function(){return this._events||(this._events={})},r.noConflict=function(){return e.EventEmitter=o,r},void 0===(i=function(){return r}.call(e,n,e,t))||(t.exports=i)}(this||{})},function(t,e){t.exports=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var i=n(60);t.exports=function(t){return i(t,"Number")}},function(t,e){t.exports=function(t){return null===t||void 0===t}},function(t,e,n){"use strict";n.r(e);var i=n(1);function r(t,e,n,i,r){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*i+o*r)/6}var a=function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),a=t[i],o=t[i+1],s=i>0?t[i-1]:2*a-o,l=i<e-1?t[i+2]:2*o-a;return r((n-i/e)*e,s,a,o,l)}},o=function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),a=t[(i+e-1)%e],o=t[i%e],s=t[(i+1)%e],l=t[(i+2)%e];return r((n-i/e)*e,a,o,s,l)}},s=function(t){return function(){return t}};function l(t,e){return function(n){return t+n*e}}function u(t,e){var n=e-t;return n?l(t,n>180||n<-180?n-360*Math.round(n/360):n):s(isNaN(t)?e:t)}function c(t,e){var n=e-t;return n?l(t,n):s(isNaN(t)?e:t)}var h=function t(e){var n=function(t){return 1==(t=+t)?c:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):s(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=Object(i.h)(t)).r,(e=Object(i.h)(e)).r),a=n(t.g,e.g),o=n(t.b,e.b),s=c(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=a(e),t.b=o(e),t.opacity=s(e),t+""}}return r.gamma=t,r}(1);function d(t){return function(e){var n,r,a=e.length,o=new Array(a),s=new Array(a),l=new Array(a);for(n=0;n<a;++n)r=Object(i.h)(e[n]),o[n]=r.r||0,s[n]=r.g||0,l[n]=r.b||0;return o=t(o),s=t(s),l=t(l),r.opacity=1,function(t){return r.r=o(t),r.g=s(t),r.b=l(t),r+""}}}var f,p,g,m,v=d(a),y=d(o),x=function(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,a=new Array(r),o=new Array(i);for(n=0;n<r;++n)a[n]=C(t[n],e[n]);for(;n<i;++n)o[n]=e[n];return function(t){for(n=0;n<r;++n)o[n]=a[n](t);return o}},_=function(t,e){var n=new Date;return e-=t=+t,function(i){return n.setTime(t+e*i),n}},b=function(t,e){return e-=t=+t,function(n){return t+e*n}},w=function(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=C(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}},S=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,M=new RegExp(S.source,"g"),A=function(t,e){var n,i,r,a=S.lastIndex=M.lastIndex=0,o=-1,s=[],l=[];for(t+="",e+="";(n=S.exec(t))&&(i=M.exec(e));)(r=i.index)>a&&(r=e.slice(a,r),s[o]?s[o]+=r:s[++o]=r),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:b(n,i)})),a=M.lastIndex;return a<e.length&&(r=e.slice(a),s[o]?s[o]+=r:s[++o]=r),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,i=0;i<e;++i)s[(n=l[i]).i]=n.x(t);return s.join("")})},C=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?s(e):("number"===r?b:"string"===r?(n=Object(i.a)(e))?(e=n,h):A:e instanceof i.a?h:e instanceof Date?_:Array.isArray(e)?x:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?w:b)(t,e)},I=function(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}},P=180/Math.PI,T={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},O=function(t,e,n,i,r,a){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),t*i<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:r,translateY:a,rotate:Math.atan2(e,t)*P,skewX:Math.atan(l)*P,scaleX:o,scaleY:s}};function k(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(a,o){var s=[],l=[];return a=t(a),o=t(o),function(t,i,r,a,o,s){if(t!==r||i!==a){var l=o.push("translate(",null,e,null,n);s.push({i:l-4,x:b(t,r)},{i:l-2,x:b(i,a)})}else(r||a)&&o.push("translate("+r+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,l),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(r(n)+"rotate(",null,i)-2,x:b(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}(a.rotate,o.rotate,s,l),function(t,e,n,a){t!==e?a.push({i:n.push(r(n)+"skewX(",null,i)-2,x:b(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}(a.skewX,o.skewX,s,l),function(t,e,n,i,a,o){if(t!==n||e!==i){var s=a.push(r(a)+"scale(",null,",",null,")");o.push({i:s-4,x:b(t,n)},{i:s-2,x:b(e,i)})}else 1===n&&1===i||a.push(r(a)+"scale("+n+","+i+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,l),a=o=null,function(t){for(var e,n=-1,i=l.length;++n<i;)s[(e=l[n]).i]=e.x(t);return s.join("")}}}var D=k(function(t){return"none"===t?T:(f||(f=document.createElement("DIV"),p=document.documentElement,g=document.defaultView),f.style.transform=t,t=g.getComputedStyle(p.appendChild(f),null).getPropertyValue("transform"),p.removeChild(f),t=t.slice(7,-1).split(","),O(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),E=k(function(t){return null==t?T:(m||(m=document.createElementNS("http://www.w3.org/2000/svg","g")),m.setAttribute("transform",t),(t=m.transform.baseVal.consolidate())?(t=t.matrix,O(t.a,t.b,t.c,t.d,t.e,t.f)):T)},", ",")",")"),L=Math.SQRT2;function N(t){return((t=Math.exp(t))+1/t)/2}var R=function(t,e){var n,i,r=t[0],a=t[1],o=t[2],s=e[0],l=e[1],u=e[2],c=s-r,h=l-a,d=c*c+h*h;if(d<1e-12)i=Math.log(u/o)/L,n=function(t){return[r+t*c,a+t*h,o*Math.exp(L*t*i)]};else{var f=Math.sqrt(d),p=(u*u-o*o+4*d)/(2*o*2*f),g=(u*u-o*o-4*d)/(2*u*2*f),m=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(g*g+1)-g);i=(v-m)/L,n=function(t){var e=t*i,n=N(m),s=o/(2*f)*(n*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(L*e+m)-function(t){return((t=Math.exp(t))-1/t)/2}(m));return[r+s*c,a+s*h,o*n/N(L*e+m)]}}return n.duration=1e3*i,n};function B(t){return function(e,n){var r=t((e=Object(i.e)(e)).h,(n=Object(i.e)(n)).h),a=c(e.s,n.s),o=c(e.l,n.l),s=c(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=a(t),e.l=o(t),e.opacity=s(t),e+""}}}var z=B(u),V=B(c);function G(t,e){var n=c((t=Object(i.f)(t)).l,(e=Object(i.f)(e)).l),r=c(t.a,e.a),a=c(t.b,e.b),o=c(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=a(e),t.opacity=o(e),t+""}}function F(t){return function(e,n){var r=t((e=Object(i.d)(e)).h,(n=Object(i.d)(n)).h),a=c(e.c,n.c),o=c(e.l,n.l),s=c(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=a(t),e.l=o(t),e.opacity=s(t),e+""}}}var j=F(u),H=F(c);function W(t){return function e(n){function r(e,r){var a=t((e=Object(i.b)(e)).h,(r=Object(i.b)(r)).h),o=c(e.s,r.s),s=c(e.l,r.l),l=c(e.opacity,r.opacity);return function(t){return e.h=a(t),e.s=o(t),e.l=s(Math.pow(t,n)),e.opacity=l(t),e+""}}return n=+n,r.gamma=e,r}(1)}var Y=W(u),X=W(c),U=function(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n};n.d(e,"interpolate",function(){return C}),n.d(e,"interpolateArray",function(){return x}),n.d(e,"interpolateBasis",function(){return a}),n.d(e,"interpolateBasisClosed",function(){return o}),n.d(e,"interpolateDate",function(){return _}),n.d(e,"interpolateNumber",function(){return b}),n.d(e,"interpolateObject",function(){return w}),n.d(e,"interpolateRound",function(){return I}),n.d(e,"interpolateString",function(){return A}),n.d(e,"interpolateTransformCss",function(){return D}),n.d(e,"interpolateTransformSvg",function(){return E}),n.d(e,"interpolateZoom",function(){return R}),n.d(e,"interpolateRgb",function(){return h}),n.d(e,"interpolateRgbBasis",function(){return v}),n.d(e,"interpolateRgbBasisClosed",function(){return y}),n.d(e,"interpolateHsl",function(){return z}),n.d(e,"interpolateHslLong",function(){return V}),n.d(e,"interpolateLab",function(){return G}),n.d(e,"interpolateHcl",function(){return j}),n.d(e,"interpolateHclLong",function(){return H}),n.d(e,"interpolateCubehelix",function(){return Y}),n.d(e,"interpolateCubehelixLong",function(){return X}),n.d(e,"quantize",function(){return U})},,,,,,,,,function(t,e,n){var i=n(372);t.exports={track:!0,defaultNodeSize:40,labelStyle:{fill:"#595959",textAlign:"center",textBaseline:"middle"},groupStyle:{stroke:"#CED4D9",fill:"#F2F4F5",radius:2},groupBackgroundPadding:[40,10,10,10],updateDuration:450,enterDuration:450,leaveDuration:450,updateEasing:"easeQuadOut",enterEasing:"easeQuadOut",leaveEasing:"easeQuadOut",version:i}},function(t,e,n){t.exports={Canvas:n(513),Group:n(406),Shape:n(37),Arc:n(402),Circle:n(401),Dom:n(400),Ellipse:n(399),Fan:n(398),Image:n(397),Line:n(396),Marker:n(374),Path:n(395),Polygon:n(394),Polyline:n(393),Rect:n(392),Text:n(391),PathSegment:n(363),PathUtil:n(373),Event:n(407),version:"3.3.5"}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=r,e.clone=function(t){var e=new i.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=a,e.fromValues=o,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},e.subtract=s,e.multiply=l,e.divide=u,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},e.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t},e.distance=c,e.squaredDistance=h,e.squaredLength=d,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=f,e.dot=p,e.cross=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=n[0],s=n[1],l=n[2];return t[0]=r*l-a*s,t[1]=a*o-i*l,t[2]=i*s-r*o,t},e.lerp=function(t,e,n,i){var r=e[0],a=e[1],o=e[2];return t[0]=r+i*(n[0]-r),t[1]=a+i*(n[1]-a),t[2]=o+i*(n[2]-o),t},e.hermite=function(t,e,n,i,r,a){var o=a*a,s=o*(2*a-3)+1,l=o*(a-2)+a,u=o*(a-1),c=o*(3-2*a);return t[0]=e[0]*s+n[0]*l+i[0]*u+r[0]*c,t[1]=e[1]*s+n[1]*l+i[1]*u+r[1]*c,t[2]=e[2]*s+n[2]*l+i[2]*u+r[2]*c,t},e.bezier=function(t,e,n,i,r,a){var o=1-a,s=o*o,l=a*a,u=s*o,c=3*a*s,h=3*l*o,d=l*a;return t[0]=e[0]*u+n[0]*c+i[0]*h+r[0]*d,t[1]=e[1]*u+n[1]*c+i[1]*h+r[1]*d,t[2]=e[2]*u+n[2]*c+i[2]*h+r[2]*d,t},e.random=function(t,e){e=e||1;var n=2*i.RANDOM()*Math.PI,r=2*i.RANDOM()-1,a=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t[2]=r*e,t},e.transformMat4=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=n[3]*i+n[7]*r+n[11]*a+n[15];return o=o||1,t[0]=(n[0]*i+n[4]*r+n[8]*a+n[12])/o,t[1]=(n[1]*i+n[5]*r+n[9]*a+n[13])/o,t[2]=(n[2]*i+n[6]*r+n[10]*a+n[14])/o,t},e.transformMat3=function(t,e,n){var i=e[0],r=e[1],a=e[2];return t[0]=i*n[0]+r*n[3]+a*n[6],t[1]=i*n[1]+r*n[4]+a*n[7],t[2]=i*n[2]+r*n[5]+a*n[8],t},e.transformQuat=function(t,e,n){var i=n[0],r=n[1],a=n[2],o=n[3],s=e[0],l=e[1],u=e[2],c=r*u-a*l,h=a*s-i*u,d=i*l-r*s,f=r*d-a*h,p=a*c-i*d,g=i*h-r*c,m=2*o;return c*=m,h*=m,d*=m,f*=2,p*=2,g*=2,t[0]=s+c+f,t[1]=l+h+p,t[2]=u+d+g,t},e.rotateX=function(t,e,n,i){var r=[],a=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],a[0]=r[0],a[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),a[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},e.rotateY=function(t,e,n,i){var r=[],a=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],a[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),a[1]=r[1],a[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},e.rotateZ=function(t,e,n,i){var r=[],a=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],a[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),a[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),a[2]=r[2],t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},e.angle=function(t,e){var n=o(t[0],t[1],t[2]),i=o(e[0],e[1],e[2]);f(n,n),f(i,i);var r=p(n,i);return r>1?0:r<-1?Math.PI:Math.acos(r)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],o=e[0],s=e[1],l=e[2];return Math.abs(n-o)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(a-l)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))};var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(38));function r(){var t=new i.ARRAY_TYPE(3);return i.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function a(t){var e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)}function o(t,e,n){var r=new i.ARRAY_TYPE(3);return r[0]=t,r[1]=e,r[2]=n,r}function s(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function l(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function u(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function c(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(n*n+i*i+r*r)}function h(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return n*n+i*i+r*r}function d(t){var e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i}function f(t,e){var n=e[0],i=e[1],r=e[2],a=n*n+i*i+r*r;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t}function p(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}e.sub=s,e.mul=l,e.div=u,e.dist=c,e.sqrDist=h,e.len=a,e.sqrLen=d,e.forEach=function(){var t=r();return function(e,n,i,r,a,o){var s=void 0,l=void 0;for(n||(n=3),i||(i=0),l=r?Math.min(r*n+i,e.length):e.length,s=i;s<l;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.sqrDist=e.dist=e.div=e.mul=e.sub=e.len=void 0,e.create=r,e.clone=function(t){var e=new i.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){var n=new i.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,n){return t[0]=e,t[1]=n,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},e.subtract=a,e.multiply=o,e.divide=s,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},e.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t},e.distance=l,e.squaredDistance=u,e.length=c,e.squaredLength=h,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},e.normalize=function(t,e){var n=e[0],i=e[1],r=n*n+i*i;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r),t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.cross=function(t,e,n){var i=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=i,t},e.lerp=function(t,e,n,i){var r=e[0],a=e[1];return t[0]=r+i*(n[0]-r),t[1]=a+i*(n[1]-a),t},e.random=function(t,e){e=e||1;var n=2*i.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},e.transformMat2=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t},e.transformMat2d=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r+n[4],t[1]=n[1]*i+n[3]*r+n[5],t},e.transformMat3=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[3]*r+n[6],t[1]=n[1]*i+n[4]*r+n[7],t},e.transformMat4=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t},e.rotate=function(t,e,n,i){var r=e[0]-n[0],a=e[1]-n[1],o=Math.sin(i),s=Math.cos(i);return t[0]=r*s-a*o+n[0],t[1]=r*o+a*s+n[1],t},e.angle=function(t,e){var n=t[0],i=t[1],r=e[0],a=e[1],o=n*n+i*i;o>0&&(o=1/Math.sqrt(o));var s=r*r+a*a;s>0&&(s=1/Math.sqrt(s));var l=(n*r+i*a)*o*s;return l>1?0:l<-1?Math.PI:Math.acos(l)},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.equals=function(t,e){var n=t[0],r=t[1],a=e[0],o=e[1];return Math.abs(n-a)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))};var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(38));function r(){var t=new i.ARRAY_TYPE(2);return i.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function o(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function s(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function l(t,e){var n=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(n*n+i*i)}function u(t,e){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i}function c(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function h(t){var e=t[0],n=t[1];return e*e+n*n}e.len=c,e.sub=a,e.mul=o,e.div=s,e.dist=l,e.sqrDist=u,e.sqrLen=h,e.forEach=function(){var t=r();return function(e,n,i,r,a,o){var s=void 0,l=void 0;for(n||(n=2),i||(i=0),l=r?Math.min(r*n+i,e.length):e.length,s=i;s<l;s+=n)t[0]=e[s],t[1]=e[s+1],a(t,t,o),e[s]=t[0],e[s+1]=t[1];return e}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new i.ARRAY_TYPE(9);return i.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},e.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},e.clone=function(t){var e=new i.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromValues=function(t,e,n,r,a,o,s,l,u){var c=new i.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=a,c[5]=o,c[6]=s,c[7]=l,c[8]=u,c},e.set=function(t,e,n,i,r,a,o,s,l,u){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=a,t[5]=o,t[6]=s,t[7]=l,t[8]=u,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},e.invert=function(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=c*o-s*u,d=-c*a+s*l,f=u*a-o*l,p=n*h+i*d+r*f;return p?(p=1/p,t[0]=h*p,t[1]=(-c*i+r*u)*p,t[2]=(s*i-r*o)*p,t[3]=d*p,t[4]=(c*n-r*l)*p,t[5]=(-s*n+r*a)*p,t[6]=f*p,t[7]=(-u*n+i*l)*p,t[8]=(o*n-i*a)*p,t):null},e.adjoint=function(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8];return t[0]=o*c-s*u,t[1]=r*u-i*c,t[2]=i*s-r*o,t[3]=s*l-a*c,t[4]=n*c-r*l,t[5]=r*a-n*s,t[6]=a*u-o*l,t[7]=i*l-n*u,t[8]=n*o-i*a,t},e.determinant=function(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8];return e*(u*a-o*l)+n*(-u*r+o*s)+i*(l*r-a*s)},e.multiply=r,e.translate=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=n[0],f=n[1];return t[0]=i,t[1]=r,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t[6]=d*i+f*o+u,t[7]=d*r+f*s+c,t[8]=d*a+f*l+h,t},e.rotate=function(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=Math.sin(n),f=Math.cos(n);return t[0]=f*i+d*o,t[1]=f*r+d*s,t[2]=f*a+d*l,t[3]=f*o-d*i,t[4]=f*s-d*r,t[5]=f*l-d*a,t[6]=u,t[7]=c,t[8]=h,t},e.scale=function(t,e,n){var i=n[0],r=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},e.fromRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},e.fromQuat=function(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=n+n,s=i+i,l=r+r,u=n*o,c=i*o,h=i*s,d=r*o,f=r*s,p=r*l,g=a*o,m=a*s,v=a*l;return t[0]=1-h-p,t[3]=c-v,t[6]=d+m,t[1]=c+v,t[4]=1-u-p,t[7]=f-g,t[2]=d-m,t[5]=f+g,t[8]=1-u-h,t},e.normalFromMat4=function(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],g=e[13],m=e[14],v=e[15],y=n*s-i*o,x=n*l-r*o,_=n*u-a*o,b=i*l-r*s,w=i*u-a*s,S=r*u-a*l,M=c*g-h*p,A=c*m-d*p,C=c*v-f*p,I=h*m-d*g,P=h*v-f*g,T=d*v-f*m,O=y*T-x*P+_*I+b*C-w*A+S*M;return O?(O=1/O,t[0]=(s*T-l*P+u*I)*O,t[1]=(l*C-o*T-u*A)*O,t[2]=(o*P-s*C+u*M)*O,t[3]=(r*P-i*T-a*I)*O,t[4]=(n*T-r*C+a*A)*O,t[5]=(i*C-n*P-a*M)*O,t[6]=(g*S-m*w+v*b)*O,t[7]=(m*_-p*S-v*x)*O,t[8]=(p*w-g*_+v*y)*O,t):null},e.projection=function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},e.subtract=a,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},e.multiplyScalarAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t[6]=e[6]+n[6]*i,t[7]=e[7]+n[7]*i,t[8]=e[8]+n[8]*i,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=e[0],f=e[1],p=e[2],g=e[3],m=e[4],v=e[5],y=e[6],x=e[7],_=e[8];return Math.abs(n-d)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-f)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(a-p)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-g)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(s-m)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(l-v)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(u-y)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-x)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(h-_)<=i.EPSILON*Math.max(1,Math.abs(h),Math.abs(_))};var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(38));function r(t,e,n){var i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=n[0],f=n[1],p=n[2],g=n[3],m=n[4],v=n[5],y=n[6],x=n[7],_=n[8];return t[0]=d*i+f*o+p*u,t[1]=d*r+f*s+p*c,t[2]=d*a+f*l+p*h,t[3]=g*i+m*o+v*u,t[4]=g*r+m*s+v*c,t[5]=g*a+m*l+v*h,t[6]=y*i+x*o+_*u,t[7]=y*r+x*s+_*c,t[8]=y*a+x*l+_*h,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}e.mul=r,e.sub=a},function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=5,a=n(593);Math.sign=function(t){return 0==(t=+t)||isNaN(t)?t:t>0?1:-1};var o=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}({},a,{throttle:n(523),debounce:n(411),omit:function(t,e){var n={};return a.each(t,function(t,i){-1===e.indexOf(i)&&(n[i]=t)}),n},traverseTree:function(t,e,n,i){void 0===i&&(i=!1);var r=n(t);i&&e(t,null,null),r&&o.each(r,function(i,r){e(i,t,r),o.traverseTree(i,e,n)})},toAllPadding:function(t){var e=0,n=0,i=0,r=0;return o.isNumber(t)||o.isString(t)?e=n=i=r=t:o.isArray(t)&&(e=t[0],i=o.isNil(t[1])?t[0]:t[1],r=o.isNil(t[2])?t[0]:t[2],n=o.isNil(t[3])?i:t[3]),[e,i,r,n]},guid:function(){return"xxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},mix:function(){var t,e,n=o.toArray(arguments),i=n[0];if(!0===i)for(i=n[1],e=2;e<n.length;e++)s(i,t=n[e]);else for(e=1;e<n.length;e++)for(var r in t=n[e])t.hasOwnProperty(r)&&"constructor"!==r&&(i[r]=t[r]);return i},mixin:function(t,e){t&&e&&(t._mixins=e,t.ATTRS=t.ATTRS||{},o.each(e,function(e){o.augment(t,e)}),t.ATTRS=o.mix({},t.ATTRS))}});function s(t,e,n){for(var i in n=n||0,e)if(e.hasOwnProperty(i)){var a=e[i];null!==a&&o.isPlainObject(a)?(o.isPlainObject(t[i])||(t[i]={}),n<r?s(t[i],e[i],n+1):t[i]=e[i]):o.isArray(a)?(t[i]=[],t[i]=t[i].concat(a)):void 0!==a&&(t[i]=e[i])}}o.Array={remove:function(t,e){var n=o.indexOf(t,e);-1!==n&&t.splice(n,1)}},t.exports=o},function(t,e,n){var i=n(22),r={},a={draw:function(){}},o={defaultShapeType:null,getShape:function(t,e){return this[t]||this[e]||this[this.defaultShapeType]||a},getExtendShape:function(t,e){var n=this;if(i.isArray(t)){var r={};return t.forEach(function(t){n[t]&&(r=i.mix({},r,n.getShape(t,e)))}),r}return this.getShape(t,e)}};r.registerShapeManager=function(t,e){var n=i.mix({},o,e),a=i.upperFirst(t);return r[a]=n,r["register"+a]=function(t,e,r,a){i.isNil(r)&&i.isNil(a)&&(r=t);var o=n.getExtendShape(r,a),s=i.mix(!0,{},o,e);return s.type=t,n[t]=s,s},n},t.exports=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var i=n(17),r=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,a=/[^\s\,]+/gi;t.exports={parseRadius:function(t){var e=0,n=0,r=0,a=0;return i.isArray(t)?1===t.length?e=n=r=a=t[0]:2===t.length?(e=r=t[0],n=a=t[1]):3===t.length?(e=t[0],n=a=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],a=t[3]):e=n=r=a=t,{r1:e,r2:n,r3:r,r4:a}},parsePath:function(t){return t=t||[],i.isArray(t)?t:i.isString(t)?(t=t.match(r),i.each(t,function(e,n){if((e=e.match(a))[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}i.each(e,function(t,n){isNaN(t)||(e[n]=+t)}),t[n]=e}),t):void 0}}},function(t,e,n){var i=n(136);t.exports=function(t){return i(t)?"":t.toString()}},function(t,e,n){var i=n(60);t.exports=function(t){return i(t,"String")}},function(t,e,n){var i=n(383),r=n(60);t.exports=function(t){if(!i(t)||!r(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}},function(t,e,n){var i=function(t){function e(e){var n;return(n=t.call(this)||this).options=e,n}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e.prototype.execute=function(){var t=this,e=this.options;this.roots.forEach(function(n){t.layout(n,e).eachNode(function(t){t.data.x=t.x+t.data.width/2+t.hgap,t.data.y=t.y+t.data.height/2+t.vgap})})},e}(n(386));t.exports=i},function(t,e,n){"undefined"!=typeof self&&self,t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){var i=n(7);t.exports={assign:i}},function(t,e,n){var i=n(3),r=function(){function t(t,e){void 0===e&&(e={}),this.options=e,this.rootNode=i(t,e)}return t.prototype.execute=function(){throw new Error("please override this method")},t}();t.exports=r},function(t,e,n){var i=n(4),r=["LR","RL","TB","BT","H","V"],a=["LR","RL","H"],o=r[0];t.exports=function(t,e,n){var s=e.direction||o;if(e.isHorizontal=function(t){return a.indexOf(t)>-1}(s),s&&-1===r.indexOf(s))throw new TypeError("Invalid direction: "+s);if(s===r[0])n(t,e);else if(s===r[1])n(t,e),t.right2left();else if(s===r[2])n(t,e);else if(s===r[3])n(t,e),t.bottom2top();else if(s===r[4]||s===r[5]){var l=i(t,e),u=l.left,c=l.right;n(u,e),n(c,e),e.isHorizontal?u.right2left():u.bottom2top(),c.translate(u.x-c.x,u.y-c.y),t.x=u.x,t.y=c.y;var h=t.getBoundingBox();e.isHorizontal?h.top<0&&t.translate(0,-h.top):h.left<0&&t.translate(-h.left,0)}return t.translate(-(t.x+t.width/2+t.hgap),-(t.y+t.height/2+t.vgap)),t}},function(t,e,n){var i=n(0),r={getId:function(t){return t.id||t.name},getHGap:function(t){return t.hgap||18},getVGap:function(t){return t.vgap||18},getChildren:function(t){return t.children},getHeight:function(t){return t.height||36},getWidth:function(t){var e=t.name||" ";return t.width||18*e.split("").length}};function a(t,e){var n=this;if(n.vgap=n.hgap=0,t instanceof a)return t;n.data=t;var i=e.getHGap(t),r=e.getVGap(t);return n.width=e.getWidth(t),n.height=e.getHeight(t),n.id=e.getId(t),n.x=n.y=0,n.depth=0,n.children||(n.children=[]),n.addGap(i,r),n}i.assign(a.prototype,{isRoot:function(){return 0===this.depth},isLeaf:function(){return 0===this.children.length},addGap:function(t,e){this.hgap+=t,this.vgap+=e,this.width+=2*t,this.height+=2*e},eachNode:function(t){for(var e,n=[this];e=n.pop();)t(e),n=n.concat(e.children)},DFTraverse:function(t){this.eachNode(t)},BFTraverse:function(t){for(var e,n=[this];e=n.shift();)t(e),n=n.concat(e.children)},getBoundingBox:function(){var t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.width=Math.max(t.width,e.x+e.width),t.height=Math.max(t.height,e.y+e.height)}),t},translate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.eachNode(function(n){n.x+=t,n.y+=e})},right2left:function(){var t=this.getBoundingBox();this.eachNode(function(e){e.x=e.x-2*(e.x-t.left)-e.width}),this.translate(t.width,0)},bottom2top:function(){var t=this.getBoundingBox();this.eachNode(function(e){e.y=e.y-2*(e.y-t.top)-e.height}),this.translate(0,t.height)}}),t.exports=function(t,e,n){void 0===e&&(e={});var o,s=new a(t,e=i.assign({},r,e)),l=[s];if(!n&&!t.collapsed)for(;o=l.pop();)if(!o.data.collapsed){var u=e.getChildren(o.data),c=u?u.length:0;if(o.children=new Array(c),u&&c)for(var h=0;h<c;h++){var d=new a(u[h],e);o.children[h]=d,l.push(d),d.parent=o,d.depth=o.depth+1}}return s}},function(t,e,n){var i=n(3);t.exports=function(t,e){for(var n=i(t.data,e,!0),r=i(t.data,e,!0),a=t.children.length,o=Math.round(a/2),s=e.getSide||function(t,e){return e<o?"right":"left"},l=0;l<a;l++){var u=t.children[l];"right"===s(u,l)?r.children.push(u):n.children.push(u)}return n.eachNode(function(t){t.isRoot()||(t.side="left")}),r.eachNode(function(t){t.isRoot()||(t.side="right")}),{left:n,right:r}}},function(t,e,n){var i={compactBox:n(6),dendrogram:n(9),indented:n(11),mindmap:n(13)};t.exports=i},function(t,e,n){var i=n(1),r=n(8),a=n(2),o=n(0),s=function(t){function e(){return t.apply(this,arguments)||this}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e.prototype.execute=function(){return a(this.rootNode,this.options,r)},e}(i),l={};t.exports=function(t,e){return e=o.assign({},l,e),new s(t,e).execute()}},function(t,e){function n(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}t.exports=function(t,e,i,r){return e&&n(t,e),i&&n(t,i),r&&n(t,r),t}},function(t,e){function n(t,e,n,i){void 0===i&&(i=[]);var r=this;r.w=t||0,r.h=e||0,r.y=n||0,r.x=0,r.c=i||[],r.cs=i.length,r.prelim=0,r.mod=0,r.shift=0,r.change=0,r.tl=null,r.tr=null,r.el=null,r.er=null,r.msel=0,r.mser=0}n.fromNode=function(t,e){if(!t)return null;var i=[];return t.children.forEach(function(t){i.push(n.fromNode(t,e))}),e?new n(t.height,t.width,t.x,i):new n(t.width,t.height,t.y,i)},t.exports=function(t,e){void 0===e&&(e={});var i=e.isHorizontal;function r(t){0===t.cs?(t.el=t,t.er=t,t.msel=t.mser=0):(t.el=t.c[0].el,t.msel=t.c[0].msel,t.er=t.c[t.cs-1].er,t.mser=t.c[t.cs-1].mser)}function a(t,e,n){for(var i=t.c[e-1],r=i.mod,a=t.c[e],c=a.mod;null!==i&&null!==a;){u(i)>n.low&&(n=n.nxt);var h=r+i.prelim+i.w-(c+a.prelim);h>0&&(c+=h,o(t,e,n.index,h));var d=u(i),f=u(a);d<=f&&null!==(i=l(i))&&(r+=i.mod),d>=f&&null!==(a=s(a))&&(c+=a.mod)}!i&&a?function(t,e,n,i){var r=t.c[0].el;r.tl=n;var a=i-n.mod-t.c[0].msel;r.mod+=a,r.prelim-=a,t.c[0].el=t.c[e].el,t.c[0].msel=t.c[e].msel}(t,e,a,c):i&&!a&&function(t,e,n,i){var r=t.c[e].er;r.tr=n;var a=i-n.mod-t.c[e].mser;r.mod+=a,r.prelim-=a,t.c[e].er=t.c[e-1].er,t.c[e].mser=t.c[e-1].mser}(t,e,i,r)}function o(t,e,n,i){t.c[e].mod+=i,t.c[e].msel+=i,t.c[e].mser+=i,function(t,e,n,i){if(n!==e-1){var r=e-n;t.c[n+1].shift+=i/r,t.c[e].shift-=i/r,t.c[e].change-=i-i/r}}(t,e,n,i)}function s(t){return 0===t.cs?t.tl:t.c[0]}function l(t){return 0===t.cs?t.tr:t.c[t.cs-1]}function u(t){return t.y+t.h}function c(t,e,n){for(;null!==n&&t>=n.low;)n=n.nxt;return{low:t,index:e,nxt:n}}!function t(e,n,i){void 0===i&&(i=0),n?(e.x=i,i+=e.width):(e.y=i,i+=e.height),e.children.forEach(function(e){t(e,n,i)})}(t,i);var h=n.fromNode(t,i);return function t(e){if(0!==e.cs){t(e.c[0]);for(var n=c(u(e.c[0].el),0,null),i=1;i<e.cs;++i){t(e.c[i]);var o=u(e.c[i].er);a(e,i,n),n=c(o,i,n)}!function(t){t.prelim=(t.c[0].prelim+t.c[0].mod+t.c[t.cs-1].mod+t.c[t.cs-1].prelim+t.c[t.cs-1].w)/2-t.w/2}(e),r(e)}else r(e)}(h),function t(e,n){n+=e.mod,e.x=e.prelim+n,function(t){for(var e=0,n=0,i=0;i<t.cs;i++)e+=t.c[i].shift,n+=e+t.c[i].change,t.c[i].mod+=n}(e);for(var i=0;i<e.cs;i++)t(e.c[i],n)}(h,0),function t(e,n,i){i?n.y=e.x:n.x=e.x,e.c.forEach(function(e,r){t(e,n.children[r],i)})}(h,t,i),function(t,e){!function t(e,n,i){i?e.y+=n:e.x+=n,e.children.forEach(function(e){t(e,n,i)})}(t,-function t(e,n){var i=n?e.y:e.x;return e.children.forEach(function(e){i=Math.min(t(e,n),i)}),i}(t,e),e)}(t,i),t}},function(t,e,n){var i=n(1),r=n(10),a=n(2),o=n(0),s=function(t){function e(){return t.apply(this,arguments)||this}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e.prototype.execute=function(){return this.rootNode.width=0,a(this.rootNode,this.options,r)},e}(i),l={};t.exports=function(t,e){return e=o.assign({},l,e),new s(t,e).execute()}},function(t,e,n){var i=n(0),r={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};t.exports=function(t,e){void 0===e&&(e={}),e=i.assign({},r,e);var n,a=0,o=function t(e){if(!e)return null;e.width=0,e.depth&&e.depth>a&&(a=e.depth);var n=e.children,i=n.length,r=new function(t,e){void 0===t&&(t=0),void 0===e&&(e=[]);var n=this;n.x=n.y=0,n.leftChild=n.rightChild=null,n.height=0,n.children=e}(e.height,[]);return n.forEach(function(e,n){var a=t(e);r.children.push(a),0===n&&(r.leftChild=a),n===i-1&&(r.rightChild=a)}),r.originNode=e,r.isLeaf=e.isLeaf(),r}(t);return function t(e){if(e.isLeaf||0===e.children.length)e.drawingDepth=a;else{var n=e.children.map(function(e){return t(e)}),i=Math.min.apply(null,n);e.drawingDepth=i-1}return e.drawingDepth}(o),function t(i){i.x=i.drawingDepth*e.rankSep,i.isLeaf?(i.y=0,n&&(i.y=n.y+n.height+e.nodeSep,i.originNode.parent!==n.originNode.parent&&(i.y+=e.subTreeSep)),n=i):(i.children.forEach(function(e){t(e)}),i.y=(i.leftChild.y+i.rightChild.y)/2)}(o),function t(e,n,i){i?(n.x=e.x,n.y=e.y):(n.x=e.y,n.y=e.x),e.children.forEach(function(e,r){t(e,n.children[r],i)})}(o,t,e.isHorizontal),t}},function(t,e,n){var i=n(1),r=n(12),a=n(4),o=n(0),s=["LR","RL","H"],l=s[0],u=function(t){function e(){return t.apply(this,arguments)||this}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e.prototype.execute=function(){var t=this.options,e=this.rootNode;t.isHorizontal=!0;var n=t.indent,i=t.direction||l;if(i&&-1===s.indexOf(i))throw new TypeError("Invalid direction: "+i);if(i===s[0])r(e,n);else if(i===s[1])r(e,n),e.right2left();else if(i===s[2]){var o=a(e,t),u=o.left,c=o.right;r(u,n),u.right2left(),r(c,n);var h=u.getBoundingBox();c.translate(h.width,0),e.x=c.x-e.width/2}return e},e}(i),c={};t.exports=function(t,e){return e=o.assign({},c,e),new u(t,e).execute()}},function(t,e){t.exports=function(t,e){void 0===e&&(e=20);var n=null;t.eachNode(function(t){!function(t,e,n){t.x+=n*t.depth,t.y=e?e.y+e.height:0}(t,n,e),n=t})}},function(t,e,n){var i=n(1),r=n(14),a=n(2),o=n(0),s=function(t){function e(){return t.apply(this,arguments)||this}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e.prototype.execute=function(){return a(this.rootNode,this.options,r)},e}(i),l={};t.exports=function(t,e){return e=o.assign({},l,e),new s(t,e).execute()}},function(t,e,n){var i=n(0),r={getSubTreeSep:function(){return 0}};t.exports=function(t,e){void 0===e&&(e={}),e=i.assign({},r,e),t.parent={x:0,width:0,height:0,y:0},t.BFTraverse(function(t){t.x=t.parent.x+t.parent.width}),t.parent=null,function t(e,n){var i=0;return e.children.length?e.children.forEach(function(e){i+=t(e,n)}):i=e.height,e._subTreeSep=n.getSubTreeSep(e.data),e.totalHeight=Math.max(e.height,i)+2*e._subTreeSep,e.totalHeight}(t,e),t.startY=0,t.y=t.totalHeight/2-t.height/2,t.eachNode(function(t){var e=t.children,n=e.length;if(n){var i=e[0];if(i.startY=t.startY+t._subTreeSep,1===n)i.y=t.y+t.height/2-i.height/2;else{i.y=i.startY+i.totalHeight/2-i.height/2;for(var r=1;r<n;r++){var a=e[r];a.startY=e[r-1].startY+e[r-1].totalHeight,a.y=a.startY+a.totalHeight/2-a.height/2}}}}),function t(e){var n=e.children,i=n.length;if(i){n.forEach(function(e){t(e)});var r=n[0],a=n[i-1],o=a.y-r.y+a.height,s=0;if(n.forEach(function(t){s+=t.totalHeight}),o>e.height)e.y=r.y+o/2-e.height/2;else if(1!==n.length||e.height>s){var l=e.y+(e.height-o)/2-r.y;n.forEach(function(t){t.translate(0,l)})}else e.y=(r.y+r.height/2+a.y+a.height/2)/2-e.height/2}}(t)}}])},function(t,e,n){var i=n(22),r=function(){var t=e.prototype;function e(t){var e=this.getDefaultCfg();i.mix(this,e,t),this._init()}return t.getDefaultCfg=function(){return{}},t._init=function(){},t.destroy=function(){},e}();t.exports=r},function(t,e,n){var i=n(17),r=n(376),a=n(375),o=n(404),s=n(403),l=i.vec3,u=i.mat3,c=["m","l","c","a","q","h","v","t","s","z"];function h(t,e,n){return{x:n.x+t,y:n.y+e}}function d(t,e){return{x:e.x+(e.x-t.x),y:e.y+(e.y-t.y)}}function f(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function p(t,e){return(t[0]*e[0]+t[1]*e[1])/(f(t)*f(e))}function g(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(p(t,e))}var m=function(t,e,n){this.preSegment=e,this.isLast=n,this.init(t,e)};i.augment(m,{init:function(t,e){var n=t[0];e=e||{endPoint:{x:0,y:0}};var r,a,o,s,l=c.indexOf(n)>=0,u=l?n.toUpperCase():n,f=t,m=e.endPoint,v=f[1],y=f[2];switch(u){default:break;case"M":s=l?h(v,y,m):{x:v,y:y},this.command="M",this.params=[m,s],this.subStart=s,this.endPoint=s;break;case"L":s=l?h(v,y,m):{x:v,y:y},this.command="L",this.params=[m,s],this.subStart=e.subStart,this.endPoint=s,this.endTangent=function(){return[s.x-m.x,s.y-m.y]},this.startTangent=function(){return[m.x-s.x,m.y-s.y]};break;case"H":s=l?h(v,0,m):{x:v,y:m.y},this.command="L",this.params=[m,s],this.subStart=e.subStart,this.endPoint=s,this.endTangent=function(){return[s.x-m.x,s.y-m.y]},this.startTangent=function(){return[m.x-s.x,m.y-s.y]};break;case"V":s=l?h(0,v,m):{x:m.x,y:v},this.command="L",this.params=[m,s],this.subStart=e.subStart,this.endPoint=s,this.endTangent=function(){return[s.x-m.x,s.y-m.y]},this.startTangent=function(){return[m.x-s.x,m.y-s.y]};break;case"Q":l?(r=h(v,y,m),a=h(f[3],f[4],m)):(r={x:v,y:y},a={x:f[3],y:f[4]}),this.command="Q",this.params=[m,r,a],this.subStart=e.subStart,this.endPoint=a,this.endTangent=function(){return[a.x-r.x,a.y-r.y]},this.startTangent=function(){return[m.x-r.x,m.y-r.y]};break;case"T":a=l?h(v,y,m):{x:v,y:y},"Q"===e.command?(r=d(e.params[1],m),this.command="Q",this.params=[m,r,a],this.subStart=e.subStart,this.endPoint=a,this.endTangent=function(){return[a.x-r.x,a.y-r.y]},this.startTangent=function(){return[m.x-r.x,m.y-r.y]}):(this.command="TL",this.params=[m,a],this.subStart=e.subStart,this.endPoint=a,this.endTangent=function(){return[a.x-m.x,a.y-m.y]},this.startTangent=function(){return[m.x-a.x,m.y-a.y]});break;case"C":l?(r=h(v,y,m),a=h(f[3],f[4],m),o=h(f[5],f[6],m)):(r={x:v,y:y},a={x:f[3],y:f[4]},o={x:f[5],y:f[6]}),this.command="C",this.params=[m,r,a,o],this.subStart=e.subStart,this.endPoint=o,this.endTangent=function(){return[o.x-a.x,o.y-a.y]},this.startTangent=function(){return[m.x-r.x,m.y-r.y]};break;case"S":l?(a=h(v,y,m),o=h(f[3],f[4],m)):(a={x:v,y:y},o={x:f[3],y:f[4]}),"C"===e.command?(r=d(e.params[2],m),this.command="C",this.params=[m,r,a,o],this.subStart=e.subStart,this.endPoint=o,this.endTangent=function(){return[o.x-a.x,o.y-a.y]},this.startTangent=function(){return[m.x-r.x,m.y-r.y]}):(this.command="SQ",this.params=[m,a,o],this.subStart=e.subStart,this.endPoint=o,this.endTangent=function(){return[o.x-a.x,o.y-a.y]},this.startTangent=function(){return[m.x-a.x,m.y-a.y]});break;case"A":var x=v,_=y,b=f[3],w=f[4],S=f[5];s=l?h(f[6],f[7],m):{x:f[6],y:f[7]},this.command="A";var M=function(t,e,n,r,a,o,s){var l=i.mod(i.toRadian(s),2*Math.PI),u=t.x,c=t.y,h=e.x,d=e.y,f=Math.cos(l)*(u-h)/2+Math.sin(l)*(c-d)/2,m=-1*Math.sin(l)*(u-h)/2+Math.cos(l)*(c-d)/2,v=f*f/(a*a)+m*m/(o*o);v>1&&(a*=Math.sqrt(v),o*=Math.sqrt(v));var y=a*a*(m*m)+o*o*(f*f),x=Math.sqrt((a*a*(o*o)-y)/y);n===r&&(x*=-1),isNaN(x)&&(x=0);var _=x*a*m/o,b=x*-o*f/a,w=(u+h)/2+Math.cos(l)*_-Math.sin(l)*b,S=(c+d)/2+Math.sin(l)*_+Math.cos(l)*b,M=g([1,0],[(f-_)/a,(m-b)/o]),A=[(f-_)/a,(m-b)/o],C=[(-1*f-_)/a,(-1*m-b)/o],I=g(A,C);return p(A,C)<=-1&&(I=Math.PI),p(A,C)>=1&&(I=0),0===r&&I>0&&(I-=2*Math.PI),1===r&&I<0&&(I+=2*Math.PI),[t,w,S,a,o,M,I,l,r]}(m,s,w,S,x,_,b);this.params=M;var A=e.subStart;this.subStart=A,this.endPoint=s;var C=M[5]%(2*Math.PI);i.isNumberEqual(C,2*Math.PI)&&(C=0);var I=M[6]%(2*Math.PI);i.isNumberEqual(I,2*Math.PI)&&(I=0);var P=.001;this.startTangent=function(){0===S&&(P*=-1);var t=M[3]*Math.cos(C-P)+M[1],e=M[4]*Math.sin(C-P)+M[2];return[t-A.x,e-A.y]},this.endTangent=function(){var t=M[6];t-2*Math.PI<1e-4&&(t=0);var e=M[3]*Math.cos(C+t+P)+M[1],n=M[4]*Math.sin(C+t-P)+M[2];return[m.x-e,m.y-n]};break;case"Z":this.command="Z",this.params=[m,e.subStart],this.subStart=e.subStart,this.endPoint=e.subStart}},isInside:function(t,e,n){var i=this.command,a=this.params,o=this.box;if(o&&!r.box(o.minX,o.maxX,o.minY,o.maxY,t,e))return!1;switch(i){default:break;case"M":return!1;case"TL":case"L":case"Z":return r.line(a[0].x,a[0].y,a[1].x,a[1].y,n,t,e);case"SQ":case"Q":return r.quadraticline(a[0].x,a[0].y,a[1].x,a[1].y,a[2].x,a[2].y,n,t,e);case"C":return r.cubicline(a[0].x,a[0].y,a[1].x,a[1].y,a[2].x,a[2].y,a[3].x,a[3].y,n,t,e);case"A":var s=a,c=s[1],h=s[2],d=s[3],f=s[4],p=s[5],g=s[6],m=s[7],v=s[8],y=d>f?d:f,x=d>f?1:d/f,_=d>f?f/d:1;s=[t,e,1];var b=[1,0,0,0,1,0,0,0,1];return u.translate(b,b,[-c,-h]),u.rotate(b,b,-m),u.scale(b,b,[1/x,1/_]),l.transformMat3(s,s,b),r.arcline(0,0,y,p,p+g,1-v,n,s[0],s[1])}return!1},draw:function(t){var e,n,i,r=this.command,a=this.params;switch(r){default:break;case"M":t.moveTo(a[1].x,a[1].y);break;case"TL":case"L":t.lineTo(a[1].x,a[1].y);break;case"SQ":case"Q":e=a[1],n=a[2],t.quadraticCurveTo(e.x,e.y,n.x,n.y);break;case"C":e=a[1],n=a[2],i=a[3],t.bezierCurveTo(e.x,e.y,n.x,n.y,i.x,i.y);break;case"A":var o=a,s=o[1],l=o[2],u=o[3],c=o[4],h=o[5],d=o[6],f=o[7],p=o[8],g=u>c?u:c,m=u>c?1:u/c,v=u>c?c/u:1;t.translate(s,l),t.rotate(f),t.scale(m,v),t.arc(0,0,g,h,h+d,1-p),t.scale(1/m,1/v),t.rotate(-f),t.translate(-s,-l);break;case"Z":t.closePath()}},getBBox:function(t){var e,n,i,r,l=t/2,u=this.params;switch(this.command){default:case"M":case"Z":break;case"TL":case"L":this.box={minX:Math.min(u[0].x,u[1].x)-l,maxX:Math.max(u[0].x,u[1].x)+l,minY:Math.min(u[0].y,u[1].y)-l,maxY:Math.max(u[0].y,u[1].y)+l};break;case"SQ":case"Q":for(i=0,r=(n=o.extrema(u[0].x,u[1].x,u[2].x)).length;i<r;i++)n[i]=o.at(u[0].x,u[1].x,u[2].x,n[i]);for(n.push(u[0].x,u[2].x),i=0,r=(e=o.extrema(u[0].y,u[1].y,u[2].y)).length;i<r;i++)e[i]=o.at(u[0].y,u[1].y,u[2].y,e);e.push(u[0].y,u[2].y),this.box={minX:Math.min.apply(Math,n)-l,maxX:Math.max.apply(Math,n)+l,minY:Math.min.apply(Math,e)-l,maxY:Math.max.apply(Math,e)+l};break;case"C":for(i=0,r=(n=a.extrema(u[0].x,u[1].x,u[2].x,u[3].x)).length;i<r;i++)n[i]=a.at(u[0].x,u[1].x,u[2].x,u[3].x,n[i]);for(i=0,r=(e=a.extrema(u[0].y,u[1].y,u[2].y,u[3].y)).length;i<r;i++)e[i]=a.at(u[0].y,u[1].y,u[2].y,u[3].y,e[i]);n.push(u[0].x,u[3].x),e.push(u[0].y,u[3].y),this.box={minX:Math.min.apply(Math,n)-l,maxX:Math.max.apply(Math,n)+l,minY:Math.min.apply(Math,e)-l,maxY:Math.max.apply(Math,e)+l};break;case"A":var c=u,h=c[1],d=c[2],f=c[3],p=c[4],g=c[5],m=c[6],v=c[7],y=c[8],x=g,_=g+m,b=s.xExtrema(v,f,p),w=1/0,S=-1/0,M=[x,_];for(i=2*-Math.PI;i<=2*Math.PI;i+=Math.PI){var A=b+i;1===y?x<A&&A<_&&M.push(A):_<A&&A<x&&M.push(A)}for(i=0,r=M.length;i<r;i++){var C=s.xAt(v,f,p,h,M[i]);C<w&&(w=C),C>S&&(S=C)}var I=s.yExtrema(v,f,p),P=1/0,T=-1/0,O=[x,_];for(i=2*-Math.PI;i<=2*Math.PI;i+=Math.PI){var k=I+i;1===y?x<k&&k<_&&O.push(k):_<k&&k<x&&O.push(k)}for(i=0,r=O.length;i<r;i++){var D=s.yAt(v,f,p,d,O[i]);D<P&&(P=D),D>T&&(T=D)}this.box={minX:w-l,maxX:S+l,minY:P-l,maxY:T+l}}}}),t.exports=m},function(t,e,n){var i=n(356),r=n(363),a=Math.PI,o=Math.sin,s=Math.cos,l=Math.atan2,u=10,c=a/3;function h(t,e,n,i,r,h,d){var f,p,g,m,v,y,x;if(!e.fill){var _=e.arrowLength||u,b=e.arrowAngle?e.arrowAngle*a/180:c;x=l(i-h,n-r),v=Math.abs(e.lineWidth*s(x))/2,y=Math.abs(e.lineWidth*o(x))/2,d&&(v=-v,y=-y),f=r+_*s(x+b/2),p=h+_*o(x+b/2),g=r+_*s(x-b/2),m=h+_*o(x-b/2),t.beginPath(),t.moveTo(f-v,p-y),t.lineTo(r-v,h-y),t.lineTo(g-v,m-y),t.moveTo(r-v,h-y),t.lineTo(r+v,h+y),t.moveTo(r,h),t.stroke()}}function d(t,e,n,a,o,s,l){var u=l?e.startArrow:e.endArrow,c=u.d,h=0,d=o-n,f=s-a,p=Math.atan(d/f);0===f&&d<0?h=Math.PI:d>0&&f>0?h=Math.PI/2-p:d<0&&f<0?h=-Math.PI/2-p:d>=0&&f<0?h=-p-Math.PI/2:d<=0&&f>0&&(h=Math.PI/2-p);var g=function(t){var e,n=[],a=i.parsePath(t.path);if(!Array.isArray(a)||0===a.length||"M"!==a[0][0]&&"m"!==a[0][0])return!1;for(var o=a.length,s=0;s<a.length;s++){var l=a[s];e=new r(l,e,s===o-1),n.push(e)}return n}(u);if(g){c&&(l?(o+=Math.sin(Math.abs(p))*c,s=s+Math.cos(Math.abs(p))*c-.5*t.lineWidth):(o-=Math.sin(Math.abs(p))*c,s=s-Math.cos(Math.abs(p))*c+.5*t.lineWidth)),t.save(),t.beginPath(),t.translate(o,s),t.rotate(h);for(var m=0;m<g.length;m++)g[m].draw(t);t.setTransform(1,0,0,1,0,0),t.fillStyle=t.strokeStyle,t.fill(),t.restore()}}t.exports={addStartArrow:function(t,e,n,i,r,a){"object"==typeof e.startArrow?d(t,e,n,i,r,a,!0):e.startArrow&&h(t,e,n,i,r,a,!0)},addEndArrow:function(t,e,n,i,r,a){"object"==typeof e.endArrow?d(t,e,n,i,r,a,!1):e.endArrow&&h(t,e,n,i,r,a,!1)}}},function(t,e,n){var i=n(17);function r(t,e,n,i){return{x:Math.cos(i)*n+t,y:Math.sin(i)*n+e}}function a(t,e,n,i){var r,a;return i?t<e?(r=e-t,a=2*Math.PI-n+t):t>n&&(r=2*Math.PI-t+e,a=t-n):(r=t-e,a=n-t),r>a?n:e}function o(t,e,n,r){var o=0;return n-e>=2*Math.PI&&(o=2*Math.PI),e=i.mod(e,2*Math.PI),n=i.mod(n,2*Math.PI)+o,t=i.mod(t,2*Math.PI),r?e>=n?t>n&&t<e?t:a(t,n,e,!0):t<e||t>n?t:a(t,e,n):e<=n?e<t&&t<n?t:a(t,e,n,!0):t>e||t<n?t:a(t,n,e)}function s(t,e,n,r,a,s,l,u,c){var h=[l,u],d=[t,e],f=i.vec2.subtract([],h,d),p=i.vec2.angleTo([1,0],f);p=o(p,r,a,s);var g=[n*Math.cos(p)+t,n*Math.sin(p)+e];return c&&(c.x=g[0],c.y=g[1]),i.vec2.distance(g,h)}t.exports={nearAngle:o,projectPoint:function(t,e,n,i,r,a,o,l){var u={};return s(t,e,n,i,r,a,o,l,u),u},pointDistance:s,box:function(t,e,n,a,s,l){var u=Math.PI/2,c=Math.PI,h=3*Math.PI/2,d=[],f=o(0,a,s,l);0===f&&d.push(r(t,e,n,0)),(f=o(u,a,s,l))===u&&d.push(r(t,e,n,u)),(f=o(c,a,s,l))===c&&d.push(r(t,e,n,c)),(f=o(h,a,s,l))===h&&d.push(r(t,e,n,h)),d.push(r(t,e,n,a)),d.push(r(t,e,n,s));var p=1/0,g=-1/0,m=1/0,v=-1/0;return i.each(d,function(t){p>t.x&&(p=t.x),g<t.x&&(g=t.x),m>t.y&&(m=t.y),v<t.y&&(v=t.y)}),{minX:p,minY:m,maxX:g,maxY:v}}}},function(t,e,n){var i=n(17).vec2;t.exports={at:function(t,e,n){return(e-t)*n+t},pointDistance:function(t,e,n,r,a,o){var s=[n-t,r-e];if(i.exactEquals(s,[0,0]))return NaN;var l=[-s[1],s[0]];i.normalize(l,l);var u=[a-t,o-e];return Math.abs(i.dot(u,l))},box:function(t,e,n,i,r){var a=r/2,o=Math.min(t,n),s=Math.max(t,n);return{minX:o-a,minY:Math.min(e,i)-a,maxX:s+a,maxY:Math.max(e,i)+a}},len:function(t,e,n,i){return Math.sqrt((n-t)*(n-t)+(i-e)*(i-e))}}},function(t,e,n){var i=n(62);t.exports=function(t){return i(t)?Array.prototype.slice.call(t):[]}},function(t,e,n){var i=n(62),r=Array.prototype.indexOf;t.exports=function(t,e){return!!i(t)&&r.call(t,e)>-1}},function(t,e){function n(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}t.exports=function(t,e,i,r){return e&&n(t,e),i&&n(t,i),r&&n(t,r),t}},,function(t,e,n){var i=n(22),r=function(){function t(t){i.mix(this,{id:"",type:null,model:{},group:null,animate:!1,modelCache:{},isItem:!0,visible:!0},t),this._init()}var e=t.prototype;return e._init=function(){this._initGroup(),this.draw()},e._mapping=function(){var t=this.mapper,e=this.model;t.mapping(e)},e._initGroup=function(){var t=this.group,e=this.model,n=this.type;t.isItemContainer=!0,t.id=e.id,t.itemType=n,t.model=e,t.item=this},e._calculateBBox=function(){var t=this.keyShape,e=this.group,n=i.getBBox(t,e);return n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},e.getLabel=function(){return this.group.findByClass("label")[0]},e.getGraph=function(){return this.graph},e._setShapeObj=function(){var t=this.graph,e=this.type,n=this.getModel();this.shapeObj=t.getShapeObj(e,n)},e._afterDraw=function(){var t=this.graph;this._setGId(),this._cacheModel(),t.emit("afteritemdraw",{item:this})},e._cacheModel=function(){this.modelCache=i.mix({},this.model)},e._setGId=function(){var t=this.group,e=this.id,n=this.type;t.gid=e,t.deepEach(function(t,i,r){var a=i.gid;if(t.id=e,t.eventPreFix=n,t.gid=a+"-"+r,t.isShape){var o=t.get("type");t.gid+="-"+o}})},e._beforeDraw=function(){var t=this.graph,e=this.group;t.emit("beforeitemdraw",{item:this}),e.resetMatrix(),this.updateCollapsedParent()},e._shouldDraw=function(){return!0},e._getDiff=function(){var t=[],e=this.model,n=this.modelCache;return i.each(e,function(e,r){i.isEqual(e,n[r])||t.push(r)}),0!==t.length&&t},e._drawInner=function(){var t=this.animate;this.group.clear(!t),this._mapping(),this._setShapeObj();var e=this.shapeObj,n=e.draw(this);n&&(n.isKeyShape=!0,this.keyShape=n),e.afterDraw&&e.afterDraw(this)},e.deepEach=function(t,e){i.traverseTree(this,t,e||function(t){return t.getChildren()})},e.getShapeObj=function(){return this.shapeObj},e.updateCollapsedParent=function(){var t=this.dataMap;this.collapsedParent=function t(e,n){var i=n[e.parent];if(!i)return!1;if(i){var r=t(i,n);if(r)return r}return i.collapsed?i:void 0}(this.model,t)},e.isVisible=function(){return this.visible},e.hide=function(){var t=this.group,e=this.graph;e.emit("beforeitemhide",{item:this}),t.hide(),this.visible=!1,e.emit("afteritemhide",{item:this})},e.show=function(){var t=this.group,e=this.graph;e.emit("beforeitemshow",{item:this}),t.show(),this.visible=!0,e.emit("afteritemshow",{item:this})},e.draw=function(){this._beforeDraw(),this._shouldDraw()&&this._drawInner(),this._afterDraw()},e.forceUpdate=function(){this._beforeDraw(),this._drawInner(),this._afterDraw()},e.getCenter=function(){var t=this.getBBox();return{x:t.centerX,y:t.centerY}},e.getBBox=function(){return this.bbox||this._calculateBBox()},e.layoutUpdate=function(){this.isVisible()&&this.draw()},e.update=function(){this.draw()},e.getModel=function(){return this.model},e.getKeyShape=function(){return this.keyShape},e.getGraphicGroup=function(){return this.group},e.getHierarchy=function(){return this.graph.getHierarchy(this)},e.getParent=function(){var t=this.model;return this.itemMap[t.parent]},e.getAllParents=function(){for(var t=this.model,e=this.itemMap,n=[],i=t.parent;i&&e[i];){var r=e[i],a=r.getModel();n.push(r),i=a.parent}return n},e.getAllChildren=function(){var t=[];return this.deepEach(function(e){t.push(e)}),t},e.getChildren=function(){var t=this.id;return this.graph.getItems().filter(function(e){return e.model.parent===t})},e.toFront=function(){this.group.toFront()},e.toBack=function(){this.group.toBack()},e.destroy=function(){if(!this.destroyed){var t=this.animate,e=this.graph;e.emit("beforeitemdestroy",{item:this}),this.group.remove(!t),this.destroyed=!0,e.emit("afteritemdestroy",{item:this})}},t}();t.exports=r},function(t,e){t.exports="2.2.0"},function(t,e,n){var i=n(408),r="\t\n\v\f\r   ᠎             　\u2028\u2029",a=new RegExp("([a-z])["+r+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+r+"]*,?["+r+"]*)+)","ig"),o=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+r+"]*,?["+r+"]*","ig"),s=function(t){if(!t)return null;if(typeof t==typeof[])return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(a,function(t,i,r){var a=[],s=i.toLowerCase();if(r.replace(o,function(t,e){e&&a.push(+e)}),"m"===s&&a.length>2&&(n.push([i].concat(a.splice(0,2))),s="l",i="m"===i?"l":"L"),"o"===s&&1===a.length&&n.push([i,a[0]]),"r"===s)n.push([i].concat(a));else for(;a.length>=e[s]&&(n.push([i].concat(a.splice(0,e[s]))),e[s]););}),n},l=function(t,e){for(var n=[],i=0,r=t.length;r-2*!e>i;i+=2){var a=[{x:+t[i-2],y:+t[i-1]},{x:+t[i],y:+t[i+1]},{x:+t[i+2],y:+t[i+3]},{x:+t[i+4],y:+t[i+5]}];e?i?r-4===i?a[3]={x:+t[0],y:+t[1]}:r-2===i&&(a[2]={x:+t[0],y:+t[1]},a[3]={x:+t[2],y:+t[3]}):a[0]={x:+t[r-2],y:+t[r-1]}:r-4===i?a[3]=a[2]:i||(a[0]={x:+t[i],y:+t[i+1]}),n.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return n},u=function(t,e,n,i,r){var a=[];if(null===r&&null===i&&(i=n),t=+t,e=+e,n=+n,i=+i,null!==r){var o=Math.PI/180,s=t+n*Math.cos(-i*o),l=t+n*Math.cos(-r*o);a=[["M",s,e+n*Math.sin(-i*o)],["A",n,n,0,+(r-i>180),0,l,e+n*Math.sin(-r*o)]]}else a=[["M",t,e],["m",0,-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]];return a},c=function(t){if(!(t=s(t))||!t.length)return[["M",0,0]];var e,n,i=[],r=0,a=0,o=0,c=0,h=0;"M"===t[0][0]&&(o=r=+t[0][1],c=a=+t[0][2],h++,i[0]=["M",r,a]);for(var d,f,p=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),g=h,m=t.length;g<m;g++){if(i.push(d=[]),(e=(f=t[g])[0])!==e.toUpperCase())switch(d[0]=e.toUpperCase(),d[0]){case"A":d[1]=f[1],d[2]=f[2],d[3]=f[3],d[4]=f[4],d[5]=f[5],d[6]=+f[6]+r,d[7]=+f[7]+a;break;case"V":d[1]=+f[1]+a;break;case"H":d[1]=+f[1]+r;break;case"R":for(var v=2,y=(n=[r,a].concat(f.slice(1))).length;v<y;v++)n[v]=+n[v]+r,n[++v]=+n[v]+a;i.pop(),i=i.concat(l(n,p));break;case"O":i.pop(),(n=u(r,a,f[1],f[2])).push(n[0]),i=i.concat(n);break;case"U":i.pop(),i=i.concat(u(r,a,f[1],f[2],f[3])),d=["U"].concat(i[i.length-1].slice(-2));break;case"M":o=+f[1]+r,c=+f[2]+a;break;default:for(var x=1,_=f.length;x<_;x++)d[x]=+f[x]+(x%2?r:a)}else if("R"===e)n=[r,a].concat(f.slice(1)),i.pop(),i=i.concat(l(n,p)),d=["R"].concat(f.slice(-2));else if("O"===e)i.pop(),(n=u(r,a,f[1],f[2])).push(n[0]),i=i.concat(n);else if("U"===e)i.pop(),i=i.concat(u(r,a,f[1],f[2],f[3])),d=["U"].concat(i[i.length-1].slice(-2));else for(var b=0,w=f.length;b<w;b++)d[b]=f[b];if("O"!==(e=e.toUpperCase()))switch(d[0]){case"Z":r=+o,a=+c;break;case"H":r=d[1];break;case"V":a=d[1];break;case"M":o=d[d.length-2],c=d[d.length-1];break;default:r=d[d.length-2],a=d[d.length-1]}}return i},h=function(t,e,n,i){return[t,e,n,i,n,i]},d=function(t,e,n,i,r,a){return[1/3*t+2/3*n,1/3*e+2/3*i,1/3*r+2/3*n,1/3*a+2/3*i,r,a]},f=function(t,e){var n,i=c(t),r=e&&c(e),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=[],l=[],u="",f="",p=function(t,e,n){var i,r;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(function t(e,n,i,r,a,o,s,l,u,c){i===r&&(i+=1);var h,d,f,p,g,m=120*Math.PI/180,v=Math.PI/180*(+a||0),y=[],x=function(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}};if(c)d=c[0],f=c[1],p=c[2],g=c[3];else{e=(h=x(e,n,-v)).x,n=h.y,l=(h=x(l,u,-v)).x,u=h.y,e===l&&n===u&&(l+=1,u+=1);var _=(e-l)/2,b=(n-u)/2,w=_*_/(i*i)+b*b/(r*r);w>1&&(i*=w=Math.sqrt(w),r*=w);var S=i*i,M=r*r,A=(o===s?-1:1)*Math.sqrt(Math.abs((S*M-S*b*b-M*_*_)/(S*b*b+M*_*_)));p=A*i*b/r+(e+l)/2,g=A*-r*_/i+(n+u)/2,d=Math.asin(((n-g)/r).toFixed(9)),f=Math.asin(((u-g)/r).toFixed(9)),d=e<p?Math.PI-d:d,f=l<p?Math.PI-f:f,d<0&&(d=2*Math.PI+d),f<0&&(f=2*Math.PI+f),s&&d>f&&(d-=2*Math.PI),!s&&f>d&&(f-=2*Math.PI)}var C=f-d;if(Math.abs(C)>m){var I=f,P=l,T=u;f=d+m*(s&&f>d?1:-1),y=t(l=p+i*Math.cos(f),u=g+r*Math.sin(f),i,r,a,0,s,P,T,[f,I,p,g])}C=f-d;var O=Math.cos(d),k=Math.sin(d),D=Math.cos(f),E=Math.sin(f),L=Math.tan(C/4),N=4/3*i*L,R=4/3*r*L,B=[e,n],z=[e+N*k,n-R*O],V=[l+N*E,u-R*D],G=[l,u];if(z[0]=2*B[0]-z[0],z[1]=2*B[1]-z[1],c)return[z,V,G].concat(y);for(var F=[],j=0,H=(y=[z,V,G].concat(y).join().split(",")).length;j<H;j++)F[j]=j%2?x(y[j-1],y[j],v).y:x(y[j],y[j+1],v).x;return F}.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===n||"S"===n?(i=2*e.x-e.bx,r=2*e.y-e.by):(i=e.x,r=e.y),t=["C",i,r].concat(t.slice(1));break;case"T":"Q"===n||"T"===n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(d(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(d(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(h(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(h(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(h(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(h(e.x,e.y,e.X,e.Y))}return t},g=function(t,e){if(t[e].length>7){t[e].shift();for(var a=t[e];a.length;)s[e]="A",r&&(l[e]="A"),t.splice(e++,0,["C"].concat(a.splice(0,6)));t.splice(e,1),n=Math.max(i.length,r&&r.length||0)}},m=function(t,e,a,o,s){t&&e&&"M"===t[s][0]&&"M"!==e[s][0]&&(e.splice(s,0,["M",o.x,o.y]),a.bx=0,a.by=0,a.x=t[s][1],a.y=t[s][2],n=Math.max(i.length,r&&r.length||0))};n=Math.max(i.length,r&&r.length||0);for(var v=0;v<n;v++){i[v]&&(u=i[v][0]),"C"!==u&&(s[v]=u,v&&(f=s[v-1])),i[v]=p(i[v],a,f),"A"!==s[v]&&"C"===u&&(s[v]="C"),g(i,v),r&&(r[v]&&(u=r[v][0]),"C"!==u&&(l[v]=u,v&&(f=l[v-1])),r[v]=p(r[v],o,f),"A"!==l[v]&&"C"===u&&(l[v]="C"),g(r,v)),m(i,r,a,o,v),m(r,i,o,a,v);var y=i[v],x=r&&r[v],_=y.length,b=r&&x.length;a.x=y[_-2],a.y=y[_-1],a.bx=parseFloat(y[_-4])||a.x,a.by=parseFloat(y[_-3])||a.y,o.bx=r&&(parseFloat(x[b-4])||o.x),o.by=r&&(parseFloat(x[b-3])||o.y),o.x=r&&x[b-2],o.y=r&&x[b-1]}return r?[i,r]:i},p=/,?([a-z]),?/gi,g=function(t){return t.join(",").replace(p,"$1")},m=function(t,e,n,i,r){return t*(t*(-3*e+9*n-9*i+3*r)+6*e-12*n+6*i)-3*e+3*n},v=function(t,e,n,i,r,a,o,s,l){null===l&&(l=1);for(var u=(l=l>1?1:l<0?0:l)/2,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,f=0;f<12;f++){var p=u*c[f]+u,g=m(p,t,n,r,o),v=m(p,e,i,a,s),y=g*g+v*v;d+=h[f]*Math.sqrt(y)}return u*d},y=function(t,e,n,i,r,a,o,s){if(!(Math.max(t,n)<Math.min(r,o)||Math.min(t,n)>Math.max(r,o)||Math.max(e,i)<Math.min(a,s)||Math.min(e,i)>Math.max(a,s))){var l=(t-n)*(a-s)-(e-i)*(r-o);if(l){var u=((t*i-e*n)*(r-o)-(t-n)*(r*s-a*o))/l,c=((t*i-e*n)*(a-s)-(e-i)*(r*s-a*o))/l,h=+u.toFixed(2),d=+c.toFixed(2);if(!(h<+Math.min(t,n).toFixed(2)||h>+Math.max(t,n).toFixed(2)||h<+Math.min(r,o).toFixed(2)||h>+Math.max(r,o).toFixed(2)||d<+Math.min(e,i).toFixed(2)||d>+Math.max(e,i).toFixed(2)||d<+Math.min(a,s).toFixed(2)||d>+Math.max(a,s).toFixed(2)))return{x:u,y:c}}}},x=function(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height},_=function(t,e,n,i,r){if(r)return[["M",+t+ +r,e],["l",n-2*r,0],["a",r,r,0,0,1,r,r],["l",0,i-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-n,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-i],["a",r,r,0,0,1,r,-r],["z"]];var a=[["M",t,e],["l",n,0],["l",0,i],["l",-n,0],["z"]];return a.parsePathArray=g,a},b=function(t,e,n,i){return null===t&&(t=e=n=i=0),null===e&&(e=t.y,n=t.width,i=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:i,h:i,x2:t+n,y2:e+i,cx:t+n/2,cy:e+i/2,r1:Math.min(n,i)/2,r2:Math.max(n,i)/2,r0:Math.sqrt(n*n+i*i)/2,path:_(t,e,n,i),vb:[t,e,n,i].join(" ")}},w=function(t,e,n,r,a,o,s,l){i.isArray(t)||(t=[t,e,n,r,a,o,s,l]);var u=function(t,e,n,i,r,a,o,s){for(var l,u,c,h,d=[],f=[[],[]],p=0;p<2;++p)if(0===p?(u=6*t-12*n+6*r,l=-3*t+9*n-9*r+3*o,c=3*n-3*t):(u=6*e-12*i+6*a,l=-3*e+9*i-9*a+3*s,c=3*i-3*e),Math.abs(l)<1e-12){if(Math.abs(u)<1e-12)continue;(h=-c/u)>0&&h<1&&d.push(h)}else{var g=u*u-4*c*l,m=Math.sqrt(g);if(!(g<0)){var v=(-u+m)/(2*l);v>0&&v<1&&d.push(v);var y=(-u-m)/(2*l);y>0&&y<1&&d.push(y)}}for(var x,_=d.length,b=_;_--;)x=1-(h=d[_]),f[0][_]=x*x*x*t+3*x*x*h*n+3*x*h*h*r+h*h*h*o,f[1][_]=x*x*x*e+3*x*x*h*i+3*x*h*h*a+h*h*h*s;return f[0][b]=t,f[1][b]=e,f[0][b+1]=o,f[1][b+1]=s,f[0].length=f[1].length=b+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}}.apply(null,t);return b(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},S=function(t,e,n,i,r,a,o,s,l){var u=1-l,c=Math.pow(u,3),h=Math.pow(u,2),d=l*l,f=d*l,p=t+2*l*(n-t)+d*(r-2*n+t),g=e+2*l*(i-e)+d*(a-2*i+e),m=n+2*l*(r-n)+d*(o-2*r+n),v=i+2*l*(a-i)+d*(s-2*a+i);return{x:c*t+3*h*l*n+3*u*l*l*r+f*o,y:c*e+3*h*l*i+3*u*l*l*a+f*s,m:{x:p,y:g},n:{x:m,y:v},start:{x:u*t+l*n,y:u*e+l*i},end:{x:u*r+l*o,y:u*a+l*s},alpha:90-180*Math.atan2(p-m,g-v)/Math.PI}},M=function(t,e,n){if(!function(t,e){return t=b(t),e=b(e),x(e,t.x,t.y)||x(e,t.x2,t.y)||x(e,t.x,t.y2)||x(e,t.x2,t.y2)||x(t,e.x,e.y)||x(t,e.x2,e.y)||x(t,e.x,e.y2)||x(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)}(w(t),w(e)))return n?0:[];for(var i=~~(v.apply(0,t)/8),r=~~(v.apply(0,e)/8),a=[],o=[],s={},l=n?0:[],u=0;u<i+1;u++){var c=S.apply(0,t.concat(u/i));a.push({x:c.x,y:c.y,t:u/i})}for(var h=0;h<r+1;h++){var d=S.apply(0,e.concat(h/r));o.push({x:d.x,y:d.y,t:h/r})}for(var f=0;f<i;f++)for(var p=0;p<r;p++){var g=a[f],m=a[f+1],_=o[p],M=o[p+1],A=Math.abs(m.x-g.x)<.001?"y":"x",C=Math.abs(M.x-_.x)<.001?"y":"x",I=y(g.x,g.y,m.x,m.y,_.x,_.y,M.x,M.y);if(I){if(s[I.x.toFixed(4)]===I.y.toFixed(4))continue;s[I.x.toFixed(4)]=I.y.toFixed(4);var P=g.t+Math.abs((I[A]-g[A])/(m[A]-g[A]))*(m.t-g.t),T=_.t+Math.abs((I[C]-_[C])/(M[C]-_[C]))*(M.t-_.t);P>=0&&P<=1&&T>=0&&T<=1&&(n?l++:l.push({x:I.x,y:I.y,t1:P,t2:T}))}}return l};function A(t,e){var n=[],i=[];return t.length&&function t(e,r){if(1===e.length)n.push(e[0]),i.push(e[0]);else{for(var a=[],o=0;o<e.length-1;o++)0===o&&n.push(e[0]),o===e.length-2&&i.push(e[o+1]),a[o]=[(1-r)*e[o][0]+r*e[o+1][0],(1-r)*e[o][1]+r*e[o+1][1]];t(a,r)}}(t,e),{left:n,right:i.reverse()}}var C=function(t,e){if(t.length!==e.length)return!1;var n=!0;return i.each(t,function(t,i){if(t!==e[i])return n=!1,!1}),n};function I(t,e,n){var i=null,r=n;return e<r&&(r=e,i="add"),t<r&&(r=t,i="del"),{type:i,min:r}}function P(t,e,n){for(var i,r=[].concat(t),a=1/(n+1),o=T(e)[0],s=1;s<=n;s++)a*=s,0===(i=Math.floor(t.length*a))?r.unshift([o[0]*a+t[i][0]*(1-a),o[1]*a+t[i][1]*(1-a)]):r.splice(i,0,[o[0]*a+t[i][0]*(1-a),o[1]*a+t[i][1]*(1-a)]);return r}function T(t){var e=[];switch(t[0]){case"M":case"L":e.push([t[1],t[2]]);break;case"A":e.push([t[6],t[7]]);break;case"Q":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"T":e.push([t[1],t[2]]);break;case"C":e.push([t[5],t[6]]),e.push([t[1],t[2]]),e.push([t[3],t[4]]);break;case"S":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"H":case"V":e.push([t[1],t[1]])}return e}t.exports={parsePathString:s,parsePathArray:g,pathTocurve:f,pathToAbsolute:c,catmullRomToBezier:l,rectPath:_,fillPath:function(t,e){if(1===t.length)return t;var n=t.length-1,i=e.length-1,r=n/i,a=[];if(1===t.length&&"M"===t[0][0]){for(var o=0;o<i-n;o++)t.push(t[0]);return t}for(var s=0;s<i;s++){var l=Math.floor(r*s);a[l]=(a[l]||0)+1}var u=a.reduce(function(e,i,r){return r===n?e.concat(t[n]):e.concat(function(t,e,n){if(1===n)return[[].concat(t)];var i=[];if("L"===e[0]||"C"===e[0]||"Q"===e[0])i=i.concat(function(t,e,n){var i=[[t[1],t[2]]];n=n||2;var r=[];"A"===e[0]?(i.push(e[6]),i.push(e[7])):"C"===e[0]?(i.push([e[1],e[2]]),i.push([e[3],e[4]]),i.push([e[5],e[6]])):"S"===e[0]||"Q"===e[0]?(i.push([e[1],e[2]]),i.push([e[3],e[4]])):i.push([e[1],e[2]]);for(var a=i,o=1/n,s=0;s<n-1;s++){var l=A(a,o/(1-o*s));r.push(l.left),a=l.right}return r.push(a),r.map(function(t){var e=[];return 4===t.length&&(e.push("C"),e=e.concat(t[2])),t.length>=3&&(3===t.length&&e.push("Q"),e=e.concat(t[1])),2===t.length&&e.push("L"),e.concat(t[t.length-1])})}(t,e,n));else{var r=[].concat(t);"M"===r[0]&&(r[0]="L");for(var a=0;a<=n-1;a++)i.push(r)}return i}(t[r],t[r+1],i))},[]);return u.unshift(t[0]),"Z"!==e[i]&&"z"!==e[i]||u.push("Z"),u},fillPathByDiff:function(t,e){var n=function(t,e){var n,i,r=t.length,a=e.length,o=0;if(0===r||0===a)return null;for(var s=[],l=0;l<=r;l++)s[l]=[],s[l][0]={min:l};for(var u=0;u<=a;u++)s[0][u]={min:u};for(var c=1;c<=r;c++){n=t[c-1];for(var h=1;h<=a;h++){i=e[h-1],o=C(n,i)?0:1;var d=s[c-1][h].min+1,f=s[c][h-1].min+1,p=s[c-1][h-1].min+o;s[c][h]=I(d,f,p)}}return s}(t,e),i=t.length,r=e.length,a=[],o=1,s=1;if(n[i][r]!==i){for(var l=1;l<=i;l++){var u=n[l][l].min;s=l;for(var c=o;c<=r;c++)n[l][c].min<u&&(u=n[l][c].min,s=c);o=s,n[l][o].type&&a.push({index:l-1,type:n[l][o].type})}for(var h=a.length-1;h>=0;h--)o=a[h].index,"add"===a[h].type?t.splice(o,0,[].concat(t[o])):t.splice(o,1)}var d=r-(i=t.length);if(i<r)for(var f=0;f<d;f++)"z"===t[i-1][0]||"Z"===t[i-1][0]?t.splice(i-2,0,t[i-2]):t.push(t[i-1]),i+=1;return t},formatPath:function(t,e){if(t.length<=1)return t;for(var n,i=0;i<e.length;i++)if(t[i][0]!==e[i][0])switch(n=T(t[i]),e[i][0]){case"M":t[i]=["M"].concat(n[0]);break;case"L":t[i]=["L"].concat(n[0]);break;case"A":t[i]=[].concat(e[i]),t[i][6]=n[0][0],t[i][7]=n[0][1];break;case"Q":if(n.length<2){if(!(i>0)){t[i]=e[i];break}n=P(n,t[i-1],1)}t[i]=["Q"].concat(n.reduce(function(t,e){return t.concat(e)},[]));break;case"T":t[i]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(i>0)){t[i]=e[i];break}n=P(n,t[i-1],2)}t[i]=["C"].concat(n.reduce(function(t,e){return t.concat(e)},[]));break;case"S":if(n.length<2){if(!(i>0)){t[i]=e[i];break}n=P(n,t[i-1],1)}t[i]=["S"].concat(n.reduce(function(t,e){return t.concat(e)},[]));break;default:t[i]=e[i]}return t},intersection:function(t,e){return function(t,e,n){var i,r,a,o,s,l,u,c,h,d;t=f(t),e=f(e);for(var p=[],g=0,m=t.length;g<m;g++){var v=t[g];if("M"===v[0])i=s=v[1],r=l=v[2];else{"C"===v[0]?(i=(h=[i,r].concat(v.slice(1)))[6],r=h[7]):(h=[i,r,i,r,s,l,s,l],i=s,r=l);for(var y=0,x=e.length;y<x;y++){var _=e[y];if("M"===_[0])a=u=_[1],o=c=_[2];else{"C"===_[0]?(a=(d=[a,o].concat(_.slice(1)))[6],o=d[7]):(d=[a,o,a,o,u,c,u,c],a=u,o=c);for(var b=M(h,d,n),w=0,S=b.length;w<S;w++)b[w].segment1=g,b[w].segment2=y,b[w].bez1=h,b[w].bez2=d;p=p.concat(b)}}}}return p}(t,e)}}},function(t,e,n){var i=n(17),r=n(37),a=n(356),o=n(363),s=function t(e){t.superclass.constructor.call(this,e)};s.Symbols={circle:function(t,e,n){return[["M",t,e],["m",-n,0],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0]]},square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var i=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+i],["L",t,e-i],["L",t+n,e+i],["z"]]},"triangle-down":function(t,e,n){var i=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-i],["L",t+n,e-i],["L",t,e+i],["Z"]]}},s.ATTRS={path:null,lineWidth:1},i.extend(s,r),i.augment(s,{type:"marker",canFill:!0,canStroke:!0,getDefaultAttrs:function(){return{x:0,y:0,lineWidth:1}},calculateBox:function(){var t=this._attrs,e=t.x,n=t.y,i=t.radius,r=this.getHitLineWidth()/2+i;return{minX:e-r,minY:n-r,maxX:e+r,maxY:n+r}},_getPath:function(){var t=this._attrs,e=t.x,n=t.y,r=t.radius||t.r,a=t.symbol||"circle";return(i.isFunction(a)?a:s.Symbols[a])(e,n,r)},createPath:function(t){var e=this._cfg.segments;if(!e||this._cfg.hasUpdate){var n,i=a.parsePath(this._getPath());t.beginPath(),e=[];for(var r=0;r<i.length;r++){var s=i[r];n=new o(s,n,r===i.length-1),e.push(n),n.draw(t)}this._cfg.segments=e,this._cfg.hasUpdate=!1}else{t.beginPath();for(var l=0;l<e.length;l++)e[l].draw(t)}}}),t.exports=s},function(t,e,n){var i=n(17),r=i.vec2;function a(t,e,n,i,r){var a=1-r;return a*a*(a*i+3*r*n)+r*r*(r*t+3*a*e)}function o(t,e,n,i,o,s,l,u,c,h,d){var f,p,g,m,v,y,x,_,b=.005,w=1/0,S=[c,h];for(p=0;p<1;p+=.05)g=[a(t,n,o,l,p),a(e,i,s,u,p)],(m=r.squaredDistance(S,g))<w&&(f=p,w=m);w=1/0;for(var M=0;M<32&&!(b<1e-4);M++)_=f+b,g=[a(t,n,o,l,x=f-b),a(e,i,s,u,x)],m=r.squaredDistance(S,g),x>=0&&m<w?(f=x,w=m):(y=[a(t,n,o,l,_),a(e,i,s,u,_)],v=r.squaredDistance(S,y),_<=1&&v<w?(f=_,w=v):b*=.5);return d&&(d.x=a(t,n,o,l,f),d.y=a(e,i,s,u,f)),Math.sqrt(w)}function s(t,e,n,i,r){return t*(t*(-3*e+9*n-9*i+3*r)+6*e-12*n+6*i)-3*e+3*n}t.exports={at:a,derivativeAt:function(t,e,n,i,r){var a=1-r;return 3*(((e-t)*a+2*(n-e)*r)*a+(i-n)*r*r)},projectPoint:function(t,e,n,i,r,a,s,l,u,c){var h={};return o(t,e,n,i,r,a,s,l,u,c,h),h},pointDistance:o,extrema:function(t,e,n,r){var a,o,s,l=3*t-9*e+9*n-3*r,u=6*e-12*n+6*r,c=3*n-3*r,h=[];if(i.isNumberEqual(l,0))i.isNumberEqual(u,0)||(a=-c/u)>=0&&a<=1&&h.push(a);else{var d=u*u-4*l*c;i.isNumberEqual(d,0)?h.push(-u/(2*l)):d>0&&(o=(-u-(s=Math.sqrt(d)))/(2*l),(a=(-u+s)/(2*l))>=0&&a<=1&&h.push(a),o>=0&&o<=1&&h.push(o))}return h},len:function(t,e,n,r,a,o,l,u,c){i.isNil(c)&&(c=1);for(var h=(c=c>1?1:c<0?0:c)/2,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,g=0;g<12;g++){var m=h*d[g]+h,v=s(m,t,n,a,l),y=s(m,e,r,o,u),x=v*v+y*y;p+=f[g]*Math.sqrt(x)}return h*p}}},function(t,e,n){var i=n(366),r=n(404),a=n(375),o=n(365);t.exports={line:function(t,e,n,r,a,o,s){var l=i.box(t,e,n,r,a);if(!this.box(l.minX,l.maxX,l.minY,l.maxY,o,s))return!1;var u=i.pointDistance(t,e,n,r,o,s);return!isNaN(u)&&u<=a/2},polyline:function(t,e,n,i){var r=t.length-1;if(r<1)return!1;for(var a=0;a<r;a++){var o=t[a][0],s=t[a][1],l=t[a+1][0],u=t[a+1][1];if(this.line(o,s,l,u,e,n,i))return!0}return!1},cubicline:function(t,e,n,i,r,o,s,l,u,c,h){return a.pointDistance(t,e,n,i,r,o,s,l,c,h)<=u/2},quadraticline:function(t,e,n,i,a,o,s,l,u){return r.pointDistance(t,e,n,i,a,o,l,u)<=s/2},arcline:function(t,e,n,i,r,a,s,l,u){return o.pointDistance(t,e,n,i,r,a,l,u)<=s/2},rect:function(t,e,n,i,r,a){return t<=r&&r<=t+n&&e<=a&&a<=e+i},circle:function(t,e,n,i,r){return Math.pow(i-t,2)+Math.pow(r-e,2)<=Math.pow(n,2)},box:function(t,e,n,i,r,a){return t<=r&&r<=e&&n<=a&&a<=i}}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){var i=n(383),r=n(62),a=n(358);t.exports=function t(e,n){if(e===n)return!0;if(!e||!n)return!1;if(a(e)||a(n))return!1;if(r(e)||r(n)){if(e.length!==n.length)return!1;for(var o=!0,s=0;s<e.length&&(o=t(e[s],n[s]));s++);return o}if(i(e)||i(n)){var l=Object.keys(e),u=Object.keys(n);if(l.length!==u.length)return!1;for(var c=!0,h=0;h<l.length&&(c=t(e[l[h]],n[l[h]]));h++);return c}return!1}},function(t,e,n){var i=n(359),r=n(29),a=5;function o(t,e,n,s){for(var l in n=n||0,s=s||a,e)if(e.hasOwnProperty(l)){var u=e[l];null!==u&&i(u)?(i(t[l])||(t[l]={}),n<s?o(t[l],u,n+1,s):t[l]=e[l]):r(u)?(t[l]=[],t[l]=t[l].concat(u)):void 0!==u&&(t[l]=u)}}t.exports=function(){for(var t=new Array(arguments.length),e=t.length,n=0;n<e;n++)t[n]=arguments[n];for(var i=t[0],r=1;r<e;r++)o(i,t[r]);return i}},function(t,e,n){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n(29);t.exports=function t(e){if("object"!==(void 0===e?"undefined":i(e))||null===e)return e;var n=void 0;if(r(e)){n=[];for(var a=0,o=e.length;a<o;a++)"object"===i(e[a])&&null!=e[a]?n[a]=t(e[a]):n[a]=e[a]}else for(var s in n={},e)"object"===i(e[s])&&null!=e[s]?n[s]=t(e[s]):n[s]=e[s];return n}},function(t,e,n){var i=n(151);i.translate=function(t,e,n){var r=new Array(9);return i.fromTranslation(r,n),i.multiply(t,r,e)},i.rotate=function(t,e,n){var r=new Array(9);return i.fromRotation(r,n),i.multiply(t,r,e)},i.scale=function(t,e,n){var r=new Array(9);return i.fromScaling(r,n),i.multiply(t,r,e)},t.exports=i},function(t,e){t.exports=function(t,e,n){return t<e?e:t>n?n:t}},function(t,e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){return"object"===(void 0===t?"undefined":n(t))&&null!==t}},function(t,e,n){var i=n(30),r=n(62);t.exports=function(t,e){if(!r(t))return t;var n=[];return i(t,function(t,i){e(t,i)&&n.push(t)}),n}},function(t,e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){var e=void 0===t?"undefined":n(t);return null!==t&&"object"===e||"function"===e}},function(t,e){var n=function(){function t(){}return t.prototype.execute=function(){throw new Error("please override this method")},t}();t.exports=n},function(t,e,n){t.exports={CompactBoxTree:n(454),Dendrogram:n(453),IndentedTree:n(452),Mindmap:n(451),Base:n(386)}},function(t,e,n){var i=n(22),r=function(t){function e(e){var n={type:"node",isNode:!0,zIndex:3,edges:[],linkable:!0};return i.mix(n,e),t.call(this,n)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.updatePosition=function(){var t=this.group,e=this.model;t.setMatrix([1,0,0,0,1,0,e.x?e.x:0,e.y?e.y:0,1]),this.bbox=this._calculateBBox()},n._shouldDraw=function(){var e=this._getDiff(),n=t.prototype._shouldDraw.call(this);return e&&!(2===e.length&&-1!==e.indexOf("x")&&-1!==e.indexOf("y"))&&!(1===e.length&&("x"===e[0]||"y"===e[0]))&&n},n._afterDraw=function(){this.updatePosition(),t.prototype._afterDraw.call(this)},n.layoutUpdate=function(){this._beforeDraw(),this._afterDraw()},n.getEdges=function(){var t=this;return this.graph.getEdges().filter(function(e){var n=e.getModel();return n.source===t.id||n.target===t.id})},n.getInEdges=function(){var t=this;return this.getEdges().filter(function(e){return e.target===t})},n.getOutEdges=function(){var t=this;return this.getEdges().filter(function(e){return e.source===t})},n.getLinkPoints=function(t){var e=this.getAnchorPoints();if(i.isNumber(t)&&e[t])return[e[t]];var n=t.x,r=t.y,a=this.getBBox(),o=a.centerX,s=a.centerY,l=n-o,u=r-s,c=this.shapeObj,h=c.anchor||{},d=this.defaultIntersectBox,f=[];if(i.isEmpty(e)){switch(c.intersectBox||h.intersectBox||h.type||d){case"rect":f=[i.getIntersectPointRect(a,t)];break;case"path":if(this.keyShape&&"path"===this.keyShape.get("type")){var p=i.parsePathArray(["M",n,r,"L",o,s]);f=[i.intersection(p,this.keyShape.get("path"))]}break;default:f=[i.getIntersectPointCircle(n,r,a.centerX,a.centerY,Math.max(a.width,a.height)/2)]}i.isEmpty(f[0])&&(f=[{x:o,y:s}])}else f=e.map(function(t){var e=t.x-o,n=t.y-s,r=i.getArcOfVectors({x:l,y:u},{x:e,y:n});return i.mix({},t,{arc:r})}).sort(function(t,e){return t.arc-e.arc});return f},n.getAnchorPoints=function(t){var e,n=this.shapeObj,r=this.getBBox(),a=[],o=n.anchor||{};return e=i.isArray(o)?o:i.isFunction(o)?o(this):i.isFunction(o.points)?o.points(this):o.points,i.each(e,function(t,e){var n=i.mix({x:r.minX+t[0]*r.width,y:r.minY+t[1]*r.height},t[2],{index:e});a.push(n)}),this._anchorPoints=a,i.isNumber(t)?this._anchorPoints[t]:this._anchorPoints},e}(n(371));t.exports=r},function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n(481),n(480),n(479);var r=n(478),a=n(476),o=n(449),s=n(22),l=n(472),u=n(147),c=n(470),h=n(468),d=n(466),f=n(465),p=n(463),g=n(462),m=n(461),v=n(458),y=n(457),x=[g,h,d,c,m,v,n(456),y,f,p],_=function(t){!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(n,t);var e=n.prototype;function n(e){var n,i={};return x.forEach(function(t){s.mix(i,s.clone(t.CFG),e)}),(n=t.call(this,i)||this)._pluginInit(),n.emit("beforeinit"),n._init(),n.emit("afterinit"),n}return e.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,plugins:[],fontFamily:'"Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", SimSun, "sans-serif"',nodeDefaultShape:void 0,edgeDefaultShape:void 0,groupDefaultShape:void 0,defaultIntersectBox:"circle",renderer:"canvas",_type:"graph",_controllers:{},_timers:{},_dataMap:{},_itemMap:{},_freezMap:{},_data:{},_delayRunObj:{}}},e._init=function(){var t=this;this._initData(),this._initContainer(),this._initCanvas(),x.forEach(function(e){e.INIT&&t[e.INIT]()}),this.initEvent()},e.initEvent=function(){},e._executeLayout=function(t,e,n,i){s.isFunction(t)?t(e,n,this):s.isObject(t)&&(t.nodes=e,t.edges=n,t.groups=i,t.graph=this,t.execute())},e._pluginInit=function(){var t=this;this.get("plugins").forEach(function(e){t._initPlugin(e)})},e._initPlugin=function(t){t.graph=this,t.init&&t.init()},e._getTimer=function(t){return this.get("_timers")[t]},e._setTimer=function(t,e){this.get("_timers")[t]=e},e._getController=function(t){return this.get("_controllers")[t]},e._initContainer=function(){var t=this.get("container");t||(t=this.get("id")),t=s.initDOMContainer(t,"graph");var e=s.createDOM('<div class="graph-container"></div>',{position:"relative"});t.appendChild(e),this.set("_containerDOM",t),this.set("_graphContainer",e)},e._initCanvas=function(){var t=this.get("_graphContainer"),e=this.get("width"),n=this.get("height"),i=this.get("fontFamily"),r=this.get("renderer"),a={width:e,height:n,fontFamily:i,renderer:r,eventEnable:!1,containerDOM:t};"svg"===r&&(a.pixelRatio=1);var o=new(0,u.Canvas)(a),s=o.get("el");s.style.top=0,s.style.left=0,s.style.overflow="hidden",this.set("_canvas",o);var l=this.getMouseEventWrapper();l.style.outline="none",l.style["user-select"]="none",l.setAttribute("tabindex",20);var c=o.addGroup(),h=c.addGroup();this.set("_itemGroup",h),this.set("_rootGroup",c)},e._initData=function(){this.set("_dataMap",{}),this.set("_itemMap",{_nodes:[],_edges:[],_groups:[],_guides:[]}),this.set("_data",{})},e._refresh=function(){},e.getKeyboardEventWrapper=function(){var t=this.get("keyboardEventWrapper");return t||this.getMouseEventWrapper()},e.getMouseEventWrapper=function(){return this.get("_canvas").get("el")},e.addPlugin=function(t){var e=this.get("plugins");this._initPlugin(t),e.push(t)},e.getGraphContainer=function(){return this.get("_graphContainer")},e._sortGroup=function(t){var e=this.get("_dataMap"),n={};t.forEach(function(t){var i=t.id,r=t.parent;for(n[i]=1;r&&e[r];)n[i]++,r=e[r].parent}),t.sort(function(t,e){return n[e.id]-n[t.id]})},e._addItems=function(t,e){var n=this;this._addDatas(t,e),"group"===t&&this._sortGroup(e);var i=s.upperFirst(t),r=a[i],o=this.get("_itemMap"),l=this.get("_itemGroup"),u=this.get("_dataMap"),c=this.get("animate"),h=this.get("defaultIntersectBox");if(!r)throw new Error("please set valid item type!");e.forEach(function(e){var i=new r({id:e.id,type:t,model:e,group:l.addGroup(),graph:n,mapper:n._getController(t+"Mapper"),itemMap:o,animate:c,dataMap:u,defaultIntersectBox:h});o[e.id]=i,o["_"+t+"s"].push(i)})},e._removeItems=function(t){var e=this.get("_dataMap"),n=this.get("_itemMap");t.forEach(function(t){delete e[t.id],delete n[t.id],s.Array.remove(n["_"+t.type+"s"],t),t.destroy()})},e._updateItems=function(t,e){t.forEach(function(t,n){var i=e[n];i&&s.mix(t.getModel(),i),t.update()})},e._getShowEdge=function(t){var e=t.getSource(),n=t.getTarget();return(e.linkable&&e.isVisible()||!e.linkable)&&(n.linkable&&n.isVisible()||!n.linkable)&&t},e._addDatas=function(t,e){var n=this.get("_dataMap");e.forEach(function(t){if(s.isNil(t.id)&&(t.id=s.guid()),n[t.id])throw new Error("id:"+t.id+" has already been set, please set new one");n[t.id]=t})},e._drawInner=function(){var t=this.get("_data"),e=this.get("_itemGroup"),n=this.get("_dataMap"),i=this.get("_itemMap");t.nodes&&this._addItems("node",t.nodes),t.groups&&this._addItems("group",t.groups),t.edges&&this._addItems("edge",t.edges),t.guides&&this._addItems("guide",t.guides),e.sortBy(function(t){var e=t.id,r=i[e],a=n[e];return a&&!s.isNil(a.index)?a.index:!r||r.destroyed||s.isNil(r.zIndex)?void 0:r.zIndex})},e._clearInner=function(){this.getItems().forEach(function(t){t&&t.destroy()})},e.preventAnimate=function(t){return this.set("_forcePreventAnimate",!0),t(),this.set("_forcePreventAnimate",!1),this},e.getShapeObj=function(t,e){if(!s.isObject(t)){var n=s.upperFirst(t),i=o[n],r=this.get(t+"DefaultShape");return i.getShape(e.shape,r)}return t.getShapeObj()},e.getSource=function(){return this.get("_sourceData")},e.parseSource=function(t){return t},e.getCanvas=function(){return this.get("_canvas")},e.getRootGroup=function(){return this.get("_rootGroup")},e.getItemGroup=function(){return this.get("_itemGroup")},e.source=function(t){return this.emit("beforesource"),this.set("_data",t),this.set("_sourceData",t),this.emit("aftersource"),this},e.render=function(){return this.emit("beforerender"),this.emit("beforedrawinner"),this._drawInner(),this.emit("afterdrawinner"),this.emit("afterrender"),this},e.reRender=function(){var t=this.get("_sourceData");return this.read(t),this},e.setCapture=function(t){this.get("_rootGroup").set("capture",t)},e.destroy=function(){this.emit("beforedestroy");var e=this.get("_canvas"),n=this.get("_graphContainer"),i=this.get("_controllers"),r=this.get("_timers"),a=this.get("_windowForceResizeEvent"),o=this.get("plugins");return s.each(r,function(t){clearTimeout(t)}),s.each(i,function(t){t.destroy()}),o.forEach(function(t){t.destroy&&t.destroy()}),e&&e.destroy(),n.destroy(),window.removeEventListener("resize",a),this.emit("afterdestroy"),t.prototype.destroy.call(this),this},e.save=function(){var t={nodes:[],edges:[],groups:[],guides:[]};return this.get("_itemGroup").get("children").forEach(function(e,n){var i=e.model;if(i){var r=e.itemType,a=s.clone(i);a.index=n,t[r+"s"].push(a)}}),0===t.nodes.length&&delete t.nodes,0===t.edges.length&&delete t.edges,0===t.groups.length&&delete t.groups,0===t.guides.length&&delete t.guides,t},e.add=function(t,e){var n=[],i={action:"add",model:e,affectedItemIds:n};this.emit("beforechange",i);var r=this.get("_itemMap");this._addItems(t,[e]);var a=r[e.id];return a.getAllParents().forEach(function(t){t.update()}),i.item=a,n.push(e.id),this.emit("afterchange",i),a},e.remove=function(t){if((t=this.getItem(t))&&!t.destroyed){var e=[],n=[],i={action:"remove",item:t,affectedItemIds:n};if(t.isNode){var r=t.getEdges();e=e.concat(r)}if(t.isGroup){var a=t.getEdges(),o=t.getAllChildren(),l=t.getCrossEdges(),u=t.getInnerEdges();e=e.concat(a,o,l,u),e=s.uniq(e)}e.push(t);var c=t.getAllParents();return c.forEach(function(t){n.push(t.id)}),e.forEach(function(t){n.push(t.id)}),this.emit("beforechange",i),this._removeItems(e),c.forEach(function(t){t.update()}),this.emit("afterchange",i),this}},e.simpleUpdate=function(t,e){return this._updateItems([t],[e]),this.draw(),this},e.update=function(t,e){var n=this.get("_itemMap");if((t=this.getItem(t))&&!t.destroyed&&e){var i=this.get("animate"),r=[],a=[],o=[],l=t.getModel(),u=s.mix({},l),c={action:"update",item:t,originModel:u,updateModel:e,affectedItemIds:o},h=n[u.parent];if(r.push(t),a.push(e),o.push(t.id),h&&h!==parent&&s.isGroup(h)&&t.getAllParents().forEach(function(t){r.push(t),a.push(null),o.push(t.id)}),e.parent){var d=n[e.parent];if(!d)throw new Error("there is no "+e.parent+" exist, please add a new one!");r.push(d),a.push(null),o.push(d.id),d.getAllParents().forEach(function(t){r.push(t),a.push(null),o.push(t.id)})}return(t.isNode||t.isGroup)&&t.getEdges().forEach(function(t){r.push(t),a.push(null),o.push(t.id)}),t.isGroup&&!s.isNil(e.collapsed)&&(i&&t.deepEach(function(t){o.push(t.id)}),t.getCrossEdges().forEach(function(t){r.push(t),a.push(null),o.push(t.id)})),this.emit("beforechange",c),this._updateItems(r,a),this.emit("afterchange",c),this}},e.read=function(t){var e=this;if(!t)throw new Error("please read valid data!");var n={action:"changeData",data:t};return this.emit("beforechange",n),this.preventAnimate(function(){e.clear(),e.source(t),e.render()}),this.emit("afterchange",n),this},e.clear=function(){return this.emit("beforeclear"),this._clearInner(),this._initData(),this.emit("afterclear"),this},e.hide=function(t){var e=[],n=[],i={item:t=this.getItem(t),affectedItemIds:n};return e.push(t),t.isNode&&t.getEdges().forEach(function(t){e.push(t)}),t.isGroup&&(t.getEdges().forEach(function(t){e.push(t)}),t.deepEach(function(t){e.push(t)})),(e=s.uniq(e)).forEach(function(t){n.push(t.id)}),this.emit("beforehide",i),e.forEach(function(t){t.hide()}),this.emit("afterhide",i),this},e.show=function(t){var e=this,n=[],i=[],r={item:t=this.getItem(t),affectedItemIds:i};if(t.visible=!0,t.isEdge){var a=this._getShowEdge(t);a&&n.push(a)}else n.push(t);return t.isNode&&t.getEdges().forEach(function(t){(t=e._getShowEdge(t))&&n.push(t)}),t.isGroup&&(t.getEdges().forEach(function(t){(t=e._getShowEdge(t))&&n.push(t)}),t.deepEach(function(t){n.push(t)})),(n=s.uniq(n)).forEach(function(t){i.push(t.id)}),this.emit("beforeshow",r),n.forEach(function(t){t.show()}),this.emit("aftershow",r),this},e.getWidth=function(){return this.get("width")},e.getHeight=function(){return this.get("height")},e.changeSize=function(t,e){if(!(Math.abs(t)>=1/0||Math.abs(e)>=1/0)){var n=this.get("_canvas");return t===this.get("width")&&e===this.get("height")||(this.emit("beforechangesize"),n.changeSize(t,e),this.set("width",t),this.set("height",e),this.emit("afterchangesize"),this.draw()),this}console.warn("size parameter more than the maximum")},e.toFront=function(t){t=this.getItem(t);var e=this.get("_itemGroup"),n=t.getGraphicGroup();s.toFront(n,e),this.draw()},e.toBack=function(t){t=this.getItem(t);var e=this.get("_itemGroup"),n=t.getGraphicGroup();s.toBack(n,e),this.draw()},e.css=function(t){var e=this.getGraphContainer();s.modifyCSS(e,t)},e.saveImage=function(t){var e=this.getBBox(),n=this.getFitViewPadding();return new l(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}({graph:this,width:e.width+n[1]+n[3],height:e.height+n[0]+n[2]},t)).toCanvas()},n}(r);x.forEach(function(t){s.mix(_.prototype,t.AUGMENT)}),t.exports=_},function(t,e){var n={registerBehaviour:function(t,e,i){e.dependences=i,n[t]=e},resetMode:function(t,e){var i,r=[];e._off();for(var a=0;a<t.length;a++)(i=n[t[a]])&&(i.dependences&&i.dependences.forEach(function(t){t&&-1===r.indexOf(t)&&(n[t](e),r.push(t))}),i&&-1===r.indexOf(i)&&i(e))}};t.exports=n},function(t,e,n){var i=n(17),r=n(37),a=function t(e){t.superclass.constructor.call(this,e)};a.ATTRS={x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom",lineHeight:null,textArr:null},i.extend(a,r),i.augment(a,{canFill:!0,canStroke:!0,type:"text",getDefaultAttrs:function(){return{lineWidth:1,lineCount:1,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"}},initTransform:function(){var t=this._attrs.fontSize;t&&+t<12&&this.transform([["t",-1*this._attrs.x,-1*this._attrs.y],["s",+t/12,+t/12],["t",this._attrs.x,this._attrs.y]])},_assembleFont:function(){var t=this._attrs,e=t.fontSize,n=t.fontFamily,i=t.fontWeight,r=t.fontStyle,a=t.fontVariant;t.font=[r,a,i,e+"px",n].join(" ")},_setAttrText:function(){var t=this._attrs,e=t.text,n=null;if(i.isString(e)&&-1!==e.indexOf("\n")){var r=(n=e.split("\n")).length;t.lineCount=r}t.textArr=n},_getTextHeight:function(){var t=this._attrs,e=t.lineCount,n=1*t.fontSize;return e>1?n*e+this._getSpaceingY()*(e-1):n},isHitBox:function(){return!1},calculateBox:function(){var t=this._attrs,e=this._cfg;e.attrs&&!e.hasUpdate||(this._assembleFont(),this._setAttrText()),t.textArr||this._setAttrText();var n=t.x,i=t.y,r=this.measureText();if(!r)return{minX:n,minY:i,maxX:n,maxY:i};var a=this._getTextHeight(),o=t.textAlign,s=t.textBaseline,l=this.getHitLineWidth(),u={x:n,y:i-a};o&&("end"===o||"right"===o?u.x-=r:"center"===o&&(u.x-=r/2)),s&&("top"===s?u.y+=a:"middle"===s&&(u.y+=a/2)),this.set("startPoint",u);var c=l/2;return{minX:u.x-c,minY:u.y-c,maxX:u.x+r+c,maxY:u.y+a+c}},_getSpaceingY:function(){var t=this._attrs,e=t.lineHeight,n=1*t.fontSize;return e?e-n:.14*n},drawInner:function(t){var e=this._attrs,n=this._cfg;n.attrs&&!n.hasUpdate||(this._assembleFont(),this._setAttrText()),t.font=e.font;var r=e.text;if(r){var a=e.textArr,o=e.x,s=e.y;if(t.beginPath(),this.hasStroke()){var l=e.strokeOpacity;i.isNil(l)||1===l||(t.globalAlpha=l),a?this._drawTextArr(t,!1):t.strokeText(r,o,s),t.globalAlpha=1}if(this.hasFill()){var u=e.fillOpacity;i.isNil(u)||1===u||(t.globalAlpha=u),a?this._drawTextArr(t,!0):t.fillText(r,o,s)}n.hasUpdate=!1}},_drawTextArr:function(t,e){var n,r=this._attrs.textArr,a=this._attrs.textBaseline,o=1*this._attrs.fontSize,s=this._getSpaceingY(),l=this._attrs.x,u=this._attrs.y,c=this.getBBox(),h=c.maxY-c.minY;i.each(r,function(i,r){n=u+r*(s+o)-h+o,"middle"===a&&(n+=h-o-(h-o)/2),"top"===a&&(n+=h-o),e?t.fillText(i,l,n):t.strokeText(i,l,n)})},measureText:function(){var t,e=this._attrs,n=e.text,r=e.font,a=e.textArr,o=0;if(!i.isNil(n)){var s=document.createElement("canvas").getContext("2d");return s.save(),s.font=r,a?i.each(a,function(e){t=s.measureText(e).width,o<t&&(o=t),s.restore()}):(o=s.measureText(n).width,s.restore()),o}}}),t.exports=a},function(t,e,n){var i=n(17),r=n(356).parseRadius,a=n(37),o=function t(e){t.superclass.constructor.call(this,e)};o.ATTRS={x:0,y:0,width:0,height:0,radius:0,lineWidth:1},i.extend(o,a),i.augment(o,{canFill:!0,canStroke:!0,type:"rect",getDefaultAttrs:function(){return{lineWidth:1,radius:0}},calculateBox:function(){var t=this._attrs,e=t.x,n=t.y,i=t.width,r=t.height,a=this.getHitLineWidth()/2;return{minX:e-a,minY:n-a,maxX:e+i+a,maxY:n+r+a}},createPath:function(t){var e=this._attrs,n=e.x,i=e.y,a=e.width,o=e.height,s=e.radius;if((t=t||this.get("context")).beginPath(),0===s)t.rect(n,i,a,o);else{var l=r(s);t.moveTo(n+l.r1,i),t.lineTo(n+a-l.r2,i),0!==l.r2&&t.arc(n+a-l.r2,i+l.r2,l.r2,-Math.PI/2,0),t.lineTo(n+a,i+o-l.r3),0!==l.r3&&t.arc(n+a-l.r3,i+o-l.r3,l.r3,0,Math.PI/2),t.lineTo(n+l.r4,i+o),0!==l.r4&&t.arc(n+l.r4,i+o-l.r4,l.r4,Math.PI/2,Math.PI),t.lineTo(n,i+l.r1),0!==l.r1&&t.arc(n+l.r1,i+l.r1,l.r1,Math.PI,1.5*Math.PI),t.closePath()}}}),t.exports=o},function(t,e,n){var i=n(17),r=n(37),a=n(364),o=n(366),s=function t(e){t.superclass.constructor.call(this,e)};s.ATTRS={points:null,lineWidth:1,startArrow:!1,endArrow:!1,tCache:null},i.extend(s,r),i.augment(s,{canStroke:!0,type:"polyline",tCache:null,getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var t=this._attrs,e=this.getHitLineWidth(),n=t.points;if(!n||0===n.length)return null;var r=1/0,a=1/0,o=-1/0,s=-1/0;i.each(n,function(t){var e=t[0],n=t[1];e<r&&(r=e),e>o&&(o=e),n<a&&(a=n),n>s&&(s=n)});var l=e/2;return{minX:r-l,minY:a-l,maxX:o+l,maxY:s+l}},_setTcache:function(){var t,e,n=this._attrs.points,r=0,a=0,s=[];n&&0!==n.length&&(i.each(n,function(t,e){n[e+1]&&(r+=o.len(t[0],t[1],n[e+1][0],n[e+1][1]))}),r<=0||(i.each(n,function(i,l){n[l+1]&&((t=[])[0]=a/r,e=o.len(i[0],i[1],n[l+1][0],n[l+1][1]),a+=e,t[1]=a/r,s.push(t))}),this.tCache=s))},createPath:function(t){var e,n,i=this._attrs.points;if(!(i.length<2)){for((t=t||this.get("context")).beginPath(),t.moveTo(i[0][0],i[0][1]),n=1,e=i.length-1;n<e;n++)t.lineTo(i[n][0],i[n][1]);t.lineTo(i[e][0],i[e][1])}},getStartTangent:function(){var t=this.__attrs.points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},getEndTangent:function(){var t=this.__attrs.points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},afterPath:function(t){var e=this._attrs,n=e.points,i=n.length-1;t=t||this.get("context"),e.startArrow&&a.addStartArrow(t,e,n[1][0],n[1][1],n[0][0],n[0][1]),e.endArrow&&a.addEndArrow(t,e,n[i-1][0],n[i-1][1],n[i][0],n[i][1])},getPoint:function(t){var e,n,r=this._attrs.points,a=this.tCache;return a||(this._setTcache(),a=this.tCache),i.each(a,function(i,r){t>=i[0]&&t<=i[1]&&(e=(t-i[0])/(i[1]-i[0]),n=r)}),{x:o.at(r[n][0],r[n+1][0],e),y:o.at(r[n][1],r[n+1][1],e)}}}),t.exports=s},function(t,e,n){var i=n(17),r=n(37),a=function t(e){t.superclass.constructor.call(this,e)};a.ATTRS={points:null,lineWidth:1},i.extend(a,r),i.augment(a,{canFill:!0,canStroke:!0,type:"polygon",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var t=this._attrs.points,e=this.getHitLineWidth();if(!t||0===t.length)return null;var n=1/0,r=1/0,a=-1/0,o=-1/0;i.each(t,function(t){var e=t[0],i=t[1];e<n&&(n=e),e>a&&(a=e),i<r&&(r=i),i>o&&(o=i)});var s=e/2;return{minX:n-s,minY:r-s,maxX:a+s,maxY:o+s}},createPath:function(t){var e=this._attrs.points;e.length<2||((t=t||this.get("context")).beginPath(),i.each(e,function(e,n){0===n?t.moveTo(e[0],e[1]):t.lineTo(e[0],e[1])}),t.closePath())}}),t.exports=a},function(t,e,n){var i=n(17),r=n(37),a=n(363),o=n(356),s=n(364),l=n(373),u=n(375),c=function t(e){t.superclass.constructor.call(this,e)};c.ATTRS={path:null,lineWidth:1,startArrow:!1,endArrow:!1},i.extend(c,r),i.augment(c,{canFill:!0,canStroke:!0,type:"path",getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},_afterSetAttrPath:function(t){if(i.isNil(t))return this.setSilent("segments",null),void this.setSilent("box",void 0);var e,n=o.parsePath(t),r=[];if(i.isArray(n)&&0!==n.length&&("M"===n[0][0]||"m"===n[0][0])){for(var s=n.length,l=0;l<n.length;l++){var u=n[l];e=new a(u,e,l===s-1),r.push(e)}this.setSilent("segments",r),this.setSilent("tCache",null),this.setSilent("box",null)}},calculateBox:function(){var t=this.get("segments");if(!t)return null;var e=this.getHitLineWidth(),n=1/0,r=-1/0,a=1/0,o=-1/0;return i.each(t,function(t){t.getBBox(e);var i=t.box;i&&(i.minX<n&&(n=i.minX),i.maxX>r&&(r=i.maxX),i.minY<a&&(a=i.minY),i.maxY>o&&(o=i.maxY))}),n===1/0||a===1/0?{minX:0,minY:0,maxX:0,maxY:0}:{minX:n,minY:a,maxX:r,maxY:o}},_setTcache:function(){var t,e,n,r,a=0,o=0,s=[],l=this._cfg.curve;l&&(i.each(l,function(t,e){n=l[e+1],r=t.length,n&&(a+=u.len(t[r-2],t[r-1],n[1],n[2],n[3],n[4],n[5],n[6]))}),i.each(l,function(i,c){n=l[c+1],r=i.length,n&&((t=[])[0]=o/a,e=u.len(i[r-2],i[r-1],n[1],n[2],n[3],n[4],n[5],n[6]),o+=e,t[1]=o/a,s.push(t))}),this._cfg.tCache=s)},_calculateCurve:function(){var t=this._attrs.path;this._cfg.curve=l.pathTocurve(t)},getStartTangent:function(){var t,e,n,r,a=this.get("segments");if(a.length>1)if(t=a[0].endPoint,e=a[1].endPoint,n=a[1].startTangent,r=[],i.isFunction(n)){var o=n();r.push([t.x-o[0],t.y-o[1]]),r.push([t.x,t.y])}else r.push([e.x,e.y]),r.push([t.x,t.y]);return r},getEndTangent:function(){var t,e,n,r,a=this.get("segments"),o=a.length;if(o>1)if(t=a[o-2].endPoint,e=a[o-1].endPoint,n=a[o-1].endTangent,r=[],i.isFunction(n)){var s=n();r.push([e.x-s[0],e.y-s[1]]),r.push([e.x,e.y])}else r.push([t.x,t.y]),r.push([e.x,e.y]);return r},getPoint:function(t){var e,n,r=this._cfg.tCache;r||(this._calculateCurve(),this._setTcache(),r=this._cfg.tCache);var a=this._cfg.curve;if(!r)return a?{x:a[0][1],y:a[0][2]}:null;i.each(r,function(i,r){t>=i[0]&&t<=i[1]&&(e=(t-i[0])/(i[1]-i[0]),n=r)});var o=a[n];if(i.isNil(o)||i.isNil(n))return null;var s=o.length,l=a[n+1];return{x:u.at(o[s-2],l[1],l[3],l[5],1-e),y:u.at(o[s-1],l[2],l[4],l[6],1-e)}},createPath:function(t){var e=this.get("segments");if(i.isArray(e)){(t=t||this.get("context")).beginPath();for(var n=e.length,r=0;r<n;r++)e[r].draw(t)}},afterPath:function(t){var e=this._attrs,n=this.get("segments"),r=e.path;if(t=t||this.get("context"),i.isArray(n)&&1!==n.length&&(e.startArrow||e.endArrow)&&"z"!==r[r.length-1]&&"Z"!==r[r.length-1]&&!e.fill){var a=this.getStartTangent();s.addStartArrow(t,e,a[0][0],a[0][1],a[1][0],a[1][1]);var o=this.getEndTangent();s.addEndArrow(t,e,o[0][0],o[0][1],o[1][0],o[1][1])}}}),t.exports=c},function(t,e,n){var i=n(17),r=n(37),a=n(364),o=n(366),s=function t(e){t.superclass.constructor.call(this,e)};s.ATTRS={x1:0,y1:0,x2:0,y2:0,lineWidth:1,startArrow:!1,endArrow:!1},i.extend(s,r),i.augment(s,{canStroke:!0,type:"line",getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var t=this._attrs,e=t.x1,n=t.y1,i=t.x2,r=t.y2,a=this.getHitLineWidth();return o.box(e,n,i,r,a)},createPath:function(t){var e=this._attrs,n=e.x1,i=e.y1,r=e.x2,a=e.y2;(t=t||self.get("context")).beginPath(),t.moveTo(n,i),t.lineTo(r,a)},afterPath:function(t){var e=this._attrs,n=e.x1,i=e.y1,r=e.x2,o=e.y2;t=t||this.get("context"),e.startArrow&&a.addStartArrow(t,e,r,o,n,i),e.endArrow&&a.addEndArrow(t,e,n,i,r,o)},getPoint:function(t){var e=this._attrs;return{x:o.at(e.x1,e.x2,t),y:o.at(e.y1,e.y2,t)}}}),t.exports=s},function(t,e,n){var i=n(17),r=n(37),a=function t(e){t.superclass.constructor.call(this,e)};a.ATTRS={x:0,y:0,img:void 0,width:0,height:0,sx:null,sy:null,swidth:null,sheight:null},i.extend(a,r),i.augment(a,{type:"image",isHitBox:function(){return!1},calculateBox:function(){var t=this._attrs;this._cfg.attrs&&this._cfg.attrs.img===t.img||this._setAttrImg();var e=t.x,n=t.y;return{minX:e,minY:n,maxX:e+t.width,maxY:n+t.height}},_beforeSetLoading:function(t){var e=this.get("canvas");return!1===t&&!0===this.get("toDraw")&&(this._cfg.loading=!1,e.draw()),t},_setAttrImg:function(){var t=this,e=t._attrs,n=e.img;if(!i.isString(n))return n instanceof Image?(e.width||t.attr("width",n.width),e.height||t.attr("height",n.height),n):n instanceof HTMLElement&&i.isString(n.nodeName)&&"CANVAS"===n.nodeName.toUpperCase()?(e.width||t.attr("width",Number(n.getAttribute("width"))),e.height||t.attr("height",Number(n.getAttribute("height"))),n):n instanceof ImageData?(e.width||t.attr("width",n.width),e.height||t.attr("height",n.height),n):null;var r=new Image;r.onload=function(){if(t.get("destroyed"))return!1;t.attr("imgSrc",n),t.attr("img",r);var e=t.get("callback");e&&e.call(t),t.set("loading",!1)},r.src=n,r.crossOrigin="Anonymous",t.set("loading",!0)},drawInner:function(t){this._cfg.hasUpdate&&this._setAttrImg(),this.get("loading")?this.set("toDraw",!0):(this._drawImage(t),this._cfg.hasUpdate=!1)},_drawImage:function(t){var e=this._attrs,n=e.x,r=e.y,a=e.img,o=e.width,s=e.height,l=e.sx,u=e.sy,c=e.swidth,h=e.sheight;this.set("toDraw",!1);var d=a;if(d instanceof ImageData&&((d=new Image).src=a),d instanceof Image||d instanceof HTMLElement&&i.isString(d.nodeName)&&"CANVAS"===d.nodeName.toUpperCase()){if(i.isNil(l)||i.isNil(u)||i.isNil(c)||i.isNil(h))return void t.drawImage(d,n,r,o,s);if(!(i.isNil(l)||i.isNil(u)||i.isNil(c)||i.isNil(h)))return void t.drawImage(d,l,u,c,h,n,r,o,s)}}}),t.exports=a},function(t,e,n){var i=n(17),r=n(37),a=n(365),o=function t(e){t.superclass.constructor.call(this,e)};o.ATTRS={x:0,y:0,rs:0,re:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1},i.extend(o,r),i.augment(o,{canFill:!0,canStroke:!0,type:"fan",getDefaultAttrs:function(){return{clockwise:!1,lineWidth:1,rs:0,re:0}},calculateBox:function(){var t=this._attrs,e=t.x,n=t.y,i=t.rs,r=t.re,o=t.startAngle,s=t.endAngle,l=t.clockwise,u=this.getHitLineWidth(),c=a.box(e,n,i,o,s,l),h=a.box(e,n,r,o,s,l),d=u/2;return{minX:Math.min(c.minX,h.minX)-d,minY:Math.min(c.minY,h.minY)-d,maxX:Math.max(c.maxX,h.maxX)+d,maxY:Math.max(c.maxY,h.maxY)+d}},createPath:function(t){var e=this._attrs,n=e.x,i=e.y,r=e.rs,a=e.re,o=e.startAngle,s=e.endAngle,l=e.clockwise,u={x:Math.cos(o)*r+n,y:Math.sin(o)*r+i},c={x:Math.cos(o)*a+n,y:Math.sin(o)*a+i},h={x:Math.cos(s)*r+n,y:Math.sin(s)*r+i};(t=t||self.get("context")).beginPath(),t.moveTo(u.x,u.y),t.lineTo(c.x,c.y),t.arc(n,i,a,o,s,l),t.lineTo(h.x,h.y),t.arc(n,i,r,s,o,!l),t.closePath()}}),t.exports=o},function(t,e,n){var i=n(17),r=n(37),a=function t(e){t.superclass.constructor.call(this,e)};a.ATTRS={x:0,y:0,rx:1,ry:1,lineWidth:1},i.extend(a,r),i.augment(a,{canFill:!0,canStroke:!0,type:"ellipse",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var t=this._attrs,e=t.x,n=t.y,i=t.rx,r=t.ry,a=this.getHitLineWidth(),o=i+a/2,s=r+a/2;return{minX:e-o,minY:n-s,maxX:e+o,maxY:n+s}},createPath:function(t){var e=this._attrs,n=e.x,r=e.y,a=e.rx,o=e.ry;t=t||self.get("context");var s=a>o?a:o,l=a>o?1:a/o,u=a>o?o/a:1,c=[1,0,0,0,1,0,0,0,1];i.mat3.scale(c,c,[l,u]),i.mat3.translate(c,c,[n,r]),t.beginPath(),t.save(),t.transform(c[0],c[1],c[3],c[4],c[6],c[7]),t.arc(0,0,s,0,2*Math.PI),t.restore(),t.closePath()}}),t.exports=a},function(t,e,n){var i=n(17),r=n(37),a=function t(e){t.superclass.constructor.call(this,e)};i.extend(a,r),i.augment(a,{canFill:!0,canStroke:!0,type:"dom",calculateBox:function(){var t=this._attrs,e=t.x,n=t.y,i=t.width,r=t.height,a=this.getHitLineWidth()/2;return{minX:e-a,minY:n-a,maxX:e+i+a,maxY:n+r+a}}}),t.exports=a},function(t,e,n){var i=n(17),r=n(37),a=function t(e){t.superclass.constructor.call(this,e)};a.ATTRS={x:0,y:0,r:0,lineWidth:1},i.extend(a,r),i.augment(a,{canFill:!0,canStroke:!0,type:"circle",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var t=this._attrs,e=t.x,n=t.y,i=t.r,r=this.getHitLineWidth()/2+i;return{minX:e-r,minY:n-r,maxX:e+r,maxY:n+r}},createPath:function(t){var e=this._attrs,n=e.x,i=e.y,r=e.r;t.beginPath(),t.arc(n,i,r,0,2*Math.PI,!1),t.closePath()}}),t.exports=a},function(t,e,n){var i=n(17),r=n(37),a=n(365),o=n(364);function s(t,e,n){return t+e*Math.cos(n)}function l(t,e,n){return t+e*Math.sin(n)}var u=function t(e){t.superclass.constructor.call(this,e)};u.ATTRS={x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,startArrow:!1,endArrow:!1},i.extend(u,r),i.augment(u,{canStroke:!0,type:"arc",getDefaultAttrs:function(){return{x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var t=this._attrs,e=t.x,n=t.y,i=t.r,r=t.startAngle,o=t.endAngle,s=t.clockwise,l=this.getHitLineWidth()/2,u=a.box(e,n,i,r,o,s);return u.minX-=l,u.minY-=l,u.maxX+=l,u.maxY+=l,u},getStartTangent:function(){var t=this._attrs,e=t.x,n=t.y,i=t.startAngle,r=t.r,a=t.clockwise,o=Math.PI/180;a&&(o*=-1);var u=[],c=s(e,r,i+o),h=l(n,r,i+o),d=s(e,r,i),f=l(n,r,i);return u.push([c,h]),u.push([d,f]),u},getEndTangent:function(){var t=this._attrs,e=t.x,n=t.y,i=t.endAngle,r=t.r,a=t.clockwise,o=Math.PI/180,u=[];a&&(o*=-1);var c=s(e,r,i+o),h=l(n,r,i+o),d=s(e,r,i),f=l(n,r,i);return u.push([d,f]),u.push([c,h]),u},createPath:function(t){var e=this._attrs,n=e.x,i=e.y,r=e.r,a=e.startAngle,o=e.endAngle,s=e.clockwise;(t=t||self.get("context")).beginPath(),t.arc(n,i,r,a,o,s)},afterPath:function(t){var e=this._attrs;if(t=t||this.get("context"),e.startArrow){var n=this.getStartTangent();o.addStartArrow(t,e,n[0][0],n[0][1],n[1][0],n[1][1])}if(e.endArrow){var i=this.getEndTangent();o.addEndArrow(t,e,i[0][0],i[0][1],i[1][0],i[1][1])}}}),t.exports=u},function(t,e){t.exports={xAt:function(t,e,n,i,r){return e*Math.cos(t)*Math.cos(r)-n*Math.sin(t)*Math.sin(r)+i},yAt:function(t,e,n,i,r){return e*Math.sin(t)*Math.cos(r)+n*Math.cos(t)*Math.sin(r)+i},xExtrema:function(t,e,n){return Math.atan(-n/e*Math.tan(t))},yExtrema:function(t,e,n){return Math.atan(n/(e*Math.tan(t)))}}},function(t,e,n){var i=n(17),r=i.vec2;function a(t,e,n,i){var r=1-i;return r*(r*t+2*i*e)+i*i*n}function o(t,e,n,i,o,s,l,u,c){var h,d,f,p,g,m,v,y=.005,x=1/0,_=[l,u];for(g=0;g<1;g+=.05)f=[a(t,n,o,g),a(e,i,s,g)],(d=r.squaredDistance(_,f))<x&&(h=g,x=d);for(x=1/0,v=0;v<32&&!(y<1e-4);v++){var b=h-y,w=h+y;f=[a(t,n,o,b),a(e,i,s,b)],d=r.squaredDistance(_,f),b>=0&&d<x?(h=b,x=d):(p=[a(t,n,o,w),a(e,i,s,w)],m=r.squaredDistance(_,p),w<=1&&m<x?(h=w,x=m):y*=.5)}return c&&(c.x=a(t,n,o,h),c.y=a(e,i,s,h)),Math.sqrt(x)}t.exports={at:a,projectPoint:function(t,e,n,i,r,a,s,l){var u={};return o(t,e,n,i,r,a,s,l,u),u},pointDistance:o,extrema:function(t,e,n){var r=t+n-2*e;if(i.isNumberEqual(r,0))return[.5];var a=(t-e)/r;return a<=1&&a>=0?[a]:[]}}},function(t,e,n){var i=n(17),r=n(512),a=n(511),o=n(510),s=n(61),l=function(t){this._cfg={zIndex:0,capture:!0,visible:!0,destroyed:!1},i.assign(this._cfg,this.getDefaultCfg(),t),this.initAttrs(this._cfg.attrs),this._cfg.attrs={},this.initTransform(),this.init()};l.CFG={id:null,zIndex:0,canvas:null,parent:null,capture:!0,context:null,visible:!0,destroyed:!1},i.augment(l,r,a,s,o,{init:function(){this.setSilent("animable",!0),this.setSilent("animating",!1)},getParent:function(){return this._cfg.parent},getDefaultCfg:function(){return{}},set:function(t,e){return"zIndex"===t&&this._beforeSetZIndex&&this._beforeSetZIndex(e),"loading"===t&&this._beforeSetLoading&&this._beforeSetLoading(e),this._cfg[t]=e,this},setSilent:function(t,e){this._cfg[t]=e},get:function(t){return this._cfg[t]},show:function(){return this._cfg.visible=!0,this},hide:function(){return this._cfg.visible=!1,this},remove:function(t,e){var n=this._cfg,r=n.parent,a=n.el;return r&&i.remove(r.get("children"),this),a&&(e?r&&r._cfg.tobeRemoved.push(a):a.parentNode.removeChild(a)),(t||void 0===t)&&this.destroy(),this},destroy:function(){this.get("destroyed")||(this._attrs=null,this.removeEvent(),this._cfg={destroyed:!0})},toFront:function(){var t=this._cfg,e=t.parent;if(e){var n=e._cfg.children,i=t.el,r=n.indexOf(this);n.splice(r,1),n.push(this),i&&(i.parentNode.removeChild(i),t.el=null)}},toBack:function(){var t=this._cfg,e=t.parent;if(e){var n=e._cfg.children,i=t.el,r=n.indexOf(this);if(n.splice(r,1),n.unshift(this),i){var a=i.parentNode;a.removeChild(i),a.insertBefore(i,a.firstChild)}}},_beforeSetZIndex:function(t){var e=this._cfg.parent;this._cfg.zIndex=t,i.isNil(e)||e.sort();var n=this._cfg.el;if(n){var r=e._cfg.children,a=r.indexOf(this),o=n.parentNode;o.removeChild(n),a===r.length-1?o.appendChild(n):o.insertBefore(n,o.childNodes[a])}return t},_setAttrs:function(t){return this.attr(t),t},setZIndex:function(t){return this._cfg.zIndex=t,this._beforeSetZIndex(t)},clone:function(){return i.clone(this)},getBBox:function(){}}),t.exports=l},function(t,e,n){var i=n(17),r=n(405),a=n(509),o={},s="_INDEX";function l(t,e,n){for(var i,r=t.length-1;r>=0;r--){var a=t[r];if(a._cfg.visible&&a._cfg.capture&&(a.isGroup?i=a.getShape(e,n):a.isHit(e,n)&&(i=a)),i)break}return i}var u=function t(e){t.superclass.constructor.call(this,e),this.set("children",[]),this.set("tobeRemoved",[]),this._beforeRenderUI(),this._renderUI(),this._bindUI()};i.extend(u,r),i.augment(u,{isGroup:!0,type:"group",canFill:!0,canStroke:!0,getDefaultCfg:function(){return function t(e){if(!e._cfg&&e!==u){var n=e.superclass.constructor;n&&!n._cfg&&t(n),e._cfg={},i.merge(e._cfg,n._cfg),i.merge(e._cfg,e.CFG)}}(this.constructor),i.merge({},this.constructor._cfg)},_beforeRenderUI:function(){},_renderUI:function(){},_bindUI:function(){},addShape:function(t,e){var n=this.get("canvas");e=e||{};var r=o[t];if(r||(r=i.upperFirst(t),o[t]=r),e.attrs&&n){var s=e.attrs;if("text"===t){var l=n.get("fontFamily");l&&(s.fontFamily=s.fontFamily?s.fontFamily:l)}}e.canvas=n,e.type=t;var u=new a[r](e);return this.add(u),u},addGroup:function(t,e){var n,r=this.get("canvas");if(e=i.merge({},e),i.isFunction(t))e?(e.canvas=r,e.parent=this,n=new t(e)):n=new t({canvas:r,parent:this}),this.add(n);else if(i.isObject(t))t.canvas=r,n=new u(t),this.add(n);else{if(void 0!==t)return!1;n=new u,this.add(n)}return n},renderBack:function(t,e){var n=this.get("backShape"),r=this.getBBox();return i.merge(e,{x:r.minX-t[3],y:r.minY-t[0],width:r.width+t[1]+t[3],height:r.height+t[0]+t[2]}),n?n.attr(e):n=this.addShape("rect",{zIndex:-1,attrs:e}),this.set("backShape",n),this.sort(),n},removeChild:function(t,e){if(arguments.length>=2)this.contain(t)&&t.remove(e);else{if(1===arguments.length){if(!i.isBoolean(t))return this.contain(t)&&t.remove(!0),this;e=t}0===arguments.length&&(e=!0),u.superclass.remove.call(this,e)}return this},add:function(t){var e=this,n=e.get("children");if(i.isArray(t))i.each(t,function(t){var n=t.get("parent");n&&n.removeChild(t,!1),e._setCfgProperty(t)}),e._cfg.children=n.concat(t);else{var r=t,a=r.get("parent");a&&a.removeChild(r,!1),e._setCfgProperty(r),n.push(r)}return e},_setCfgProperty:function(t){var e=this._cfg;t.set("parent",this),t.set("canvas",e.canvas),e.timeline&&t.set("timeline",e.timeline)},contain:function(t){return this.get("children").indexOf(t)>-1},getChildByIndex:function(t){return this.get("children")[t]},getFirst:function(){return this.getChildByIndex(0)},getLast:function(){var t=this.get("children").length-1;return this.getChildByIndex(t)},getBBox:function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,a=this.get("children");a.length>0?i.each(a,function(i){if(i.get("visible")){if(i.isGroup&&0===i.get("children").length)return;var a=i.getBBox();if(!a)return!0;var o=[a.minX,a.minY,1],s=[a.minX,a.maxY,1],l=[a.maxX,a.minY,1],u=[a.maxX,a.maxY,1];i.apply(o),i.apply(s),i.apply(l),i.apply(u);var c=Math.min(o[0],s[0],l[0],u[0]),h=Math.max(o[0],s[0],l[0],u[0]),d=Math.min(o[1],s[1],l[1],u[1]),f=Math.max(o[1],s[1],l[1],u[1]);c<t&&(t=c),h>e&&(e=h),d<n&&(n=d),f>r&&(r=f)}}):(t=0,e=0,n=0,r=0);var o={minX:t,minY:n,maxX:e,maxY:r};return o.x=o.minX,o.y=o.minY,o.width=o.maxX-o.minX,o.height=o.maxY-o.minY,o},getCount:function(){return this.get("children").length},sort:function(){var t=this.get("children");return i.each(t,function(t,e){return t[s]=e,t}),t.sort(function(t,e){var n=function(t,e){return t.get("zIndex")-e.get("zIndex")}(t,e);return 0===n?t[s]-e[s]:n}),this},findById:function(t){return this.find(function(e){return e.get("id")===t})},find:function(t){if(i.isString(t))return this.findById(t);var e=this.get("children"),n=null;return i.each(e,function(e){if(t(e)?n=e:e.find&&(n=e.find(t)),n)return!1}),n},findAll:function(t){var e=this.get("children"),n=[],r=[];return i.each(e,function(e){t(e)&&n.push(e),e.findAllBy&&(r=e.findAllBy(t),n=n.concat(r))}),n},findBy:function(t){var e=this.get("children"),n=null;return i.each(e,function(e){if(t(e)?n=e:e.findBy&&(n=e.findBy(t)),n)return!1}),n},findAllBy:function(t){var e=this.get("children"),n=[],r=[];return i.each(e,function(e){t(e)&&n.push(e),e.findAllBy&&(r=e.findAllBy(t),n=n.concat(r))}),n},getShape:function(t,e){var n,i=this._attrs.clip,r=this._cfg.children;if(i){var a=[t,e,1];i.invert(a,this.get("canvas")),i.isPointInPath(a[0],a[1])&&(n=l(r,t,e))}else n=l(r,t,e);return n},clearTotalMatrix:function(){if(this.get("totalMatrix")){this.setSilent("totalMatrix",null);for(var t=this._cfg.children,e=0;e<t.length;e++)t[e].clearTotalMatrix()}},clear:function(t){for(var e=this._cfg.children,n=e.length-1;n>=0;n--)e[n].remove(!0,t);return this._cfg.children=[],this},destroy:function(){this.get("destroyed")||(this.clear(),u.superclass.destroy.call(this))},clone:function(){var t=this._cfg.children,e=new u;return i.each(t,function(t){e.add(t.clone())}),e}}),t.exports=u},function(t,e,n){var i=n(17),r=function(t,e,n,i){this.type=t,this.target=null,this.currentTarget=null,this.bubbles=n,this.cancelable=i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.removed=!1,this.event=e};i.augment(r,{preventDefault:function(){this.defaultPrevented=this.cancelable&&!0},stopPropagation:function(){this.propagationStopped=!0},remove:function(){this.remove=!0},clone:function(){return i.clone(this)},toString:function(){return"[Event (type="+this.type+")]"}}),t.exports=r},function(t,e,n){t.exports={isFunction:n(47),isObject:n(385),isBoolean:n(419),isNil:n(136),isString:n(358),isArray:n(29),isNumber:n(135),isEmpty:n(413),uniqueId:n(412),clone:n(380),deepMix:n(379),assign:n(369),merge:n(379),upperFirst:n(421),each:n(30),isEqual:n(378),toArray:n(367),extend:n(416),augment:n(417),remove:n(442),isNumberEqual:n(439),toRadian:n(435),toDegree:n(437),mod:n(438),clamp:n(382),createDom:n(447),modifyCSS:n(446),requestAnimationFrame:n(445),getRatio:function(){return window.devicePixelRatio?window.devicePixelRatio:2},mat3:n(381),vec2:n(434),vec3:n(433),transform:n(432)}},function(t,e,n){var i=n(410).Symbol;t.exports=i},function(t,e,n){var i=n(521),r="object"==typeof self&&self&&self.Object===Object&&self,a=i||r||Function("return this")();t.exports=a},function(t,e,n){var i=n(377),r=n(522),a=n(520),o=Math.max,s=Math.min;t.exports=function(t,e,n){var l,u,c,h,d,f,p=0,g=!1,m=!1,v=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var n=l,i=u;return l=u=void 0,p=e,h=t.apply(i,n)}function x(t){var n=t-f;return void 0===f||n>=e||n<0||m&&t-p>=c}function _(){var t=r();if(x(t))return b(t);d=setTimeout(_,function(t){var n=e-(t-f);return m?s(n,c-(t-p)):n}(t))}function b(t){return d=void 0,v&&l?y(t):(l=u=void 0,h)}function w(){var t=r(),n=x(t);if(l=arguments,u=this,f=t,n){if(void 0===d)return function(t){return p=t,d=setTimeout(_,e),g?y(t):h}(f);if(m)return d=setTimeout(_,e),y(f)}return void 0===d&&(d=setTimeout(_,e)),h}return e=a(e)||0,i(n)&&(g=!!n.leading,c=(m="maxWait"in n)?o(a(n.maxWait)||0,e):c,v="trailing"in n?!!n.trailing:v),w.cancel=function(){void 0!==d&&clearTimeout(d),p=0,l=f=u=d=void 0},w.flush=function(){return void 0===d?h:b(r())},w}},function(t,e){var n=function(){var t={};return function(e){return t[e=e||"g"]?t[e]+=1:t[e]=1,e+t[e]}}();t.exports=n},function(t,e,n){var i=n(136),r=n(62),a=n(420),o=n(418),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(i(t))return!0;if(r(t))return!t.length;var e=a(t);if("Map"===e||"Set"===e)return!t.size;if(o(t))return!Object.keys(t).length;for(var n in t)if(s.call(t,n))return!1;return!0}},function(t,e,n){var i=n(30),r=n(29),a=Object.prototype.hasOwnProperty;t.exports=function(t,e){if(!e||!r(t))return t;var n={},o=null;return i(t,function(t){o=e(t),a.call(n,o)?n[o].push(t):n[o]=[t]}),n}},function(t,e,n){var i=n(47),r=n(29),a=n(414);t.exports=function(t,e){if(!e)return{0:t};if(!i(e)){var n=r(e)?e:e.replace(/\s+/g,"").split("*");e=function(t){for(var e="_",i=0,r=n.length;i<r;i++)e+=t[n[i]]&&t[n[i]].toString();return e}}return a(t,e)}},function(t,e,n){var i=n(47),r=n(369);t.exports=function(t,e,n,a){i(e)||(n=e,e=t,t=function(){});var o=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function n(){}n.prototype=t;var i=new n;return i.constructor=e,i},s=o(e.prototype,t);return t.prototype=r(s,t.prototype),t.superclass=o(e.prototype,e),r(s,n),r(t,a),t}},function(t,e,n){var i=n(47),r=n(367),a=n(369);t.exports=function(t){for(var e=r(arguments),n=1;n<e.length;n++){var o=e[n];i(o)&&(o=o.prototype),a(t.prototype,o)}}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var i=n(60);t.exports=function(t){return i(t,"Boolean")}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).replace(/^\[object /,"").replace(/\]$/,"")}},function(t,e,n){var i=n(357);t.exports=function(t){var e=i(t);return e.charAt(0).toUpperCase()+e.substring(1)}},function(t,e,n){var i=n(357);t.exports=function(t){return i(t).toUpperCase()}},function(t,e,n){var i=n(357);t.exports=function(t){return i(t).toLowerCase()}},function(t,e){t.exports=function(t,e){for(var n=[],i=0,r=t.length;r-2*!e>i;i+=2){var a=[{x:+t[i-2],y:+t[i-1]},{x:+t[i],y:+t[i+1]},{x:+t[i+2],y:+t[i+3]},{x:+t[i+4],y:+t[i+5]}];e?i?r-4===i?a[3]={x:+t[0],y:+t[1]}:r-2===i&&(a[2]={x:+t[0],y:+t[1]},a[3]={x:+t[2],y:+t[3]}):a[0]={x:+t[r-2],y:+t[r-1]}:r-4===i?a[3]=a[2]:i||(a[0]={x:+t[i],y:+t[i+1]}),n.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return n}},function(t,e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i="\t\n\v\f\r   ᠎             　\u2028\u2029",r=new RegExp("([a-z])["+i+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+i+"]*,?["+i+"]*)+)","ig"),a=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+i+"]*,?["+i+"]*","ig");t.exports=function(t){if(!t)return null;if((void 0===t?"undefined":n(t))===n([]))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},i=[];return String(t).replace(r,function(t,n,r){var o=[],s=n.toLowerCase();if(r.replace(a,function(t,e){e&&o.push(+e)}),"m"===s&&o.length>2&&(i.push([n].concat(o.splice(0,2))),s="l",n="m"===n?"l":"L"),"o"===s&&1===o.length&&i.push([n,o[0]]),"r"===s)i.push([n].concat(o));else for(;o.length>=e[s]&&(i.push([n].concat(o.splice(0,e[s]))),e[s]););}),i}},function(t,e,n){var i=n(425),r=n(424);function a(t,e,n,i,r){var a=[];if(null===r&&null===i&&(i=n),t=+t,e=+e,n=+n,i=+i,null!==r){var o=Math.PI/180,s=t+n*Math.cos(-i*o),l=t+n*Math.cos(-r*o);a=[["M",s,e+n*Math.sin(-i*o)],["A",n,n,0,+(r-i>180),0,l,e+n*Math.sin(-r*o)]]}else a=[["M",t,e],["m",0,-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]];return a}t.exports=function(t){if(!(t=i(t))||!t.length)return[["M",0,0]];var e=[],n=0,o=0,s=0,l=0,u=0,c=void 0,h=void 0;"M"===t[0][0]&&(s=n=+t[0][1],l=o=+t[0][2],u++,e[0]=["M",n,o]);for(var d,f,p=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),g=u,m=t.length;g<m;g++){if(e.push(d=[]),(c=(f=t[g])[0])!==c.toUpperCase())switch(d[0]=c.toUpperCase(),d[0]){case"A":d[1]=f[1],d[2]=f[2],d[3]=f[3],d[4]=f[4],d[5]=f[5],d[6]=+f[6]+n,d[7]=+f[7]+o;break;case"V":d[1]=+f[1]+o;break;case"H":d[1]=+f[1]+n;break;case"R":for(var v=2,y=(h=[n,o].concat(f.slice(1))).length;v<y;v++)h[v]=+h[v]+n,h[++v]=+h[v]+o;e.pop(),e=e.concat(r(h,p));break;case"O":e.pop(),(h=a(n,o,f[1],f[2])).push(h[0]),e=e.concat(h);break;case"U":e.pop(),e=e.concat(a(n,o,f[1],f[2],f[3])),d=["U"].concat(e[e.length-1].slice(-2));break;case"M":s=+f[1]+n,l=+f[2]+o;break;default:for(var x=1,_=f.length;x<_;x++)d[x]=+f[x]+(x%2?n:o)}else if("R"===c)h=[n,o].concat(f.slice(1)),e.pop(),e=e.concat(r(h,p)),d=["R"].concat(f.slice(-2));else if("O"===c)e.pop(),(h=a(n,o,f[1],f[2])).push(h[0]),e=e.concat(h);else if("U"===c)e.pop(),e=e.concat(a(n,o,f[1],f[2],f[3])),d=["U"].concat(e[e.length-1].slice(-2));else for(var b=0,w=f.length;b<w;b++)d[b]=f[b];if("O"!==(c=c.toUpperCase()))switch(d[0]){case"Z":n=+s,o=+l;break;case"H":n=d[1];break;case"V":o=d[1];break;case"M":s=d[d.length-2],l=d[d.length-1];break;default:n=d[d.length-2],o=d[d.length-1]}}return e}},function(t,e,n){var i=n(426),r=function(t,e,n,i){return[t,e,n,i,n,i]},a=function(t,e,n,i,r,a){return[1/3*t+2/3*n,1/3*e+2/3*i,1/3*r+2/3*n,1/3*a+2/3*i,r,a]};t.exports=function(t,e){var n=i(t),o=e&&i(e),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u=[],c=[],h="",d="",f=void 0,p=function(t,e,n){var i=void 0,o=void 0;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(function t(e,n,i,r,a,o,s,l,u,c){i===r&&(i+=1);var h=120*Math.PI/180,d=Math.PI/180*(+a||0),f=[],p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,x=function(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}};if(c)g=c[0],m=c[1],v=c[2],y=c[3];else{e=(p=x(e,n,-d)).x,n=p.y,l=(p=x(l,u,-d)).x,u=p.y,e===l&&n===u&&(l+=1,u+=1);var _=(e-l)/2,b=(n-u)/2,w=_*_/(i*i)+b*b/(r*r);w>1&&(i*=w=Math.sqrt(w),r*=w);var S=i*i,M=r*r,A=(o===s?-1:1)*Math.sqrt(Math.abs((S*M-S*b*b-M*_*_)/(S*b*b+M*_*_)));v=A*i*b/r+(e+l)/2,y=A*-r*_/i+(n+u)/2,g=Math.asin(((n-y)/r).toFixed(9)),m=Math.asin(((u-y)/r).toFixed(9)),g=e<v?Math.PI-g:g,m=l<v?Math.PI-m:m,g<0&&(g=2*Math.PI+g),m<0&&(m=2*Math.PI+m),s&&g>m&&(g-=2*Math.PI),!s&&m>g&&(m-=2*Math.PI)}var C=m-g;if(Math.abs(C)>h){var I=m,P=l,T=u;m=g+h*(s&&m>g?1:-1),f=t(l=v+i*Math.cos(m),u=y+r*Math.sin(m),i,r,a,0,s,P,T,[m,I,v,y])}C=m-g;var O=Math.cos(g),k=Math.sin(g),D=Math.cos(m),E=Math.sin(m),L=Math.tan(C/4),N=4/3*i*L,R=4/3*r*L,B=[e,n],z=[e+N*k,n-R*O],V=[l+N*E,u-R*D],G=[l,u];if(z[0]=2*B[0]-z[0],z[1]=2*B[1]-z[1],c)return[z,V,G].concat(f);for(var F=[],j=0,H=(f=[z,V,G].concat(f).join().split(",")).length;j<H;j++)F[j]=j%2?x(f[j-1],f[j],d).y:x(f[j],f[j+1],d).x;return F}.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===n||"S"===n?(i=2*e.x-e.bx,o=2*e.y-e.by):(i=e.x,o=e.y),t=["C",i,o].concat(t.slice(1));break;case"T":"Q"===n||"T"===n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(a(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(a(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(r(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(r(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(r(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(r(e.x,e.y,e.X,e.Y))}return t},g=function(t,e){if(t[e].length>7){t[e].shift();for(var i=t[e];i.length;)u[e]="A",o&&(c[e]="A"),t.splice(e++,0,["C"].concat(i.splice(0,6)));t.splice(e,1),f=Math.max(n.length,o&&o.length||0)}},m=function(t,e,i,r,a){t&&e&&"M"===t[a][0]&&"M"!==e[a][0]&&(e.splice(a,0,["M",r.x,r.y]),i.bx=0,i.by=0,i.x=t[a][1],i.y=t[a][2],f=Math.max(n.length,o&&o.length||0))};f=Math.max(n.length,o&&o.length||0);for(var v=0;v<f;v++){n[v]&&(h=n[v][0]),"C"!==h&&(u[v]=h,v&&(d=u[v-1])),n[v]=p(n[v],s,d),"A"!==u[v]&&"C"===h&&(u[v]="C"),g(n,v),o&&(o[v]&&(h=o[v][0]),"C"!==h&&(c[v]=h,v&&(d=c[v-1])),o[v]=p(o[v],l,d),"A"!==c[v]&&"C"===h&&(c[v]="C"),g(o,v)),m(n,o,s,l,v),m(o,n,l,s,v);var y=n[v],x=o&&o[v],_=y.length,b=o&&x.length;s.x=y[_-2],s.y=y[_-1],s.bx=parseFloat(y[_-4])||s.x,s.by=parseFloat(y[_-3])||s.y,l.bx=o&&(parseFloat(x[b-4])||l.x),l.by=o&&(parseFloat(x[b-3])||l.y),l.x=o&&x[b-2],l.y=o&&x[b-1]}return o?[n,o]:n}},function(t,e){var n=/,?([a-z]),?/gi;t.exports=function(t){return t.join(",").replace(n,"$1")}},function(t,e,n){var i=n(428);t.exports=function(t,e,n,r,a){if(a)return[["M",+t+ +a,e],["l",n-2*a,0],["a",a,a,0,0,1,a,a],["l",0,r-2*a],["a",a,a,0,0,1,-a,a],["l",2*a-n,0],["a",a,a,0,0,1,-a,-a],["l",0,2*a-r],["a",a,a,0,0,1,a,-a],["z"]];var o=[["M",t,e],["l",n,0],["l",0,r],["l",-n,0],["z"]];return o.parsePathArray=i,o}},function(t,e,n){var i=n(30),r=n(47),a=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return i(t,function(n,i){r(t)&&"prototype"===i||e.push(n)}),e};t.exports=a},function(t,e){t.exports=function(t,e){return t.hasOwnProperty(e)}},function(t,e,n){var i=n(380),r=n(30),a=n(381);t.exports=function(t,e){return t=i(t),r(e,function(e){switch(e[0]){case"t":a.translate(t,t,[e[1],e[2]]);break;case"s":a.scale(t,t,[e[1],e[2]]);break;case"r":a.rotate(t,t,e[1]);break;case"m":a.multiply(t,t,e[1]);break;default:return!1}}),t}},function(t,e,n){var i=n(149);t.exports=i},function(t,e,n){var i=n(150),r=n(382);i.angle=function(t,e){var n=i.dot(t,e)/(i.length(t)*i.length(e));return Math.acos(r(n,-1,1))},i.direction=function(t,e){return t[0]*e[1]-e[0]*t[1]},i.angleTo=function(t,e,n){var r=i.angle(t,e),a=i.direction(t,e)>=0;return n?a?2*Math.PI-r:r:a?r:2*Math.PI-r},i.vertical=function(t,e,n){return n?(t[0]=e[1],t[1]=-1*e[0]):(t[0]=-1*e[1],t[1]=e[0]),t},t.exports=i},function(t,e){var n=Math.PI/180;t.exports=function(t){return n*t}},function(t,e){t.exports=parseInt},function(t,e){var n=180/Math.PI;t.exports=function(t){return n*t}},function(t,e){t.exports=function(t,e){return(t%e+e)%e}},function(t,e){t.exports=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-5;return Math.abs(t-e)<n}},function(t,e,n){var i=n(30),r=n(368);t.exports=function(t){var e=[];return i(t,function(t){r(e,t)||e.push(t)}),e}},function(t,e,n){var i=n(62),r=Array.prototype.splice;t.exports=function(t,e){if(!i(t))return[];for(var n=t?e.length:0,a=n-1;n--;){var o=void 0,s=e[n];n!==a&&s===o||(o=s,r.call(t,s,1))}return t}},function(t,e){var n=Array.prototype,i=n.splice,r=n.indexOf,a=n.slice;t.exports=function(t){for(var e=a.call(arguments,1),n=0;n<e.length;n++)for(var o=e[n],s=-1;(s=r.call(t,o))>-1;)i.call(t,s,1);return t}},function(t,e,n){var i=n(30),r=n(47),a=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return i(t,function(n,i){r(t)&&"prototype"===i||e.push(i)}),e};t.exports=a},function(t,e,n){var i=n(443),r=n(136);t.exports=function(t,e){var n=i(e),a=n.length;if(r(t))return!a;for(var o=0;o<a;o+=1){var s=n[o];if(e[s]!==t[s]||!(s in t))return!1}return!0}},function(t,e){t.exports=function(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return setTimeout(t,16)})(t)}},function(t,e){t.exports=function(t,e){if(t)for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n]);return t}},function(t,e){var n=document.createElement("table"),i=document.createElement("tr"),r=/^\s*<(\w+|!)[^>]*>/,a={tr:document.createElement("tbody"),tbody:n,thead:n,tfoot:n,td:i,th:i,"*":document.createElement("div")};t.exports=function(t){var e=r.test(t)&&RegExp.$1;e in a||(e="*");var n=a[e];t=t.replace(/(^\s*)|(\s*$)/g,""),n.innerHTML=""+t;var i=n.childNodes[0];return n.removeChild(i),i}},function(t,e,n){var i=n(152),r={isBetween:function(t,e,n){return t>=e&&t<=n},getLineIntersect:function(t,e,n,i){var a=n.x-t.x,o=n.y-t.y,s=e.x-t.x,l=e.y-t.y,u=i.x-n.x,c=i.y-n.y,h=s*c-l*u,d=null;if(h*h>.001*(s*s+l*l)*(u*u+c*c)){var f=(a*c-o*u)/h,p=(a*l-o*s)/h;r.isBetween(f,0,1)&&r.isBetween(p,0,1)&&(d={x:t.x+f*s,y:t.y+f*l})}return d},getIntersectPointRect:function(t,e){var n=t.minX,i=t.minY,a=t.maxX-t.minX,o=t.maxY-t.minY,s=[],l={x:n+a/2,y:i+o/2};s.push({x:n,y:i}),s.push({x:n+a,y:i}),s.push({x:n+a,y:i+o}),s.push({x:n,y:i+o}),s.push({x:n,y:i});for(var u=null,c=1;c<s.length&&!(u=r.getLineIntersect(s[c-1],s[c],l,e));c++);return u},getIntersectPointCircle:function(t,e,n,i,r){if(Math.sqrt(Math.pow(t-n,2)+Math.pow(e-i,2))<r)return null;var a=t-n,o=e-i,s=Math.sign(a),l=Math.sign(o),u=Math.atan(o/a);return{x:n+Math.abs(r*Math.cos(u))*s,y:i+Math.abs(r*Math.sin(u))*l}},applyMatrix:function(t,e,n){void 0===n&&(n=1);var r=[t.x,t.y,n];return i.vec3.transformMat3(r,r,e),{x:r[0],y:r[1]}},invertMatrix:function(t,e,n){void 0===n&&(n=1);var r=i.mat3.invert([],e),a=[t.x,t.y,n];return i.vec3.transformMat3(a,a,r),{x:a[0],y:a[1]}},radixSort:function(t,e){var n,i,r,a,o,s,l,u=10,c=1,h=[],d=1;for(r=0;r<t.length;r++)n=e(t[r]),i=(n=parseInt(n,10)).toString().length,n.toString().length>d&&(d=i);for(r=0;r<d;r++,c*=10,u*=10){for(a=0;a<t.length;a++)o=e(t[a]),void 0===h[o=parseInt(o%u/c,10)]&&(h[o]=[]),h[o].push(t[a]);for(s=0,a=0;a<h.length;a++)if(l=void 0,void 0!==h[a])for(l=h[a].shift();void 0!==l;)t[s++]=l,l=h[a].shift()}return t},getArcOfVectors:function(t,e){var n=t.x,i=t.y,r=e.x,a=e.y,o=Math.sqrt(n*n+i*i),s=Math.sqrt(r*r+a*a);return Math.acos((n*r+i*a)/(o*s))}};t.exports=i.mix({},i,r)},function(t,e,n){var i=n(153);i.registerShapeManager("node",{defaultShapeType:"common"}),i.registerShapeManager("edge",{defaultShapeType:"common"}),i.registerShapeManager("group",{defaultShapeType:"common"}),i.registerShapeManager("guide",{defaultShapeType:"common"}),n(490),n(487),n(485),n(483),t.exports=i},function(t,e,n){var i=n(146),r=n(372),a=n(22);setTimeout(function(){var t=i.track;if(i.track){var e=new Image,n={pg:document.URL,r:(new Date).getTime(),g6:!0,version:r,page_type:"syslog"};a.isObject(t)&&a.mix(n,t);var o=encodeURIComponent(JSON.stringify([n]));e.src="https://kcart.alipay.com/web/bi.do?BIProfile=merge&d="+o}},2e3)},function(t,e,n){var i=n(361),r=function(t){function e(e){var n;return(n=t.call(this,e)||this).layout=i.mindmap,n}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e}(n(360));t.exports=r},function(t,e,n){var i=n(361),r=function(t){function e(e){var n;return(n=t.call(this,e)||this).layout=i.indented,n}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e}(n(360));t.exports=r},function(t,e,n){var i=n(361),r=function(t){function e(e){var n;return(n=t.call(this,e)||this).layout=i.dendrogram,n}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e}(n(360));t.exports=r},function(t,e,n){var i=n(361),r=function(t){function e(e){var n;return(n=t.call(this,e)||this).layout=i.compactBox,n}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e}(n(360));t.exports=r},function(t,e,n){var i=n(22),r=n(389),a=n(387),o=function(t){function e(e){var n=i.mix({layout:new a.CompactBoxTree({getHGap:function(){return 10},getVGap:function(){return 10}}),_type:"tree"},e);return t.call(this,n)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.initEvent=function(){var t=this;this.on("afterdrawinner",function(){t.get("_sourceData").roots.forEach(function(e){var n=t.find(e.id);t._setVisibleByCollapsed(n)})})},n._executeLayout=function(t){var e=this.get("_sourceData");i.isFunction(t)?t(e.roots,this):i.isObject(t)&&(t.roots=e.roots,t.graph=this,t.execute())},n.getHierarchy=function(t){t=this.getItem(t);for(var e=this.get("_dataMap"),n=t.getModel().parent,i=1;n;)n=e[n].parent,i++;return i},n.parseSource=function(t){var e=t.roots,n=this.get("_dataMap"),r=[],a=[];if(!e)throw new Error("please set data.roots!");return e.forEach(function(t){i.traverseTree(t,function(t,e){t.id||(t.id=i.guid()),e||(e=n[t.parent]),e&&(t.parent=e.id,e.id||(e.id=i.guid()),a.push({source:e.id,target:t.id,id:e.id+"-"+t.id})),r.push(t)},function(t){return t.children},!0)}),{nodes:r,edges:a}},n._setVisibleByCollapsed=function(t){var e=t.getModel();t.collapsedParent?(t.hide(),t.getEdges().forEach(function(t){t.hide()}),t.deepEach(function(t){t.hide(),t.getEdges().forEach(function(t){t.hide()})})):e.collapsed?t.deepEach(function(t){t.hide(),t.getEdges().forEach(function(t){t.hide()})}):t.deepEach(function(t){t.collapsedParent&&(t.hide(),t.getEdges().forEach(function(t){t.hide()}))})},n.source=function(t){var e=this.parseSource(t);this.emit("beforesource"),this.set("_sourceData",t),this.set("_data",e),this.emit("aftersource")},n._setNodeNth=function(t,e){var n=(t=this.getItem(t)).getModel(),r=t.getParent().getModel().children;i.Array.remove(r,n),r.splice(e,0,n)},n.getNth=function(t){var e=(t=this.getItem(t)).getModel();return t.getParent().getModel().children.indexOf(e)},n.add=function(t,e){var n,r=this.get("_dataMap")[e.parent],a={action:"add",model:e};if("node"===t||"guide"===t){if(this.emit("beforechange",a),"node"===t){if(!r)throw new Error("please set available parent Id !");i.isArray(r.children)?r.children.push(e):r.children=[e];var o=this.parseSource({roots:[e]});this._addItems("node",o.nodes),this._addItems("edge",o.edges),n=this.find(e.id),this._setVisibleByCollapsed(n),i.isNil(e.nth)||this._setNodeNth(n,e.nth),this.find(r.id).forceUpdate()}else this._addItems(t,[e]),n=this.find(e.id);return a.item=n,this.emit("afterchange",a),n}console.warn("Tree do not support add type "+t+"!")},n.update=function(t,e){var n=this;if(e){var r=(t=this.getItem(t)).getModel(),a=i.mix({},r),o={action:"update",item:t,originModel:a,updateModel:e};if(this.emit("beforechange",o),this._updateItems([t],[e]),t.isNode){if("collapsed"in e&&(e.collapsed?t.deepEach(function(t){t.hide(),t.getEdges().forEach(function(t){t.hide()})}):t.deepEach(function(t){t.show(),t.getInEdges().forEach(function(t){t.show()})},function(t){return t.model.collapsed?null:t.getChildren()})),e.parent&&e.parent!==a.parent){var s=this.find(a.parent).getModel(),l=this.find(e.parent).getModel(),u=this.find(s.id+"-"+a.id),c={id:l.id+"-"+a.id,source:l.id,target:a.id};i.Array.remove(s.children,r),l.children?l.children.push(r):l.children=[r],this._removeItems([u]),this._addItems("edge",[c]),this.find(l.id).forceUpdate()}i.isArray(e.children)&&(a.children&&i.each(a.children,function(t){var e=n.find(t.id),i=[e];e.getEdges().forEach(function(t){i.push(t)}),n._removeItems(i)}),i.each(e.children,function(t){var e=n.parseSource({roots:[t]}),r=i.isNil(t.id)?i.guid():t.id;n._addItems("node",e.nodes),n._addItems("edge",e.edges),!t.parent&&n._addItems("edge",[{id:a.id+"-"+r,source:a.id,target:r}])})),i.isNil(e.nth)||this._setNodeNth(t,e.nth);var h=this.find(r.parent);h&&h.forceUpdate()}return this.emit("afterchange",o),this}},n.remove=function(t){var e=this.get("_dataMap"),n=[];if((t=this.getItem(t))&&!t.destroyed){var r={action:"remove",item:t};if(this.emit("beforechange",r),n.push(t),t.getEdges().forEach(function(t){n.push(t)}),"node"===t.type){var a=t.getModel(),o=e[a.parent];t.deepEach(function(t){n.push(t),t.getEdges().forEach(function(t){n.push(t)})}),i.Array.remove(o.children,a),this.find(o.id).forceUpdate()}return this._removeItems(i.uniq(n)),this.emit("afterchange",r),this}},n.getRoots=function(){var t=this;return this.getSource().roots.map(function(e){return t.find(e.id)})},n.save=function(){var t={roots:i.clone(this.getSource().roots),guides:this.getGuides().map(function(t){return t.getModel()})};return 0===t.roots.length&&delete t.roots,0===t.guides.length&&delete t.guides,t},e}(r);t.exports=o},function(t,e,n){var i=n(22),r={INIT:"_initForceFit"};r.AUGMENT={_initForceFit:function(){var t=this.get("width"),e=this.get("height");return t||e?t?e?void 0:(this.forceFit("height"),void this._bindForceEvent("height")):(this.forceFit("width"),void this._bindForceEvent("width")):(this.forceFit(),void this._bindForceEvent())},_bindForceEvent:function(t){var e=this,n=this._getTimer("forceFit"),i=function(){var i=setTimeout(function(){e.forceFit(t)},200);n&&clearTimeout(n),e._setTimer("forceFit",i)};window.addEventListener("resize",i),this.set("_windowForceResizeEvent",i)},forceFit:function(t){var e=this.get("_containerDOM"),n=this.get("width"),r=this.get("height"),a=i.getHeight(e),o=i.getWidth(e);return"width"===t?(this.changeSize(o,r),this):"height"===t?(this.changeSize(n,a),this):(this.changeSize(o,a),this)}},t.exports=r},function(t,e,n){var i=n(22),r={CFG:{fitView:void 0,fitViewPadding:10,minZoom:.2,maxZoom:10}};r.AUGMENT={getBBox:function(){var t=this.get("_itemGroup"),e=this.get("_itemMap"),n=t.get("children");return n.length>0?(n=n.filter(function(t){var n=e[t.id];return!!n&&!1!==n.getShapeObj().bboxCalculation}),i.getChildrenBBox(n)):{minX:0,minY:0,maxX:this.get("width"),maxY:this.get("height")}},getFitViewPadding:function(){return i.toAllPadding(this.get("fitViewPadding"))},setFitView:function(t){if(!t)return this;if("autoZoom"===t)return this.autoZoom(),this;var e=this.getFitViewPadding(),n=this.get("width"),r=this.get("height"),a=this.getBBox(),o=a.maxX-a.minX,s=a.maxY-a.minY,l={x:0,y:0,width:n,height:r},u=i.getNineBoxPosition(t,l,o,s,e),c=[1,0,0,0,1,0,0,0,1];i.mat3.translate(c,c,[-a.minX+u.x,-a.minY+u.y]),this.updateMatrix(c)},_getZoomRatio:function(t){var e=this.get("maxZoom"),n=this.get("minZoom");return t<n&&(t=n),t>e&&(t=e),t},autoZoom:function(t){var e=this;t||(t=this.getFitViewPadding());var n=this.get("width"),r=this.get("height"),a=this.getBBox(),o=i.getAutoZoomMatrix({minX:0,minY:0,maxX:n,maxY:r},a,t,function(t){return e._getZoomRatio(t)});this.updateMatrix(o)},getZoom:function(){return this.getMatrix()[0]},updateMatrix:function(t){var e=this.getMatrix(),n={updateMatrix:t,originMatrix:e},i=e[0]!==t[0];return this.emit("beforeviewportchange",n),i&&this.emit("beforezoom",n),this.setMatrix(t),i&&this.emit("afterzoom",n),this.emit("afterviewportchange",n),this.draw(),this},zoom:function(t,e){if(!i.isNumber(t)){e=this._getZoomRatio(e);var n=this.get("_rootGroup"),r=i.clone(n.getMatrix()),a=r[6]+r[0]*t.x-e*t.x,o=r[7]+r[0]*t.y-e*t.y;return r[6]=0,r[7]=0,r[0]=e,r[4]=e,i.mat3.translate(r,r,[a,o]),this.updateMatrix(r),this}var s=this.get("width"),l=this.get("height");this.zoomByDom({x:s/2,y:l/2},t)},zoomByDom:function(t,e){var n=this.getPoint(t);return this.zoom(n,e),this},translate:function(t,e){var n=this.get("_rootGroup").getMatrix();return i.mat3.translate(n,n,[t,e]),this.updateMatrix(n),this},translateByDom:function(t,e){var n=this.get("_rootGroup").getMatrix()[0];return this.translate(t/n,e/n),this},getMatrix:function(){return this.get("_rootGroup").getMatrix()},setMatrix:function(t){this.get("_rootGroup").setMatrix(t)},getPoint:function(t){return this.getPointByDom(t)},getPointByDom:function(t){var e=this.get("_rootGroup").getMatrix();return i.invertMatrix(t,e)},getPointByCanvas:function(t){var e=this.get("_canvas").get("pixelRatio");return this.getPoint({x:t.x/e,y:t.y/e})},getPointByClient:function(t){var e=this.get("_canvas").getPointByClient(t.x,t.y);return this.getPointByCanvas(e)},getDomPoint:function(t){var e=this.get("_rootGroup").getMatrix();return i.applyMatrix(t,e)},getCanvasPoint:function(t){var e=this.get("_canvas").get("pixelRatio"),n=this.getDomPoint(t);return{x:n.x*e,y:n.y*e}},getClientPoint:function(t){var e=this.getCanvasPoint(t),n=this.get("_canvas").getClientByPoint(e.x,e.y);return{x:n.clientX,y:n.clientY}},focus:function(t){if(i.isString(t)&&(t=this.find(t)),t){var e=t.getCenter();this.focusPoint(e)}return this},focusPoint:function(t){var e=this.get("_rootGroup").getMatrix(),n=this.get("width"),i=this.get("height"),r=-e[6]+n/2-e[0]*t.x,a=-e[7]+i/2-e[0]*t.y;return this.translate(r,a),this},focusPointByDom:function(t){var e=this.getPoint(t);return this.focusPoint(e),this}},t.exports=r},function(t,e){t.exports={INIT:"_initDraw",AUGMENT:{_initDraw:function(){var t=this,e=this.get("_controllers").animate;["clear","show","hide","change","updatenodeposition"].forEach(function(n){e&&t.on("before"+n,function(n){var i=t.get("_forcePreventAnimate"),r=n?n.affectedItemIds:void 0;!0!==i&&e&&e.cacheGraph("startCache",r)}),t.on("after"+n,function(n){var i=n?n.affectedItemIds:void 0,r=t.get("_forcePreventAnimate");if(n&&"changeData"===n.action){var a=t.get("fitView");a&&t.setFitView(a)}!0!==r&&e?(e.cacheGraph("endCache",i),e.run()):t.draw()})})},draw:function(){this.get("_canvas").draw()},animateDraw:function(){this.get("_controllers").animate.run()}}}},function(t,e,n){var i=n(146);function r(t,e){var n=t.getGraphicGroup(),r=t.getBBox(),a=(r.minX+r.maxX)/2,o=(r.minY+r.maxY)/2,s=n.getMatrix()[0];n.transform([["t",-a,-o],["s",.01/s,.01/s],["t",a,o]]),n.animate({transform:[["t",-a,-o],["s",100*s,100*s],["t",a,o]]},i.enterDuration,i.enterEasing,e)}function a(t,e){var n=t.getGraphicGroup(),r=t.getBBox(),a=(r.minX+r.maxX)/2,o=(r.minY+r.maxY)/2,s=n.getMatrix()[0];n.animate({transform:[["t",-a,-o],["s",.01/s,.01/s],["t",a,o]]},i.leaveDuration,i.leaveEasing,e)}function o(t,e){if(t.isShape){var n=t.attr("fillOpacity"),r=t.attr("strokeOpacity");t.attr({fillOpacity:0,strokeOpacity:0}),t.animate({fillOpacity:n,strokeOpacity:r},i.enterDuration,i.enterEasing,e)}}function s(t,e){t.isShape&&t.animate({fillOpacity:0,strokeOpacity:0},i.leaveDuration,i.leaveEasing,e)}t.exports={enterScaleIn:function(t){var e=t.item;t.element.isItemContainer&&e.getKeyShape()&&r(e)},showScaleIn:function(t){var e=t.item;t.element.isItemContainer&&e.getKeyShape()&&r(e)},leaveScaleOut:function(t){var e=t.item,n=t.element,i=t.done;n.isItemContainer&&a(e,function(){i()})},hideScaleOut:function(t){var e=t.item,n=t.element,i=t.done;n.isItemContainer&&a(e,function(){i()})},enterFadeIn:function(t){o(t.element)},showFadeIn:function(t){o(t.element)},leaveFadeOut:function(t){s(t.element,t.done)},hideFaseOut:function(t){s(t.element,t.done)}}},function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=n(362),a=n(459),o=n(22),s=n(146),l=["matrix","fillStyle","strokeStyle","endArrow","startArrow"],u=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){return{show:"scaleIn",hide:"scaleOut",enter:"scaleIn",leave:"scaleOut",update:function(t){var e=t.element,n=t.endKeyFrame.props;e.animate(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}({matrix:n.matrix},n.attrs),s.updateDuration,s.updateEasing)},graph:null,startCache:{},endCache:{},keykeyCache:{}}},n._init=function(){var t=this,e=this.graph,n=this.keykeyCache;e.on("afteritemdraw",function(e){e.item.getGraphicGroup().deepEach(function(e){n[e.gid]=t._getCache(e)},!0)})},n.cacheGraph=function(t,e){var n,i=this,r=this.graph;n=e?e.map(function(t){return r.find(t)}):r.getItems(),this[t]={},n.forEach(function(e){e&&i.cache(e,i[t],t)})},n._getCache=function(t){var e=this.keykeyCache;if(!o.isObject(t))return e[t];var n={props:{matrix:o.clone(t.getMatrix()),attrs:{}}};if(t.isShape){var i=t.attr();i=o.omit(i,l),n.props.attrs=o.clone(i)}return n},n._getAnimation=function(t,e){var n=this.graph,i=t.shapeObj,r=this[e],s=i[e+"Animation"]||i[e+"Animate"],l=n.get("_"+e+"Animation"),u=s||l||r;return o.isString(u)?a[e+o.upperFirst(u)]:u},n.cache=function(t,e,n){var i=this;t.getGraphicGroup().deepEach(function(r){var a=r.gid,o="startCache"===n?i._getCache(r):i._getCache(r.gid);o.enterAnimate=i._getAnimation(t,"enter"),o.leaveAnimate=i._getAnimation(t,"leave"),o.showAnimate=i._getAnimation(t,"show"),o.hideAnimate=i._getAnimation(t,"hide"),o.updateAnimate=i._getAnimation(t,"update"),o.item=t,o.element=r,o.visible=r.get("visible"),e[a]=o},!0)},n._compare=function(){var t=this.startCache,e=this.endCache,n=[],i=[],r=[],a=[],s=[];o.each(e,function(e,i){var o=t[i];o?o.element.get("type")===e.element.get("type")&&(o.visible&&e.visible?r.push(i):o.visible&&!e.visible?a.push(i):!o.visible&&e.visible&&s.push(i)):n.push(i)}),o.each(t,function(t,n){e[n]||i.push(n)}),this.enterElements=n,this.leaveElements=i,this.updateElements=r,this.hideElements=a,this.showElements=s},n._addTween=function(){var t=this.enterElements,e=this.leaveElements,n=this.updateElements,i=this.hideElements,r=this.showElements,a=this.startCache,s=this.endCache;t.forEach(function(t){var e=s[t],n=e.enterAnimate;n&&n({element:e.element,item:e.item,endKeyFrame:e,startKeyFrame:null,startCache:a,endCache:s,done:function(){}})}),e.forEach(function(t){var e=a[t],n=e.leaveAnimate;if(n){var i=a[t].element;i.isItemContainer&&i.getParent().add(i),n({element:i,item:e.item,endKeyFrame:null,startKeyFrame:e,startCache:a,endCache:s,done:function(){i.isItemContainer&&i.remove()}})}}),n.forEach(function(t){var e=s[t],n=a[t],i=e.element,r=n.element,l=n.props,u=e.props,c=e.updateAnimate;l.attrs&&i.attr(l.attrs),o.isEqual(l.matrix,u.matrix)||i.setMatrix(l.matrix),c({element:i,item:e,endKeyFrame:e,startKeyFrame:n,startCache:a,endCache:s,done:function(){}}),r!==i&&r.remove()}),i.forEach(function(t){var e=s[t],n=a[t],i=e.hideAnimate;i&&(e.element.show(),i({element:e.element,item:e.item,endKeyFrame:e,startKeyFrame:n,startCache:a,endCache:s,done:function(){var t=e.item,n=t.getGraphicGroup();!t.visible&&n.hide()}}))}),r.forEach(function(t){var e=s[t],n=a[t],i=e.showAnimate;i&&i({element:e.element,item:e.item,endKeyFrame:e,startKeyFrame:n,startCache:a,endCache:s,done:function(){}})})},n.run=function(){this.graph.destroyed||(this._compare(),this._addTween())},e}(r);t.exports=u},function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=n(22),a=n(460),o={INIT:"_initAnimate",CFG:{animate:!1}};o.AUGMENT={_initAnimate:function(){var t=this.get("animate");if(t){var e=this.get("_controllers"),n={graph:this};r.isPlainObject(t)&&(n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}({},n,t)),e.animate=new a(n)}}},t.exports=o},function(t,e,n){var i=n(22),r={INIT:"_initFilter",CFG:{filters:[]}};r.AUGMENT={_initFilter:function(){var t=this,e=this.get("filters");i.isFunction(e)&&this.set("filters",[e]),this.on("afterchange",function(n){var i=n.action;e.length>0&&"changeData"===i&&!t.destroyed&&t.filter()})},addFilter:function(t){return this.get("filters").push(t),t},removeFilter:function(t){var e=this.get("filters");this.set("filters",i.filter(e,t))},filter:function(){this.emit("beforefilter");var t=this.get("filters"),e=this.getItems(),n=this._getFilterItems();t.forEach(function(t){n=n.filter(t)}),e.forEach(function(t){-1===n.indexOf(t)?t.hide():t.show()}),this.draw(),this.emit("afterfilter")},_getFilterItems:function(){return this.getItems().filter(function(t){return!1!==t.getShapeObj().filter})}},t.exports=r},function(t,e,n){var i=n(22),r=n(390),a={CFG:{modes:{default:[]},mode:"default",_eventCache:{}},INIT:"_initModes"};a.AUGMENT={_initModes:function(){var t=this.get("mode");this.changeMode(t)},changeMode:function(t){var e=this.get("modes");i.isEmpty(e)||i.isEmpty(e[t])||(r.resetMode(e[t],this),this.set("mode",t))},addBehaviour:function(t,e){var n=this.get("modes");e=e||this.get("mode"),i.isEmpty(n[e])&&(n[e]=[]);var a=n[e],o=[].concat(t);return i.each(o,function(t){-1===a.indexOf(t)&&a.push(t)}),r.resetMode(n[e],this),this},removeBehaviour:function(t){var e=this.get("modes"),n=this.get("mode"),a=e[n];if(!i.isEmpty(a)){var o=[].concat(t);return a=a.filter(function(t){return-1===o.indexOf(t)}),e[n]=a,r.resetMode(a,this),this}},behaviourOn:function(t,e){var n=this._eventCache;n[t]||(n[t]=[]),n[t].push(e),this.on(t,e)},_off:function(){var t=this,e=this._eventCache;i.each(e,function(e,n){i.each(e,function(e){t.off(n,e)})}),this._eventCache={}}},t.exports=a},function(t,e,n){var i=n(362),r=n(22),a={MOUSEMOVE:"mousemove",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",CLICK:"click",DBLCLICK:"dblclick",DRAGSTART:"dragstart",DRAG:"drag",DRAGENTER:"dragenter",DRAGLEAVE:"dragleave",DRAGEND:"dragend",DROP:"drop",CONTEXTMENU:"contextmenu",MOUSEWHEEL:"mousewheel",WHEEL:"wheel",KEYDOWN:"keydown",KEYUP:"keyup",KEYPRESS:"keypress"},o=[a.DBLCLICK,a.MOUSEDOWN,a.MOUSEUP,a.MOUSEENTER,a.MOUSELEAVE,a.MOUSEMOVE,a.CONTEXTMENU,a.MOUSEWHEEL,a.WHEEL],s=[a.KEYDOWN,a.KEYUP,a.KEYPRESS],l=function(t){function e(e){var n;return(n=t.call(this,e)||this)._domEvents=[],n._initEventStates(),n._registerEvents(),n}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n._initEventStates=function(){this._pressing=!1,this._dragging=!1,this._currentEventObj={},this._dragEventObj={}},n._registerEvents=function(){this._registerMouseEvents(),this._registerKeyboardEvents()},n._registerKeyboardEvents=function(){var t=this.graph,e=t.getKeyboardEventWrapper(),n=this._domEvents,i=t.get("keyboardEnable");r.each(s,function(a){n.push(r.addEventListener(e,a,function(e){var n=!0;r.isFunction(i)&&(n=i()),n&&t.emit(a,{domEvent:e})}))})},n._registerMouseEvents=function(){var t=this,e=this,n=this.graph.getMouseEventWrapper(),i=this._domEvents;r.each(o,function(o){i.push(r.addEventListener(n,o,function(n){if(n.type!==a.MOUSEENTER||!n.fromElement||n.fromElement.parentNode&&!function(t,e){for(var n=t.parentNode;n;){if("foreignObject"===n.tagName)return!0;n=n.parentNode}return!1}(n.fromElement)){var i=t._currentEventObj;t._oldEventObj=i,t._processEventObj(n);var o=t._currentEventObj;e._simulateEvents(n,i,o),-1!==[a.MOUSELEAVE,a.MOUSEENTER].indexOf(n.type)&&e._triggerEvent("canvas:"+n.type),e._triggerEvent(n.type),n.type===a.MOUSELEAVE&&(t._dragging&&e._triggerEvent(a.DRAGLEAVE,r.mix({},o,{item:null,shape:null,currentItem:t._dragEventObj.item,currentShape:t._dragEventObj.shape})),e._initEventStates())}}))})},n.destroy=function(){var t=this._domEvents;r.each(t,function(t){t&&t.remove()}),this._domEvents=null},n._triggerEvent=function(t,e){if(e||(e="mouseleave"===t?this._oldEventObj:this._currentEventObj),"mousedown"===t&&(e.button=this._button),e._type=t,this.emitGraphEvent(t,e),-1===["canvas:"+a.MOUSELEAVE,"canvas:"+a.MOUSEENTER].indexOf(t)){var n=e.shape&&e.shape.eventPreFix;if(-1!==[a.DRAGSTART,a.DRAG,a.DRAGEND].indexOf(t)&&(n=e.currentShape&&e.currentShape.eventPreFix),n){var i=n+":"+t;e._type=i,r.isBoolean(e._isItemChange)?e._isItemChange&&this.emitGraphEvent(i,e):this.emitGraphEvent(i,e)}}},n.emitGraphEvent=function(t,e){this.graph.emit(t,e)},n._getDistanceToPress=function(t){return Math.pow(t.clientX-this._pressX,2)+Math.pow(t.clientY-this._pressY,2)},n._simulateEvents=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n={});var i=this._dragEventObj.item,o=this._dragEventObj.shape;switch(t.type){case a.MOUSEDOWN:this._pressing=!0,this._button=t.button,this._pressX=t.clientX,this._pressY=t.clientY;break;case a.MOUSEMOVE:if(this._dragging){if(this._triggerEvent(a.DRAG,r.mix({},n,{button:this._button,currentItem:i,currentShape:o})),e.shape!==n.shape){var s=this._isItemChange(e,n);e.shape&&this._triggerEvent(a.DRAGLEAVE,r.mix({},n,{button:this._button,item:e.item,shape:e.shape,toItem:n.item,toShape:n.shape,currentItem:i,currentShape:o,_isItemChange:s})),n.shape&&this._triggerEvent(a.DRAGENTER,r.mix({},n,{button:this._button,currentItem:i,currentShape:o,fromItem:e.item,fromShape:e.shape,_isItemChange:s}))}}else this._pressing&&this._getDistanceToPress(t)>9&&(this._dragging=!0,this._dragEventObj=e,i=this._dragEventObj.item,o=this._dragEventObj.shape,this._triggerEvent(a.DRAGSTART,r.mix({},e,{button:this._button,currentItem:i,currentShape:o})));if(e.shape!==n.shape){var l=this._isItemChange(e,n);e.shape&&this._triggerEvent(a.MOUSELEAVE,r.mix({},n,{item:e.item,shape:e.shape,toItem:n.item,toShape:n.shape,_isItemChange:l})),n.shape&&this._triggerEvent(a.MOUSEENTER,r.mix({},n,{fromtItem:e.item,fromShape:e.shape,_isItemChange:l}))}break;case a.MOUSEUP:!this._dragging&&this._pressing?this._triggerEvent(a.CLICK,r.mix({},n,{button:this._button})):(this._triggerEvent(a.DROP,r.mix({},n,{button:this._button,currentItem:i,currentShape:o})),this._triggerEvent(a.DRAGEND,r.mix({},n,{button:this._button,currentItem:i,currentShape:o}))),this._pressing=!1,this._dragging=!1,this._dragEventObj={};break;default:return}},n._isItemChange=function(t,e){var n=t.shape,i=e.shape,a=n&&i&&(n.get("isItemChange")||i.get("isItemChange"));return a?a(i,n):r.isObject(t.item)&&r.isObject(e.item)?t.item.id!==e.item.id:t.item!==e.item},n._processEventObj=function(t){var e=this.graph.get("_canvas"),n=this._getEventObj(t,e);this._currentEventObj=n},n._parsePoint=function(t,e){return this.graph.getPointByCanvas({x:t,y:e})},n._getEventObj=function(t,e){var n=this.graph,i=t.clientX,r=t.clientY,a=e.getPointByClient(i,r),o=this._parsePoint(a.x,a.y),s=e.getShape(a.x,a.y,t),l=n.getItemByShape(s),u=e.get("pixelRatio");return{item:l,shape:s,x:o.x,y:o.y,domX:a.x/u,domY:a.y/u,domEvent:t}},e}(i);t.exports=l},function(t,e,n){var i={},r=n(464);i.INIT="_initEvents",i.CFG={keyboardEnable:!0},i.AUGMENT={_initEvents:function(){this.get("_controllers").events=new r({graph:this})}},t.exports=i},function(t,e,n){var i=n(22),r={};r.AUGMENT={find:function(t){return this.get("_itemMap")[t]},getNodes:function(){return this.get("_itemMap")._nodes},getEdges:function(){return this.get("_itemMap")._edges},getGroups:function(){return this.get("_itemMap")._groups},getGuides:function(){return this.get("_itemMap")._guides},getItems:function(){var t=this.get("_itemMap"),e=[];return i.each(t,function(t){t.type&&e.push(t)}),e},getItemByShape:function(t){return t?this.getItem(t.id):null},getItem:function(t){var e=this.get("_itemMap");return i.isObject(t)?t.destroyed&&(t=e[t.id]):t=e[t],t}},t.exports=r},function(t,e,n){var i=n(362),r=n(22),a=["color","shape","size","label","style"],o=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n._init=function(){var t=this,e={};r.each(a,function(n){e[n]={},t[n]=function(i){return e[n].input=i,t}}),this.channels=e},n.addChannels=function(t){var e=this.channels;r.each(t,function(t,n){e[n]={input:t}})},n.mapping=function(t){var e=this.channels;r.each(e,function(e,n){r.isFunction(e.input)?t[n]=e.input(t):e.input&&(t[n]=e.input)})},e}(i);t.exports=o},function(t,e,n){var i=n(467),r={INIT:"_initMapper"};r.AUGMENT={_initMapper:function(){var t=this.get("_controllers");t.nodeMapper=new i({graph:this}),t.edgeMapper=new i({graph:this}),t.groupMapper=new i({graph:this}),t.guideMapper=new i({graph:this})},node:function(t){var e=this._getController("nodeMapper");return t&&e.addChannels(t),e},edge:function(t){var e=this._getController("edgeMapper");return t&&e.addChannels(t),e},group:function(t){var e=this._getController("groupMapper");return t&&e.addChannels(t),this._getController("groupMapper")},guide:function(t){var e=this._getController("guideMapper");return t&&e.addChannels(t),this._getController("guideMapper")}},t.exports=r},function(t,e,n){var i=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){return{graph:null,auto:!0,processor:null}},n._init=function(){var t=this,e=this.graph;e.on("afteritemdraw",function(t){var e=t.item,n=e.getKeyShape(),i=e.getModel();if(e.isEdge)i.lineWidth=n.attr("lineWidth");else if(e.isNode||e.isGroup){var r=e.getBBox();i.width=r.width,i.height=r.height}}),e.on("afterchange",function(n){var i=n.action;"once"===t.auto?"changeData"===i&&(e.destroyed||e.preventAnimate(function(){t.layout()})):t.auto&&!e.destroyed&&e.preventAnimate(function(){t.layout()})})},n.changeLayout=function(t){this.processor=t,this.layout()},n.layout=function(){var t=this.graph,e=this.getLayoutProcessor();t.emit("beforelayout");var n=t.getNodes().filter(function(t){return t.isVisible()}).map(function(t){return t.getModel()}),i=t.getEdges().filter(function(t){return t.isVisible()}).map(function(t){return t.getModel()}),r=t.getGroups().filter(function(t){return t.isVisible()}).map(function(t){return t.getModel()});t._executeLayout(e,n,i,r),t.updateNodePosition(),t.emit("afterlayout")},n.getLayoutProcessor=function(){return this.processor?this.processor:this.processer},e}(n(362));t.exports=i},function(t,e,n){var i=n(22),r=n(469),a={CFG:{layout:void 0},INIT:"_initLayout"};a.AUGMENT={_initLayout:function(){var t=this.get("_controllers"),e=this._getLayoutCfg();e&&(t.layout=new r(i.mix({graph:this},e)))},_getLayoutCfg:function(){var t=this.get("layout");return i.isPlainObject(t)?t:i.isFunction(t)||i.isObject(t)?{processor:t}:null},layout:function(){return this._getController("layout").layout(),this},updateNodePosition:function(t){var e=this.getGuides(),n=[],r=[];return this.emit("beforeupdatenodeposition"),t?(t.forEach(function(t){t.getEdges().forEach(function(t){r.push(t)});var e=t.getParent();e&&n.push(e)}),r=i.uniq(r),n=i.uniq(n)):(t=this.getNodes(),n=this.getGroups(),r=this.getEdges()),t.forEach(function(t){t.layoutUpdate()}),n.forEach(function(t){t.layoutUpdate()}),r.forEach(function(t){t.layoutUpdate()}),e.forEach(function(t){t.layoutUpdate()}),this.emit("afterupdatenodeposition"),this},changeLayout:function(t){return this._getController("layout").changeLayout(t),this},getLayout:function(){return this._getController("layout").getLayoutProcessor()}},t.exports=a},function(t,e,n){!function(e){"use strict";var n=function(){return{escape:function(t){return t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:t,mimeType:function(e){var n=t(e).toLowerCase();return function(){var t="application/font-woff";return{woff:t,woff2:t,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[n]||""},dataAsUrl:function(t,e){return"data:"+e+";base64,"+t},isDataUrl:function(t){return-1!==t.search(/^(data:)/)},canvasToBlob:function(t){return t.toBlob?new Promise(function(e){t.toBlob(e)}):function(t){return new Promise(function(e){for(var n=window.atob(t.toDataURL().split(",")[1]),i=n.length,r=new Uint8Array(i),a=0;a<i;a++)r[a]=n.charCodeAt(a);e(new Blob([r],{type:"image/png"}))})}(t)},resolveUrl:function(t,e){var n=document.implementation.createHTMLDocument(),i=n.createElement("base");n.head.appendChild(i);var r=n.createElement("a");return n.body.appendChild(r),i.href=e,r.href=t,r.href},getAndEncode:function(t){return s.impl.options.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime()),new Promise(function(e){var n,i=new XMLHttpRequest;if(i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status){var r=new FileReader;r.onloadend=function(){var t=r.result.split(/,/)[1];e(t)},r.readAsDataURL(i.response)}else n?e(n):a("cannot fetch resource: "+t+", status: "+i.status)},i.ontimeout=function(){n?e(n):a("timeout of 30000ms occured while fetching resource: "+t)},i.responseType="blob",i.timeout=3e4,i.open("GET",t,!0),i.send(),s.impl.options.imagePlaceholder){var r=s.impl.options.imagePlaceholder.split(/,/);r&&r[1]&&(n=r[1])}function a(t){console.error(t),e("")}})},uid:function(){var t=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+t++}}(),delay:function(t){return function(e){return new Promise(function(n){setTimeout(function(){n(e)},t)})}},asArray:function(t){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e},escapeXhtml:function(t){return t.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(t){return new Promise(function(e,n){var i=new Image;i.onload=function(){e(i)},i.onerror=n,i.src=t})},width:function(t){var n=e(t,"border-left-width"),i=e(t,"border-right-width");return t.scrollWidth+n+i},height:function(t){var n=e(t,"border-top-width"),i=e(t,"border-bottom-width");return t.scrollHeight+n+i}};function t(t){var e=/\.([^\.\/]*?)$/g.exec(t);return e?e[1]:""}function e(t,e){var n=window.getComputedStyle(t).getPropertyValue(e);return parseFloat(n.replace("px",""))}}(),i=function(){var t=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(t,n,a){return e(t)?Promise.resolve(t).then(i).then(function(e){var i=Promise.resolve(t);return e.forEach(function(t){i=i.then(function(e){return r(e,t,n,a)})}),i}):Promise.resolve(t)},shouldProcess:e,impl:{readUrls:i,inline:r}};function e(e){return-1!==e.search(t)}function i(e){for(var i,r=[];null!==(i=t.exec(e));)r.push(i[1]);return r.filter(function(t){return!n.isDataUrl(t)})}function r(t,e,i,r){return Promise.resolve(e).then(function(t){return i?n.resolveUrl(t,i):t}).then(r||n.getAndEncode).then(function(t){return n.dataAsUrl(t,n.mimeType(e))}).then(function(i){return t.replace(function(t){return new RegExp("(url\\(['\"]?)("+n.escape(t)+")(['\"]?\\))","g")}(e),"$1"+i+"$3")})}}(),r=function(){return{resolveAll:function(){return t(document).then(function(t){return Promise.all(t.map(function(t){return t.resolve()}))}).then(function(t){return t.join("\n")})},impl:{readAll:t}};function t(){return Promise.resolve(n.asArray(document.styleSheets)).then(function(t){var e=[];return t.forEach(function(t){try{n.asArray(t.cssRules||[]).forEach(e.push.bind(e))}catch(e){console.log("Error while reading CSS rules from "+t.href,e.toString())}}),e}).then(function(t){return t.filter(function(t){return t.type===CSSRule.FONT_FACE_RULE}).filter(function(t){return i.shouldProcess(t.style.getPropertyValue("src"))})}).then(function(e){return e.map(t)});function t(t){return{resolve:function(){var e=(t.parentStyleSheet||{}).href;return i.inlineAll(t.cssText,e)},src:function(){return t.style.getPropertyValue("src")}}}}}(),a=function(){return{inlineAll:function e(r){return r instanceof Element?function(t){var e=t.style.getPropertyValue("background");return e?i.inlineAll(e).then(function(e){t.style.setProperty("background",e,t.style.getPropertyPriority("background"))}).then(function(){return t}):Promise.resolve(t)}(r).then(function(){return r instanceof HTMLImageElement?t(r).inline():Promise.all(n.asArray(r.childNodes).map(function(t){return e(t)}))}):Promise.resolve(r)},impl:{newImage:t}};function t(t){return{inline:function(e){return n.isDataUrl(t.src)?Promise.resolve():Promise.resolve(t.src).then(e||n.getAndEncode).then(function(e){return n.dataAsUrl(e,n.mimeType(t.src))}).then(function(e){return new Promise(function(n,i){t.onload=n,t.onerror=i,t.src=e})})}}}}(),o={imagePlaceholder:void 0,cacheBust:!1},s={toSvg:l,toPng:function(t,e){return u(t,e||{}).then(function(t){return t.toDataURL()})},toJpeg:function(t,e){return u(t,e=e||{}).then(function(t){return t.toDataURL("image/jpeg",e.quality||1)})},toBlob:function(t,e){return u(t,e||{}).then(n.canvasToBlob)},toPixelData:function(t,e){return u(t,e||{}).then(function(e){return e.getContext("2d").getImageData(0,0,n.width(t),n.height(t)).data})},impl:{fontFaces:r,images:a,util:n,inliner:i,options:{}}};function l(t,e){return function(t){void 0===t.imagePlaceholder?s.impl.options.imagePlaceholder=o.imagePlaceholder:s.impl.options.imagePlaceholder=t.imagePlaceholder,void 0===t.cacheBust?s.impl.options.cacheBust=o.cacheBust:s.impl.options.cacheBust=t.cacheBust}(e=e||{}),Promise.resolve(t).then(function(t){return function(t,e,i){return Promise.resolve(t).then(function(t){return t instanceof HTMLCanvasElement?n.makeImage(t.toDataURL()):t.cloneNode(!1)}).then(function(i){return function(t,e,i){var r=t.childNodes;return 0===r.length?Promise.resolve(e):function(t,e,n){var i=Promise.resolve();return e.forEach(function(e){i=i.then(function(){return c(e,n)}).then(function(e){e&&t.appendChild(e)})}),i}(e,n.asArray(r),i).then(function(){return e})}(t,i,e)}).then(function(e){return function(t,e){return e instanceof Element?Promise.resolve().then(function(){!function(t,e){t.cssText?e.cssText=t.cssText:function(t,e){n.asArray(t).forEach(function(n){e.setProperty(n,t.getPropertyValue(n),t.getPropertyPriority(n))})}(t,e)}(window.getComputedStyle(t),e.style)}).then(function(){[":before",":after"].forEach(function(i){!function(i){var r=window.getComputedStyle(t,i),a=r.getPropertyValue("content");if(""!==a&&"none"!==a){var o=n.uid();e.className=e.className+" "+o;var s=document.createElement("style");s.appendChild(function(t,e,i){var r=".0:"+e,a=i.cssText?function(t){var e=t.getPropertyValue("content");return t.cssText+" content: "+e+";"}(i):function(t){return n.asArray(t).map(function(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")}).join("; ")+";"}(i);return document.createTextNode(r+"{"+a+"}")}(0,i,r)),e.appendChild(s)}}(i)})}).then(function(){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value),t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}).then(function(){e instanceof SVGElement&&(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e instanceof SVGRectElement&&["width","height"].forEach(function(t){var n=e.getAttribute(t);n&&e.style.setProperty(t,n)}))}).then(function(){return e}):e}(t,e)})}(t,e.filter)}).then(h).then(d).then(function(t){return e.bgcolor&&(t.style.backgroundColor=e.bgcolor),e.width&&(t.style.width=e.width+"px"),e.height&&(t.style.height=e.height+"px"),e.style&&Object.keys(e.style).forEach(function(n){t.style[n]=e.style[n]}),t}).then(function(i){return function(t,e,i){return Promise.resolve(t).then(function(t){return t.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(t)}).then(n.escapeXhtml).then(function(t){return'<foreignObject x="0" y="0" width="100%" height="100%">'+t+"</foreignObject>"}).then(function(t){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+i+'">'+t+"</svg>"}).then(function(t){return"data:image/svg+xml;charset=utf-8,"+t})}(i,e.width||n.width(t),e.height||n.height(t))})}function u(t,e){return l(t,e).then(n.makeImage).then(n.delay(100)).then(function(i){var r=function(t){var i=document.createElement("canvas");if(i.width=e.width||n.width(t),i.height=e.height||n.height(t),e.bgcolor){var r=i.getContext("2d");r.fillStyle=e.bgcolor,r.fillRect(0,0,i.width,i.height)}return i}(t);return r.getContext("2d").drawImage(i,0,0),r})}function c(t,e,i){return i||!e||e(t)?Promise.resolve(t).then(function(t){return t instanceof HTMLCanvasElement?n.makeImage(t.toDataURL()):t.cloneNode(!1)}).then(function(n){return r(t,n,e)}).then(function(e){return function(t,e){return e instanceof Element?Promise.resolve().then(function(){!function(t,e){t.cssText?e.cssText=t.cssText:function(t,e){n.asArray(t).forEach(function(n){e.setProperty(n,t.getPropertyValue(n),t.getPropertyPriority(n))})}(t,e)}(window.getComputedStyle(t),e.style)}).then(function(){[":before",":after"].forEach(function(i){!function(i){var r=window.getComputedStyle(t,i),a=r.getPropertyValue("content");if(""!==a&&"none"!==a){var o=n.uid();e.className=e.className+" "+o;var s=document.createElement("style");s.appendChild(function(t,e,i){var r="."+t+":"+e,a=i.cssText?function(t){var e=t.getPropertyValue("content");return t.cssText+" content: "+e+";"}(i):function(t){return n.asArray(t).map(function(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")}).join("; ")+";"}(i);return document.createTextNode(r+"{"+a+"}")}(o,i,r)),e.appendChild(s)}}(i)})}).then(function(){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value),t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}).then(function(){e instanceof SVGElement&&(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e instanceof SVGRectElement&&["width","height"].forEach(function(t){var n=e.getAttribute(t);n&&e.style.setProperty(t,n)}))}).then(function(){return e}):e}(t,e)}):Promise.resolve();function r(t,e,i){var r=t.childNodes;return 0===r.length?Promise.resolve(e):function(t,e,n){var i=Promise.resolve();return e.forEach(function(e){i=i.then(function(){return c(e,n)}).then(function(e){e&&t.appendChild(e)})}),i}(e,n.asArray(r),i).then(function(){return e})}}function h(t){return r.resolveAll().then(function(e){var n=document.createElement("style");return t.appendChild(n),n.appendChild(document.createTextNode(e)),t})}function d(t){return a.inlineAll(t).then(function(){return t})}t.exports=s}()},function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=n(22),a=n(147),o=n(471),s=function(){function t(t){this.options=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}({graph:null,width:null,height:null,canvas:null,beforeTransform:function(){},afterTransform:function(){},drawCount:0},t)}var e=t.prototype;return e.getCanvas=function(){var t=this.options,e=t.width,n=t.height,i=t.canvas;if(!i){var o=r.createDOM("<canvas></canvas>");i=new a.Canvas({containerDOM:o,width:e,height:n})}return i.drawCount||(i.drawCount=0),i},e.drawInner=function(t,e){var n=this.options.graph,i=n.getCanvas(),r=n.get("renderer"),a=t.drawCount;if("svg"===r){var s=[];i.deepEach(function(t){"dom"===t.get("type")&&s.push(t)}),s.length>0?s.forEach(function(n){n.domImageOnload=!1;var i=n.get("el"),r=n.attr("width"),l=n.attr("height");o.toPng(i,{width:r,height:l}).then(function(i){var r=new Image;r.src=i,r.onload=function(){if(a===t.drawCount-1){n.domImage=r,n.domImageOnload=!0;for(var i=0;i<s.length;i++){var o=s[i];if(!o.domImageOnload||o.get("destroyed"))break;o.domImageOnload&&i===s.length-1&&e()}}}})}):e()}else e();t.drawCount+=1},e.toCanvas=function(){var t=this.options,e=t.graph,n=t.width,i=t.height,a=t.beforeTransform,o=t.afterTransform,s=this.getCanvas(),l=e.getBBox(),u=r.clone(e.getMatrix()),c=e.getFitViewPadding(),h=e.getCanvas(),d=r.getAutoZoomMatrix({minX:0,minY:0,maxX:n,maxY:i},l,c);return this.drawInner(s,function(){var t=h.get("children");s.set("children",t),a(d,u),e.setMatrix(d),s.draw(),e.setMatrix(u),o(d,u)}),s.matrix=d,s.get("el")},t}();t.exports=s},function(t,e,n){var i=n(22),r=function(t){function e(e){var n={type:"guide",isGuide:!0,zIndex:4};return i.mix(n,e),t.call(this,n)||this}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e}(n(371));t.exports=r},function(t,e,n){var i=n(22),r=function(t){function e(e){var n={type:"group",isNode:!1,isGroup:!0,zIndex:1};return i.mix(n,e),t.call(this,n)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n._beforeDraw=function(){this.deepEach(function(t,e){e&&(t.zIndex=e.zIndex+1),t.updateCollapsedParent(),t.collapsedParent?t.hide():t.show()}),this.getInnerEdges().forEach(function(t){t.linkedItemVisible()?t.show():t.hide()}),t.prototype._beforeDraw.call(this)},n.updatePosition=function(){},n._shouldDraw=function(){return!0},n.getCrossEdges=function(){var t=[],e=this.getInnerEdges();this.deepEach(function(e){t.push(e.id)});var n=e.filter(function(e){var n=e.getModel();return-1===t.indexOf(n.source)||-1===t.indexOf(n.target)});return i.uniq(n)},n.getInnerEdges=function(){var t=[];return this.deepEach(function(e){e.getEdges().forEach(function(e){t.push(e)})}),i.uniq(t)},n.getChildrenBBox=function(){var t=this.getChildren().map(function(t){return t.getGraphicGroup()});return i.getChildrenBBox(t)},e}(n(388));t.exports=r},function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=n(22),a=function(t){function e(e){var n={type:"edge",isEdge:!0,zIndex:2};return r.mix(n,e),t.call(this,n)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n._init=function(){t.prototype._init.call(this)},n._beforeDraw=function(){var e=this.model,n=this.itemMap;r.isObject(e.source)?this.source=e.source:this.source=n[e.source],r.isObject(e.target)?this.target=e.target:this.target=n[e.target],t.prototype._beforeDraw.call(this)},n._afterDraw=function(){this.linkedItemVisible()||this.hide(),this._addArrow(),t.prototype._afterDraw.call(this)},n._addArrow=function(){var t=this.model,e=this.keyShape;if("path"===e.get("type")){var n=this.shapeObj,i=e.attr("endArrow"),r=e.attr("startArrow"),a=t.endArrow||i,o=t.startArrow||r;r&&e.attr("startArrow",!1),i&&e.attr("endArrow",!1),a&&this._drawArrow(n.endArrow,"end"),o&&this._drawArrow(n.startArrow,"start")}},n._drawArrow=function(t,e){var n=t.path,a=t.shorten,o=t.tangent,s=t.ratio,l=t.style;o=o(this),a=a(this),n=n(this),l=l(this),s=s();var u=this.group,c=this.keyShape,h=r.parsePathString(c.attr("path")),d=h[h.length-1],f=h[0],p=c.getPoint(s);if(p&&!isNaN(p.x)){var g=u.addShape("path",{attrs:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}({path:n},l)}),m=o[1][0]-o[0][0],v=o[1][1]-o[0][1],y=a/Math.sqrt(m*m+v*v),x=[-m*y,-v*y],_=0,b=Math.atan(m/v);0===v&&m<0?_=Math.PI:m>0&&v>0?_=Math.PI/2-b:m<0&&v<0?_=-Math.PI/2-b:m>=0&&v<0?_=-b-Math.PI/2:m<=0&&v>0&&(_=Math.PI/2-b),g.rotate(_),g.translate(p.x,p.y),"end"===e?(d[d.length-1]=x[1]+p.y,d[d.length-2]=x[0]+p.x):(f[f.length-1]=x[1]+p.y,f[f.length-2]=x[0]+p.x),c.attr("path",h),this[e+"Arrow"]=g}},n._getControlPoints=function(){var t=this.model.controlPoints;return r.isArray(t)?t:[]},n._shouldDraw=function(){return t.prototype._shouldDraw.call(this)&&this.linkedItemVisible()},n._getPoint=function(t){if(t.isItem){var e=t.getBBox();return{x:e.centerX,y:e.centerY}}return{x:t.x,y:t.y}},n.linkedItemVisible=function(){var t=this.source,e=this.target;return r.isPlainObject(t)||r.isPlainObject(e)||t.isVisible()||e.isVisible()||t.collapsedParent!==e.collapsedParent},n.getSource=function(){var t=this.source,e=t.collapsedParent,n=this.itemMap;return e?n[e.id]:t},n.getTarget=function(){var t=this.target,e=t.collapsedParent,n=this.itemMap;return e?n[e.id]:t},n.getPoints=function(){var t=this.getSource(),e=this.getTarget(),n=this.model,i=this._getControlPoints(),a=this._getPoint(t),o=this._getPoint(e),s=[a].concat(i).concat([o]),l=s.length;if(t.isItem){var u=r.isNumber(this.model.sourceAnchor)&&t.id===n.source?this.model.sourceAnchor:s[1],c=t.getLinkPoints(u);s[0]=c[0]}if(e.isItem){var h=r.isNumber(this.model.targetAnchor)&&e.id===n.target?this.model.targetAnchor:s[l-2],d=e.getLinkPoints(h);s[l-1]=d[0]}return s},n.destroy=function(){var e=this.itemMap,n=this.model,i=e[n.source],a=e[n.target];i&&i.isItem&&r.Array.remove(i.edges,this),a&&a.isItem&&r.Array.remove(a.edges,this),t.prototype.destroy.call(this)},e}(n(371));t.exports=a},function(t,e,n){t.exports={Node:n(388),Edge:n(475),Group:n(474),Guide:n(473)}},function(t,e,n){var i;
/*!
     * EventEmitter v5.2.5 - git.io/ee
     * Unlicense - http://unlicense.org/
     * Oliver Caldwell - http://oli.me.uk/
     * @preserve
     */!function(e){"use strict";function r(){}var a=r.prototype,o=e.EventEmitter;function s(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function l(t){return function(){return this[t].apply(this,arguments)}}a.getListeners=function(t){var e,n,i=this._getEvents();if(t instanceof RegExp)for(n in e={},i)i.hasOwnProperty(n)&&t.test(n)&&(e[n]=i[n]);else e=i[t]||(i[t]=[]);return e},a.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},a.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&((e={})[t]=n),e||n},a.addListener=function(t,e){if(!function t(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&t(e.listener)}(e))throw new TypeError("listener must be a function");var n,i=this.getListenersAsObject(t),r="object"==typeof e;for(n in i)i.hasOwnProperty(n)&&-1===s(i[n],e)&&i[n].push(r?e:{listener:e,once:!1});return this},a.on=l("addListener"),a.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},a.once=l("addOnceListener"),a.defineEvent=function(t){return this.getListeners(t),this},a.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},a.removeListener=function(t,e){var n,i,r=this.getListenersAsObject(t);for(i in r)r.hasOwnProperty(i)&&-1!==(n=s(r[i],e))&&r[i].splice(n,1);return this},a.off=l("removeListener"),a.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},a.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},a.manipulateListeners=function(t,e,n){var i,r,a=t?this.removeListener:this.addListener,o=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(i=n.length;i--;)a.call(this,e,n[i]);else for(i in e)e.hasOwnProperty(i)&&(r=e[i])&&("function"==typeof r?a.call(this,i,r):o.call(this,i,r));return this},a.removeEvent=function(t){var e,n=typeof t,i=this._getEvents();if("string"===n)delete i[t];else if(t instanceof RegExp)for(e in i)i.hasOwnProperty(e)&&t.test(e)&&delete i[e];else delete this._events;return this},a.removeAllListeners=l("removeEvent"),a.emitEvent=function(t,e){var n,i,r,a,o=this.getListenersAsObject(t);for(a in o)if(o.hasOwnProperty(a))for(n=o[a].slice(0),r=0;r<n.length;r++)!0===(i=n[r]).once&&this.removeListener(t,i.listener),i.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,i.listener);return this},a.trigger=l("emitEvent"),a.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},a.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},a._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},a._getEvents=function(){return this._events||(this._events={})},r.noConflict=function(){return e.EventEmitter=o,r},void 0===(i=function(){return r}.call(e,n,e,t))||(t.exports=i)}("undefined"!=typeof window?window:this||{})},function(t,e,n){var i=n(22),r=function(t){!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(n,t);var e=n.prototype;function n(e){var n,r=(n=t.call(this)||this).getDefaultCfg();return n._cfg=i.mix({},r,e),n}return e.getDefaultCfg=function(){return{}},e.get=function(t){return this._cfg[t]},e.set=function(t,e){this._cfg[t]=e},e.destroy=function(){this._cfg={},this.removeAllListeners(),this.destroyed=!0},n}(n(477));t.exports=r},function(t,e,n){var i=n(22),r=n(147),a=function(){};i.augment(a,{drawInner:function(t){var e=i.clone(this.getTotalMatrix()),n=this._attrs,r=n.x,a=n.y,o=n.width,s=n.height;t.setTransform(e[0],e[1],e[3],e[4],e[6],e[7]),t.drawImage(this.domImage,r,a,o,s)}}),i.mixin(r.Dom,[a]),t.exports=a},function(t,e,n){var i=n(22),r=n(147),a=function(){};i.augment(a,{hasClass:function(t){var e=this.get("class");return!(!e||-1===e.indexOf(t))}}),i.mixin(r.Shape,[a]),t.exports=a},function(t,e,n){var i=n(147),r=n(22),a=function(){};r.augment(a,{findByClass:function(t){var e=[];return this.deepEach(function(n){n.hasClass(t)&&e.push(n)}),e},hasClass:function(t){var e=this.get("class");return!(!e||-1===e.indexOf(t))},deepEach:function(t,e){r.traverseTree(this,t,function(t){return t.get("children")},e)},sort:function(){var t=this.get("children");this.set("children",r.radixSort(t,function(t){return t.get("zIndex")}))},sortBy:function(t){var e=this.get("children");this.set("children",r.radixSort(e,t))},clear:function(t){for(var e=this._cfg.children,n=e.length-1;n>=0;n--)e[n].remove(t);return this._cfg.children=[],this}}),r.mixin(i.Group,[a]),t.exports=a},function(t,e,n){n(153).registerGuide("common",{draw:function(){console.warn("do not have this guide, please register one")}})},function(t,e,n){t.exports={common:n(482)}},function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=n(153),a=n(22),o=n(146);r.registerGroup("common",{draw:function(t){return t.getModel().collapsed?this.drawCollapsed(t):this.drawExpanded(t)},defaultWidth:184,defaultHeight:40,getLabel:function(t){return t.getModel().label},drawLabel:function(t,e,n){var i=this.getLabel(t);if(i){var r=t.getGraphicGroup(),s=[8,8];e+=s[0],n+=s[1];var l=t.getModel(),u=l.labelOffsetX,c=l.labelOffsetY,h=l.labelRotate;e=u?u+e:e,n=c?c+n:n;var d=a.mix(!0,{},o.labelStyle,{x:e,y:n,textAlign:"left",textBaseline:"top"});a.isObject(i)?a.mix(d,i):d.text=i;var f=r.addShape("text",{class:"label",attrs:d});if(h){var p=f.getBBox(),g=(p.maxX+p.minX)/2,m=(p.maxY+p.minY)/2;f.transform([["t",-g,-m],["r",h,h],["t",g,m]])}}},drawKeyShape:function(t,e){var n=e.x,i=e.y,r=e.width,s=e.height,l=t.getModel(),u=t.getGraphicGroup(),c=a.mix({},o.groupStyle,l.style),h=a.getRectPath(n,i,r,s,c.radius);return t.lastChildrenBox=e,u.addShape("path",{attrs:a.mix({},c,{path:h})})},getChildrenBBox:function(t){var e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}({},t.lastChildrenBox),n=t.getModel();if(t.getChildren().length>0){var r=t.getChildrenBBox();e.x=r.minX-o.groupBackgroundPadding[3],e.y=r.minY-o.groupBackgroundPadding[0],e.width=r.maxX-r.minX+o.groupBackgroundPadding[3]+o.groupBackgroundPadding[1],e.height=r.maxY-r.minY+o.groupBackgroundPadding[0]+o.groupBackgroundPadding[2]}else e.width=this.defaultWidth,e.height=this.defaultHeight;return a.isNil(e.x)&&!a.isNil(n.x)&&(e.x=n.x),a.isNil(e.y)&&!a.isNil(n.y)&&(e.y=n.y),e},drawExpanded:function(t){var e=this.getChildrenBBox(t),n=this.drawKeyShape(t,e);return this.drawLabel(t,e.x,e.y),n},drawCollapsed:function(t){var e=this.getChildrenBBox(t);e.width=this.defaultWidth,e.height=this.defaultHeight;var n=this.drawKeyShape(t,e);return this.drawLabel(t,e.x,e.y),n},anchor:{intersectBox:"rect"}})},function(t,e,n){t.exports={common:n(484)}},function(t,e,n){function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=n(153),o=n(22),s=n(146),l={path:function(t){var e=t.getKeyShape().attr("lineWidth"),n=10*(e=e>3?e:3)/3,i=4*e/3,r=4*e;return[["M",-n,i],["L",0,0],["L",-n,-i],["A",r,r,0,0,1,-n,i],["Z"]]},shorten:function(t){var e=t.getKeyShape().attr("lineWidth");return 3.1*(e>3?e:3)},style:function(t){var e=t.getKeyShape().attr();return{fillOpacity:e.strokeOpacity,fill:e.stroke}}};a.registerEdge("common",{draw:function(t){var e=this.drawKeyShape(t);return this.drawLabel(t,e),e},drawKeyShape:function(t){var e=t.getGraphicGroup(),n=this.getStyle(t),i=this.getPath(t);return e.addShape("path",{attrs:o.mix({},n,{path:i})})},getStyle:function(t){var e=t.getModel();return o.mix(!0,{},{stroke:e.color||"#A3B1BF",strokeOpacity:.92,lineAppendWidth:4,lineWidth:e.size||1},e.style)},getPath:function(t){var e=t.getPoints();return o.pointsToPolygon(e)},getLabel:function(t){return t.getModel().label},getDefaultLabelRectStyle:function(){return{fill:"white"}},getDefaultLabelRectPadding:function(){return o.toAllPadding([4,8])},drawLabel:function(t,e){var n=this.getLabel(t),i=t.getGraphicGroup(),r=t.getModel(),a=r.labelOffsetX,l=r.labelOffsetY,u=r.labelRotate;if(n){var c=e.getPoint(.5);if(!c)return;c.x=a?c.x+a:c.x,c.y=l?c.y+l:c.y;var h=o.mix(!0,{},s.labelStyle,c);o.isObject(n)?o.mix(h,n):h.text=n,n=i.addShape("text",{class:"label",attrs:h});var d=this.getDefaultLabelRectPadding(t),f=this.getDefaultLabelRectStyle(t),p=n.getBBox(),g=r.labelRectStyle?o.mix({},f,r.labelRectStyle):f,m=i.addShape("rect",{attrs:o.mix({},g,{x:p.minX-d[3],y:p.minY-d[0],width:p.maxX-p.minX+d[1]+d[3],height:p.maxY-p.minY+d[0]+d[2]})});if(u){var v=(p.maxX+p.minX)/2,y=(p.maxY+p.minY)/2;n.transform([["t",-v,-y],["r",u,u],["t",v,y]]),m.transform([["t",-v,-y],["r",u,u],["t",v,y]])}o.toFront(n)}},startArrow:i({},l,{tangent:function(t){return t.getKeyShape().getStartTangent()},ratio:function(){return 0}}),endArrow:i({},l,{tangent:function(t){return t.getKeyShape().getEndTangent()},ratio:function(){return 1}})})},function(t,e,n){t.exports={common:n(486)}},function(t,e,n){var i=n(153),r=n(22);i.registerNode("html",{getHtml:function(t){return t.getModel().html},cssSize:!0,draw:function(t){var e=r.createDOM('<div class="g6-html-node-container"></div>'),n=t.getGraphicGroup(),i=t.getGraph();if("svg"!==i.get("renderer"))throw new Error("please use svg renderer draw html element !");var a=i.getGraphContainer(),o=this.getSize(t),s=this.getStyle(t),l=this.cssSize,u=this.getHtml(t);u=r.createDOM(u),e.css({position:"absolute",padding:"0px",margin:"0px"}),e.appendChild(u),a.appendChild(e),l&&(o[0]=e.width(),o[1]=e.height());var c=-o[0]/2,h=-o[1]/2,d=o[0],f=o[1],p=n.addShape("rect",{attrs:r.mix({},s,{x:c,y:h,width:d,height:f})});return n.addShape("dom",{attrs:r.mix({x:c,y:h,width:d,height:f,html:e})}),p}})},function(t,e,n){var i=n(153),r=n(22),a=n(146);i.registerNode("common",{draw:function(t){var e=t.getGraphicGroup(),n=this.drawLabel(t),i=this.drawKeyShape(t);return n&&r.toFront(n,e),i},getSize:function(t){var e=t.getModel().size;return r.isArray(e)?e:r.isNumber(e)?[e,e]:[a.defaultNodeSize,a.defaultNodeSize]},getStyle:function(t){var e=t.getModel();return r.mix(!0,{lineWidth:1,fill:e.color||"#40a9ff",stroke:e.color||"#096dd9",fillOpacity:.92},e.style)},getLabel:function(t){return t.getModel().label},drawKeyShape:function(t){var e=t.getGraphicGroup(),n=this.getStyle(t),i=this.getPath(t);return e.addShape("path",{attrs:r.mix({},n,{path:i})})},drawLabel:function(t){var e=t.getGraphicGroup(),n=this.getLabel(t),i=t.getModel(),o=i.labelOffsetX,s=i.labelOffsetY,l=i.labelRotate;if(!r.isNil(n)){var u=r.mix(!0,{},a.labelStyle,{x:o||0,y:s||0});r.isObject(n)?r.mix(u,n):u.text=n;var c=e.addShape("text",{class:"label",attrs:u});return l&&c.rotate(l),c}},getPath:function(t){var e=this.getSize(t);return r.getEllipsePath(0,0,e[0]/2,e[1]/2)}})},function(t,e,n){t.exports={common:n(489),html:n(488)}},function(t,e,n){var i=n(448),r=n(152),a={getAutoZoomMatrix:function(t,e,n,r){var a=[1,0,0,0,1,0,0,0,1],o=t.maxX-t.minX,s=t.maxY-t.minY,l=(e.maxX+e.minX)/2,u=(e.maxY+e.minY)/2,c=o-n[1]-n[3],h=s-n[0]-n[2],d=e.maxX-e.minX,f=e.maxY-e.minY,p=Math.min(h/f,c/d);return r&&(p=r(p)),i.mat3.translate(a,a,[-l,-u]),i.mat3.scale(a,a,[p,p]),i.mat3.translate(a,a,[o/2,s/2]),a},getNineBoxPosition:function(t,e,n,i,r){var a={};switch(t){case"tl":a.y=e.x+r[0],a.x=e.y+r[3];break;case"lc":a.y=(e.height-i)/2,a.x=r[3];break;case"bl":a.y=e.height-i-r[2],a.x=r[3];break;case"cc":a.y=(e.height-i)/2,a.x=(e.width-n)/2;break;case"tc":a.y=r[0],a.x=(e.width-n)/2;break;case"tr":a.y=r[0],a.x=e.width-n-r[1];break;case"rc":a.y=(e.height-i)/2,a.x=e.width-n-r[1];break;case"br":a.y=e.height-i-r[2],a.x=e.width-n-r[1];break;case"bc":a.y=e.height-i-r[2],a.x=(e.width-n)/2;break;default:a.y=e.x+r[0],a.x=e.y+r[3]}return a.x+=e.x,a.y+=e.y,a},getTotalBBox:function(t){var e=1/0,n=-1/0,i=1/0,r=-1/0;return t.forEach(function(t){t.minX<e&&(e=t.minX),t.maxX>n&&(n=t.maxX),t.minY<i&&(i=t.minY),t.maxY>r&&(r=t.maxY)}),{minX:e,minY:i,maxX:n,maxY:r,width:n-e,height:r-i}},getChildrenBBox:function(t){var e=1/0,n=-1/0,i=1/0,o=-1/0;r.each(t,function(t){var r=t.isGroup?a.getChildrenBBox(t.get("children")):t.getBBox();if(!r)return!0;var s=[r.minX,r.minY,1],l=[r.minX,r.maxY,1],u=[r.maxX,r.minY,1],c=[r.maxX,r.maxY,1];t.apply(s),t.apply(l),t.apply(u),t.apply(c);var h=Math.min(s[0],l[0],u[0],c[0]),d=Math.max(s[0],l[0],u[0],c[0]),f=Math.min(s[1],l[1],u[1],c[1]),p=Math.max(s[1],l[1],u[1],c[1]);h<e&&(e=h),d>n&&(n=d),f<i&&(i=f),p>o&&(o=p)});var s={minX:e,minY:i,maxX:n,maxY:o};return s.x=s.minX,s.y=s.minY,s.width=s.maxX-s.minX,s.height=s.maxY-s.minY,s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2,s},getBBox:function(t,e){var n,r=t.getBBox(),a={x:r.minX,y:r.minY},o={x:r.maxX,y:r.maxY};if(e.isGroup){for(n=t;n!==e;){var s=n.getMatrix();a=i.applyMatrix(a,s),o=i.applyMatrix(o,s),n=n.getParent()}var l=n.getMatrix();a=i.applyMatrix(a,l),o=i.applyMatrix(o,l)}else a=i.applyMatrix(a,e),o=i.applyMatrix(o,e);return{minX:a.x,minY:a.y,maxX:o.x,maxY:o.y}},toBack:function(t){t.toBack()},toFront:function(t){t.toFront()}};t.exports=a},function(t,e,n){var i=n(152);t.exports={isNode:function(t){return t&&i.isObject(t)&&"node"===t.type},isEdge:function(t){return t&&i.isObject(t)&&"edge"===t.type},isGroup:function(t){return t&&i.isObject(t)&&"group"===t.type}}},function(t,e,n){var i=n(152),r={};i.mix(r,{addEventListener:function(t,e,n){return t.attachEvent?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):t.addEventListener?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):void 0},createDOM:function(t,e){var n;return(n=i.isString(t)?i.createDom(t):t).bbox=n.getBoundingClientRect(),n.hide=function(){return n.style.visibility="hidden",n},n.show=function(){return n.style.visibility="visible",n},n.css=function(t){return i.modifyCSS(n,t),n},n.width=function(){return i.getWidth(n)},n.height=function(){return i.getHeight(n)},n.destroy=function(){n.parentNode&&n.parentNode.removeChild(n)},n.on=function(t,e){n.addEventListener(t,e)},n.off=function(t,e){n.removeEventListener(t,e)},n.css(e),n},initDOMContainer:function(t,e){if(!t)throw new Error("please set the container for the "+e+" !");return i.isString(t)&&(t=document.getElementById(t)),t}}),t.exports=r},function(t,e){var n={svg:"svg",circle:"circle",rect:"rect",text:"text",path:"path",foreignObject:"foreignObject",polygon:"polygon",ellipse:"ellipse",image:"image"};t.exports=function(t,e,i){var r=i.target||i.srcElement;if(!n[r.tagName]){for(var a=r.parentNode;a&&!n[a.tagName];)a=a.parentNode;r=a}return this._cfg.el===r?this:this.find(function(t){return t._cfg&&t._cfg.el===r})}},function(t,e,n){var i=n(17),r=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,a=function(){function t(t){var e=document.createElementNS("http://www.w3.org/2000/svg","pattern");e.setAttribute("patternUnits","userSpaceOnUse");var n=document.createElementNS("http://www.w3.org/2000/svg","image");e.appendChild(n);var a=i.uniqueId("pattern_");e.id=a,this.el=e,this.id=a,this.cfg=t;var o=r.exec(t)[2];n.setAttribute("href",o);var s=new Image;function l(){console.log(s.width,s.height),e.setAttribute("width",s.width),e.setAttribute("height",s.height)}return o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o,s.complete?l():(s.onload=l,s.src=s.src),this}return t.prototype.match=function(t,e){return this.cfg===e},t}();t.exports=a},function(t,e,n){var i=n(17),r=function(){function t(t){this.type="clip";var e=document.createElementNS("http://www.w3.org/2000/svg","clipPath");this.el=e,this.id=i.uniqueId("clip_"),e.id=this.id;var n=t._cfg.el;return e.appendChild(n.cloneNode(!0)),this.cfg=t,this}var e=t.prototype;return e.match=function(){return!1},e.remove=function(){var t=this.el;t.parentNode.removeChild(t)},t}();t.exports=r},function(t,e,n){var i=n(17),r=function(){function t(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg","marker"),r=i.uniqueId("marker_");n.setAttribute("id",r);var a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("stroke","none"),a.setAttribute("fill",t.stroke||"#000"),n.appendChild(a),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=a,this.id=r,this.cfg=t["marker-start"===e?"startArrow":"endArrow"],this.stroke=t.stroke||"#000",!0===this.cfg?this._setDefaultPath(e,a):this._setMarker(t.lineWidth,a),this}var e=t.prototype;return e.match=function(){return!1},e._setDefaultPath=function(t,e){var n=this.el;e.setAttribute("d","M0,0 L6,3 L0,6 L3,3Z"),n.setAttribute("refX",3),n.setAttribute("refY",3)},e._setMarker=function(t,e){var n=this.el,r=this.cfg.path,a=this.cfg.d;i.isArray(r)&&(r=r.map(function(t){return t.join(" ")}).join("")),e.setAttribute("d",r),n.appendChild(e),a&&n.setAttribute("refX",a/t)},e.update=function(t){var e=this.child;e.attr?e.attr("fill",t):e.setAttribute("fill",t)},t}();t.exports=r},function(t,e,n){var i=n(17),r={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},a={x:"-40%",y:"-40%",width:"200%",height:"200%"},o=function(){function t(t){this.type="filter";var e=document.createElementNS("http://www.w3.org/2000/svg","filter");return i.each(a,function(t,n){e.setAttribute(n,t)}),this.el=e,this.id=i.uniqueId("filter_"),this.el.id=this.id,this.cfg=t,this._parseShadow(t,e),this}var e=t.prototype;return e.match=function(t,e){if(this.type!==t)return!1;var n=!0,r=this.cfg;return i.each(Object.keys(r),function(t){if(r[t]!==e[t])return n=!1,!1}),n},e.update=function(t,e){var n=this.cfg;return n[r[t]]=e,this._parseShadow(n,this.el),this},e._parseShadow=function(t,e){var n='<feDropShadow \n      dx="'+(t.dx||0)+'" \n      dy="'+(t.dy||0)+'" \n      stdDeviation="'+(t.blur?t.blur/10:0)+'"\n      flood-color="'+(t.color?t.color:"#000")+'"\n      flood-opacity="'+(t.opacity?t.opacity:1)+'"\n      />';e.innerHTML=n},t}();t.exports=o},function(t,e,n){var i=n(17),r=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,a=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,o=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function s(t){var e=t.match(o);if(!e)return"";var n="";return e.sort(function(t,e){return t=t.split(":"),e=e.split(":"),Number(t[0])-Number(e[0])}),i.each(e,function(t){t=t.split(":"),n+='<stop offset="'+t[0]+'" stop-color="'+t[1]+'"></stop>'}),n}var l=function(){function t(t){var e=null,n=i.uniqueId("gradient_");return"l"===t.toLowerCase()[0]?function(t,e){var n,a,o=r.exec(t),l=i.mod(i.toRadian(parseFloat(o[1])),2*Math.PI),u=o[2];l>=0&&l<.5*Math.PI?(n={x:0,y:0},a={x:1,y:1}):.5*Math.PI<=l&&l<Math.PI?(n={x:1,y:0},a={x:0,y:1}):Math.PI<=l&&l<1.5*Math.PI?(n={x:1,y:1},a={x:0,y:0}):(n={x:0,y:1},a={x:1,y:0});var c=Math.tan(l),h=c*c,d=(a.x-n.x+c*(a.y-n.y))/(h+1)+n.x,f=c*(a.x-n.x+c*(a.y-n.y))/(h+1)+n.y;e.setAttribute("x1",n.x),e.setAttribute("y1",n.y),e.setAttribute("x2",d),e.setAttribute("y2",f),e.innerHTML=s(u)}(t,e=document.createElementNS("http://www.w3.org/2000/svg","linearGradient")):function(t,e){var n=a.exec(t),i=parseFloat(n[1]),r=parseFloat(n[2]),o=parseFloat(n[3]),l=n[4];e.setAttribute("cx",i),e.setAttribute("cy",r),e.setAttribute("r",o),e.innerHTML=s(l)}(t,e=document.createElementNS("http://www.w3.org/2000/svg","radialGradient")),e.setAttribute("id",n),this.el=e,this.id=n,this.cfg=t,this}return t.prototype.match=function(t,e){return this.cfg===e},t}();t.exports=l},function(t,e,n){var i=n(17),r=n(499),a=n(498),o=n(497),s=n(496),l=n(495),u=function(){function t(t){var e=document.createElementNS("http://www.w3.org/2000/svg","defs"),n=i.uniqueId("defs_");e.id=n,t.appendChild(e),this.children=[],this.defaultArrow={},this.el=e,this.canvas=t}var e=t.prototype;return e.find=function(t,e){for(var n=this.children,i=null,r=0;r<n.length;r++)if(n[r].match(t,e)){i=n[r].id;break}return i},e.findById=function(t){for(var e=this.children,n=null,i=0;i<e.length;i++)if(e[i].id===t){n=e[i];break}return n},e.add=function(t){this.children.push(t),t.canvas=this.canvas,t.parent=this},e.getDefaultArrow=function(t,e){var n=t.stroke||t.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var i=new o(t,e);return this.defaultArrow[n]=i,this.el.appendChild(i.el),i.id},e.addGradient=function(t){var e=new r(t);return this.el.appendChild(e.el),this.add(e),e.id},e.addArrow=function(t,e){var n=new o(t,e);return this.el.appendChild(n.el),n.id},e.addShadow=function(t){var e=new a(t);return this.el.appendChild(e.el),this.add(e),e.id},e.addPattern=function(t){var e=new l(t);return this.el.appendChild(e.el),this.add(e),e.id},e.addClip=function(t){var e=new s(t);return this.el.appendChild(e.el),this.add(e),e.id},t}();t.exports=u},function(t,e,n){var i=n(17),r=n(356).parseRadius,a=n(374),o=n(500),s={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject",fan:"path",group:"g"},l={opacity:"opacity",fillStyle:"fill",strokeOpacity:"stroke-opacity",fillOpacity:"fill-opacity",strokeStyle:"stroke",x:"x",y:"y",r:"r",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},u={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},c={left:"left",start:"left",center:"middle",right:"end",end:"end"},h=function(){function t(t){if(!t)return null;var e=i.uniqueId("canvas_"),n=i.createDom('<svg id="'+e+'"></svg>');return t.appendChild(n),this.type="svg",this.canvas=n,this.context=new o(n),this.toDraw=!1,this}var e=t.prototype;return e.draw=function(t){var e=this;e.animateHandler?e.toDraw=!0:function n(){e.animateHandler=i.requestAnimationFrame(function(){e.animateHandler=void 0,e.toDraw&&n()});try{e._drawChildren(t)}catch(t){console.warn("error in draw canvas, detail as:"),console.warn(t),e.toDraw=!1}e.toDraw=!1}()},e.drawSync=function(t){this._drawChildren(t)},e._drawGroup=function(t,e){var n=t._cfg;n.removed||n.destroyed||(n.tobeRemoved&&(i.each(n.tobeRemoved,function(t){t.parentNode&&t.parentNode.removeChild(t)}),n.tobeRemoved=[]),this._drawShape(t,e),n.children&&n.children.length>0&&this._drawChildren(t))},e._drawChildren=function(t){var e,n=t._cfg.children;if(n)for(var i=0;i<n.length;i++)(e=n[i]).isGroup?this._drawGroup(e,i):this._drawShape(e,i)},e._drawShape=function(t,e){var n=t._attrs,i=t._cfg,r=i.el;i.removed||i.destroyed?r&&r.parentNode.removeChild(i.el):(!r&&i.parent&&(this._createDom(t,e),this._updateShape(t)),r=i.el,!1!==i.visible?(i.visible&&r.hasAttribute("visibility")&&r.removeAttribute("visibility"),i.hasUpdate&&this._updateShape(t),n.clip&&n.clip._cfg.hasUpdate&&this._updateShape(n.clip)):r.setAttribute("visibility","hidden"))},e._updateShape=function(t){var e=t._attrs,n=t._cfg.attrs;if(n)if(t._cfg.el||this._createDom(t),"clip"in e&&this._setClip(t,e.clip),("shadowOffsetX"in e||"shadowOffsetY"in e||"shadowBlur"in e||"shadowColor"in e)&&this._setShadow(t),"text"!==t.type){for(var r in"fan"===t.type&&this._updateFan(t),"marker"===t.type&&t._cfg.el.setAttribute("d",this._assembleMarker(e)),"rect"===t.type&&t._cfg.el.setAttribute("d",this._assembleRect(e)),e)e[r]!==n[r]&&this._setAttribute(t,r,e[r]);t._cfg.attrs=i.deepMix({},t._attrs),t._cfg.hasUpdate=!1}else this._updateText(t)},e._setAttribute=function(t,e,n){var r=t.type,a=t._attrs,o=t._cfg.el,s=this.context;if("marker"!==r&&"rect"!==r||!~["x","y","radius","r"].indexOf(e))if(~["circle","ellipse"].indexOf(r)&&~["x","y"].indexOf(e))o.setAttribute("c"+e,parseInt(n,10));else{if("polygon"===r&&"points"===e)return n&&0!==n.length||(n=""),i.isArray(n)&&(n=(n=n.map(function(t){return t[0]+","+t[1]})).join(" ")),void o.setAttribute("points",n);if("path"===e&&i.isArray(n))o.setAttribute("d",this._formatPath(n));else if("img"!==e){if("transform"===e)return n?void this._setTransform(t):void o.removeAttribute("transform");if("rotate"===e)return n?void this._setTransform(t):void o.removeAttribute("transform");if("matrix"!==e)if("fillStyle"!==e&&"strokeStyle"!==e){if("clip"!==e)if(~e.indexOf("Arrow"))if(e=l[e],n){var u=null;u="boolean"==typeof n?s.getDefaultArrow(a,e):s.addArrow(a,e),o.setAttribute(e,"url(#"+u+")"),t._cfg[e]=u}else t._cfg[e]=null,o.removeAttribute(e);else"html"===e&&("string"==typeof n?o.innerHTML=n:(o.innerHTML="",o.appendChild(n))),l[e]&&o.setAttribute(l[e],n)}else this._setColor(t,e,n);else this._setTransform(t)}else this._setImage(t,n)}},e._createDom=function(t,e){var n=s[t.type],i=t._attrs,r=t._cfg.parent,a=r._cfg.el;if(!n)throw new Error("the type"+t.type+"is not supported by svg");var o=document.createElementNS("http://www.w3.org/2000/svg",n);if(t._cfg.el=o,r)if(void 0===e)a.appendChild(o);else{var l=r._cfg.el.childNodes;"svg"===a.tagName&&(e+=1),l.length<=e?a.appendChild(o):a.insertBefore(o,l[e])}return t._cfg.attrs={},"text"===t.type?(o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")):(i.stroke||i.strokeStyle||o.setAttribute("stroke","none"),i.fill||i.fillStyle||o.setAttribute("fill","none")),o},e._assembleMarker=function(t){var e=t.r;if(void 0===t.r&&(e=t.radius),isNaN(Number(t.x))||isNaN(Number(t.y))||isNaN(Number(e)))return"";var n="";return n="function"==typeof t.symbol?t.symbol(t.x,t.y,e):a.Symbols[t.symbol||"circle"](t.x,t.y,e),i.isArray(n)&&(n=n.map(function(t){return t.join(" ")}).join("")),n},e._assembleRect=function(t){var e=t.x,n=t.y,a=t.width,o=t.height,s=t.radius;if(!s)return"M "+e+","+n+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var l=r(s);return i.isArray(s)?1===s.length?l.r1=l.r2=l.r3=l.r4=s[0]:2===s.length?(l.r1=l.r3=s[0],l.r2=l.r4=s[1]):3===s.length?(l.r1=s[0],l.r2=l.r4=s[1],l.r3=s[2]):(l.r1=s[0],l.r2=s[1],l.r3=s[2],l.r4=s[3]):l.r1=l.r2=l.r3=l.r4=s,[["M "+(e+l.r1)+","+n],["l "+(a-l.r1-l.r2)+",0"],["a "+l.r2+","+l.r2+",0,0,1,"+l.r2+","+l.r2],["l 0,"+(o-l.r2-l.r3)],["a "+l.r3+","+l.r3+",0,0,1,"+-l.r3+","+l.r3],["l "+(l.r3+l.r4-a)+",0"],["a "+l.r4+","+l.r4+",0,0,1,"+-l.r4+","+-l.r4],["l 0,"+(l.r4+l.r1-o)],["a "+l.r1+","+l.r1+",0,0,1,"+l.r1+","+-l.r1],["z"]].join(" ")},e._formatPath=function(t){return~(t=t.map(function(t){return t.join(" ")}).join("")).indexOf("NaN")?"":t},e._setTransform=function(t){for(var e=t._attrs.matrix,n=t._cfg.el,i=[],r=0;r<9;r+=3)i.push(e[r]+","+e[r+1]);-1===(i=i.join(",")).indexOf("NaN")?n.setAttribute("transform","matrix("+i+")"):console.warn("invalid matrix:",e)},e._setImage=function(t,e){var n=t._attrs,r=t._cfg.el;if(i.isString(e))r.setAttribute("href",e);else if(e instanceof Image)n.width||(r.setAttribute("width",e.width),t._attrs.width=e.width),n.height||(r.setAttribute("height",e.height),t._attrs.height=e.height),r.setAttribute("href",e.src);else if(e instanceof HTMLElement&&i.isString(e.nodeName)&&"CANVAS"===e.nodeName.toUpperCase())r.setAttribute("href",e.toDataURL());else if(e instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",e.width),a.setAttribute("height",e.height),a.getContext("2d").putImageData(e,0,0),n.width||(r.setAttribute("width",e.width),t._attrs.width=e.width),n.height||(r.setAttribute("height",e.height),t._attrs.height=e.height),r.setAttribute("href",a.toDataURL())}},e._updateFan=function(t){function e(t,e,n){return{x:e*Math.cos(t)+n.x,y:e*Math.sin(t)+n.y}}var n=t._attrs,r=t._cfg,a={x:n.x,y:n.y},o=[],s=n.startAngle,l=n.endAngle;i.isNumberEqual(l-s,2*Math.PI)&&(l-=1e-5);var u=e(s,n.re,a),c=e(l,n.re,a),h=l>s?1:0,d=Math.abs(l-s)>Math.PI?1:0,f=n.rs,p=n.re,g=e(s,n.rs,a),m=e(l,n.rs,a);n.rs>0?(o.push("M "+c.x+","+c.y),o.push("L "+m.x+","+m.y),o.push("A "+f+","+f+",0,"+d+","+(1===h?0:1)+","+g.x+","+g.y),o.push("L "+u.x+" "+u.y)):(o.push("M "+a.x+","+a.y),o.push("L "+u.x+","+u.y)),o.push("A "+p+","+p+",0,"+d+","+h+","+c.x+","+c.y),n.rs>0?o.push("L "+m.x+","+m.y):o.push("Z"),r.el.setAttribute("d",o.join(" "))},e._updateText=function(t){var e=t._attrs,n=t._cfg.attrs,i=t._cfg.el;for(var r in this._setFont(t),e)if(e[r]!==n[r]){if("text"===r){this._setText(t,""+e[r]);continue}if("fillStyle"===r||"strokeStyle"===r){this._setColor(t,r,e[r]);continue}if("matrix"===r){this._setTransform(t);continue}l[r]&&i.setAttribute(l[r],e[r])}t._cfg.attrs=Object.assign({},t._attrs),t._cfg.hasUpdate=!1},e._setFont=function(t){var e=t.get("el"),n=t._attrs,i=n.fontSize;e.setAttribute("alignment-baseline",u[n.textBaseline]||"baseline"),e.setAttribute("text-anchor",c[n.textAlign]||"left"),i&&+i<12&&(n.matrix=[1,0,0,0,1,0,0,0,1],t.transform([["t",-n.x,-n.y],["s",+i/12,+i/12],["t",n.x,n.y]]))},e._setText=function(t,e){var n=t._cfg.el,r=t._attrs.textBaseline||"bottom";if(e)if(~e.indexOf("\n")){var a=t._attrs.x,o=e.split("\n"),s=o.length-1,l="";i.each(o,function(t,e){0===e?"alphabetic"===r?l+='<tspan x="'+a+'" dy="'+-s+'em">'+t+"</tspan>":"top"===r?l+='<tspan x="'+a+'" dy="0.9em">'+t+"</tspan>":"middle"===r?l+='<tspan x="'+a+'" dy="'+-(s-1)/2+'em">'+t+"</tspan>":"bottom"===r?l+='<tspan x="'+a+'" dy="-'+(s+.3)+'em">'+t+"</tspan>":"hanging"===r&&(l+='<tspan x="'+a+'" dy="'+(-(s-1)-.3)+'em">'+t+"</tspan>"):l+='<tspan x="'+a+'" dy="1em">'+t+"</tspan>"}),n.innerHTML=l}else n.innerHTML=e;else n.innerHTML=""},e._setClip=function(t,e){var n=t._cfg.el;if(e)if(n.hasAttribute("clip-path"))e._cfg.hasUpdate&&this._updateShape(e);else{this._createDom(e),this._updateShape(e);var i=this.context.addClip(e);n.setAttribute("clip-path","url(#"+i+")")}else n.removeAttribute("clip-path")},e._setColor=function(t,e,n){var i=t._cfg.el,r=this.context;if(n)if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n)){var a=r.find("gradient",n);a||(a=r.addGradient(n)),i.setAttribute(l[e],"url(#"+a+")")}else if(/^[p,P]{1}[\s]*\(/.test(n)){var o=r.find("pattern",n);o||(o=r.addPattern(n)),i.setAttribute(l[e],"url(#"+o+")")}else i.setAttribute(l[e],n);else i.setAttribute(l[e],"none")},e._setShadow=function(t){var e=t._cfg.el,n=t._attrs,i={dx:n.shadowOffsetX,dy:n.shadowOffsetY,blur:n.shadowBlur,color:n.shadowColor};if(i.dx||i.dy||i.blur||i.color){var r=this.context.find("filter",i);r||(r=this.context.addShadow(i,this)),e.setAttribute("filter","url(#"+r+")")}else e.removeAttribute("filter")},t}();t.exports=h},function(t,e,n){t.exports={painter:n(501),getShape:n(494)}},function(t,e,n){var i=n(17),r=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,a=/[^\s\,]+/gi,o=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,s=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,l=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,u=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function c(t,e){var n=t.match(u);i.each(n,function(t){t=t.split(":"),e.addColorStop(t[0],t[1])})}t.exports={parsePath:function(t){return t=t||[],i.isArray(t)?t:i.isString(t)?(t=t.match(r),i.each(t,function(e,n){if((e=e.match(a))[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}i.each(e,function(t,n){isNaN(t)||(e[n]=+t)}),t[n]=e}),t):void 0},parseStyle:function(t,e,n){if(i.isString(t)){if("("===t[1]||"("===t[2]){if("l"===t[0])return function(t,e,n){var r,a,s=o.exec(t),l=i.mod(i.toRadian(parseFloat(s[1])),2*Math.PI),u=s[2],h=e.getBBox();l>=0&&l<.5*Math.PI?(r={x:h.minX,y:h.minY},a={x:h.maxX,y:h.maxY}):.5*Math.PI<=l&&l<Math.PI?(r={x:h.maxX,y:h.minY},a={x:h.minX,y:h.maxY}):Math.PI<=l&&l<1.5*Math.PI?(r={x:h.maxX,y:h.maxY},a={x:h.minX,y:h.minY}):(r={x:h.minX,y:h.maxY},a={x:h.maxX,y:h.minY});var d=Math.tan(l),f=d*d,p=(a.x-r.x+d*(a.y-r.y))/(f+1)+r.x,g=d*(a.x-r.x+d*(a.y-r.y))/(f+1)+r.y,m=n.createLinearGradient(r.x,r.y,p,g);return c(u,m),m}(t,e,n);if("r"===t[0])return function(t,e,n){var i=s.exec(t),r=parseFloat(i[1]),a=parseFloat(i[2]),o=parseFloat(i[3]),l=i[4];if(0===o){var h=l.match(u);return h[h.length-1].split(":")[1]}var d=e.getBBox(),f=d.maxX-d.minX,p=d.maxY-d.minY,g=Math.sqrt(f*f+p*p)/2,m=n.createRadialGradient(d.minX+f*r,d.minY+p*a,o*g,d.minX+f/2,d.minY+p/2,g);return c(l,m),m}(t,e,n);if("p"===t[0])return function(t,e,n){if(e.get("patternSource")&&e.get("patternSource")===t)return e.get("pattern");var i,r,a=l.exec(t),o=a[1],s=a[2];function u(){i=n.createPattern(r,o),e.setSilent("pattern",i),e.setSilent("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return r=new Image,s.match(/^data:/i)||(r.crossOrigin="Anonymous"),r.src=s,r.complete?u():(r.onload=u,r.src=r.src),i}(t,e,n)}return t}}}},function(t,e,n){var i=n(17),r=n(503),a=["fillStyle","font","globalAlpha","lineCap","lineWidth","lineJoin","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline","lineDash","lineDashOffset"],o=function(){function t(t){if(!t)return null;var e=i.uniqueId("canvas_"),n=i.createDom('<canvas id="'+e+'"></canvas>');return t.appendChild(n),this.type="canvas",this.canvas=n,this.context=n.getContext("2d"),this.toDraw=!1,this}var e=t.prototype;return e.beforeDraw=function(){var t=this.canvas;this.context&&this.context.clearRect(0,0,t.width,t.height)},e.draw=function(t){var e=this;e.animateHandler?e.toDraw=!0:function n(){e.animateHandler=i.requestAnimationFrame(function(){e.animateHandler=void 0,e.toDraw&&n()}),e.beforeDraw();try{e._drawGroup(t)}catch(t){console.warn("error in draw canvas, detail as:"),console.warn(t),e.toDraw=!1}e.toDraw=!1}()},e.drawSync=function(t){this.beforeDraw(),this._drawGroup(t)},e._drawGroup=function(t){if(!t._cfg.removed&&!t._cfg.destroyed&&t._cfg.visible){var e=t._cfg.children,n=null;this.setContext(t);for(var i=0;i<e.length;i++)n=e[i],e[i].isGroup?this._drawGroup(n):this._drawShape(n);this.restoreContext(t)}},e._drawShape=function(t){t._cfg.removed||t._cfg.destroyed||!t._cfg.visible||(this.setContext(t),t.drawInner(this.context),this.restoreContext(t),t._cfg.attrs=t._attrs,t._cfg.hasUpdate=!1)},e.setContext=function(t){var e=this.context,n=t._attrs.clip;e.save(),n&&(n.resetTransform(e),n.createPath(e),e.clip()),this.resetContext(t),t.resetTransform(e)},e.restoreContext=function(){this.context.restore()},e.resetContext=function(t){var e=this.context,n=t._attrs;if(!t.isGroup)for(var o in n)if(a.indexOf(o)>-1){var s=n[o];"fillStyle"===o&&(s=r.parseStyle(s,t,e)),"strokeStyle"===o&&(s=r.parseStyle(s,t,e)),"lineDash"===o&&e.setLineDash?i.isArray(s)?e.setLineDash(s):i.isString(s)&&e.setLineDash(s.split(" ")):e[o]=s}},t}();t.exports=o},function(t,e,n){t.exports={painter:n(504)}},function(t,e,n){t.exports={canvas:n(505),svg:n(502)}},function(t,e,n){var i=n(17),r=n(373),a=n(15),o=n(28),s=n(137),l=s.interpolate,u=s.interpolateArray,c=function(t){this._animators=[],this._current=0,this._timer=null,this.canvas=t};function h(t,e,n){var a,s=e.startTime;if(n<s+e.delay||e.isPaused)return!1;var c=e.duration,h=e.easing;if(n=n-s-e.delay,e.toAttrs.repeat)a=n%c/c,a=o[h](a);else{if(!((a=n/c)<1))return t.attr(e.toAttrs),e.toMatrix&&t.setMatrix(e.toMatrix),!0;a=o[h](a)}return function(t,e,n){var a={},o=e.toAttrs,s=e.fromAttrs,c=e.toMatrix;if(!t.get("destroyed")){var h;for(var d in o)if(!i.isEqual(s[d],o[d]))if("path"===d){var f=o[d],p=s[d];f.length>p.length?(f=r.parsePathString(o[d]),p=r.parsePathString(s[d]),p=r.fillPathByDiff(p,f),p=r.formatPath(p,f),e.fromAttrs.path=p,e.toAttrs.path=f):e.pathFormatted||(f=r.parsePathString(o[d]),p=r.parsePathString(s[d]),p=r.formatPath(p,f),e.fromAttrs.path=p,e.toAttrs.path=f,e.pathFormatted=!0),a[d]=[];for(var g=0;g<f.length;g++){for(var m=f[g],v=p[g],y=[],x=0;x<m.length;x++)i.isNumber(m[x])&&v&&i.isNumber(v[x])?(h=l(v[x],m[x]),y.push(h(n))):y.push(m[x]);a[d].push(y)}}else h=l(s[d],o[d]),a[d]=h(n);if(c){var _=u(e.fromMatrix,c)(n);t.setMatrix(_)}t.attr(a)}}(t,e,a),!1}i.augment(c,{initTimer:function(){var t,e,n,i=this,r=this;r._timer=a.timer(function(a){if(r._current=a,i._animators.length>0){for(var o=i._animators.length-1;o>=0;o--)if((t=i._animators[o]).get("destroyed"))r.removeAnimator(o);else{if(!t.get("pause").isPaused)for(var s=(e=t.get("animators")).length-1;s>=0;s--)n=e[s],h(t,n,a)&&(e.splice(s,1),n.callback&&n.callback());0===e.length&&r.removeAnimator(o)}i.canvas.draw()}})},addAnimator:function(t){this._animators.push(t)},removeAnimator:function(t){this._animators.splice(t,1)},isAnimating:function(){return!!this._animators.length},stop:function(){this._timer&&this._timer.stop()},stopAllAnimations:function(){this._animators.forEach(function(t){t.stopAnimate()}),this._animators=[],this.canvas.draw()},getTime:function(){return this._current}}),t.exports=c},function(t,e,n){var i=n(17),r=n(376),a={arc:n(365),ellipse:n(403),line:n(366)},o=i.createDom('<canvas width="500" height="500"></canvas>').getContext("2d");function s(t,e,n){return n.createPath(o),o.isPointInPath(t,e)}var l={arc:function(t,e){var n=this._attrs,i=n.x,a=n.y,o=n.r,s=n.startAngle,l=n.endAngle,u=n.clockwise,c=this.getHitLineWidth();return!!this.hasStroke()&&r.arcline(i,a,o,s,l,u,c,t,e)},circle:function(t,e){var n=this._attrs,i=n.x,a=n.y,o=n.r,s=this.getHitLineWidth(),l=this.hasFill(),u=this.hasStroke();return l&&u?r.circle(i,a,o,t,e)||r.arcline(i,a,o,0,2*Math.PI,!1,s,t,e):l?r.circle(i,a,o,t,e):!!u&&r.arcline(i,a,o,0,2*Math.PI,!1,s,t,e)},dom:function(t,e){if(!this._cfg.el)return!1;var n=this._cfg.el.getBBox();return r.box(n.x,n.x+n.width,n.y,n.y+n.height,t,e)},ellipse:function(t,e){var n=this._attrs,a=this.hasFill(),o=this.hasStroke(),s=n.x,l=n.y,u=n.rx,c=n.ry,h=this.getHitLineWidth(),d=u>c?u:c,f=u>c?1:u/c,p=u>c?c/u:1,g=[t,e,1],m=[1,0,0,0,1,0,0,0,1];i.mat3.scale(m,m,[f,p]),i.mat3.translate(m,m,[s,l]);var v=i.mat3.invert([],m);return i.vec3.transformMat3(g,g,v),a&&o?r.circle(0,0,d,g[0],g[1])||r.arcline(0,0,d,0,2*Math.PI,!1,h,g[0],g[1]):a?r.circle(0,0,d,g[0],g[1]):!!o&&r.arcline(0,0,d,0,2*Math.PI,!1,h,g[0],g[1])},fan:function(t,e){var n=this,o=n.hasFill(),s=n.hasStroke(),l=n._attrs,u=l.x,c=l.y,h=l.rs,d=l.re,f=l.startAngle,p=l.endAngle,g=l.clockwise,m=[t-u,e-c],v=i.vec2.angleTo([1,0],m);function y(){var t=a.arc.nearAngle(v,f,p,g);if(i.isNumberEqual(v,t)){var e=i.vec2.squaredLength(m);if(h*h<=e&&e<=d*d)return!0}return!1}function x(){var i=n.getHitLineWidth(),a={x:Math.cos(f)*h+u,y:Math.sin(f)*h+c},o={x:Math.cos(f)*d+u,y:Math.sin(f)*d+c},s={x:Math.cos(p)*h+u,y:Math.sin(p)*h+c},l={x:Math.cos(p)*d+u,y:Math.sin(p)*d+c};return!!(r.line(a.x,a.y,o.x,o.y,i,t,e)||r.line(s.x,s.y,l.x,l.y,i,t,e)||r.arcline(u,c,h,f,p,g,i,t,e)||r.arcline(u,c,d,f,p,g,i,t,e))}return o&&s?y()||x():o?y():!!s&&x()},image:function(t,e){var n=this._attrs;if(this.get("toDraw")||!n.img)return!1;this._cfg.attrs&&this._cfg.attrs.img===n.img||this._setAttrImg();var i=n.x,a=n.y,o=n.width,s=n.height;return r.rect(i,a,o,s,t,e)},line:function(t,e){var n=this._attrs,i=n.x1,a=n.y1,o=n.x2,s=n.y2,l=this.getHitLineWidth();return!!this.hasStroke()&&r.line(i,a,o,s,l,t,e)},path:function(t,e){var n=this,r=n.get("segments"),a=n.hasFill(),o=n.hasStroke();function l(){if(!i.isEmpty(r)){for(var a=n.getHitLineWidth(),o=0,s=r.length;o<s;o++)if(r[o].isInside(t,e,a))return!0;return!1}}return a&&o?s(t,e,n)||l():a?s(t,e,n):!!o&&l()},marker:function(t,e){var n=this._attrs,i=n.x,a=n.y,o=n.radius||n.r,s=this.getHitLineWidth();return r.circle(i,a,o+s/2,t,e)},polygon:function(t,e){var n=this,i=n.hasFill(),a=n.hasStroke();function o(){var i=n._attrs.points;if(i.length<2)return!1;var a=n.getHitLineWidth(),o=i.slice(0);return i.length>=3&&o.push(i[0]),r.polyline(o,a,t,e)}return i&&a?s(t,e,n)||o():i?s(t,e,n):!!a&&o()},polyline:function(t,e){var n=this._attrs;if(this.hasStroke()){var i=n.points;if(i.length<2)return!1;var a=n.lineWidth;return r.polyline(i,a,t,e)}return!1},rect:function(t,e){var n=this,i=n.hasFill(),a=n.hasStroke();function o(){var i=n._attrs,a=i.x,o=i.y,s=i.width,l=i.height,u=i.radius,c=n.getHitLineWidth();if(0===u){var h=c/2;return r.line(a-h,o,a+s+h,o,c,t,e)||r.line(a+s,o-h,a+s,o+l+h,c,t,e)||r.line(a+s+h,o+l,a-h,o+l,c,t,e)||r.line(a,o+l+h,a,o-h,c,t,e)}return r.line(a+u,o,a+s-u,o,c,t,e)||r.line(a+s,o+u,a+s,o+l-u,c,t,e)||r.line(a+s-u,o+l,a+u,o+l,c,t,e)||r.line(a,o+l-u,a,o+u,c,t,e)||r.arcline(a+s-u,o+u,u,1.5*Math.PI,2*Math.PI,!1,c,t,e)||r.arcline(a+s-u,o+l-u,u,0,.5*Math.PI,!1,c,t,e)||r.arcline(a+u,o+l-u,u,.5*Math.PI,Math.PI,!1,c,t,e)||r.arcline(a+u,o+u,u,Math.PI,1.5*Math.PI,!1,c,t,e)}return i&&a?s(t,e,n)||o():i?s(t,e,n):!!a&&o()},text:function(t,e){var n=this.getBBox();if(this.hasFill()||this.hasStroke())return r.box(n.minX,n.maxX,n.minY,n.maxY,t,e)}};t.exports={isPointInPath:function(t,e){var n=l[this.type];return!!n&&n.call(this,t,e)}}},function(t,e,n){var i=n(37);i.Arc=n(402),i.Circle=n(401),i.Dom=n(400),i.Ellipse=n(399),i.Fan=n(398),i.Image=n(397),i.Line=n(396),i.Marker=n(374),i.Path=n(395),i.Polygon=n(394),i.Polyline=n(393),i.Rect=n(392),i.Text=n(391),t.exports=i},function(t,e,n){var i=n(17),r={delay:"delay",rotate:"rotate"},a={fill:"fill",stroke:"stroke",fillStyle:"fillStyle",strokeStyle:"strokeStyle"};t.exports={animate:function(t,e,n,o,s){void 0===s&&(s=0),this.set("animating",!0);var l=this.get("timeline");l||(l=this.get("canvas").get("timeline"),this.setSilent("timeline",l));var u=this.get("animators")||[];l._timer||l.initTimer(),i.isNumber(o)&&(s=o,o=null),i.isFunction(n)?(o=n,n="easeLinear"):n=n||"easeLinear";var c=function(t,e){var n={matrix:null,attrs:{}},o=e._attrs;for(var s in t)if("transform"===s)n.matrix=i.transform(e.getMatrix(),t[s]);else if("rotate"===s)n.matrix=i.transform(e.getMatrix(),[["r",t[s]]]);else if("matrix"===s)n.matrix=t[s];else{if(a[s]&&/^[r,R,L,l]{1}[\s]*\(/.test(t[s]))continue;r[s]||o[s]===t[s]||(n.attrs[s]=t[s])}return n}(t,this),h={fromAttrs:function(t,e){var n={},i=e._attrs;for(var r in t.attrs)n[r]=i[r];return n}(c,this),toAttrs:c.attrs,fromMatrix:i.clone(this.getMatrix()),toMatrix:c.matrix,duration:e,easing:n,callback:o,delay:s,startTime:l.getTime(),id:i.uniqueId()};u.length>0?u=function(t,e){var n=e.delay,r=Object.prototype.hasOwnProperty;return i.each(e.toAttrs,function(e,a){i.each(t,function(t){n<t.startTime+t.duration&&r.call(t.toAttrs,a)&&(delete t.toAttrs[a],delete t.fromAttrs[a])})}),e.toMatrix&&i.each(t,function(t){n<t.startTime+t.duration&&t.toMatrix&&delete t.toMatrix}),t}(u,h):l.addAnimator(this),u.push(h),this.setSilent("animators",u),this.setSilent("pause",{isPaused:!1})},stopAnimate:function(){var t=this,e=this.get("animators");i.each(e,function(e){t.attr(e.toAttrs),e.toMatrix&&t.attr("matrix",e.toMatrix),e.callback&&e.callback()}),this.setSilent("animating",!1),this.setSilent("animators",[])},pauseAnimate:function(){var t=this.get("timeline");return this.setSilent("pause",{isPaused:!0,pauseTime:t.getTime()}),this},resumeAnimate:function(){var t=this.get("timeline").getTime(),e=this.get("animators"),n=this.get("pause").pauseTime;return i.each(e,function(e){e.startTime=e.startTime+(t-n),e._paused=!1,e._pauseTime=null}),this.setSilent("pause",{isPaused:!1}),this.setSilent("animators",e),this}}},function(t,e,n){var i=n(17);function r(t){return 1===t[0]&&0===t[1]&&0===t[3]&&1===t[4]&&0===t[6]&&0===t[7]}function a(t){return 0===t[1]&&0===t[3]&&0===t[6]&&0===t[7]}function o(t,e){r(e)||(a(e)?(t[0]*=e[0],t[4]*=e[4]):i.mat3.multiply(t,t,e))}t.exports={initTransform:function(){},resetMatrix:function(){this.attr("matrix",[1,0,0,0,1,0,0,0,1])},translate:function(t,e){var n=this._attrs.matrix;return i.mat3.translate(n,n,[t,e]),this.clearTotalMatrix(),this.attr("matrix",n),this},rotate:function(t){var e=this._attrs.matrix;return i.mat3.rotate(e,e,t),this.clearTotalMatrix(),this.attr("matrix",e),this},scale:function(t,e){var n=this._attrs.matrix;return i.mat3.scale(n,n,[t,e]),this.clearTotalMatrix(),this.attr("matrix",n),this},rotateAtStart:function(t){var e=this._attrs.x||this._cfg.attrs.x,n=this._attrs.y||this._cfg.attrs.y;return Math.abs(t)>2*Math.PI&&(t=t/180*Math.PI),this.transform([["t",-e,-n],["r",t],["t",e,n]])},move:function(t,e){var n=this.get("x")||0,i=this.get("y")||0;return this.translate(t-n,e-i),this.set("x",t),this.set("y",e),this},transform:function(t){var e=this,n=this._attrs.matrix;return i.each(t,function(t){switch(t[0]){case"t":e.translate(t[1],t[2]);break;case"s":e.scale(t[1],t[2]);break;case"r":e.rotate(t[1]);break;case"m":e.attr("matrix",i.mat3.multiply([],n,t[1])),e.clearTotalMatrix()}}),e},setTransform:function(t){return this.attr("matrix",[1,0,0,0,1,0,0,0,1]),this.transform(t)},getMatrix:function(){return this.attr("matrix")},setMatrix:function(t){return this.attr("matrix",t),this.clearTotalMatrix(),this},apply:function(t,e){var n;return n=e?this._getMatrixByRoot(e):this.attr("matrix"),i.vec3.transformMat3(t,t,n),this},_getMatrixByRoot:function(t){t=t||this;for(var e=this,n=[];e!==t;)n.unshift(e),e=e.get("parent");n.unshift(e);var r=[1,0,0,0,1,0,0,0,1];return i.each(n,function(t){i.mat3.multiply(r,t.attr("matrix"),r)}),r},getTotalMatrix:function(){var t=this._cfg.totalMatrix;if(!t){t=[1,0,0,0,1,0,0,0,1];var e=this._cfg.parent;e&&o(t,e.getTotalMatrix()),o(t,this.attr("matrix")),this._cfg.totalMatrix=t}return t},clearTotalMatrix:function(){},invert:function(t){var e=this.getTotalMatrix();if(a(e))t[0]/=e[0],t[1]/=e[4];else{var n=i.mat3.invert([],e);n&&i.vec3.transformMat3(t,t,n)}return this},resetTransform:function(t){var e=this.attr("matrix");r(e)||t.transform(e[0],e[1],e[3],e[4],e[6],e[7])}}},function(t,e,n){var i=n(17);t.exports={canFill:!1,canStroke:!1,initAttrs:function(t){return this._attrs={opacity:1,fillOpacity:1,strokeOpacity:1,matrix:[1,0,0,0,1,0,0,0,1]},this.attr(i.assign(this.getDefaultAttrs(),t)),this},getDefaultAttrs:function(){return{}},attr:function(t,e){if(0===arguments.length)return this._attrs;if(i.isObject(t)){for(var n in t)this._setAttr(n,t[n]);return this.clearBBox(),this._cfg.hasUpdate=!0,this}return 2===arguments.length?(this._setAttr(t,e),this.clearBBox(),this._cfg.hasUpdate=!0,this):this._attrs[t]},_setAttr:function(t,e){var n=this._attrs;n[t]=e,"fill"!==t&&"stroke"!==t?"opacity"!==t?"clip"===t&&e?this._setClip(e):"path"===t&&this._afterSetAttrPath?this._afterSetAttrPath(e):"transform"!==t?"rotate"===t&&this.rotateAtStart(e):this.transform(e):n.globalAlpha=e:n[t+"Style"]=e},clearBBox:function(){this.setSilent("box",null)},hasFill:function(){return this.canFill&&this._attrs.fillStyle},hasStroke:function(){return this.canStroke&&this._attrs.strokeStyle},_setClip:function(t){t._cfg.renderer=this._cfg.renderer,t._cfg.canvas=this._cfg.canvas,t._cfg.parent=this._cfg.parent,t.hasFill=function(){return!0}}}},function(t,e,n){var i=n(17),r=n(407),a=n(406),o=n(507),s=n(506),l=function t(e){t.superclass.constructor.call(this,e)};l.CFG={eventEnable:!0,width:null,height:null,widthCanvas:null,heightCanvas:null,widthStyle:null,heightStyle:null,containerDOM:null,canvasDOM:null,pixelRatio:null,renderer:"canvas"},i.extend(l,a),i.augment(l,{init:function(){l.superclass.init.call(this),this._setGlobalParam(),this._setContainer(),this._initPainter(),this._scale(),this.get("eventEnable")&&this._registEvents()},getEmitter:function(t,e){if(t){if(!i.isEmpty(t._getEvents()))return t;var n=t.get("parent");if(n&&!e.propagationStopped)return this.getEmitter(n,e)}},_getEventObj:function(t,e,n,i){var a=new r(t,e,!0,!0);return a.x=n.x,a.y=n.y,a.clientX=e.clientX,a.clientY=e.clientY,a.currentTarget=i,a.target=i,a},_triggerEvent:function(t,e){var n,i=this.getPointByClient(e.clientX,e.clientY),r=this.getShape(i.x,i.y,e),a=this.get("el");if("mousemove"===t){var o=this.get("preShape");if(o&&o!==r){var s=this._getEventObj("mouseleave",e,i,o);(n=this.getEmitter(o,e))&&n.emit("mouseleave",s),a.style.cursor="default"}if(r){var l=this._getEventObj("mousemove",e,i,r);if((n=this.getEmitter(r,e))&&n.emit("mousemove",l),o!==r){var u=this._getEventObj("mouseenter",e,i,r);n&&n.emit("mouseenter",u,e)}}else{var c=this._getEventObj("mousemove",e,i,this);this.emit("mousemove",c)}this.set("preShape",r)}else{var h=this._getEventObj(t,e,i,r||this);(n=this.getEmitter(r,e))&&n!==this&&n.emit(t,h),this.emit(t,h)}r&&!r.get("destroyed")&&(a.style.cursor=r.attr("cursor")||"default")},_registEvents:function(){var t=this,e=t.get("el");i.each(["mouseout","mouseover","mousemove","mousedown","mouseleave","mouseup","click","dblclick"],function(n){e.addEventListener(n,function(e){t._triggerEvent(n,e)},!1)}),e.addEventListener("touchstart",function(e){i.isEmpty(e.touches)||t._triggerEvent("touchstart",e.touches[0])},!1),e.addEventListener("touchmove",function(e){i.isEmpty(e.touches)||t._triggerEvent("touchmove",e.touches[0])},!1),e.addEventListener("touchend",function(e){i.isEmpty(e.changedTouches)||t._triggerEvent("touchend",e.changedTouches[0])},!1)},_scale:function(){if("svg"!==this._cfg.renderType){var t=this.get("pixelRatio");this.scale(t,t)}},_setGlobalParam:function(){var t=this.get("renderer")||"canvas";"svg"===t?this.set("pixelRatio",1):this.get("pixelRatio")||this.set("pixelRatio",i.getRatio()),this._cfg.renderType=t;var e=s[t];this._cfg.renderer=e,this._cfg.canvas=this;var n=new o(this);this._cfg.timeline=n},_setContainer:function(){var t=this.get("containerId"),e=this.get("containerDOM");e||(e=document.getElementById(t),this.set("containerDOM",e)),i.modifyCSS(e,{position:"relative"})},_initPainter:function(){var t=this.get("containerDOM"),e=new this._cfg.renderer.painter(t);this._cfg.painter=e,this._cfg.canvasDOM=this._cfg.el=e.canvas,this.changeSize(this.get("width"),this.get("height"))},_resize:function(){var t=this.get("canvasDOM"),e=this.get("widthCanvas"),n=this.get("heightCanvas"),i=this.get("widthStyle"),r=this.get("heightStyle");t.style.width=i,t.style.height=r,t.setAttribute("width",e),t.setAttribute("height",n)},getWidth:function(){var t=this.get("pixelRatio");return this.get("width")*t},getHeight:function(){var t=this.get("pixelRatio");return this.get("height")*t},changeSize:function(t,e){var n=this.get("pixelRatio"),i=t*n,r=e*n;this.set("widthCanvas",i),this.set("heightCanvas",r),this.set("widthStyle",t+"px"),this.set("heightStyle",e+"px"),this.set("width",t),this.set("height",e),this._resize()},getPointByClient:function(t,e){var n=this.get("el"),i=this.get("pixelRatio")||1,r=n.getBoundingClientRect();return{x:(t-r.left)*i,y:(e-r.top)*i}},getClientByPoint:function(t,e){var n=this.get("el").getBoundingClientRect(),i=this.get("pixelRatio")||1;return{clientX:t/i+n.left,clientY:e/i+n.top}},draw:function(){this._cfg.painter.draw(this)},getShape:function(t,e,n){return 3===arguments.length&&this._cfg.renderer.getShape?this._cfg.renderer.getShape.call(this,t,e,n):l.superclass.getShape.call(this,t,e)},getRenderer:function(){return this._cfg.renderType},_drawSync:function(){this._cfg.painter.drawSync(this)},destroy:function(){var t=this._cfg,e=t.containerDOM,n=t.canvasDOM;n&&e&&e.removeChild(n),t.timeline.stop(),l.superclass.destroy.call(this)}}),t.exports=l},function(t,e,n){var i=n(147),r={};n(152).mix(r,i.PathUtil,{getRectPath:i.PathUtil.rectPath,pointsToPolygon:function(t){for(var e=[["M",t[0].x,t[0].y]],n=1;n<t.length;n++){var i=t[n];e.push(["L",i.x,i.y])}return e},getEllipsePath:function(t,e,n,i){return[["M",t,e-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]]}}),t.exports=r},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var i=n(409),r=Object.prototype,a=r.hasOwnProperty,o=r.toString,s=i?i.toStringTag:void 0;t.exports=function(t){var e=a.call(t,s),n=t[s];try{t[s]=void 0;var i=!0}catch(t){}var r=o.call(t);return i&&(e?t[s]=n:delete t[s]),r}},function(t,e,n){var i=n(409),r=n(517),a=n(516),o=i?i.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":o&&o in Object(t)?r(t):a(t)}},function(t,e,n){var i=n(518),r=n(515);t.exports=function(t){return"symbol"==typeof t||r(t)&&"[object Symbol]"==i(t)}},function(t,e,n){var i=n(377),r=n(519),a=NaN,o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(r(t))return a;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=l.test(t);return n||u.test(t)?c(t.slice(2),n?2:8):s.test(t)?a:+t}},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(148))},function(t,e,n){var i=n(410);t.exports=function(){return i.Date.now()}},function(t,e,n){var i=n(411),r=n(377);t.exports=function(t,e,n){var a=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return r(n)&&(a="leading"in n?!!n.leading:a,o="trailing"in n?!!n.trailing:o),i(t,e,{leading:a,maxWait:e,trailing:o})}},function(t,e){t.exports=function(t,e,n){var i=void 0,r=void 0,a=void 0,o=void 0,s=0;n||(n={});var l=function(){s=!1===n.leading?0:Date.now(),i=null,o=t.apply(r,a),i||(r=a=null)},u=function(){var u=Date.now();s||!1!==n.leading||(s=u);var c=e-(u-s);return r=this,a=arguments,c<=0||c>e?(i&&(clearTimeout(i),i=null),s=u,o=t.apply(r,a),i||(r=a=null)):i||!1===n.trailing||(i=setTimeout(l,c)),o};return u.cancel=function(){clearTimeout(i),s=0,i=r=a=null},u}},function(t,e,n){var i=n(30),r=n(359),a=Object.prototype.hasOwnProperty;t.exports=function(t,e){if(null===t||!r(t))return{};var n={};return i(e,function(e){a.call(t,e)&&(n[e]=t[e])}),n}},function(t,e,n){var i=n(30),r=n(62);t.exports=function(t,e){if(!r(t))return t;var n=[];return i(t,function(t,i){n.push(e(t,i))}),n}},function(t,e,n){var i=n(47),r=n(378);t.exports=function(t,e,n){return i(n)?!!n(t,e):r(t,e)}},function(t,e,n){var i=n(62);t.exports=function(t,e){if(!i(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var r=-1,a=0;a<t.length;a++)if(t[a]===e){r=a;break}return r}},function(t,e,n){var i=n(415);t.exports=function(t,e){if(!e)return[t];var n=i(t,e),r=[];for(var a in n)r.push(n[a]);return r}},function(t,e){t.exports=function(t,e,n){var i=void 0;return function(){var r=this,a=arguments,o=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||t.apply(r,a)},e),o&&t.apply(r,a)}}},function(t,e,n){var i=n(60);t.exports=function(t){return i(t,"Error")}},function(t,e,n){var i=n(60);t.exports=function(t){return i(t,"Arguments")}},function(t,e,n){var i=n(60);t.exports=function(t){return i(t,"Date")}},function(t,e,n){var i=n(60);t.exports=function(t){return i(t,"RegExp")}},function(t,e){t.exports=function(t){return void 0===t}},function(t,e){t.exports=function(t){return null===t}},function(t,e,n){var i=n(60),r={getType:n(420),isArray:n(29),isArrayLike:n(62),isBoolean:n(419),isFunction:n(47),isNil:n(136),isNull:n(536),isNumber:n(135),isObject:n(385),isObjectLike:n(383),isPlainObject:n(359),isPrototype:n(418),isType:i,isUndefined:n(535),isString:n(358),isRegExp:n(534),isDate:n(533),isArguments:n(532),isError:n(531)};t.exports=r},function(t,e,n){t.exports=n(422)},function(t,e){t.exports=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]}):t}},function(t,e,n){var i=n(357);t.exports=function(t){var e=i(t);return e.charAt(0).toLowerCase()+e.substring(1)}},function(t,e,n){t.exports=n(423)},function(t,e,n){var i={lc:n(541),lowerCase:n(423),lowerFirst:n(540),substitute:n(539),uc:n(538),upperCase:n(422),upperFirst:n(421)};t.exports=i},function(t,e){function n(t){var e=[];switch(t[0]){case"M":case"L":e.push([t[1],t[2]]);break;case"A":e.push([t[6],t[7]]);break;case"Q":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"T":e.push([t[1],t[2]]);break;case"C":e.push([t[5],t[6]]),e.push([t[1],t[2]]),e.push([t[3],t[4]]);break;case"S":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"H":case"V":e.push([t[1],t[1]])}return e}function i(t,e,i){for(var r=[].concat(t),a=void 0,o=1/(i+1),s=n(e)[0],l=1;l<=i;l++)o*=l,0===(a=Math.floor(t.length*o))?r.unshift([s[0]*o+t[a][0]*(1-o),s[1]*o+t[a][1]*(1-o)]):r.splice(a,0,[s[0]*o+t[a][0]*(1-o),s[1]*o+t[a][1]*(1-o)]);return r}t.exports=function(t,e){if(t.length<=1)return t;for(var r=void 0,a=0;a<e.length;a++)if(t[a][0]!==e[a][0])switch(r=n(t[a]),e[a][0]){case"M":t[a]=["M"].concat(r[0]);break;case"L":t[a]=["L"].concat(r[0]);break;case"A":t[a]=[].concat(e[a]),t[a][6]=r[0][0],t[a][7]=r[0][1];break;case"Q":if(r.length<2){if(!(a>0)){t[a]=e[a];break}r=i(r,t[a-1],1)}t[a]=["Q"].concat(r.reduce(function(t,e){return t.concat(e)},[]));break;case"T":t[a]=["T"].concat(r[0]);break;case"C":if(r.length<3){if(!(a>0)){t[a]=e[a];break}r=i(r,t[a-1],2)}t[a]=["C"].concat(r.reduce(function(t,e){return t.concat(e)},[]));break;case"S":if(r.length<2){if(!(a>0)){t[a]=e[a];break}r=i(r,t[a-1],1)}t[a]=["S"].concat(r.reduce(function(t,e){return t.concat(e)},[]));break;default:t[a]=e[a]}return t}},function(t,e,n){var i=n(30);t.exports=function(t,e){if(t.length!==e.length)return!1;var n=!0;return i(t,function(t,i){if(t!==e[i])return n=!1,!1}),n}},function(t,e,n){var i=n(544);function r(t,e,n){var i=null,r=n;return e<r&&(r=e,i="add"),t<r&&(r=t,i="del"),{type:i,min:r}}t.exports=function(t,e){var n=function(t,e){var n=t.length,a=e.length,o=void 0,s=void 0,l=0;if(0===n||0===a)return null;for(var u=[],c=0;c<=n;c++)u[c]=[],u[c][0]={min:c};for(var h=0;h<=a;h++)u[0][h]={min:h};for(var d=1;d<=n;d++){o=t[d-1];for(var f=1;f<=a;f++){s=e[f-1],l=i(o,s)?0:1;var p=u[d-1][f].min+1,g=u[d][f-1].min+1,m=u[d-1][f-1].min+l;u[d][f]=r(p,g,m)}}return u}(t,e),a=t.length,o=e.length,s=[],l=1,u=1;if(n[a][o]!==a){for(var c=1;c<=a;c++){var h=n[c][c].min;u=c;for(var d=l;d<=o;d++)n[c][d].min<h&&(h=n[c][d].min,u=d);l=u,n[c][l].type&&s.push({index:c-1,type:n[c][l].type})}for(var f=s.length-1;f>=0;f--)l=s[f].index,"add"===s[f].type?t.splice(l,0,[].concat(t[l])):t.splice(l,1)}if((a=t.length)<o)for(var p=0;p<o-a;p++)"z"===t[a-1][0]||"Z"===t[a-1][0]?t.splice(a-2,0,t[a-2]):t.push(t[a-1]);return t}},function(t,e){function n(t,e){var n=[],i=[];return t.length&&function t(e,r){if(1===e.length)n.push(e[0]),i.push(e[0]);else{for(var a=[],o=0;o<e.length-1;o++)0===o&&n.push(e[0]),o===e.length-2&&i.push(e[o+1]),a[o]=[(1-r)*e[o][0]+r*e[o+1][0],(1-r)*e[o][1]+r*e[o+1][1]];t(a,r)}}(t,e),{left:n,right:i.reverse()}}function i(t,e,i){if(1===i)return[[].concat(t)];var r=[];if("L"===e[0]||"C"===e[0]||"Q"===e[0])r=r.concat(function(t,e,i){var r=[[t[1],t[2]]];i=i||2;var a=[];"A"===e[0]?(r.push(e[6]),r.push(e[7])):"C"===e[0]?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):"S"===e[0]||"Q"===e[0]?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var o=r,s=1/i,l=0;l<i-1;l++){var u=n(o,s/(1-s*l));a.push(u.left),o=u.right}return a.push(o),a.map(function(t){var e=[];return 4===t.length&&(e.push("C"),e=e.concat(t[2])),t.length>=3&&(3===t.length&&e.push("Q"),e=e.concat(t[1])),2===t.length&&e.push("L"),e.concat(t[t.length-1])})}(t,e,i));else{var a=[].concat(t);"M"===a[0]&&(a[0]="L");for(var o=0;o<=i-1;o++)r.push(a)}return r}t.exports=function(t,e){if(1===t.length)return t;var n=t.length-1,r=e.length-1,a=n/r,o=[];if(1===t.length&&"M"===t[0][0]){for(var s=0;s<r-n;s++)t.push(t[0]);return t}for(var l=0;l<r;l++){var u=Math.floor(a*l);o[u]=(o[u]||0)+1}var c=o.reduce(function(e,r,a){return a===n?e.concat(t[n]):e.concat(i(t[a],t[a+1],r))},[]);return c.unshift(t[0]),"Z"!==e[r]&&"z"!==e[r]||c.push("Z"),c}},function(t,e,n){var i=n(29),r=n(429),a=n(427),o=function(t,e,n,i,r){return t*(t*(-3*e+9*n-9*i+3*r)+6*e-12*n+6*i)-3*e+3*n},s=function(t,e,n,i,r,a,s,l,u){null===u&&(u=1);for(var c=(u=u>1?1:u<0?0:u)/2,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,p=0;p<12;p++){var g=c*h[p]+c,m=o(g,t,n,r,s),v=o(g,e,i,a,l),y=m*m+v*v;f+=d[p]*Math.sqrt(y)}return c*f},l=function(t,e,n,i,r,a,o,s){if(!(Math.max(t,n)<Math.min(r,o)||Math.min(t,n)>Math.max(r,o)||Math.max(e,i)<Math.min(a,s)||Math.min(e,i)>Math.max(a,s))){var l=(t-n)*(a-s)-(e-i)*(r-o);if(l){var u=((t*i-e*n)*(r-o)-(t-n)*(r*s-a*o))/l,c=((t*i-e*n)*(a-s)-(e-i)*(r*s-a*o))/l,h=+u.toFixed(2),d=+c.toFixed(2);if(!(h<+Math.min(t,n).toFixed(2)||h>+Math.max(t,n).toFixed(2)||h<+Math.min(r,o).toFixed(2)||h>+Math.max(r,o).toFixed(2)||d<+Math.min(e,i).toFixed(2)||d>+Math.max(e,i).toFixed(2)||d<+Math.min(a,s).toFixed(2)||d>+Math.max(a,s).toFixed(2)))return{x:u,y:c}}}},u=function(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height},c=function(t,e,n,i){return null===t&&(t=e=n=i=0),null===e&&(e=t.y,n=t.width,i=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:i,h:i,x2:t+n,y2:e+i,cx:t+n/2,cy:e+i/2,r1:Math.min(n,i)/2,r2:Math.max(n,i)/2,r0:Math.sqrt(n*n+i*i)/2,path:r(t,e,n,i),vb:[t,e,n,i].join(" ")}},h=function(t,e,n,r,a,o,s,l){i(t)||(t=[t,e,n,r,a,o,s,l]);var u=function(t,e,n,i,r,a,o,s){for(var l=[],u=[[],[]],c=void 0,h=void 0,d=void 0,f=void 0,p=0;p<2;++p)if(0===p?(h=6*t-12*n+6*r,c=-3*t+9*n-9*r+3*o,d=3*n-3*t):(h=6*e-12*i+6*a,c=-3*e+9*i-9*a+3*s,d=3*i-3*e),Math.abs(c)<1e-12){if(Math.abs(h)<1e-12)continue;(f=-d/h)>0&&f<1&&l.push(f)}else{var g=h*h-4*d*c,m=Math.sqrt(g);if(!(g<0)){var v=(-h+m)/(2*c);v>0&&v<1&&l.push(v);var y=(-h-m)/(2*c);y>0&&y<1&&l.push(y)}}for(var x=l.length,_=x,b=void 0;x--;)b=1-(f=l[x]),u[0][x]=b*b*b*t+3*b*b*f*n+3*b*f*f*r+f*f*f*o,u[1][x]=b*b*b*e+3*b*b*f*i+3*b*f*f*a+f*f*f*s;return u[0][_]=t,u[1][_]=e,u[0][_+1]=o,u[1][_+1]=s,u[0].length=u[1].length=_+2,{min:{x:Math.min.apply(0,u[0]),y:Math.min.apply(0,u[1])},max:{x:Math.max.apply(0,u[0]),y:Math.max.apply(0,u[1])}}}.apply(null,t);return c(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},d=function(t,e,n,i,r,a,o,s,l){var u=1-l,c=Math.pow(u,3),h=Math.pow(u,2),d=l*l,f=d*l,p=t+2*l*(n-t)+d*(r-2*n+t),g=e+2*l*(i-e)+d*(a-2*i+e),m=n+2*l*(r-n)+d*(o-2*r+n),v=i+2*l*(a-i)+d*(s-2*a+i);return{x:c*t+3*h*l*n+3*u*l*l*r+f*o,y:c*e+3*h*l*i+3*u*l*l*a+f*s,m:{x:p,y:g},n:{x:m,y:v},start:{x:u*t+l*n,y:u*e+l*i},end:{x:u*r+l*o,y:u*a+l*s},alpha:90-180*Math.atan2(p-m,g-v)/Math.PI}},f=function(t,e,n){if(!function(t,e){return t=c(t),e=c(e),u(e,t.x,t.y)||u(e,t.x2,t.y)||u(e,t.x,t.y2)||u(e,t.x2,t.y2)||u(t,e.x,e.y)||u(t,e.x2,e.y)||u(t,e.x,e.y2)||u(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)}(h(t),h(e)))return n?0:[];for(var i=~~(s.apply(0,t)/8),r=~~(s.apply(0,e)/8),a=[],o=[],f={},p=n?0:[],g=0;g<i+1;g++){var m=d.apply(0,t.concat(g/i));a.push({x:m.x,y:m.y,t:g/i})}for(var v=0;v<r+1;v++){var y=d.apply(0,e.concat(v/r));o.push({x:y.x,y:y.y,t:v/r})}for(var x=0;x<i;x++)for(var _=0;_<r;_++){var b=a[x],w=a[x+1],S=o[_],M=o[_+1],A=Math.abs(w.x-b.x)<.001?"y":"x",C=Math.abs(M.x-S.x)<.001?"y":"x",I=l(b.x,b.y,w.x,w.y,S.x,S.y,M.x,M.y);if(I){if(f[I.x.toFixed(4)]===I.y.toFixed(4))continue;f[I.x.toFixed(4)]=I.y.toFixed(4);var P=b.t+Math.abs((I[A]-b[A])/(w[A]-b[A]))*(w.t-b.t),T=S.t+Math.abs((I[C]-S[C])/(M[C]-S[C]))*(M.t-S.t);P>=0&&P<=1&&T>=0&&T<=1&&(n?p++:p.push({x:I.x,y:I.y,t1:P,t2:T}))}}return p};t.exports=function(t,e){return function(t,e,n){t=a(t),e=a(e);for(var i=void 0,r=void 0,o=void 0,s=void 0,l=void 0,u=void 0,c=void 0,h=void 0,d=void 0,p=void 0,g=[],m=0,v=t.length;m<v;m++){var y=t[m];if("M"===y[0])i=l=y[1],r=u=y[2];else{"C"===y[0]?(i=(d=[i,r].concat(y.slice(1)))[6],r=d[7]):(d=[i,r,i,r,l,u,l,u],i=l,r=u);for(var x=0,_=e.length;x<_;x++){var b=e[x];if("M"===b[0])o=c=b[1],s=h=b[2];else{"C"===b[0]?(o=(p=[o,s].concat(b.slice(1)))[6],s=p[7]):(p=[o,s,o,s,c,h,c,h],o=c,s=h);for(var w=f(d,p,n),S=0,M=w.length;S<M;S++)w[S].segment1=m,w[S].segment2=x,w[S].bez1=d,w[S].bez2=p;g=g.concat(w)}}}}return g}(t,e)}},function(t,e,n){var i=n(547),r=n(426),a=n(427),o=n(424);t.exports={catmullRom2Bezier:o,catmullRomToBezier:o,fillPath:n(546),fillPathByDiff:n(545),formatPath:n(543),intersection:i,pathIntersection:i,parsePathArray:n(428),parsePathString:n(425),pathToAbsolute:r,path2absolute:r,pathTocurve:a,path2curve:a,rectPath:n(429)}},function(t,e,n){var i=n(368),r=n(430);t.exports=function(t,e){return i(r(t),e)}},function(t,e,n){t.exports=n(431)},function(t,e,n){t.exports=n(30)},function(t,e,n){t.exports={forIn:n(551),has:n(431),hasKey:n(550),hasValue:n(549),keys:n(443),isMatch:n(444),values:n(430)}},function(t,e,n){t.exports={mat3:n(381),vec2:n(434),vec3:n(433),transform:n(432)}},function(t,e,n){var i=n(29),r=n(47),a=n(30);t.exports=function(t,e){if(i(t)){var n=t[0],o=void 0;o=r(e)?e(t[0]):t[0][e];var s=void 0;return a(t,function(t){(s=r(e)?e(t):t[e])<o&&(n=t,o=s)}),n}}},function(t,e,n){var i=n(29),r=n(47),a=n(30);t.exports=function(t,e){if(i(t)){var n=t[0],o=void 0;o=r(e)?e(t[0]):t[0][e];var s=void 0;return a(t,function(t){(s=r(e)?e(t):t[e])>o&&(n=t,o=s)}),n}}},function(t,e,n){var i=n(135);t.exports=function(t){return i(t)&&t>0}},function(t,e,n){var i=n(135);t.exports=function(t){return i(t)&&t%2!=0}},function(t,e,n){var i=n(135);t.exports=function(t){return i(t)&&t<0}},function(t,e,n){var i=n(135),r=Number.isInteger?Number.isInteger:function(t){return i(t)&&t%1==0};t.exports=r},function(t,e,n){var i=n(135);t.exports=function(t){return i(t)&&t%2==0}},function(t,e,n){var i=n(135);t.exports=function(t){return i(t)&&t%1!=0}},function(t,e){t.exports=function(t,e){var n=e.toString(),i=n.indexOf(".");if(-1===i)return Math.round(t);var r=n.substr(i+1).length;return r>20&&(r=20),parseFloat(t.toFixed(r))}},function(t,e,n){var i=n(439);t.exports={clamp:n(382),fixedBase:n(562),isDecimal:n(561),isEven:n(560),isInteger:n(559),isNegative:n(558),isNumberEqual:i,isOdd:n(557),isPositive:n(556),maxBy:n(555),minBy:n(554),mod:n(438),snapEqual:i,toDegree:n(437),toInt:n(436),toInteger:n(436),toRadian:n(435)}},function(t,e,n){var i=n(29);t.exports=function(t){var e=0,n=0,r=0,a=0;return i(t)?1===t.length?e=n=r=a=t[0]:2===t.length?(e=r=t[0],n=a=t[1]):3===t.length?(e=t[0],n=a=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],a=t[3]):e=n=r=a=t,{r1:e,r2:n,r3:r,r4:a}}},function(t,e,n){var i=n(29),r=n(358),a=n(30),o=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,s=/[^\s\,]+/gi;t.exports=function(t){return i(t=t||[])?t:r(t)?(t=t.match(o),a(t,function(e,n){if((e=e.match(s))[0].length>1){var i=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=i}a(e,function(t,n){isNaN(t)||(e[n]=+t)}),t[n]=e}),t):void 0}},function(t,e){var n={};t.exports=function(t){var e=n[t];if(!e){for(var i=t.toString(16),r=i.length;r<6;r++)i="0"+i;e="#"+i,n[t]=e}return e}},function(t,e,n){var i=n(566);t.exports={number2color:i,numberToColor:i,parsePath:n(565),parseRadius:n(564)}},function(t,e){t.exports=function(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var n=function(n){t[e](n)};return t["_wrap_"+e]=n,n}},function(t,e){t.exports=function(t,e){return t["_wrap_"+e]}},function(t,e,n){t.exports={getWrapBehavior:n(569),wrapBehavior:n(568)}},function(t,e,n){var i=n(136),r=n(29),a=n(30);t.exports=function(t,e){for(var n=[],o={},s=0;s<t.length;s++){var l=t[s][e];i(l)||(r(l)||(l=[l]),a(l,function(t){o[t]||(n.push(t),o[t]=!0)}))}return n}},function(t,e,n){var i=n(30),r=n(367),a=n(440);t.exports=function(){var t=[],e=r(arguments);return i(e,function(e){t=t.concat(e)}),a(t)}},function(t,e,n){var i=n(358),r=n(47),a=n(29);t.exports=function(t,e){var n=void 0;if(r(e))n=function(t,n){return e(t)-e(n)};else{var o=[];i(e)?o.push(e):a(e)&&(o=e),n=function(t,e){for(var n=0;n<o.length;n+=1){var i=o[n];if(t[i]>e[i])return 1;if(t[i]<e[i])return-1}return 0}}return t.sort(n),t}},function(t,e,n){var i=n(62),r=n(441);t.exports=function(t,e){var n=[];if(!i(t))return n;for(var a=-1,o=[],s=t.length;++a<s;){var l=t[a];e(l,a,t)&&(n.push(l),o.push(a))}return r(t,o),n}},function(t,e,n){var i=n(29),r=n(359),a=n(30);t.exports=function(t,e,n){if(!i(t)&&!r(t))return t;var o=n;return a(t,function(t,n){o=e(o,t,n)}),o}},function(t,e){t.exports=function(t){for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e}},function(t,e,n){var i=n(384),r=n(29);t.exports=function(t){if(!(t=i(t,function(t){return!isNaN(t)})).length)return{min:0,max:0};if(r(t[0])){for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);t=e}var a=Math.max.apply(null,t);return{min:Math.min.apply(null,t),max:a}}},function(t,e,n){var i=n(29);t.exports=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(i(e))for(var r=0;r<e.length;r+=1)t(e[r],n);else n.push(e);return n}},function(t,e,n){var i=n(29),r=n(30);t.exports=function(t){if(!i(t))return t;var e=[];return r(t,function(t){i(t)?r(t,function(t){e.push(t)}):e.push(t)}),e}},function(t,e,n){var i=n(136),r=n(29);t.exports=function(t,e){for(var n=null,a=0;a<t.length;a++){var o=t[a][e];if(!i(o)){n=r(o)?o[0]:o;break}}return n}},function(t,e,n){var i=n(47),r=n(359),a=n(444);t.exports=function(t,e){var n=void 0;if(i(e)&&(n=e),r(e)&&(n=function(t){return a(t,e)}),n)for(var o=0;o<t.length;o+=1)if(n(t[o]))return t[o];return null}},function(t,e,n){var i=n(384),r=n(368);t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return i(t,function(t){return!r(e,t)})}},function(t,e,n){t.exports={contains:n(368),difference:n(582),find:n(581),firstValue:n(580),flatten:n(579),flattenDeep:n(578),getRange:n(577),merge:n(576),pull:n(442),pullAt:n(441),reduce:n(575),remove:n(574),sortBy:n(573),union:n(572),uniq:n(440),valuesOfKey:n(571)}},function(t,e){t.exports=function(t,e){var n=this.getStyle(t,"width",e);return"auto"===n&&(n=t.offsetWidth),parseFloat(n)}},function(t,e,n){var i=n(136);t.exports=function(t,e,n){try{return window.getComputedStyle?window.getComputedStyle(t,null)[e]:t.currentStyle[e]}catch(t){return i(n)?null:n}}},function(t,e){t.exports=function(){return window.devicePixelRatio?window.devicePixelRatio:2}},function(t,e){t.exports=function(t,e){var n=this.getWidth(t,e),i=parseFloat(this.getStyle(t,"borderLeftWidth"))||0,r=parseFloat(this.getStyle(t,"paddingLeft"))||0,a=parseFloat(this.getStyle(t,"paddingRight"))||0;return n+i+(parseFloat(this.getStyle(t,"borderRightWidth"))||0)+r+a}},function(t,e){t.exports=function(t,e){var n=this.getHeight(t,e),i=parseFloat(this.getStyle(t,"borderTopWidth"))||0,r=parseFloat(this.getStyle(t,"paddingTop"))||0,a=parseFloat(this.getStyle(t,"paddingBottom"))||0;return n+i+(parseFloat(this.getStyle(t,"borderBottomWidth"))||0)+r+a}},function(t,e){t.exports=function(t,e){var n=this.getStyle(t,"height",e);return"auto"===n&&(n=t.offsetHeight),parseFloat(n)}},function(t,e){t.exports=function(t,e){if(t&&t.getBoundingClientRect){var n=t.getBoundingClientRect(),i=document.documentElement.clientTop,r=document.documentElement.clientLeft;return{top:n.top-i,bottom:n.bottom-i,left:n.left-r,right:n.right-r}}return e||null}},function(t,e){t.exports=function(t,e,n){if(t){if(t.addEventListener)return t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}};if(t.attachEvent)return t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}}}},function(t,e,n){t.exports={addEventListener:n(591),createDom:n(447),getBoundingClientRect:n(590),getHeight:n(589),getOuterHeight:n(588),getOuterWidth:n(587),getRatio:n(586),getStyle:n(585),getWidth:n(584),modifyCSS:n(446),requestAnimationFrame:n(445)}},function(t,e,n){var i=n(30),r=n(369),a=n(592),o=n(583),s=n(570),l=n(567),u=n(563),c=n(553),h=n(552),d=n(548),f=n(542),p=n(537),g={DOMUtil:a,DomUtil:a,MatrixUtil:c,PathUtil:d,arrayUtil:o,domUtil:a,eventUtil:s,formatUtil:l,mathUtil:u,matrixUtil:c,objectUtil:h,stringUtil:f,pathUtil:d,typeUtil:p,augment:n(417),clone:n(380),debounce:n(530),deepMix:n(379),each:i,extend:n(416),filter:n(384),group:n(529),groupBy:n(414),groupToMap:n(415),indexOf:n(528),isEmpty:n(413),isEqual:n(378),isEqualWith:n(527),map:n(526),mix:r,pick:n(525),throttle:n(524),toArray:n(367),toString:n(357),uniqueId:n(412)};i([a,o,s,l,u,c,h,d,f,p],function(t){r(g,t)}),t.exports=g},function(t,e,n){var i=n(449),r=n(390),a=n(146),o=n(372),s=n(147),l={Graph:n(389),Tree:n(455),Util:n(22),Layouts:n(387),G:s,Plugins:{},Components:{},Global:a,Shape:i,registerNode:i.registerNode,registerEdge:i.registerEdge,registerGroup:i.registerGroup,registerGuide:i.registerGuide,registerBehaviour:r.registerBehaviour,version:o,track:function(t){a.track=t}};n(450),t.exports=l}])},function(t,e,n){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}var a=n(17).Util,o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=this.getDefaultCfg();a.mix(!0,this,n,e),this.init()}return r(t,[{key:"getDefaultCfg",value:function(){return{}}}]),r(t,[{key:"init",value:function(){}},{key:"destroy",value:function(){}}]),t}();t.exports=o},function(t,e,n){function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=n(17),o=n(182),s=n(181),l={whitespace:{9:"Tab",13:"Enter",32:"Space"},fn:{112:"f1 ",113:"f2 ",114:"f3 ",115:"f4 ",116:"f5 ",117:"f6 ",118:"f7 ",119:"f8 ",120:"f9 ",121:"f10",122:"f11",123:"f12"},letter:{65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z"},number:{48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9"},navigation:{37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown"},symbol:{110:"decimal point",186:"semi-colon",187:"=",188:"comma",189:"-",190:"period ",191:"/",192:"grave accent",219:"open bracket ",220:"back slash ",221:"close bracket ",222:"single quote "},smallNumberKey:{96:"numpad 0 ",97:"numpad 1 ",98:"numpad 2 ",99:"numpad 3 ",100:"numpad 4 ",101:"numpad 5 ",102:"numpad 6 ",103:"numpad 7 ",104:"numpad 8 ",105:"numpad 9 "},modifierKey:{16:"Shift",17:"Ctrl ",18:"Alt",20:"caps lock"},escKey:{8:"Backspace",46:"Delete",27:"Escape"},homeKey:{91:"Windows Key / Left command",92:"right window key ",93:"Windows Menu"},computeKey:{106:"multiply ",107:"add",109:"subtract ",111:"divide "}},u=i({},a.Util,o,{getNodeSize:function(t){if(t){if(a.Util.isNumber(t))return[t,t];if(a.Util.isString(t)){if(-1===t.indexOf("*")){var e=Number(t);return[e,e]}return t.split("*")}return t}return[96,48]},getTypeAndChar:function(t){var e;for(var n in t=""+t,l)for(var i in e=n,l[n])if(i===t)return{type:e,character:l[n][i]};return{}},getKeyboradKey:function(t){return t.key||u.getTypeAndChar(t.keyCode).character},getIndex:function(t){return t.getParent().get("children").indexOf(t)},setId:function(t){t.id||(t.id=a.Util.guid())},pointLineDistance:function(t,e,n,i,r,o){var s=[n-t,i-e];if(a.Util.vec2.exactEquals(s,[0,0]))return NaN;var l=[-s[1],s[0]];a.Util.vec2.normalize(l,l);var u=[r-t,o-e];return Math.abs(a.Util.vec2.dot(u,l))},getRectByBox:function(t,e,n){return e.addShape("rect",{attrs:i({},n,{x:t.minX,y:t.minY,width:t.maxX-t.minX,height:t.maxY-t.minY})})},objectToValues:function(t){var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(t[e]);return n},getValue:function(t){return a.Util.isFunction(t)?t():t},getContrast:function(t,e){var n={};return a.Util.each(e,function(e,i){n[i]=t[i]}),n},arrowTo:function(t,e,n,i,r,o,s){var l=[o-i,s-r],u=a.Util.vec2.angleTo(l,[1,0],!0);return t.transform([["r",u],["t",e,n]]),t},setEndOfContenteditable:function(t){var e,n;document.createRange?((e=document.createRange()).selectNodeContents(t),e.collapse(!1),(n=window.getSelection()).removeAllRanges(),n.addRange(e)):document.selection&&((e=document.body.createTextRange()).moveToElementText(t),e.collapse(!1),e.select())},matches:function(t,e){return(Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=e.length;--n>=0&&e.item(n)!==this;);return n>-1}).call(t,e)},delegateEvent:function(t,e,n,i){return u.addEventListener(t,e,function(e){for(var r=e.target||e.srcElement;r!==t;)u.matches(r,n)&&i.call(r,Array.prototype.slice.call(arguments)),r=r.parentNode})},Palettes:s});t.exports=u},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){a(t,e,n[e])})}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=n(17),d=n(9),f=n(22),p=[],g=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i={showHotArea:!1,defaultData:{roots:[{label:"思维导图",children:[{label:"新建节点"},{label:"新建节点"},{label:"新建节点"}]}]},shortcut:{append:!0,appendChild:!0,collapseExpand:!0,selectAll:!0},labelEditable:!0,graph:{modes:{default:["clickNodeSelected","keydownMoveSelection","clickCanvasSelected","hoverMindExpandButton","keydownEditLabel","panBlank","wheelChangeViewport","panMindNode","clickCollapsedButton","clickExpandedButton","hoverButton","hoverNodeActived","dblclickItemEditLabel"],readOnly:["clickNodeSelected","wheelChangeViewport","keydownMoveSelection","hoverNodeActived","panCanvas","clickExpandedButton","hoverButton","clickCanvasSelected"]},layout:new h.Layouts.Mindmap({direction:"H",getSubTreeSep:function(t){return t.children&&t.children.length>0?t.hierarchy<=2?8:2:0},getHGap:function(t){return 1===t.hierarchy?8:2===t.hierarchy?24:18},getVGap:function(t){return 1===t.hierarchy?24:2===t.hierarchy?24:2},getSide:function(t){return t.data.side?t.data.side:"right"}}),mode:"default",defaultIntersectBox:"rect",nodeDefaultShape:"mind-base",edgeDefaultShape:"mind-edge",minZoom:.2,maxZoom:2},align:{item:!1},rootShape:"mind-root",firstSubShape:"mind-first-sub",secondSubShape:"mind-second-sub",subShape:"mind-base",nodeDefaultShape:"mind-base",graphConstructor:h.Tree,defaultSide:"right"},r={};return f.each(p,function(t){f.mix(r,t.CFG)}),f.mix(!0,i,r,t),(n=s(this,u(e).call(this,i))).isMind=!0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,d),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(e,[{key:"_init",value:function(){var t=this;l(u(e.prototype),"_init",this).call(this),f.each(p,function(e){e.INIT&&t[e.INIT]()});var n=this.getGraph(),i=this.get("defaultData"),r=n.get("mode"),a=n.getRootGroup().addGroup();if(this.set("hotAreaGroup",a),n.edge().shape(function(t){if(n.find(t.target).getModel().isPlaceholder)return"mind-placeholder-edge"}),i&&this.read(i),"default"===r){if(i){var o=this.getRoot(),s=n.find(o.id);this.setSelected(s,!0)}}else if("readOnly"===r){var c=this.get("shortcut");c.append=!1,c.appendChild=!1,c.selectAll=!1,c.delete=!1}if(i){var h=this.getRoot();this.focus(h.id)}}},{key:"bindEvent",value:function(){var t=this;l(u(e.prototype),"bindEvent",this).call(this);var n=this.get("_graph");n.on("keydown",function(t){t.domEvent.preventDefault()}),n.on("beforechange",function(e){"add"===e.action?t._beforeAdd(e):"changeData"===e.action&&t._beforeChangeData(e)}),n.on("aftersource",function(){t._setHierarchy()}),n.on("afterchange",function(){t._setHotArea()}),n.on("afteritemdraw",function(t){var e=t.item,n=e.getModel();if(e.isEdge){var i=e.getGraphicGroup();f.toBack(i,i.getParent()),i.setSilent("capture",!1)}n.parent||(e.isRoot=!0,e.deleteable=!1,e.collapseExpand=!1,e.appendable=!1,e.dragable=!1)}),this.on("beforedelete",function(e){var n=e.items[0],i=t._getBrothers(n),r=t._getNth(n);i[r-1]?t.setSelected(i[r-1].id,!0):i[r+1]?t.setSelected(i[r+1].id,!0):t.setSelected(n.getParent(),!0)}),this.on("afteritemselected",function(e){t._tryAdjustViewport(e.item)})}},{key:"getRoot",value:function(){return this.getGraph().getSource().roots[0]}},{key:"_setHierarchy",value:function(t){var e=this.getGraph(),n=this.get("firstSubShape"),i=this.get("secondSubShape"),r=this.get("defaultSide");if(t){var a=e.find(t.parent);if(a){var o=a.getModel();t.hierarchy=o.hierarchy+1,"mind-placeholder"!==t.shape&&(2===t.hierarchy&&(t.shape=n,t.side||(t.side=r)),3===t.hierarchy&&(t.shape=i))}}else(t=this.getRoot()).hierarchy=1;f.traverseTree(t,function(t,e){t.hierarchy=e.hierarchy+1,t.side||(t.side=r),e.side&&(t.side=e.side),2===t.hierarchy?t.shape=n:3===t.hierarchy&&(t.shape=i)},function(t){return t.children})}},{key:"getFirstChildrenBySide",value:function(t){var e=[];return this.getRoot().children.forEach(function(n){n.side===t&&e.push(n)}),e}},{key:"_getNth",value:function(t){return this.getGraph().getNth(t)}},{key:"_getBrothers",value:function(t){return t.getParent().getModel().children}},{key:"_getMoveChildModel",value:function(t){if(t&&t.length>0){var e=t.length;return t[parseInt(e/2)]}}},{key:"_getVerticalMoveItem",value:function(t,e,n){for(var i,r=this.getGraph().getNodes(),a=t.getBBox(),o=[a.minX,a.maxX],s=[],l=0;l<o.length;l++)for(var u=o[l],c=0;c<r.length;c++){var h=r[c],d=h.getBBox();e(d,a,u)&&s.push({long:n(d,a),node:h})}return s.length>0&&(s.sort(function(t,e){return t.long-e.long}),i=s[0].node),i}},{key:"_arrowTopItem",value:function(t){var e=this._getBrothers(t),n=this._getNth(t);return e[n-1]?e[n-1]:this._getVerticalMoveItem(t,function(t,e,n){return t.centerY<e.centerY&&n<=t.maxX&&n>=t.minX},function(t,e){return e.centerY-t.centerY})}},{key:"_arrowBottomItem",value:function(t){var e=this._getBrothers(t),n=this._getNth(t);return e[n+1]?e[n+1]:this._getVerticalMoveItem(t,function(t,e,n){return t.centerY>e.centerY&&n<=t.maxX&&n>=t.minX},function(t,e){return t.centerY-e.centerY})}},{key:"_arrowLeftItem",value:function(t){var e=f.getMindNodeSide(t);if(t.isRoot){var n=this.getFirstChildrenBySide("left");return this._getMoveChildModel(n)}if("left"===e){var i=t.getModel().children;return this._getMoveChildModel(i)}return t.getParent()}},{key:"_arrowRightItem",value:function(t){var e=f.getMindNodeSide(t);if(t.isRoot){var n=this.getFirstChildrenBySide("right");return this._getMoveChildModel(n)}if("right"===e){var i=t.getModel().children;return this._getMoveChildModel(i)}return t.getParent()}},{key:"_moveItemSelection",value:function(t){var e=this.getGraph(),n=this.getSelected()[0];if(n){var i,r=t.domEvent,a=f.getKeyboradKey(r);"ArrowUp"!==a||n.isRoot?"ArrowDown"!==a||n.isRoot?"ArrowLeft"===a?i=this._arrowLeftItem(n):"ArrowRight"===a&&(i=this._arrowRightItem(n)):i=this._arrowBottomItem(n):i=this._arrowTopItem(n),i&&(i=e.find(i.id)).isVisible()&&(this.clearSelected(),this.setSelected(i,!0))}}},{key:"showLabelEditor",value:function(t){var e=t.domEvent,n=this.getSelected()[0],i=f.getKeyboradKey(e);if(n&&1===i.length&&!e.metaKey&&!e.ctrlKey){var r=this.get("labelTextArea");n&&(this.beginEditLabel(n),r.innerHTML=i,f.setEndOfContenteditable(r))}}},{key:"_tryAdjustViewport",value:function(t){var e=this.get("_graph"),n=t.getBBox(),i={x:n.minX,y:n.minY},r={x:n.maxX,y:n.maxY},a=e.getDomPoint(i),o=e.getDomPoint(r),s=e.getWidth(),l=e.getHeight();a.x<0&&e.translate(16-a.x,0),a.y<0&&e.translate(0,16-a.y),o.x>s&&e.translate(s-o.x-16,0),o.y>l&&e.translate(0,l-o.y-16)}},{key:"_beforeChangeData",value:function(t){var e=t.data.roots[0],n=this.get("rootShape");e.shape=n,this._setHierarchy(e)}},{key:"_beforeAdd",value:function(t){var e=this.get("_graph"),n=t.model,i=e.find(n.parent);i.getModel().collapsed&&e.update(i,{collapsed:!1}),this._setHierarchy(n)}},{key:"_drawHotAreaShape",value:function(){var t=this.get("_graph"),e=this.get("hotAreaGroup"),n=this.get("hotAreas");e.clear(),n.forEach(function(t){e.addShape("rect",{attrs:{x:t.minX,y:t.minY,width:t.maxX-t.minX,height:t.maxY-t.minY,fill:t.color,fillOpacity:.4},capture:!1})}),t.draw()}},{key:"_setHotArea",value:function(){var t=[],e=this.get("_graph"),n=this.getRoot(),i="placeholder",a=this.get("showHotArea"),o=e.find(n.id).getBBox();t.push({minX:o.minX-90,minY:o.minY-60,maxX:(o.minX+o.maxX)/2,maxY:o.maxY+60,parent:n,current:n,id:n.id+"left"+i,nth:n.children.length,side:"left",color:"orange"}),t.push({minX:(o.minX+o.maxX)/2,minY:o.minY-60,maxX:o.maxX+90,maxY:o.maxY+60,parent:n,current:n,id:n.id+"right"+i,nth:n.children.length,side:"right",color:"pink"}),f.traverseTree(n,function(n,a,o){var s=e.find(n.id);if(!n.isPlaceholder&&s&&s.isVisible()){var l,u=function(t,e,n){var i=n.children,r=t;if(!n.parent)for(;i[r]&&i[r].side!==e.side;)r++;for(;i[r]&&i[r].isPlaceholder;)r++;if(i[r]&&i[r].side===e.side)return i[r]}(o+1,n,a),c=function(t,e,n){var i=n.children,r=t;if(!n.parent)for(;i[r]&&i[r].side!==e.side;)r--;for(;i[r]&&i[r].isPlaceholder;)r--;if(i[r]&&i[r].side===e.side)return i[r]}(o-1,n,a),h=e.find(n.id).getBBox(),d=a.children,f=2===n.hierarchy&&"right"===n.side,p=2===n.hierarchy&&"left"===n.side;if(c||t.push({minX:f?h.minX-90:h.minX,minY:function(){var t=c?h.minY:h.minY-16;return d[o-1]&&d[o-1].isPlaceholder&&d[o-1].side===n.side&&(t=e.find(d[o-1].id).getBBox().minY),t}(),maxX:p?h.maxX+90:h.maxX,maxY:(h.minY+h.maxY)/2,parent:a,id:(c?c.id:void 0)+n.id+a.id+i,side:n.side,color:"yellow",nth:o}),u){var g=e.find(u.id).getBBox();t.push({minX:"left"===n.side?Math.max(h.minX,g.minX):f?h.minX-90:h.minX,minY:(h.minY+h.maxY)/2,maxX:"right"===n.side?Math.min(h.maxX,g.maxX):p?h.maxX+90:h.maxX,maxY:(g.minY+g.maxY)/2,parent:a,id:n.id+(u?u.id:void 0)+a.id+i,side:n.side,color:"blue",nth:o+1})}else t.push({minX:f?h.minX-90:h.minX,minY:(h.minY+h.maxY)/2,maxX:p?h.maxX+90:h.maxX,maxY:function(){var t=h.maxY+16;return d[o+1]&&d[o+1].isPlaceholder&&d[o+1].side===n.side&&(t=e.find(d[o+1].id).getBBox().maxY),t}(),parent:a,id:n.id+void 0+a.id+i,color:"red",nth:o+1,addOrder:"push",side:n.side});if(!n.children||0===n.children.length||1===n.children.length&&n.children[0].isPlaceholder)l=n.x>a.x?{minX:h.maxX,minY:h.minY-0,maxX:h.maxX+100,maxY:h.maxY+0}:{minX:h.minX-100,minY:h.minY-0,maxX:h.minX,maxY:h.maxY+0},t.push(r({},l,{parent:n,id:NaN+n.id+i,nth:0,color:"green",side:n.side,addOrder:"push"}))}},function(t){return t.children}),this.set("hotAreas",t),a&&this._drawHotAreaShape()}},{key:"hideHotArea",value:function(){var t=this.get("_graph");this.get("hotAreaGroup").clear(),t.draw(),this.set("showHotArea",!1)}},{key:"showHotArea",value:function(){this._drawHotAreaShape(),this.set("showHotArea",!0)}},{key:"getHotArea",value:function(t){var e;return this.get("hotAreas").forEach(function(n){if(t.x>n.minX&&t.x<n.maxX&&t.y>n.minY&&t.y<n.maxY)return e=n,!1}),e}},{key:"saveExpandImage",value:function(t){var e,n,i,a=this,o=this.getGraph(),s=o.getBBox(),l=o.getFitViewPadding();return o.saveImage(r({width:s.width+l[1]+l[3],height:s.height+l[0]+l[2],beforeTransform:function(){var t=o.getNodes();(e=t.filter(function(t){return t.getModel().collapsed}).map(function(t){return t.getModel().id})).forEach(function(t){o.update(t,{collapsed:!1})}),o.layout(),n=a.getSelected().map(function(t){return t.id}),i=a.getSelected().map(function(t){return t.id}),a.clearSelected(),a.clearActived()},afterTransform:function(){e.forEach(function(t){o.update(t,{collapsed:!0})}),a.setSelected(n,!0),a.setActived(i,!0)}},t))}},{key:"save",value:function(){var t=this.get("_graph").save();return t.roots.forEach(function(t){f.traverseTree(t,function(t){delete t.x,delete t.y,delete t.width,delete t.height,delete t.parent,delete t.nth,delete t.hierarchy,delete t.index,delete t.shape},function(t){return t.children},!0)}),t}}]),e}();f.each(p,function(t){f.mix(g.prototype,t.AUGMENT)}),d.setRegister(g,"mind","page"),t.exports=g},,function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}({},n(14),{getMindNodeSide:function(t){var e=t.getModel();if(e.side)return e.side;var n=t.getParent();return n?n.getModel().side?n.getModel().side:r.getMindNodeSide(n):void 0}});t.exports=r},,function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=n(9),l=n(64),u=n(48),c=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i={graph:{modes:{default:["panBlank","hoverGroupActived","keydownCmdWheelZoom","clickEdgeSelected","clickNodeSelected","clickCanvasSelected","clickGroupSelected","hoverNodeActived","hoverEdgeActived","hoverButton","clickCollapsedButton","clickExpandedButton","wheelChangeViewport","keydownShiftMultiSelected","dragNodeAddToGroup","dragOutFromGroup","panItem","hoverEdgeControlPoint","dragEdgeControlPoint"],add:["dragPanelItemAddNode"],readOnly:["panCanvas"],move:["panCanvas"],multiSelect:["dragMultiSelect"]},mode:"default",defaultIntersectBox:"rect",nodeDefaultShape:"flow-base",edgeDefaultShape:"flow-smooth",groupDefaultShape:"flow-base"},linkNode:!1};return u.mix(!0,i,{},t),(n=r(this,a(e).call(this,i))).isFlow=!0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,l),e}();s.setRegister(c,"flow","diagram"),t.exports=c},,,function(t,e){t.exports={gridStyle:{stroke:"#A3B1BF",lineWidth:.5},cursor:{panningCanvas:"-webkit-grabbing",beforePanCanvas:"-webkit-grab"},wheelPanRatio:.3,alignLineStyle:{stroke:"#FA8C16",lineWidth:1},nodeDelegationStyle:{stroke:"#1890FF",fill:"#1890FF",fillOpacity:.08,lineDash:[4,4],radius:4,lineWidth:1},edgeDelegationStyle:{stroke:"#1890FF",lineDash:[4,4],lineWidth:1}}},,,,,,,,,function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=n(9),c=n(64),h=n(61),d=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i={graph:{modes:{default:["panBlank","hoverGroupActived","keydownCmdWheelZoom","clickEdgeSelected","clickNodeSelected","clickCanvasSelected","clickGroupSelected","hoverNodeActived","hoverEdgeActived","hoverButton","clickCollapsedButton","clickExpandedButton","wheelChangeViewport","keydownShiftMultiSelected","dragNodeAddToGroup","dragOutFromGroup","panItem","hoverEdgeControlPoint","dragEdgeControlPoint"],add:["dragPanelItemAddNode","processAddEdge"],readOnly:["panCanvas"],move:["panCanvas"],multiSelect:["dragMultiSelect"]},mode:"default",defaultIntersectBox:"circle",nodeDefaultShape:"koni-base",edgeDefaultShape:"koni-base",groupDefaultShape:"koni-base",minZoom:.5,maxZoom:2},orbit:{satellite:["forkAndLink"]},anchorLink:!1,noEndEdge:!1};return h.mix(!0,i,{},t),(n=a(this,s(e).call(this,i))).isKoni=!0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,c),function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(e,[{key:"bindEvent",value:function(){o(s(e.prototype),"bindEvent",this).call(this);var t=this.getGraph();t.on("afterchange",function(e){var n=e.item,i=e.action,r=e.originModel,a=e.updateModel;if(n&&n.isEdge)if("add"===i||"remove"===i){var o=n.getSource(),s=n.getTarget();h.getParallelEdges(o,s,!0).forEach(function(t){t.update()})}else if("update"===i){var l=t.find(r.source),u=t.find(r.target),c=[];if(h.getParallelEdges(l,u,!0).forEach(function(t){t.update()}),h.isNil(a.target)&&!h.isNil(a.source)){var d=t.find(a.source);c=h.getParallelEdges(d,u,!0)}else if(!h.isNil(a.target)&&h.isNil(a.source)){var f=t.find(a.target);c=h.getParallelEdges(l,f,!0)}else if(!h.isNil(a.target)&&!h.isNil(a.source)){var p=t.find(a.source),g=t.find(a.target);c=h.getParallelEdges(p,g,!0)}c.forEach(function(t){t.update()})}"changeData"===i&&t.getEdges().forEach(function(t){t.update()}),t.draw()})}}]),e}();u.setRegister(d,"koni","diagram"),t.exports=d},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=n(17),c=n(9),h=n(11),d=n(144),f=n(143),p=n(141),g=n(137),m=[d,n(136),g,f,p,n(135)],v=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i={shortcut:{copy:!0,paste:!0,selectAll:!0,addGroup:!0,unGroup:!0},graph:{minZoom:.2,maxZoom:2},graphConstructor:u.Graph,noEndEdge:!0},r={};return h.each(m,function(t){h.mix(r,t.CFG)}),h.mix(!0,i,r,t),(n=a(this,s(e).call(this,i))).isFlow=!0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,c),function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(e,[{key:"_init",value:function(){var t=this;o(s(e.prototype),"_init",this).call(this),h.each(m,function(e){e.INIT&&t[e.INIT]()})}},{key:"bindEvent",value:function(){var t=this;o(s(e.prototype),"bindEvent",this).call(this),this.on("beforeitemactived",function(e){var n=e.item,i=t.get("_graph").getShapeObj(n).getActivedOutterStyle(n);n.isNode&&t.addOutterShape(n,i)}),this.on("beforeitemunactived",function(e){var n=e.item;(n.isNode||n.isGroup)&&t.clearOutterShape(n)}),this.on("beforeitemselected",function(e){var n=e.item,i=t.get("_graph").getShapeObj(n).getSelectedOutterStyle(n);n.isNode?t.addOutterShape(n,i):n.isGroup&&t.addOutterShape(n,i)}),this.on("beforeitemunselected",function(e){var n=e.item;(n.isNode||n.isGroup)&&t.clearOutterShape(n)})}}]),e}();h.each(m,function(t){h.mix(v.prototype,t.AUGMENT)}),c.setRegister(v,"diagram","page"),t.exports=v},function(t,e,n){var i=n(49);n(179),n(178),t.exports=i},,,,,,,,,,function(t,e,n){t.exports=n(11)},function(t,e,n){function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=n(19),o={};function s(t){return t.getCurrentPage().getSelected().length>0}function l(t){var e=t.getCurrentPage();this.snapShot=e.save(),this.selectedItems=e.getSelected().map(function(t){return t.id}),this.method&&(a.isString(this.method)?e[this.method]():this.method(t))}function u(t){var e=t.getCurrentPage();e.read(this.snapShot),e.setSelected(this.selectedItems,!0)}function c(t){return t.getCurrentPage().getMode()!==this.toMode}function h(t){var e=t.getCurrentPage();this.fromMode=e.getMode(),e.changeMode(this.toMode)}function d(t){t.getCurrentPage().changeMode(this.fromMode)}function f(t){var e={},n=[];return t.forEach(function(t){var r=t.model,o=a.mix(!0,{},i({},r,{id:a.guid()}));e[r.id]=o.id,n.push(i({},t,{model:o}))}),n.forEach(function(t){var n=t.model;if(n.parent){var i=e[n.parent];i?n.parent=i:delete n.parent}}),n.sort(function(t,e){return t.index-e.index}),n}o.list=[],o.registerCommand=function(t,e,n){if(o[t])a.mix(o[t],e);else{var r=i({enable:function(){return!0},init:function(){},execute:l,back:u,shortcutCodes:void 0,executeTimes:1,name:t,queue:!0},e);n&&o[n]&&(r=a.mix({},o[n],e)),o[t]=r,o.list.push(r)}},o.execute=function(t,e,n){var i=a.mix(!0,{},o[t],n),r=e.get("_command");return i.enable(e)&&(i.init(),i.queue&&(r.queue.splice(r.current,r.queue.length-r.current,i),r.current+=1),e.emit("beforecommandexecute",{command:i}),i.execute(e),e.emit("aftercommandexecute",{command:i}),e.setCommandDOMenable()),i},o.enable=function(t,e){return o[t].enable(e)},o.registerCommand("common",{back:u}),o.registerCommand("copyAdjacent",{enable:function(){return this.copyNode&&this.copyNode.isNode&&this.x&&this.y},execute:function(t){var e=this.copyNode,n=t.getCurrentPage(),i=n.getGraph(),r=e.getModel(),o=a.clone(r);o.id=a.guid(),o.x=this.x,o.y=this.y;var s=i.add("node",o),l=i.add("edge",{source:r.id,target:o.id});1===this.executeTimes&&(this.addIds=[s.id,l.id],this.page=n)},back:function(){var t=this.page.getGraph();this.addIds.forEach(function(e){t.remove(e)})}}),o.registerCommand("add",{enable:function(){return this.type&&this.addModel},execute:function(t){var e=t.getCurrentPage(),n=e.getGraph().add(this.type,this.addModel);1===this.executeTimes&&(this.addId=n.id,this.page=e)},back:function(){this.page.getGraph().remove(this.addId)}}),o.registerCommand("update",{enable:function(){return this.itemId&&this.updateModel},execute:function(t){var e=t.getCurrentPage(),n=e.getGraph(),i=n.find(this.itemId);1===this.executeTimes&&(this.originModel=a.getContrast(i.getModel(),this.updateModel),this.page=e),n.update(i,this.updateModel)},back:function(){var t=this.page.getGraph(),e=t.find(this.itemId);t.update(e,this.originModel)}}),o.registerCommand("redo",{queue:!1,enable:function(t){var e=t.get("_command"),n=e.queue;return e.current<n.length},execute:function(t){var e=t.get("_command");e.queue[e.current].execute(t),e.current+=1},shortcutCodes:[["metaKey","shiftKey","z"],["ctrlKey","shiftKey","z"]]}),o.registerCommand("undo",{queue:!1,enable:function(t){return t.get("_command").current>0},execute:function(t){var e=t.get("_command"),n=e.queue[e.current-1];n.executeTimes++,n.back(t),e.current-=1},shortcutCodes:[["metaKey","z"],["ctrlKey","z"]]}),o.registerCommand("copy",{queue:!1,enable:s,method:function(t){var e=t.getCurrentPage().getSelected(),n=t.get("_command"),r=e.map(function(t){return t.getGraphicGroup()}),o=a.getChildrenBBox(r);n.clipboard=[],e.forEach(function(t){a.traverseTree(t,function(t){var e=t.getModel(),i=t.getGraphicGroup();n.clipboard.push({type:t.type,index:a.getIndex(i),model:e})},function(t){return t.getChildren&&t.getChildren()},!0)}),t.set("copyCenterBox",i({},o))}}),o.registerCommand("pasteHere",{enable:function(t){return t.get("_command").clipboard.length>0},method:function(t){var e=t.getCurrentPage(),n=t.get("_command"),i=this.pasteData?this.pasteData:f(n.clipboard),r=this.copyCenterBox?this.copyCenterBox:t.get("copyCenterBox"),o=this.contextmenuPoint?this.contextmenuPoint:t.get("contextmenuPoint");e.clearSelected(),this.copyCenterBox=a.clone(r),this.pasteData=a.clone(i),this.contextmenuPoint=a.clone(o),i.forEach(function(t){var n=t.model;n.x&&(n.x+=o.x-r.minX),n.y&&(n.y+=o.y-r.minY),e.add(t.type,n)})},back:u}),o.registerCommand("paste",{enable:function(t){return t.get("_command").clipboard.length>0},method:function(t){var e=t.getCurrentPage(),n=t.get("_command"),i=this.pasteData?this.pasteData:f(n.clipboard);e.clearSelected(),this.pasteData=a.clone(i),i.forEach(function(t){var n=t.model;n.x&&(n.x+=10),n.y&&(n.y+=10),e.add(t.type,n)})},back:u}),o.registerCommand("addGroup",{init:function(){this.addGroupId=a.guid()},enable:function(t){return t.getCurrentPage().getSelected().length>1},method:function(t){t.getCurrentPage().addGroup({id:this.addGroupId})},back:u}),o.registerCommand("unGroup",{enable:function(t){var e=t.getCurrentPage().getSelected();return 1===e.length&&e[0].isGroup},method:"unGroup",back:u}),o.registerCommand("delete",{getDeleteItems:function(t){var e=t.getCurrentPage(),n=e.getGraph(),i=this.itemIds?this.itemIds.map(function(t){return n.find(t)}):e.getSelected();return i.filter(function(t){return!1!==t.deleteable})},enable:function(t){return this.getDeleteItems(t).length>0},method:function(t){var e=t.getCurrentPage(),n=this.getDeleteItems(t),i=e.getGraph();e.emit("beforedelete",{items:n}),a.each(n,function(t){i.remove(t)}),e.emit("afterdelete",{items:n}),this.itemIds=n.map(function(t){return t.getModel().id})},back:u,shortcutCodes:["Delete","Backspace"]}),o.registerCommand("selectAll",{method:function(t){var e=t.getCurrentPage();e.getGraph().getItems().forEach(function(t){e.setSelected(t,!0)})},back:u,shortcutCodes:[["metaKey","a"]]}),o.registerCommand("toBack",{enable:s,method:"toBack",back:u}),o.registerCommand("toFront",{enable:s,method:"toFront",back:u}),o.registerCommand("clear",{enable:function(t){return t.getCurrentPage().getItems().length>0},method:"clear",back:u}),o.registerCommand("multiSelect",{enable:c,toMode:"multiSelect",execute:h,back:d}),o.registerCommand("move",{enable:c,toMode:"move",execute:h,back:d}),t.exports=o},,,,,,,,,,,,function(t,e,n){t.exports=n(11)},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=n(18),u=n(11),c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,o(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,l),function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(e,[{key:"getDefaultCfg",value:function(){return{name:"",render:function(){return"<button>satellite</button>"},bindEvent:function(){return[]}}}},{key:"_renderDOM",value:function(){var t=u.createDOM(this.render(this.diagram));return this.dom=t,t.isSatellite=!0,t}},{key:"getDOM",value:function(){return this.dom||this._renderDOM()}},{key:"init",value:function(){var t=this.getDOM(),e=this.diagram.getGraph().getGraphContainer();t&&(t.css({position:"absolute",visibility:"hidden"}),e.appendChild(t),t&&this.bindEvent(t,this.diagram))}},{key:"enable",value:function(){return!0}},{key:"show",value:function(){this.getDOM().show()}},{key:"hide",value:function(){this.getDOM().hide()}},{key:"isVisible",value:function(){return"hidden"!==this.getDOM().style.visibility}},{key:"destroy",value:function(){var t=this.events;t&&t.forEach(function(t){t.remove()})}}]),e}();t.exports=c},function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=n(14);t.exports=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}({},r,{getParallelEdges:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t.getEdges().filter(function(t){var i=t.getModel();return i.target===e.id||n&&i.source===e.id})},object2array:function(t){var e=[];return r.each(t,function(t){e.push(t)}),e}})},function(t,e,n){var i=n(37);n(134),n(130),t.exports=i},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=n(183),c=n(19),h=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=(n=r(this,a(e).call(this))).getDefaultCfg();return n._cfg=c.mix(!0,{},n._cfg,i,t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,u),s(e,[{key:"getDefaultCfg",value:function(){return{}}}]),s(e,[{key:"get",value:function(t){return this._cfg[t]}},{key:"set",value:function(t,e){this._cfg[t]=e}},{key:"destroy",value:function(){this._cfg={},this.destroyed=!0}}]),e}();t.exports=h},,,,,,,,,,,,,,,,,,function(t,e,n){var i;!function(r){var a=/^\s+/,o=/\s+$/,s=0,l=r.round,u=r.min,c=r.max,h=r.random;function d(t,e){if(t=t||"",e=e||{},t instanceof d)return t;if(!(this instanceof d))return new d(t,e);var n=function(t){var e={r:0,g:0,b:0},n=1,i=null,s=null,l=null,h=!1,d=!1;return"string"==typeof t&&(t=function(t){t=t.replace(a,"").replace(o,"").toLowerCase();var e,n=!1;if(O[t])t=O[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(e=G.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=G.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=G.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=G.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=G.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=G.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=G.hex8.exec(t))?{r:N(e[1]),g:N(e[2]),b:N(e[3]),a:V(e[4]),format:n?"name":"hex8"}:(e=G.hex6.exec(t))?{r:N(e[1]),g:N(e[2]),b:N(e[3]),format:n?"name":"hex"}:(e=G.hex4.exec(t))?{r:N(e[1]+""+e[1]),g:N(e[2]+""+e[2]),b:N(e[3]+""+e[3]),a:V(e[4]+""+e[4]),format:n?"name":"hex8"}:!!(e=G.hex3.exec(t))&&{r:N(e[1]+""+e[1]),g:N(e[2]+""+e[2]),b:N(e[3]+""+e[3]),format:n?"name":"hex"}}(t)),"object"==typeof t&&(F(t.r)&&F(t.g)&&F(t.b)?(e=function(t,e,n){return{r:255*E(t,255),g:255*E(e,255),b:255*E(n,255)}}(t.r,t.g,t.b),h=!0,d="%"===String(t.r).substr(-1)?"prgb":"rgb"):F(t.h)&&F(t.s)&&F(t.v)?(i=B(t.s),s=B(t.v),e=function(t,e,n){t=6*E(t,360),e=E(e,100),n=E(n,100);var i=r.floor(t),a=t-i,o=n*(1-e),s=n*(1-a*e),l=n*(1-(1-a)*e),u=i%6;return{r:255*[n,s,o,o,l,n][u],g:255*[l,n,n,s,o,o][u],b:255*[o,o,l,n,n,s][u]}}(t.h,i,s),h=!0,d="hsv"):F(t.h)&&F(t.s)&&F(t.l)&&(i=B(t.s),l=B(t.l),e=function(t,e,n){var i,r,a;function o(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=E(t,360),e=E(e,100),n=E(n,100),0===e)i=r=a=n;else{var s=n<.5?n*(1+e):n+e-n*e,l=2*n-s;i=o(l,s,t+1/3),r=o(l,s,t),a=o(l,s,t-1/3)}return{r:255*i,g:255*r,b:255*a}}(t.h,i,l),h=!0,d="hsl"),t.hasOwnProperty("a")&&(n=t.a)),n=D(n),{ok:h,format:t.format||d,r:u(255,c(e.r,0)),g:u(255,c(e.g,0)),b:u(255,c(e.b,0)),a:n}}(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=l(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=l(this._r)),this._g<1&&(this._g=l(this._g)),this._b<1&&(this._b=l(this._b)),this._ok=n.ok,this._tc_id=s++}function f(t,e,n){t=E(t,255),e=E(e,255),n=E(n,255);var i,r,a=c(t,e,n),o=u(t,e,n),s=(a+o)/2;if(a==o)i=r=0;else{var l=a-o;switch(r=s>.5?l/(2-a-o):l/(a+o),a){case t:i=(e-n)/l+(e<n?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4}i/=6}return{h:i,s:r,l:s}}function p(t,e,n){t=E(t,255),e=E(e,255),n=E(n,255);var i,r,a=c(t,e,n),o=u(t,e,n),s=a,l=a-o;if(r=0===a?0:l/a,a==o)i=0;else{switch(a){case t:i=(e-n)/l+(e<n?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4}i/=6}return{h:i,s:r,v:s}}function g(t,e,n,i){var r=[R(l(t).toString(16)),R(l(e).toString(16)),R(l(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function m(t,e,n,i){return[R(z(i)),R(l(t).toString(16)),R(l(e).toString(16)),R(l(n).toString(16))].join("")}function v(t,e){e=0===e?0:e||10;var n=d(t).toHsl();return n.s-=e/100,n.s=L(n.s),d(n)}function y(t,e){e=0===e?0:e||10;var n=d(t).toHsl();return n.s+=e/100,n.s=L(n.s),d(n)}function x(t){return d(t).desaturate(100)}function _(t,e){e=0===e?0:e||10;var n=d(t).toHsl();return n.l+=e/100,n.l=L(n.l),d(n)}function b(t,e){e=0===e?0:e||10;var n=d(t).toRgb();return n.r=c(0,u(255,n.r-l(-e/100*255))),n.g=c(0,u(255,n.g-l(-e/100*255))),n.b=c(0,u(255,n.b-l(-e/100*255))),d(n)}function w(t,e){e=0===e?0:e||10;var n=d(t).toHsl();return n.l-=e/100,n.l=L(n.l),d(n)}function S(t,e){var n=d(t).toHsl(),i=(n.h+e)%360;return n.h=i<0?360+i:i,d(n)}function M(t){var e=d(t).toHsl();return e.h=(e.h+180)%360,d(e)}function A(t){var e=d(t).toHsl(),n=e.h;return[d(t),d({h:(n+120)%360,s:e.s,l:e.l}),d({h:(n+240)%360,s:e.s,l:e.l})]}function C(t){var e=d(t).toHsl(),n=e.h;return[d(t),d({h:(n+90)%360,s:e.s,l:e.l}),d({h:(n+180)%360,s:e.s,l:e.l}),d({h:(n+270)%360,s:e.s,l:e.l})]}function I(t){var e=d(t).toHsl(),n=e.h;return[d(t),d({h:(n+72)%360,s:e.s,l:e.l}),d({h:(n+216)%360,s:e.s,l:e.l})]}function P(t,e,n){e=e||6,n=n||30;var i=d(t).toHsl(),r=360/n,a=[d(t)];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,a.push(d(i));return a}function T(t,e){e=e||6;for(var n=d(t).toHsv(),i=n.h,r=n.s,a=n.v,o=[],s=1/e;e--;)o.push(d({h:i,s:r,v:a})),a=(a+s)%1;return o}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,i=this.toRgb();return t=i.r/255,e=i.g/255,n=i.b/255,.2126*(t<=.03928?t/12.92:r.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:r.pow((e+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:r.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=D(t),this._roundA=l(100*this._a)/100,this},toHsv:function(){var t=p(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=p(this._r,this._g,this._b),e=l(360*t.h),n=l(100*t.s),i=l(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+i+"%)":"hsva("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=f(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=f(this._r,this._g,this._b),e=l(360*t.h),n=l(100*t.s),i=l(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+i+"%)":"hsla("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return g(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,i,r){var a=[R(l(t).toString(16)),R(l(e).toString(16)),R(l(n).toString(16)),R(z(i))];return r&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:l(this._r),g:l(this._g),b:l(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+l(this._r)+", "+l(this._g)+", "+l(this._b)+")":"rgba("+l(this._r)+", "+l(this._g)+", "+l(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:l(100*E(this._r,255))+"%",g:l(100*E(this._g,255))+"%",b:l(100*E(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+l(100*E(this._r,255))+"%, "+l(100*E(this._g,255))+"%, "+l(100*E(this._b,255))+"%)":"rgba("+l(100*E(this._r,255))+"%, "+l(100*E(this._g,255))+"%, "+l(100*E(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(k[g(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+m(this._r,this._g,this._b,this._a),n=e,i=this._gradientType?"GradientType = 1, ":"";if(t){var r=d(t);n="#"+m(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0;return e||!i||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(_,arguments)},brighten:function(){return this._applyModification(b,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(v,arguments)},saturate:function(){return this._applyModification(y,arguments)},greyscale:function(){return this._applyModification(x,arguments)},spin:function(){return this._applyModification(S,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(P,arguments)},complement:function(){return this._applyCombination(M,arguments)},monochromatic:function(){return this._applyCombination(T,arguments)},splitcomplement:function(){return this._applyCombination(I,arguments)},triad:function(){return this._applyCombination(A,arguments)},tetrad:function(){return this._applyCombination(C,arguments)}},d.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]="a"===i?t[i]:B(t[i]));t=n}return d(t,e)},d.equals=function(t,e){return!(!t||!e)&&d(t).toRgbString()==d(e).toRgbString()},d.random=function(){return d.fromRatio({r:h(),g:h(),b:h()})},d.mix=function(t,e,n){n=0===n?0:n||50;var i=d(t).toRgb(),r=d(e).toRgb(),a=n/100;return d({r:(r.r-i.r)*a+i.r,g:(r.g-i.g)*a+i.g,b:(r.b-i.b)*a+i.b,a:(r.a-i.a)*a+i.a})},d.readability=function(t,e){var n=d(t),i=d(e);return(r.max(n.getLuminance(),i.getLuminance())+.05)/(r.min(n.getLuminance(),i.getLuminance())+.05)},d.isReadable=function(t,e,n){var i,r,a=d.readability(t,e);switch(r=!1,(i=function(t){var e,n;return e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:e,size:n}}(n)).level+i.size){case"AAsmall":case"AAAlarge":r=a>=4.5;break;case"AAlarge":r=a>=3;break;case"AAAsmall":r=a>=7}return r},d.mostReadable=function(t,e,n){var i,r,a,o,s=null,l=0;r=(n=n||{}).includeFallbackColors,a=n.level,o=n.size;for(var u=0;u<e.length;u++)(i=d.readability(t,e[u]))>l&&(l=i,s=d(e[u]));return d.isReadable(t,s,{level:a,size:o})||!r?s:(n.includeFallbackColors=!1,d.mostReadable(t,["#fff","#000"],n))};var O=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},k=d.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(O);function D(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function E(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=u(e,c(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),r.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function L(t){return u(1,c(0,t))}function N(t){return parseInt(t,16)}function R(t){return 1==t.length?"0"+t:""+t}function B(t){return t<=1&&(t=100*t+"%"),t}function z(t){return r.round(255*parseFloat(t)).toString(16)}function V(t){return N(t)/255}var G=function(){var t="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",e="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",n="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+e),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+e),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+e),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function F(t){return!!G.CSS_UNIT.exec(t)}void 0!==t&&t.exports?t.exports=d:void 0===(i=function(){return d}.call(e,n,e,t))||(t.exports=i)}(Math)},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=n(19),u=n(18),c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,o(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,u),function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(e,[{key:"getDefaultCfg",value:function(){return{type:"detailpannel",container:null}}},{key:"init",value:function(){this._initContainer()}},{key:"_initContainer",value:function(){var t=this.container;if(!t)throw new Error("please set the container for the detailpannel !");l.isString(t)&&(t=document.getElementById(t)),this.containerDom=t,this.switch("canvas-selected")}},{key:"switch",value:function(t){var e=this.containerDom.getElementsByClassName("pannel");l.each(e,function(e){e.dataset.status===t?e.style.display="block":e.style.display="none"})}},{key:"bindEvent",value:function(){var t=this.editor,e=this.getItems;l.each(e,function(e){l.addEventListener(e,"mousedown",function(){var n=e.dataset;t.getCurrentPage().beginAdd(n.type,{shape:n.shape})})}),l.addEventListener(window,"mouseup",function(){t.getCurrentPage().cancelAdd()})}}]),e}();t.exports=c},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=n(19),u=n(18),c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,o(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,u),function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(e,[{key:"getDefaultCfg",value:function(){return{type:"itempannel",container:null,getItemModel:function(t){return l.clone(t.dataset)},dataFormatters:{size:l.getNodeSize,labelOffsetX:Number,labelOffsetY:Number}}}},{key:"init",value:function(){this._initContainer()}},{key:"_initContainer",value:function(){var t=this.container;if(!t)throw new Error("please set the container for the itempannel !");l.isString(t)&&(t=document.getElementById(t)),this.containerDom=t}},{key:"bindEvent",value:function(){var t,e=this.editor,n=this;function i(){var n=e.getCurrentPage();t&&(n.cancelAdd(),t=void 0)}l.delegateEvent(this.containerDom,"mousedown",".getItem",function(){var i=n.getItemModel?n.getItemModel:n.getItemData;t=i(this),e.getCurrentPage().beginAdd(t.type,t)}),l.addEventListener(window,"mouseup",function(){i()}),l.addEventListener(window,"mouseleave",function(){i()})}}]),e}();t.exports=c},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=n(19),u=n(18),c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,o(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,u),function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(e,[{key:"getDefaultCfg",value:function(){return{type:"contextmenu",container:null}}},{key:"init",value:function(){this._initContainer()}},{key:"_initContainer",value:function(){var t=this.container;if(!t)throw new Error("please set the container for the tontextmenu !");l.isString(t)&&(t=document.getElementById(t));var e=t.getElementsByClassName("command");t.style.position="absolute",t.style["z-index"]=2,t.style.top="0px",t.style.left="0px",this.commands=e,this.containerDom=t}},{key:"bindEvent",value:function(){var t=this,e=this.commands;l.each(e,function(e){l.addEventListener(e,"click",function(){-1===e.className.indexOf("disable")&&t.hide()})})}},{key:"switch",value:function(t){var e=this.containerDom.getElementsByClassName("menu");l.each(e,function(e){e.dataset.status===t?e.style.display="block":e.style.display="none"})}},{key:"getCommandDoms",value:function(){return this.commands}},{key:"show",value:function(){var t=this.containerDom;this.editor.getCurrentPage().setSignal("preventWheelPan",!0),t.style.display="block"}},{key:"hide",value:function(){var t=this.containerDom;this.editor.getCurrentPage().setSignal("preventWheelPan",!1),t.style.display="none"}},{key:"move",value:function(t,e){var n=this.containerDom,i=l.getBoundingClientRect(n),r=parseFloat(l.getStyle(n,"top")),a=parseFloat(l.getStyle(n,"left"));n.style.left=a+(t-i.left)+"px",n.style.top=r+(e-i.top)+"px"}}]),e}();t.exports=c},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=n(19),u=n(18),c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,o(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,u),function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(e,[{key:"getDefaultCfg",value:function(){return{type:"toolbar",container:null}}},{key:"init",value:function(){this._initContainer()}},{key:"_initContainer",value:function(){var t=this.container;if(!t)throw new Error("please set the container for the toolbar !");l.isString(t)&&(t=document.getElementById(t));var e=t.getElementsByClassName("command");this.commands=e}},{key:"getCommandDoms",value:function(){return this.commands}}]),e}();t.exports=c},function(t,e,n){window,t.exports=function(t){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=162)}({161:function(t,e,n){function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=n(3),o=a.Util,s=a.G.Canvas,l=function(){function t(t){o.mix(this,i({type:"minimap",container:null,isMinimap:!0,backgroundCSS:{height:"100%",position:"absolute",margin:"auto",left:0,right:0,"z-index":0},minimapContainerCSS:{background:"#fff",position:"relative",overflow:"hidden"},viewportCSS:{height:"100%",position:"absolute",margin:"auto",left:0,right:0,"z-index":1},controlLayerCSS:{width:"100%",height:"100%",cursor:"move",position:"absolute","z-index":2},viewportWindowStyle:{stroke:"#91D5FF"},viewportBackStyle:{fill:"#EBEEF2",fillOpacity:.65},getGraph:function(){}},t)),this._initContainer(),this._initMiniMap(),this._bindEvent(),this._assignDebounceRender()}var e=t.prototype;return e._assignDebounceRender=function(){var t=this;this.debounceRender=o.debounce(function(){t.renderBackground(),t.renderViewPort()},32)},e.bindGraph=function(t){var e=this;t.on("afterchange",function(){e.debounceRender()}),t.on("afterlayout",function(){e.debounceRender()}),t.on("afterviewportchange",function(){e.renderViewPort()}),t.on("afterfilter",function(){e.debounceRender()})},e.renderBackground=function(t){t||(t=this.getGraph());var e=this.miniMapCanvas,n=this.width,i=this.height,r=[];t.saveImage({graph:t,width:n,height:i,canvas:e,beforeTransform:function(e){var n=e[0];t.getNodes().forEach(function(t){var e=t.getBBox(),i=t.getModel(),a=e.width;if(a*n<2){var s=t.getGraphicGroup(),l=o.clone(s.getMatrix());s.transform([["t",-i.x,-i.y],["s",2/(a*n),2/(a*n)],["t",i.x,i.y]]),r.push({item:t,originMatrix:l})}})},afterTransform:function(){r.forEach(function(t){var e=t.item,n=t.originMatrix;e.getGraphicGroup().setMatrix(n)})}}),this.miniMapMatrix=e.matrix},e._bindEvent=function(){var t,e,n,i,r,a=this,s=this.controlLayer,l=!1;function u(){l=!1,e=void 0,i=void 0,t=void 0,n=void 0,r=void 0}s.on("mousedown",function(s){a.miniMapMatrix&&(r=a.getGraph(),l=!0,t=o.clone(r.getMatrix()),e=a.miniMapMatrix[0],n=t[0],i={clientX:s.clientX,clientY:s.clientY})}),s.on("mouseup",function(){u()}),s.on("mouseleave",function(){u()}),s.on("mousemove",function(a){if(l&&r){var s=i.clientX-a.clientX,u=i.clientY-a.clientY,c=o.clone(t);o.mat3.translate(c,c,[n*s/e,n*u/e]),r.updateMatrix(c)}})},e._initMiniMap=function(){var t=this.background,e=this.viewPort,n=this.width,r=this.height,a=this.viewportWindowStyle,o=this.viewportBackStyle,l=new s({containerDOM:t,width:n,height:r}),u=new s({containerDOM:e,width:n,height:r}),c=u.addShape("rect",{attrs:i({x:0,y:0,width:n,height:r},a)}),h=u.addShape("path",{attrs:i({path:"M0,0 L1,1"},o)});t.css({width:n+"px",height:r+"px"}),e.css({position:"absolute"}),this.miniMapCanvas=l,this.viewportCanvas=u,this.viewportWindow=c,this.viewportBack=h},e._initContainer=function(){var t=this.container,e=this.width,n=this.height;t=o.initDOMContainer(t,"minimap"),e||(e=o.getWidth(t),this.width=e),n||(n=o.getHeight(t),this.height=n);var i=this.minimapContainerCSS;i.width=e+"px",i.height=n+"px";var r=this.backgroundCSS,a=this.viewportCSS,s=this.controlLayerCSS,l=o.createDOM('<div class="g6-editor-minimap-container"></div>',i),u=o.createDOM('<div class="g6-editor-minimap-background"></div>',r),c=o.createDOM('<div class="g6-editor-minimap-viewport">',a),h=o.createDOM('<div class="g6-editor-minimap-control-layer">',s);t.appendChild(l),l.appendChild(h),l.appendChild(c),l.appendChild(u),this.minimapContainer=l,this.background=u,this.viewPort=c,this.controlLayer=h},e.renderViewPort=function(t){if(t||(t=this.getGraph()),0!==t.getItems().length){var e=this.viewportWindow,n=this.viewportCanvas,i=this.viewportBack,r=this.miniMapMatrix,a=t.getWidth(),s=t.getHeight(),l=this.width,u=this.height,c=t.getMatrix();if(r){var h=o.invertMatrix({x:0,y:0},c),d=o.invertMatrix({x:a,y:s},c),f=o.applyMatrix(h,r),p=o.applyMatrix(d,r),g=p.x-f.x,m=p.y-f.y;i.attr({path:[["M",0,0],["L",l,0],["L",l,u],["L",0,u],["L",0,0],["M",f.x,f.y],["L",f.x,p.y],["L",p.x,p.y],["L",p.x,f.y],["L",f.x,f.y]]}),e.attr({x:f.x,y:f.y,width:g,height:m}),n.draw()}}},e.destroy=function(){this.minimapContainer.destroy()},t}();t.exports=l},162:function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=n(3),a=n(161),o=function(){function t(t){this.options=t}var e=t.prototype;return e.init=function(){var t=this.graph,e=new a(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}({getGraph:function(){return t}},this.options));e.bindGraph(t),this.minimap=e},e.destroy=function(){this.minimap.destroy()},t}();r.Plugins["tool.minimap"]=o,r.Components.Minimap=a,t.exports=o},3:function(e,n){e.exports=t}})}(n(17))},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=n(17);n(88);var c=u.Components.Minimap,h=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,s(e).call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}({type:"minimap"},t)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,c),function(t,e,n){e&&a(t.prototype,e),n&&a(t,n)}(e,[{key:"bindPage",value:function(t){var e=t.getGraph();this.bindGraph(e),this.debounceRender()}}]),e}();t.exports=h},function(t,e,n){var i=n(38),r=n(22);function a(t,e,n){var i=t.getGraph(),r=e.getModel(),a=t.getFirstChildrenBySide("left"),o=a[0]&&i.find(a[0].id);return i.add("node",{id:n,parent:e.id,label:"新建节点",side:r.children.length>2?"left":"right",nth:o?i.getNth(o):void 0})}i.registerCommand("append",{enable:function(t){var e=t.getCurrentPage(),n=e.getSelected();return e.isMind&&1===n.length},getItem:function(t){var e=t.getCurrentPage(),n=e.getGraph();return this.selectedItemId?n.find(this.selectedItemId):e.getSelected()[0]},execute:function(t){var e,n=t.getCurrentPage(),i=n.getGraph(),r=n.getRoot(),o=this.getItem(t),s=o.getModel(),l=s.hierarchy,u=o.getParent();if(o.isRoot)e=a(n,o,this.addItemId);else{var c=i.getNth(o);e=i.add("node",{id:this.addItemId,parent:u.id,side:2===l&&3===r.children.length?"left":s.side,label:"新建节点",nth:"left"===s.side&&2===l?c:c+1})}n.clearSelected(),n.clearActived(),n.setSelected(e,!0),1===this.executeTimes&&(this.selectedItemId=o.id,this.addItemId=e.id,n.beginEditLabel(e))},back:function(t){var e=t.getCurrentPage();e.getGraph().remove(this.addItemId),e.clearSelected(),e.clearActived(),e.setSelected(this.selectedItemId,!0)},shortcutCodes:["Enter"]}),i.registerCommand("appendChild",{enable:function(t){var e=t.getCurrentPage(),n=e.getSelected();return e.isMind&&n.length>0},getItem:function(t){var e=t.getCurrentPage(),n=e.getGraph();return this.selectedItemId?n.find(this.selectedItemId):e.getSelected()[0]},execute:function(t){var e,n=t.getCurrentPage(),i=n.getGraph(),r=this.getItem(t);e=r.isRoot?a(n,r,this.addItemId):i.add("node",{id:this.addItemId,parent:r.id,label:"新建节点"}),n.clearSelected(),n.clearActived(),n.setSelected(e,!0),1===this.executeTimes&&(this.selectedItemId=r.id,this.addItemId=e.id,n.beginEditLabel(e))},back:function(t){var e=t.getCurrentPage();e.getGraph().remove(this.addItemId),e.clearSelected(),e.clearActived(),e.setSelected(this.selectedItemId,!0)},shortcutCodes:["Tab"]}),i.registerCommand("moveMindNode",{enable:function(t){var e=t.getCurrentPage(),n=e.get("panItems");return e.isMind&&n&&n.length>0},execute:function(t){var e=t.getCurrentPage(),n=e.getGraph(),i=this.newParentId,a=this.newNth,o=this.newSide,s=r.clone(this.model);delete s.shape,delete s.side,n.remove(s.id),r.mix(s,{parent:i,nth:a,side:o});var l=n.add("node",s);e.clearSelected(),e.setSelected(l,!0)},back:function(t){var e=t.getCurrentPage(),n=e.getGraph(),i=this.originParentId,a=this.originNth,o=this.originSide,s=r.clone(this.model);delete s.shape,delete s.side,n.remove(s.id),r.mix(s,{parent:i,nth:a,side:o});var l=n.add("node",s);e.clearSelected(),e.setSelected(l,!0)}})},function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n(20).registerEdge("mind-placeholder-edge",{getOriginShapeObject:function(t){return t.getGraph().getShapeObj("edge",{shape:"mind-edge"})},getPath:function(t){return this.getOriginShapeObject(t).getPath(t)},getStyle:function(t){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}({},this.getOriginShapeObject(t).getStyle(t),{stroke:"#91D5FF"})}})},function(t,e,n){n(20).registerEdge("mind-edge",{getEdetal:function(t){return t.children&&t.children.length>0&&!t.collapsed?2===t.hierarchy?24:18:0},getPath:function(t){var e=t.getPoints(),n=t.getSource(),i=t.getTarget(),r=n.getBBox(),a=i.getBBox(),o=i.getModel(),s=14,l=4;if(2===o.hierarchy&&(s=66,l=30),e[0].y===e[1].y){var u=3===o.hierarchy?24:18,c=this.getEdetal(o);return r.centerX<a.centerX?[["M",e[0].x+u,e[0].y],["L",a.maxX+c,a.maxY]]:[["M",e[0].x+2,e[0].y],["L",a.minX-c,a.maxY]]}if(o.hierarchy>=3){var h=3===o.hierarchy?24:18,d=this.getEdetal(o);if(r.centerX<a.centerX){var f=e[0].x+h;return[["M",e[0].x,e[0].y],["M",f,e[0].y],["C",f+l,e[0].y,a.minX-s,a.maxY,a.minX,a.maxY],["L",a.maxX+d,a.maxY]]}var p=e[0].x-h;return[["M",e[0].x,e[0].y],["M",p,e[0].y],["C",p-l,e[0].y,a.maxX+s,a.maxY,a.maxX,a.maxY],["L",a.minX-d,a.maxY]]}var g=this.getEdetal(o);return r.centerX<a.centerX?[["M",e[0].x,e[0].y],["C",e[0].x+l,e[0].y,a.minX-s,a.maxY,a.minX,a.maxY],["L",a.maxX+g,a.maxY]]:[["M",e[0].x,e[0].y],["C",e[0].x-l,e[0].y,a.maxX+s,a.maxY,a.maxX,a.maxY],["L",a.minX-g,a.maxY]]},getStyle:function(t){var e=t.getTarget(),n=1;if(e){var i=e.getModel();n=i.hierarchy<=3?3:i.hierarchy<=5?2:1}return{stroke:"#959EA6",lineWidth:n}}})},function(t,e,n){var i=n(20),r=n(22);i.registerNode("mind-placeholder",{afterDraw:function(t){t.getKeyShape().isPlaceholder=!0},getPath:function(t){var e,n=t.getModel().parentModel,i=this.getStyle(t),a=0;return n.hierarchy<=2?e=28:(e=20,a=4),r.getRectPath(-27.5,-e/2+a,55,e,i.radius)},getStyle:function(){return{fill:"#91D5FF",radius:4,lineWidth:3}},drawExpandedButton:function(){},drawCollapsedButton:function(){},anchor:function(){return[[0,1],[1,1]]}})},function(t,e,n){var i=n(20),r=n(22);i.registerNode("mind-root",{adjustLabelPosition:function(t,e){var n=e.getBBox();e.attr({x:-n.width/2,y:-n.height/2-1})},getPath:function(t){var e=this.getSize(t),n=this.getStyle(t);return r.getRectPath(-e[0]/2,-e[1]/2,e[0],e[1],n.radius)},getButtonPositon:function(t,e,n){return"right"===n?{x:t.maxX+2,y:(t.maxY+t.minY)/2-(e.maxY-e.minY)/2}:{x:t.minX-(e.maxX-e.minX)-2,y:(t.maxY+t.minY)/2-(e.maxY-e.minY)/2}},getPadding:function(){return r.toAllPadding([12,24])},getStyle:function(){return{fill:"#587EF7",stroke:"#587EF7",fillOpacity:1,radius:4}},getLabelStyle:function(){return{fontSize:20,fill:"white",lineHeight:28}},drawExpandedButton:function(){},drawCollapsedButton:function(){},panAble:!1,anchor:[[.45,.5],[.55,.5]]},"mind-first-sub")},function(t,e,n){n(20).registerNode("mind-second-sub",{dy:0,getPadding:function(){return[8,4,8,4]},getLabelStyle:function(){return{fill:"rgba(38,38,38,0.85)",fontSize:12,lineHeight:20}}})},function(t,e,n){n(20).registerNode("mind-first-sub",{dy:0,getPadding:function(){return[6,12,8,12]},getLabelStyle:function(){return{fill:"rgba(38,38,38,0.85)",fontWeight:500,fontSize:14,lineHeight:20}}})},function(t,e,n){function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=n(20),o=n(22),s={fill:"#000",textAlign:"left",textBaseline:"top"},l={stroke:"#959EA6",strokeOpacity:0,fill:"#959EA6",cursor:"pointer"},u={stroke:"#434B54",fill:"#fff",cursor:"pointer"};a.registerNode("mind-base",{dy:4,afterDraw:function(t){var e=t.getModel();e.children&&e.children.length>0&&e.collapsed&&this.drawExpandedButton(t)},debugDrawLayoutPoint:function(t){var e=t.getModel();t.getGraphicGroup().addShape("circle",{attrs:{x:e.x,y:e.y,r:5,fill:"red"}})},drawExpandedButton:function(t){var e=t.getKeyShape().getBBox(),n=t.getGraphicGroup().addGroup(),r=n.addShape("path",{attrs:i({path:o.getRectPath(0,0,16,7,3)},l)}),a=r.getBBox(),s=o.getMindNodeSide(t),u=this.getButtonPositon(e,a,s),c={fill:"white",r:1};n.addShape("circle",{attrs:i({},c,{x:4,y:3.5}),capture:!1}),n.addShape("circle",{attrs:i({},c,{x:8,y:3.5}),capture:!1}),n.addShape("circle",{attrs:i({},c,{x:12,y:3.5}),capture:!1}),r.attr("lineAppendWidth",20),n.translate(u.x,u.y),r.isExpandedButton=!0,r.isButton=!0},drawCollapsedButton:function(t){var e=t.getKeyShape().getBBox(),n=t.getGraphicGroup().addShape("path",{attrs:i({path:o.getCollapsedButtonPath()},u)}),r=n.getBBox(),a=o.getMindNodeSide(t),s=this.getButtonPositon(e,r,a);n.translate(s.x,s.y),n.isCollapsedButton=!0,n.isButton=!0},getButtonPositon:function(t,e,n){return"right"===n?{x:t.maxX+2,y:t.maxY-(e.maxY-e.minY)/2}:{x:t.minX-(e.maxX-e.minX)-2,y:t.maxY-(e.maxY-e.minY)/2}},getLabel:function(t){return t.getModel().label},getPadding:function(){return[4,8,4,8]},getSize:function(t){var e=t.getModel(),n=t.getGraphicGroup(),i=e.size;if(e.size){if(o.isArray(i))return i;if(o.isNumber(i))return[i,i]}var r=n.findByClass("label")[0],a=this.getPadding(t),s=r.getBBox();return[s.width+a[1]+a[3],s.height+a[0]+a[2]]},getPath:function(t){var e=this.getSize(t),n=this.getStyle(t);return o.getRectPath(-e[0]/2,-e[1]/2+this.dy,e[0],e[1],n.radius)},drawLabel:function(t){var e=t.getGraphicGroup(),n=this.getLabel(t),i=this.getLabelStyle(t);n||(n=" ");var r=o.mix(!0,{},s,i,{x:0,y:0});o.isObject(n)?o.mix(r,n):r.text=n;var a=e.addShape("text",{class:"label",attrs:r});return this.adjustLabelText(a),this.adjustLabelPosition(t,a),a},adjustLabelText:function(t){var e=t.attr("text"),n=t.getBBox();if(n.maxX-n.minX>400){var i=t.attr("font");e=o.getLabelTextByTextLineWidth(e,i),t.attr("text",e)}},adjustLabelPosition:function(t,e){var n=this.getSize(t),i=this.getPadding(),r=n[0],a=e.getBBox();e.attr({x:-r/2+i[3],y:-a.height/2+this.dy})},getLabelStyle:function(){return{fill:"rgba(38,38,38,0.85)",lineHeight:18,fontSize:12}},getStyle:function(){return{fill:"#ccc",fillOpacity:0,radius:4,lineWidth:2}},getActivedStyle:function(){return{stroke:"#44C0FF",lineWidth:2}},getSelectedStyle:function(){return{stroke:"#1AA7EE",lineWidth:2}},anchor:[[0,1],[1,1]]})},function(t,e,n){n(97),n(96),n(95),n(94),n(93),n(92),n(91)},function(t,e,n){n(9).registerBehaviour("keydownEditLabel",function(t){t.getGraph().behaviourOn("keydown",function(e){t.showLabelEditor(e)})})},function(t,e,n){n(9).registerBehaviour("keydownMoveSelection",function(t){t.getGraph().on("keydown",function(e){t._moveItemSelection(e)})})},function(t,e,n){n(9).registerBehaviour("hoverMindExpandButton",function(t){var e=t.getGraph();e.behaviourOn("mouseenter",function(t){var n=t.shape;n&&n.isExpandedButton&&(n.attr("fillOpacity",.8),e.draw())}),e.behaviourOn("mouseleave",function(t){var n=t.shape;n&&n.isExpandedButton&&(n.attr("fillOpacity",1),e.draw())})})},function(t,e,n){var i=n(9),r=n(22);i.registerBehaviour("panMindNode",function(t){var e,n,i,a=t.getGraph();function o(){e.nth=n;var r=a.add("node",e);t.setSelected(r,!0),i&&a.remove(i.id)}function s(){a.emit("panitemend"),e=void 0,i=void 0,n=void 0}a.behaviourOn("beforeshowdelegation",function(){t.clearSelected(),t.clearActived()}),a.behaviourOn("node:dragstart",function(t){if(2!==t.button){var i=t.item;!(e=i.getModel()).parent||t.shape.isCollapsedButton||t.shape.isExpandedButton?s():(n=a.getNth(i),a.remove(i))}}),a.behaviourOn("itempanning",function(e){if(!e.shape||!e.shape.isPlaceholder){var n=t.getHotArea(e),r=t.getRoot();if(i&&(n?i.id!==n.id&&a.remove(a.find(i.id)):a.remove(a.find(i.id))),i=n,n){var o=n.parent;if(!a.find(n.id)){var s={id:n.id,parent:o.id,isPlaceholder:!0,parentModel:o,baseline:i.parent.id===r.id?"center":void 0,shape:"mind-placeholder",nth:n.nth};n.side&&(s.side=n.side),a.add("node",s)}}}}),a.behaviourOn("drop",function(){if(e)if(i){var l=r.clone(e);a.remove(i.id),t.executeCommand("moveMindNode",{model:l,newParentId:i.parent.id,newNth:i.nth,newSide:i.side,originParentId:e.parent,originNth:n,originSide:e.side})}else o();s()}),a.behaviourOn("canvas:mouseleave",function(){e&&(o(),s())})},["startPanItem","processPanItem","endPanItem"])},function(t,e,n){n(102),n(101),n(100),n(99)},function(t,e,n){var i=n(20);i.Util=n(22),n(103),n(98),n(90),t.exports=i},function(t,e,n){n(36).registerGroup("koni-base",{})},function(t,e,n){var i=n(36),r=n(61),a=r.vec2;i.registerEdge("koni-base",{getDefaultLabelRectPadding:function(){return r.toAllPadding([0,2])},getPathByPoints:function(t){var e=t.points,n=t.source,i=t.target,o=t.item;if(n&&i){var s=r.getParallelEdges(i,n),l=r.getParallelEdges(n,i),u=l.indexOf(o);return n===i?(u=(l=l.filter(function(t){var e=t.getModel();return e.source===n.id&&e.target===i.id})).indexOf(o),function(t,e){var n=t.getBBox(),i=[n.centerX,n.centerY],r=n.width/2,o=50*(e+1)+50,s=[i[0]-r/2,i[1]-Math.sqrt(3)/2*r],l=[s[0]-i[0],s[1]-i[1]],u=a.scale([],l,(r+o)/r),c=[i[0]+u[0],i[1]+u[1]],h=[i[0]+r/2,i[1]-Math.sqrt(3)/2*r],d=[h[0]-i[0],h[1]-i[1]],f=a.scale([],d,(r+o)/r),p=[i[0]+f[0],i[1]+f[1]];return[["M",s[0],s[1]],["C",c[0],c[1],p[0],p[1],h[0],h[1]]]}(n,u)):(0===s.length&&u--,function(t,e,n){var i=t.getBBox(),r=e.getBBox(),o=i.centerX,s=i.centerY,l=20*(n+1),u=[.5*(r.centerX+o)-o,.5*(r.centerY+s)-s],c=[-u[1],u[0]],h=a.length(c);a.scale(c,c,l/h);var d={x:u[0]+c[0]+o,y:u[1]+c[1]+s},f=t.getLinkPoints(d)[0],p=e.getLinkPoints(d)[0];return[["M",f.x,f.y],["Q",d.x,d.y,p.x,p.y]]}(n,i,u))}return r.pointsToPolygon(e)}})},function(t,e,n){n(36).registerNode("koni-base",{defaultFillPalette:5,defaultStrokePalette:5,activedFillPalette:4,activedStrokePalette:6,selectedFillPalette:5,selectedStrokePalette:6,anchor:null},"circle")},function(t,e,n){n(107),n(106),n(105)},function(t,e,n){var i=n(36);n(108),t.exports=i},function(t,e,n){n(24).registerGroup("flow-base",{})},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var a=n(48),o=n(24),s=16,l=5;function u(t,e){var n=Math.min(t.minX,e.minX),i=Math.min(t.minY,e.minY),r=Math.max(t.maxX,e.maxX),a=Math.max(t.maxY,e.maxY);return{centerX:(n+r)/2,centerY:(i+a)/2,minX:n,minY:i,maxX:r,maxY:a,height:a-i,width:r-n}}function c(t,e){return 2*Math.abs(t.centerX-e.centerX)<t.width+e.width&&2*Math.abs(t.centerY-e.centerY)<t.height+e.height}function h(t){var e=t.x,n=t.y;return{centerX:e,centerY:n,minX:e,minY:n,maxX:e,maxY:n,height:0,width:0}}function d(t,e){return 0===t.width&&0===t.height?t:{centerX:t.centerX,centerY:t.centerY,minX:t.minX-e,minY:t.minY-e,maxX:t.maxX+e,maxY:t.maxY+e,height:t.height+2*e,width:t.width+2*e}}function f(t,e){return function(t,e){var n=Math.abs(t.x-e.centerX),i=Math.abs(t.y-e.centerY);return n/e.width>i/e.height}(e,t)?{x:e.x>t.centerX?t.maxX:t.minX,y:e.y}:{x:e.x,y:e.y>t.centerY?t.maxY:t.minY}}function p(t){var e=t.minX,n=t.minY,i=t.maxX,r=t.maxY;return[{x:e,y:n},{x:i,y:n},{x:i,y:r},{x:e,y:r}]}function g(t,e){var n=t.x,i=t.y;return n<e.minX||n>e.maxX||i<e.minY||i>e.maxY}function m(t,e,n,i){var r=e.x-t.x,a=e.y-t.y,o=i.x-n.x,s=i.y-n.y,l=(-a*(t.x-n.x)+r*(t.y-n.y))/(-o*a+r*s),u=(o*(t.y-n.y)-s*(t.x-n.x))/(-o*a+r*s);return l>=0&&l<=1&&u>=0&&u<=1}function v(t,e,n){if(n.width===n.height===0)return!1;var i=r(p(n),4),a=i[0],o=i[1],s=i[2],l=i[3];return m(t,e,a,o)||m(t,e,a,l)||m(t,e,o,s)||m(t,e,s,l)}function y(t){return _(t)}function x(t,e){return[t,{x:t.x,y:e.y},e]}function _(t){var e=[],n={};return t.forEach(function(t){var e=t.id="".concat(t.x,"-").concat(t.y);n[e]=t}),a.each(n,function(t){e.push(t)}),e}function b(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function w(t,e,n,i,r){return b(t,e)+b(t,n)+function(t,e){var n=0;return e.forEach(function(e){e&&(t.x===e.x&&(n+=-2),t.y===e.y&&(n+=-2))}),n}(t,[e,n,i,r])}function S(t,e,n,r,a,o,s){var l=[],u=[e],c={},h={},d={};h[e.id]=0,d[e.id]=w(e,n,e);var f={};t.forEach(function(t){f[t.id]=t});for(var p=function(){var i=void 0,p=1/0;if(u.forEach(function(t){d[t.id]<p&&(p=d[t.id],i=t)}),i===n){var g=[];return function t(e,n,i,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;e.unshift(n[r]),i[r]&&i[r]!==r&&a<=100&&t(e,n,i,i[r],a+1)}(g,f,c,n.id),{v:g}}!function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}(u,i),l.push(i),function(t,e,n,i){var r=[];return t.forEach(function(t){t!==e&&(t.x!==e.x&&t.y!==e.y||v(t,e,n)||v(t,e,i)||r.push(t))}),_(r)}(t,i,r,a).forEach(function(t){if(-1===l.indexOf(t)){-1===u.indexOf(t)&&u.push(t);var r=d[i.id]+b(i,t);h[t.id]&&r>=h[t.id]||(c[t.id]=i.id,h[t.id]=r,d[t.id]=h[t.id]+w(t,n,e,o,s))}})};u.length;){var g=p();if("object"===i(g))return g.v}return console.error("cannot find path: ",t,e,n),[e,n]}function M(t,e,n,i,r){var a=n&&n.bbox?n.bbox:h(t),o=i&&i.bbox?i.bbox:h(e);if(c(a,o))return y(x(t,e));var s=d(a,r),l=d(o,r);if(c(s,l))return y(x(t,e));var m=f(s,t),v=f(l,e),b=function(){var t=[],e=[];(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(n){t.push(n.x),e.push(n.y)});var n=Math.min.apply(Math,t),i=Math.max.apply(Math,t),r=Math.min.apply(Math,e),a=Math.max.apply(Math,e);return{centerX:(n+i)/2,centerY:(r+a)/2,maxX:i,maxY:a,minX:n,minY:r,height:a-r,width:i-n}}([m,v]),w=(u(s,l),u(s,b)),M=u(l,b),A=[];A=(A=A.concat(p(w))).concat(p(M));var C={x:(t.x+e.x)/2,y:(t.y+e.y)/2};[b,w,M].forEach(function(t){A=A.concat(function(t,e){return function(t,e){return e<t.minX||e>t.maxX?[]:[{x:e,y:t.minY},{x:e,y:t.maxY}]}(t,e.x).concat(function(t,e){return e<t.minY||e>t.maxY?[]:[{x:t.minX,y:e},{x:t.maxX,y:e}]}(t,e.y))}(t,C).filter(function(t){return g(t,s)&&g(t,l)}))}),[{x:m.x,y:v.y},{x:v.x,y:m.y}].forEach(function(t){g(t,s)&&g(t,l)&&A.push(t)}),A.unshift(m),A.push(v);var I=S(A=_(A),m,v,a,o,t,e);return I.unshift(t),I.push(e),y(I)}function A(t,e){var n=[],i=t[0];return n.push("M".concat(i.x," ").concat(i.y)),t.forEach(function(i,a){var o=t[a+1],s=t[a+2];if(o&&s)if(function(t,e,n){return!(t.x===e.x===n.x||t.y===e.y===n.y)}(i,o,s)){var l=r(function(t,e,n,i){var r=b(t,e),a=b(n,e);return r<i&&(i=r),a<i&&(i=a),[{x:e.x-i/r*(e.x-t.x),y:e.y-i/r*(e.y-t.y)},{x:e.x-i/a*(e.x-n.x),y:e.y-i/a*(e.y-n.y)}]}(i,o,s,e),2),u=l[0],c=l[1];n.push("L".concat(u.x," ").concat(u.y)),n.push("Q".concat(o.x," ").concat(o.y," ").concat(c.x," ").concat(c.y)),n.push("L".concat(c.x," ").concat(c.y))}else n.push("L".concat(o.x," ").concat(o.y));else o&&n.push("L".concat(o.x," ").concat(o.y))}),n.join("")}o.registerEdge("flow-polyline",{getPathByPoints:function(t){var e=t.points,n=t.source,i=t.target,r=s,o=M(e[0],e[e.length-1],n,i,r);return a.pointsToPolygon(o)}}),o.registerEdge("flow-polyline-round",{getPathByPoints:function(t){var e=t.points,n=t.source,i=t.target,r=s,a=l;return A(y(M(e[0],e[e.length-1],n,i,r)),a)}})},function(t,e,n){var i=n(48);function r(t,e,n,i){var r=i?i/2:30,a=i;if(t<=e&&e<=n||t>=e&&e>=n){var o=(n-e)/2,s=Math.abs(o);if(0===o)return t===e?0:(e-t)/Math.abs(e-t)*r;if(s>a){var l=o/s*a;return Math.abs(l)<r?o/s*r:l}return s<r?o/s*r:o}var u=r;return(u=Math.abs(e-n)<2*Math.abs(e-t)?i*Math.abs(e-n)/(2*Math.abs(e-t)):i)>a&&(u=a),u<r&&(u=r),e>t?u:-u}function a(t,e,n,i){var a,o,s=t.bbox,l=function(t,e){var n=Math.abs(t.x-e.centerX),i=Math.abs(t.y-e.centerY);return n/e.width>i/e.height}(e,s);a=o=0;var u=Math.min(s.height,s.width);return i&&i.bbox&&(u=Math.min(u,i.bbox.height,i.bbox.width)),l?a=r(s.centerX,e.x,n.x,u):o=r(s.centerY,e.y,n.y,u),{x:e.x+a,y:e.y+o}}var o=.1;function s(t,e){var n=t.x,i=t.y,r=e.x,a=e.y;return{x:n+(r-n)*o,y:i+(a-i)*o}}function l(t,e,n){var r=t[0],o=t[t.length-1],l=["M",r.x,r.y],u=function(t,e,n,i){return[n&&n.bbox?a(n,t,e,i):s(t,e),i&&i.bbox?a(i,e,t,n):s(e,t)]}(r,o,e,n),c=["C"],h=[l];return i.each(u,function(t){c.push(t.x,t.y)}),c.push(o.x,o.y),h.push(c),h}n(24).registerEdge("flow-smooth",{getPathByPoints:function(t){return l(t.points,t.source,t.target)}},"flow-edge")},function(t,e,n){n(24).registerEdge("flow-base",{})},function(t,e,n){var i=n(24);i.registerNode("flow-base",{}),i.registerNode("flow-html",{},["html"]),i.registerNode("flow-rect",{},"flow-base"),i.registerNode("flow-capsule",{},"capsule"),i.registerNode("flow-circle",{},"circle"),i.registerNode("flow-rhombus",{},"rhombus")},function(t,e,n){n(114),n(113),n(112),n(111),n(110)},function(t,e,n){var i=n(9),r=n(13),a=n(11);i.registerBehaviour("orbit",function(t){var e,n=t.getGraph();n.behaviourOn("beforepanitem",function(){t.hideOrbit()}),n.behaviourOn("node:mouseenter",function(n){var i=n.item;t.getSignal("panningItem")||t.getSignal("dragEdge")||(e=i,t.showOrbit(i))}),n.on("beforeviewportchange",function(){t.hideOrbit()}),n.behaviourOn("mousemove",function(i){var o=i.item,s=i.x,l=i.y;if(e){var u=e.getBBox(),c=a.euclideanDistance.pointPoint({x:u.centerX,y:u.centerY},{x:s,y:l}),h=n.getMatrix()[0];o!==e&&c>u.width/2+r.orbitGap/h&&(t.hideOrbit(),e=void 0),e&&t.layoutOrbit(e,{x:s,y:l})}})})},function(t,e,n){n(9).registerBehaviour("hoverNodeAddOutter",function(t){var e,n=t.getGraph();n.behaviourOn("node:mouseenter",function(n){var i=n.item;t.getSignal("dragEdge")&&(e=i,t.addOutterShape(i,{stroke:"#52C41A",strokeOpacity:.45,lineWidth:4}))}),n.behaviourOn("node:mouseleave",function(){e&&t.clearOutterShape(e)}),n.behaviourOn("beforedropedge",function(){e&&t.clearOutterShape(e)})})},function(t,e,n){var i=n(9),r=n(11),a=n(13);i.registerBehaviour("processAddEdge",function(t){var e=t.getGraph();function n(){t.setSignal("dragEdge",!1),t.set("addEdgeConfig",{addModel:void 0,delegation:void 0,startPoint:void 0,sourceItem:void 0})}e.behaviourOn("mousemove",function(n){var i=t.get("addEdgeConfig");if(i){var a=i.addModel,o=i.delegation,s=i.startPoint,l=i.sourceItem;o&&r.dragingEdgeEndPoint({endPointType:"target",edgeModel:a,graph:e,delegation:o,startPoint:s,ev:n,sourceItem:l})}}),e.behaviourOn("mouseup",function(i){var o=t.get("addEdgeConfig");if(o){var s=o.addModel,l=o.delegation,u=o.sourceItem,c=t.editor;l?(e.getNodes().forEach(function(e){t.clearAnchor(e)}),t.clearAnchor(u),t.setActived(u,!1),t.setSelected(u,!1),t.css({cursor:a.cursor.beforePanCanvas}),l.remove(),r.dropUpdateEdge({ev:i,endPointType:"target",model:s,diagram:t})&&(c?c.executeCommand("add",{type:"edge",addModel:s}):e.add("edge",s)),e.draw(),t.endAdd(),n()):n()}}),e.behaviourOn("canvas:mouseleave",function(){var i=t.get("addEdgeConfig");if(i){var r=i.delegation,a=i.sourceItem;r?(e.getNodes().forEach(function(e){t.clearAnchor(e)}),t.setActived(a,!1),t.clearAnchor(a),r.remove(),t.cancelAdd(),e.draw(),n()):n()}})})},function(t,e,n){var i=n(9),r=n(13),a=n(11);i.registerBehaviour("dragOutFromGroup",function(t){var e,n,i,o=t.getGraph(),s=!1;function l(){clearTimeout(i),n&&o.update(n,{padding:void 0,style:void 0}),s=!1,e=void 0,n=void 0}o.behaviourOn("drag",function(l){t.getSignal("panningItem")&&!s&&(clearTimeout(i),i=setTimeout(function(){var i=t.get("panItems");if(i){if(e=i[0],n=i[0].getParent(),e&&1===i.length&&n&&!l.shape){var u=t.get("panItemDelegation").getBBox(),c=n.getBBox();a.rectRectCrossAlgorithm(u,c)&&(o.update(n,{padding:r.groupBackgroundPadding.map(function(t){return t-8}),style:r.dragNodeLeaveFromGroupStyle}),s=!0)}s||(e=void 0,n=void 0)}},r.outFromGroupDelayTime))}),o.behaviourOn("dragenter",function(t){e&&n&&(n===t.item&&o.update(n,{padding:r.groupBackgroundPadding.map(function(t){return t+4}),style:r.dragNodeHoverToGroupStyle}),s=!1)}),o.on("drop",function(t){n&&e&&!t.shape&&(o.update(e,{parent:void 0}),o.update(n,{style:void 0}),l())}),o.on("dragend",function(){l()}),o.behaviourOn("canvas:mouseleave",function(){l()})})},function(t,e,n){var i=n(9),r=n(13);i.registerBehaviour("dragNodeAddToGroup",function(t){var e,n,i=t.getGraph();function a(){t.setSignal("dragaddnodetogroup",!1),e=void 0,n=void 0}i.behaviourOn("dragenter",function(a){if(t.getSignal("panningItem")){var o=t.get("panItems");o[0]&&o[0].isNode&&1===o.length&&a.item&&a.item.isGroup&&o[0].getParent()!==a.item&&(e=o[0],n=a.item,i.update(n,{padding:r.groupBackgroundPadding.map(function(t){return t+4}),style:r.dragNodeHoverToGroupStyle}))}}),i.behaviourOn("dragleave",function(){n&&e&&i.update(n,{padding:void 0,style:void 0})}),i.behaviourOn("drop",function(r){if(n&&e&&n===r.item){t.setSignal("dragaddnodetogroup",!0);var a=e.id,o=n.id;i.update(o,{padding:void 0,style:void 0,collapsed:!1});var s=t.editor;s?s.executeCommand(l):l()}function l(){i.update(a,{parent:o})}}),i.behaviourOn("dragend",function(){a()}),i.behaviourOn("canvas:mouseleave",function(){n&&(i.update(n,{padding:void 0,style:void 0}),a())})})},function(t,e,n){n(9).registerBehaviour("keydownShiftMultiSelected",function(t){var e=t.getGraph();e.behaviourOn("keydown",function(e){e.domEvent.shiftKey&&t.setSignal("shiftKeyDown",!0)}),e.behaviourOn("keyup",function(e){e.domEvent.shiftKey||t.setSignal("shiftKeyDown",!1)})})},function(t,e,n){var i=n(9),r=n(13);i.registerBehaviour("dragMultiSelect",function(t){var e,n,i=t.getGraph(),a=i.getRootGroup();function o(){t.css({cursor:r.cursor.beforePanCanvas}),e=void 0,n=void 0}t.css({cursor:r.cursor.multiSelect}),i.behaviourOn("dragstart",function(t){2!==t.button&&(e={x:t.x,y:t.y},n=a.addShape("rect",{attrs:r.multiSelectRectStyle}))}),i.behaviourOn("drag",function(t){n&&(n.attr({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),width:Math.abs(t.x-e.x),height:Math.abs(t.y-e.y)}),i.draw())}),i.behaviourOn("dragend",function(){if(n){var e=i.getNodes().map(function(t){return t.id}),r=n.getBBox(),a=t.editor;a?a.executeCommand(s):s(),n.remove(),t.changeMode("default"),t.updateStatus(),i.draw(),o()}function s(){t.clearSelected(),e.forEach(function(e){var n=i.find(e),a=n.getBBox();a.minX>r.minX&&a.minY>r.minY&&a.maxX<r.maxX&&a.maxY<r.maxY&&t.setSelected(n,!0)})}}),i.behaviourOn("canvas:mouseleave",function(){n&&(n.remove(),i.draw(),o())})})},function(t,e,n){var i=n(9),r=n(11);i.registerBehaviour("dragAnchorAddEdge",function(t){var e=t.getGraph(),n=e.getRootGroup();e.behaviourOn("anchor:dragstart",function(e){if(2!==e.button){var i=e.shape,a=i.get("freezePoint"),o=i.getItem(),s=r.clone(t.get("addModel")),l=i.getIndex();s.source=o.id,s.sourceAnchor=l;var u={x:a.x,y:a.y},c=t.getDelegation([{isEdge:!0}],n);t.setSignal("dragEdge",!0),t.dragEdgeBeforeShowAnchor(o,l,"target"),t.set("addEdgeConfig",{addModel:s,delegation:c,startPoint:u,sourceItem:o})}})},["processAddEdge","dragHoverAnchorHotspot","hoverAnchorActived"])},function(t,e,n){n(9).registerBehaviour("dragHoverAnchorHotspot",function(t){var e=t.getGraph();e.behaviourOn("anchor:dragenter",function(e){if(t.getSignal("dragEdge")){var n=e.shape;t.setHotspotActived(n,!0)}}),e.behaviourOn("anchor:dragleave",function(e){if(t.getSignal("dragEdge")){var n=e.shape;t.setHotspotActived(n,!1)}})})},function(t,e,n){var i=n(9),r=n(11);i.registerBehaviour("dragPanelItemAddNode",function(t){var e,n,i,a,o,s=t.getGraph(),l=s.getRootGroup();function u(){t.setSignal("panningItem",!1),t.set("panItemDelegation",void 0),t.set("panItemStartBox",void 0),t.set("panItemStartPoint",void 0),n=void 0,i=void 0,a=void 0,o=void 0}s.behaviourOn("canvas:mouseenter",function(s){if(!n&&(a=t.get("addType"),o=t.get("addModel"),o=r.clone(o),"node"===a)){var u=(i=r.getNodeSize(o.size))[0]/2,c=i[1]/2;e={minX:s.x-u,minY:s.y-c,maxX:s.x+u,maxY:s.y+c,width:i[0],height:i[1]},n=t.getDelegation([e],l),t.setSignal("panningItem",!0),t.set("panItemDelegation",n),t.set("panItemStartBox",e),t.set("panItemStartPoint",{x:s.x,y:s.y})}}),s.behaviourOn("mouseup",function(e){if(n){o.x=e.x,o.y=e.y;var i=a;r.setId(o);var l=t.editor;n.remove(),t.endAdd(),t.clearAlignLine(),t.clearSelected(),t.focusGraphWrapper(),l?l.executeCommand("add",{type:"node",addModel:o}):s.add(i,o),t.setSelected(s.find(o.id),!0),u()}}),s.behaviourOn("canvas:mouseleave",function(){n&&(t.clearAlignLine(),n.remove(),s.draw(),t.cancelAdd(),u())})},["processPanItem"])},function(t,e,n){var i=n(9),r=n(13),a=n(11);i.registerBehaviour("dragEdgeControlPoint",function(t){var e,n,i,o,s,l,u,c,h,d,f=t.getGraph(),p=f.getRootGroup();function g(p){if(i){var g={};f.getNodes().forEach(function(e){t.clearAnchor(e)}),t.css({cursor:r.cursor.beforePanCanvas}),i.remove();var m=a.dropUpdateEdge({ev:p,endPointType:e?"target":"source",model:g,diagram:t});f.show(h);var v=h.id;if(m){var y=t.editor;y?y.executeCommand("update",{itemId:v,updateModel:g}):f.update(v,g)}t.setSignal("dragEdge",!1),e=void 0,n=void 0,i=void 0,o=void 0,s=void 0,l=void 0,u=void 0,c=void 0,h=void 0,d=void 0}}f.behaviourOn("edgeControlPoint:dragstart",function(r){if(2!==r.button){var a=r.shape;a.isTargetEndPoint()?(h=a.getItem(),d=h.getModel(),e=a,o=a.getSourcePoint(),s=h.getSource(),u=d.sourceAnchor):a.isSourceEndPoint()&&(h=a.getItem(),d=h.getModel(),n=a,o=a.getTargetPoint(),l=h.getTarget(),c=d.targetAnchor),h&&(i=t.getDelegation([h],p),s?t.dragEdgeBeforeShowAnchor(s,u,"target"):l&&t.dragEdgeBeforeShowAnchor(l,c,"source"),f.hide(h),t.setSignal("dragEdge",!0))}}),f.behaviourOn("edgeControlPoint:drag",function(t){i&&a.dragingEdgeEndPoint({endPointType:s?"target":"source",edgeModel:d,graph:f,delegation:i,startPoint:o,ev:t,originSource:s,originTarget:l})}),f.behaviourOn("edgeControlPoint:mouseleave",function(i){e||n||i.toShape||t.css({cursor:r.cursor.beforePanCanvas})}),f.behaviourOn("edgeControlPoint:dragend",g),f.behaviourOn("canvas:mouseleave",g)},["dragHoverAnchorHotspot"])},function(t,e,n){var i=n(9),r=n(13);i.registerBehaviour("hoverEdgeControlPoint",function(t){t.getGraph().behaviourOn("edgeControlPoint:mouseenter",function(e){if(!t.getSignal("dragEdge")&&!t.getSignal("panningItem")){var n=e.shape;(n.isTargetEndPoint()||n.isSourceEndPoint())&&t.css({cursor:r.cursor.hoverEdgeControllPoint})}})})},function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=n(9),a=n(13);r.registerBehaviour("hoverAnchorActived",function(t){var e=t.getGraph();e.behaviourOn("anchor:mouseenter",function(n){if(!t.getSignal("panningItem")&&!t.getSignal("dragEdge")){var r=n.shape,o=r.getItem(),s=o.getModel(),l=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}({},t.get("addEdgeModel"),{source:s.id}),u={anchor:r.getPoint(),item:o};t.emit("hoveranchor:beforeaddedge",u),u.cancel?t.css({cursor:a.cursor.hoverUnEffectiveAnchor}):(t.css({cursor:a.cursor.hoverEffectiveAnchor}),!r.get("destroyed")&&r.setActived(),t.beginAdd("edge",l),e.draw())}}),e.behaviourOn("anchor:mouseleave",function(n){if(!t.getSignal("dragEdge")&&!t.getSignal("panningItem")){var i=n.shape,r=i.getItem();t.css({cursor:a.cursor.beforePanCanvas}),r.isSelected||(t.clearAnchor(r),t.setActived(r,!1)),!i.get("destroyed")&&i.clearActived(),t.cancelAdd(),e.draw()}})})},function(t,e,n){var i=n(9),r=n(11);i.registerBehaviour("panItem",function(t){var e=t.getGraph();e.behaviourOn("drop",function(){var n=t.get("panItems");if(n){var i=n[0],a=n.map(function(t){return t.id}),o=t.get("panItemDelegation"),s=t.get("panItemStartBox"),l=i.id,u=o.attr("x")-s.minX,c=o.attr("y")-s.minY;e.emit("afterpanitemdrop",{panItems:n}),t.clearAlignLine();var h=t.editor;e.emit("panitemend"),!h||t.getSignal("dragaddnodetogroup")?d():h.executeCommand(d)}function d(){a.forEach(function(t){var n=e.find(t),i=n.getModel();n.isGroup?r.panGroup(n,u,c,e):(e.update(n,{x:i.x+u,y:i.y+c}),e.toFront(n))}),1===a.length&&(t.clearSelected(),t.setSelected(l,!0))}})},["startPanItem","processPanItem","endPanItem"])},function(t,e,n){n(129),n(128),n(127),n(126),n(125),n(124),n(123),n(122),n(121),n(120),n(119),n(118),n(117),n(116)},function(t,e,n){function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=n(37),o=n(13),s=n(11),l=s.getGroupIconPath(),u=s.getCollapsedButtonPath(),c=s.getExpandedButtonPath(),h={fill:"#CED4D9"},d={stroke:"#697B8C",fill:"#fff",fillOpacity:0},f={stroke:"#697B8C",fill:"#fff",fillOpacity:0},p={fill:"#000000",textBaseline:"top",textAlign:"left"},g={stroke:"#CED4D9",fill:"#F2F4F5",radius:4},m=o.groupBackgroundPadding,v=40,y=13,x=12,_=12,b=8,w=12,S=184-m[1]-m[3],M=40-m[0]-m[2];a.registerGroup("diagram-base",{draw:function(t){var e=t.getModel(),n=t.getGraphicGroup(),r=t.getChildrenBBox(),a=this.getStyle(t),o=e.collapsed,g=e.padding?e.padding:m;if(r.minX===1/0&&(r.minX=e.x,r.maxX=e.x+S,r.minY=e.y,r.maxY=e.y+M),o&&(r.minX=r.maxX-S,r.maxY=r.minY+M),r.maxX-r.minX<S){var A=S-r.maxX+r.minX;r.minX-=A/2,r.maxX+=A/2}var C=function(t,e){return t.minX-e[3]}(r,g),I=function(t,e){return t.minY-e[0]}(r,g),P=function(t,e){return t.maxX-t.minX+e[3]+e[1]}(r,g),T=function(t,e){return t.maxY-t.minY+e[0]+e[2]}(r,g),O=function(t,e,n,r){var a=e.addShape("path",{attrs:i({},r,{path:n})});return a.isGroupKeyShape=!0,a}(0,n,s.getRectPath(C,I,P,T,a.radius),a);return function(t,e,n,i){var r=s.mix(!0,{},p,{x:n+v,y:i+y});s.isString(t)?r.text=t:s.mix(r,t),e.addShape("text",{attrs:r})}(s.isNil(e.label)?"新建分组":e.label,n,C,I),function(t,e,n,r){var a=e.addShape("path",{attrs:i({path:t},h)}),o=a.getBBox();a.translate(n-o.minX+b,r-o.minY+w)}(s.isNil(e.icon)?l:e.icon,n,C,I),(function(t,e,n,r,a){var o;if(t){var s=(o=e.addShape("path",{attrs:i({path:c},f)})).getBBox(),l=s.maxX-s.minX;o.isExpandedButton=!0,o.translate(n+a-s.minX-l-_,r-s.minY+x)}else{var h=(o=e.addShape("path",{attrs:i({path:u},d)})).getBBox(),p=h.maxX-h.minX;o.isCollapsedButton=!0,o.translate(n+a-h.minX-p-_,r-h.minY+x)}return o.isButton=!0,o}(o,n,C,I,P)).item=t,e.x=r.minX,e.y=r.minY,O},getStyle:function(t){var e=t.getModel();return s.mix(!0,{},g,{fill:e.color,stroke:e.color},e.style)},getActivedStyle:function(){return o.groupActivedStyle},getSelectedStyle:function(){return o.groupSelectedStyle},getSelectedOutterStyle:function(){return o.groupSelectedOutterStyle},getActivedOutterStyle:function(){},intersectBox:"rect"})},function(t,e,n){var i=n(37),r=n(11),a=n(13);i.registerEdge("diagram-base",{getPath:function(t){var e=t.getPoints(),n=t.getSource(),i=t.getTarget();return this.getPathByPoints({points:e,source:n,target:i,item:t})},getPathByPoints:function(t){var e=t.points;return r.pointsToPolygon(e)},getStyle:function(t){var e=t.getModel();return r.mix(!0,{},a.edgeStyle,{stroke:e.color},e.style)},getActivedStyle:function(){return a.edgeActivedStyle},getSelectedStyle:function(){return a.edgeSelectedStyle},getActivedOutterStyle:function(){},getSelectedOutterStyle:function(){}})},function(t,e,n){function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=n(37),o=n(11),s=n(13);a.registerNode("diagram-base",{getSize:function(t){var e=t.getModel();return o.getNodeSize(e.size)},defaultFillPalette:0,defaultStrokePalette:3,activedFillPalette:0,activedStrokePalette:5,selectedFillPalette:2,selectedStrokePalette:5,getDefaulStyle:function(){return s.nodeStyle},getDefaulActivedStyle:function(){return s.nodeActivedStyle},getDefaulSelectedtyle:function(){return s.nodeSelectedStyle},getStyle:function(t){var e,n,i=t.getModel(),r=i.color;if(r){var a=o.Palettes.generate(r);e=a[this.defaultFillPalette],n=a[this.defaultStrokePalette]}return o.mix(!0,{},this.getDefaulStyle(),{fill:e,stroke:n},i.style)},getPath:function(t){var e=this.getSize(t),n=this.getStyle(t);return o.getRectPath(-e[0]/2,-e[1]/2,e[0],e[1],n.radius)},getActivedOutterStyle:function(){return s.nodeActivedOutterStyle},getActivedStyle:function(t){var e=t.getModel(),n=this.getDefaulActivedStyle(t),r=e.color;if(r){var a=o.Palettes.generate(r);return i({},n,{fill:a[this.activedFillPalette],stroke:a[this.activedStrokePalette]})}return n},getSelectedStyle:function(t){var e=t.getModel(),n=this.getDefaulSelectedtyle(t),r=e.color;if(r){var a=o.Palettes.generate(r);return i({},n,{fill:a[this.selectedFillPalette],stroke:a[this.selectedStrokePalette]})}return n},getSelectedOutterStyle:function(t){var e=t.getModel().color;if(e){var n=o.Palettes.generate(e);return i({},s.nodeSelectedOutterStyle,{stroke:n[1],fill:n[1]})}return s.nodeSelectedOutterStyle},anchor:[[.5,0],[1,.5],[.5,1],[0,.5]]}),a.registerNode("capsule",{getPath:function(t){var e=this.getSize(t);return o.getRectPath(-e[0]/2,-e[1]/2,e[0],e[1],e[1]/2)}}),a.registerNode("circle",{getPath:function(t){var e=this.getSize(t),n=e[0],i=e[1];return o.getEllipsePath(0,0,n/2,i/2)}}),a.registerNode("rhombus",{getPath:function(t){var e=this.getSize(t),n=e[0],i=e[1],r=[{x:0,y:0-i/2},{x:0+n/2,y:0},{x:0,y:0+i/2},{x:0-n/2,y:0},{x:0,y:0-i/2}];return o.pointsToPolygon(r)}})},function(t,e,n){n(133),n(132),n(131)},function(t,e){var n={CFG:{linkNode:!0,linkAnchor:!0},INIT:"_initLink",AUGMENT:{_initLink:function(){var t=this,e=this.getGraph(),n=this.get("linkAnchor"),i=this.get("linkNode"),r=e.get("mode");n&&(this.on("beforeitemactived",function(e){var n=e.item;n.isNode&&t.hoverShowAnchor(n)}),this.on("beforeitemunactived",function(e){var n=e.item;(n.isNode||n.isGroup)&&t.clearAnchor(n)}),this.on("beforeitemselected",function(e){var n=e.item;n.isNode?t.hoverShowAnchor(n):n.isGroup&&t.hoverShowAnchor(n)}),this.on("beforeitemunselected",function(e){var n=e.item;(n.isNode||n.isGroup)&&t.clearAnchor(n)}),e.addBehaviour("dragAnchorAddEdge","add"),e.addBehaviour("hoverAnchorActived","default"),e.changeMode(r)),i&&(e.addBehaviour("hoverNodeAddOutter","add"),e.addBehaviour("hoverNodeAddOutter","default"),e.changeMode(r))}}};t.exports=n},function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=n(11),a={};a.AUGMENT={addOutterShape:function(t,e){this.clearOutterShape(t);var n=e.lineWidth,a=t.getKeyShape(),o=t.getGraphicGroup(),s=a.attr(),l=a.get("type"),u=a.attr("lineWidth"),c=r.clone(s);delete c.fillStyle,delete c.strokeStyle,delete c.matrix;var h=o.addShape(l,{attrs:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}({},c,{fill:null},e)});r.toBack(h,o);var d=h.getBBox(),f=d.maxX-d.minX,p=d.maxY-d.minY,g=(d.minX+d.maxX)/2,m=(d.minY+d.maxY)/2;h.transform([["t",-g,-m],["s",(n+f+u)/f,(n+p+u)/p],["t",g,m]]),h.isOutter=!0,t.outterShape=h},clearOutterShape:function(t){t.outterShape&&t.outterShape.remove()}},t.exports=a},function(t,e,n){var i=n(11),r=n(13),a={};function o(t){t.controlPointShapes&&i.each(t.controlPointShapes,function(t){t.remove()}),t.controlPointShapes=[],t.isControlPointShow=!1}a.INIT="_initResize",a.CFG={nodeResizeable:!1,edgeResizeable:!0},a.AUGMENT={_initResize:function(){var t=this,e=this.get("_graph"),n=this.get("nodeResizeable"),r=this.get("edgeResizeable");n&&e.on("afteritemdraw",function(e){"node"===e.item.type&&e.item.isVisible()&&t.drawControlPoints(e.item)}),r&&e.on("afteritemdraw",function(e){"edge"===e.item.type&&e.item.isVisible()&&t.drawControlPoints(e.item)}),e.on("afteritemhide",function(t){t.item.isControlPointShow&&function(t){t.controlPointShapes&&i.each(t.controlPointShapes,function(t){t.hide()}),t.isControlPointShow=!1}(t.item)}),e.on("afteritemshow",function(t){!t.item.isControlPointShow&&function(t){t.controlPointShapes&&i.each(t.controlPointShapes,function(t){t.show()}),t.isControlPointShow=!0}(t.item)}),e.on("beforeitemdestroy",function(t){t.item.isControlPointShow&&o(t.item)})},drawControlPoints:function(t){var e=this.get("_graph").getRootGroup(),n=this.get("nodeResizeable"),a=this.get("edgeResizeable");"node"===t.type?n&&function(t,e){var n=t.getBBox(),a=[{x:n.minX,y:n.minY},{x:n.maxX,y:n.minY},{x:n.minX,y:n.maxY},{x:n.maxX,y:n.maxY}];o(t);var s=e.addShape("rect",{attrs:i.mix({},r.nodeSelectedBoxStyle,{symbol:"square",x:n.minX,y:n.minY,width:n.maxX-n.minX,height:n.maxY-n.minY})});t.controlPointShapes.push(s),i.each(a,function(n){var a=e.addShape("marker",{attrs:i.mix({},r.nodeControlPointStyle,{symbol:"square",x:n.x,y:n.y}),freezePoint:{x:n.x,y:n.y},item:t});t.controlPointShapes.push(a)})}(t,e):"edge"===t.type&&a&&function(t,e){var n=t.getKeyShape().attr("path"),a=n[0],s=a.length,l=n[n.length-1],u=l.length,c=[{x:a[s-2],y:a[s-1]},{x:l[u-2],y:l[u-1]}],h=t.getModel();o(t),i.each(c,function(n,a){var o=e.addShape("marker",{attrs:i.mix({},r.edgeControlPointStyle,{x:n.x,y:n.y}),freezePoint:{x:n.x,y:n.y},item:t});o.eventPreFix="edgeControlPoint",o.getSourcePoint=function(){return c[0]},o.getTargetPoint=function(){return c[c.length-1]},o.getItem=function(){return t},o.isSourceEndPoint=function(){return h.source&&0===a},o.isTargetEndPoint=function(){return h.target&&a===c.length-1},t.controlPointShapes.push(o)})}(t,e),t.isControlPointShow=!0}},t.exports=a},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=n(62),c=n(11),h=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,s(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,u),function(t,e,n){e&&a(t.prototype,e),n&&a(t,n)}(e,[{key:"getDefaultCfg",value:function(){return{name:"forkAndLink",render:function(){return'\n          <div style="\n            width: 11px;\n            height: 11px;\n            cursor: copy;\n            background-image: url(https://gw.alipayobjects.com/zos/rmsportal/yWAiQOmucbYMCpwkvTBP.svg)\n          "></div>\n        '},bindEvent:function(t,e){var n=this,i=e.getGraph(),a=i.getRootGroup();return t.setAttribute("draggable","true"),[c.addEventListener(t,"dragstart",function(){var i=n.item,o=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}({},e.get("addEdgeModel"),{source:i.id}),s=i.getBBox(),l=e.getDelegation([{isEdge:!0}],a);e.setSignal("dragEdge",!0),e.beginAdd("edge",o),e.set("addEdgeConfig",{addModel:o,delegation:l,startPoint:{x:s.centerX,y:s.centerY},sourceItem:i}),t.hide()}),c.addEventListener(t,"click",function(t){var r=t.clientX,a=t.clientY,o=e.editor,s=n.item,l=i.getPointByClient({x:r,y:a}),u=s.getBBox(),h=s.getModel(),d=[l.x-u.centerX,l.y-u.centerY],f=c.vec2.length(d);if(c.vec2.scale(d,d,160/f),o)o.executeCommand("copyAdjacent",{copyNode:s,x:l.x+d[0],y:l.y+d[1]});else{var p=c.clone(h);p.x=l.x+d[0],p.y=l.y+d[1],i.add(s.type,p)}})]}}}}]),e}();t.exports=h},function(t,e,n){var i=n(62);i.forkAndLink=n(138),t.exports=i},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=n(18),c=n(13),h=n(139),d=n(11),f=d.vec2,p=d.isString,g=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,s(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,u),function(t,e,n){e&&a(t.prototype,e),n&&a(t,n)}(e,[{key:"getDefaultCfg",value:function(){return{satellite:[],satelliteCache:[]}}},{key:"init",value:function(){var t=this,e=this.satellite,n=this.diagram,i={diagram:n};n.getGraph().addBehaviour("orbit"),e.forEach(function(e){p(e)?t.satelliteCache.push(new h[e](i)):t.satelliteCache.push(new h(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}({},i,e)))})}},{key:"layout",value:function(t,e){var n=this.diagram,i=n.getGraph(),r=this.satelliteCache,a=t.getBBox(),o=a.centerX,s=a.centerY,l=n.getZoom(),u=c.orbitGap/l,h=r.filter(function(t){return t.isVisible()}),d=[e.x-o,e.y-s],p=f.length(d),g=a.width/2+u,m=f.scale([],d,g/p);h.forEach(function(t){var e=t.getDOM(),n=e.width()/2,r=i.getDomPoint({x:m[0]+o,y:m[1]+s});e.css({top:r.y-n+"px",left:r.x-n+"px"})})}},{key:"show",value:function(t){this.satelliteCache.forEach(function(e){e.enable()&&(e.item=t,e.show())})}},{key:"hide",value:function(){this.satelliteCache.forEach(function(t){t.hide()})}}]),e}();t.exports=g},function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=n(140),a={CFG:{orbit:null},INIT:"_initOrbit"};a.AUGMENT={_initOrbit:function(){var t=this.get("orbit");if(t){var e=new r(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}({diagram:this},t));this.setController("orbit",e)}},showOrbit:function(t){this.getController("orbit").show(t)},hideOrbit:function(){this.getController("orbit").hide()},layoutOrbit:function(t,e){this.getController("orbit").layout(t,e)}},t.exports=a},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){a(t,e,n[e])})}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=n(18),h=n(13),d=n(11),f=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,l(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,c),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(e,[{key:"getDefaultCfg",value:function(){return{_anchorItemCache:{}}}},{key:"init",value:function(){var t=this,e=this.graph;e.on("afteritemdraw",function(e){e.item.isAnchorShow&&t.showAnchor(e.item)}),e.on("beforeitemdestroy",function(e){t._clearAnchor(e.item)}),e.on("afteritemhide",function(e){e.item.isNode&&t._clearAnchor(e.item)})}},{key:"_updateAnchor",value:function(t){var e=this.graph;t.anchorShapes.forEach(function(t){t.updatePosition()}),e.draw()}},{key:"_drawAnchor",value:function(t,e,n,i){var a=t.getAnchorPoints();this._clearAnchor(t),d.each(a,function(a,o){if(!n||-1!==n.indexOf(o)){var s,l=e.addShape("marker",{attrs:r({symbol:"circle"},h.anchorPointStyle,{x:a.x,y:a.y}),freezePoint:a,item:t,index:o,eventPreFix:"anchor",isItemChange:function(){},zIndex:h.zIndex.anchorPoint});l.toFront(),l.eventPreFix="anchor",l.showHotspot=function(){s=e.addShape("marker",{attrs:r({symbol:"circle"},h.anchorHotsoptStyle,{x:a.x,y:a.y}),freezePoint:a,capture:!1,zIndex:h.zIndex.anchorHotsopt}),t.anchorShapes.push(s),l.hasHotspot=!0,s.toFront(),l.toFront()},l.getIndex=function(){return o},l.getItem=function(){return t},l.getPoint=function(){return a},l.updatePosition=function(){var e=t.getAnchorPoints()[o];l.attr(e)},l.setActived=function(){l.attr(h.anchorPointHoverStyle)},l.clearActived=function(){l.attr(h.anchorPointStyle)},l.isAnchor=!0,l.setHotspotActived=function(t){s&&(t?s.attr(h.anchorHotsoptActivedStyle):s.attr(h.anchorHotsoptStyle))},i&&l.showHotspot(),t.anchorShapes.push(l),t.getAllAnchors=function(){return t.anchorShapes.filter(function(t){return t.isAnchor})},t.getAnchor=function(e){return t.anchorShapes.find(function(t){return t.get("index")===e})}}})}},{key:"_clearAnchor",value:function(t){t.anchorShapes&&t.anchorShapes.forEach(function(t){t.remove()}),t.anchorShapes=[]}},{key:"setHotspotActived",value:function(t,e){var n=this.diagram.getGraph();t.setHotspotActived(e),n.draw()}},{key:"showAnchor",value:function(t,e,n){if(t.isVisible()){var i=this.graph,r=this._anchorItemCache,a=i.getRootGroup();this._drawAnchor(t,a,e,n),t.isAnchorShow=!0,r[t.id]=t}}},{key:"clearAnchor",value:function(t){var e=this,n=this.graph,i=n.get("itemCache"),r=this._anchorItemCache,a=t;a=d.isObject(t)?[t]:d.isString(t)?[i[t]]:r,d.each(a,function(t){e._clearAnchor(t),t.isAnchorShow=!1,delete r[t.id]}),n.draw()}}]),e}();t.exports=f},function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=n(142),a=n(11),o={CFG:{anchor:{}},INIT:"_initAnchor"};o.AUGMENT={_initAnchor:function(){var t=this.get("anchor"),e=this.get("_graph");if(t){var n=new r(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}({diagram:this,graph:e},t));this.setController("anchor",n)}},showAnchor:function(t,e,n){this.getController("anchor").showAnchor(t,e,n)},clearAnchor:function(t){this.getController("anchor").clearAnchor(t)},setHotspotActived:function(t,e){this.getController("anchor").setHotspotActived(t,e)},hoverShowAnchor:function(t){var e=this,n=[];t.getAnchorPoints().forEach(function(i,r){var a={anchor:i,item:t};e.emit("hovernode:beforeshowanchor",a),a.cancel||n.push(r)}),this.showAnchor(t,n)},anchorHasBeenLinked:function(t,e){var n=[];return t.getEdges().forEach(function(e){var i=e.getModel();i.source!==t.id||a.isNil(i.sourceAnchor)||n.push(i.sourceAnchor),i.target!==t.id||a.isNil(i.targetAnchor)||n.push(i.targetAnchor)}),a.isObject(e)?-1!==n.indexOf(e.index):-1!==n.indexOf(e)},dragEdgeBeforeShowAnchor:function(t,e,n){var i=this;this.getGraph().getNodes().forEach(function(r){var a,o=[],s=r.getAnchorPoints();if(t.isNode){var l=t.getAnchorPoints();s.forEach(function(s,u){a="target"===n?{source:t,sourceAnchor:l[e],target:r,targetAnchor:s,dragEndPointType:n}:{target:t,targetAnchor:l[e],source:r,sourceAnchor:s,dragEndPointType:n},i.emit("dragedge:beforeshowanchor",a),a.cancel||o.push(u)})}else s.forEach(function(t,e){o.push(e)});r===t&&r.isAnchorShow?o.forEach(function(t){var n=r.getAnchor(t);e!==t&&n&&n.showHotspot()}):i.showAnchor(r,o,!0)})}},t.exports=o},function(t,e,n){var i={},r=n(11);i.AUGMENT={changeAddEdgeModel:function(t){this.set("addEdgeModel",t)},cancelAdd:function(){this.set("addType",void 0),this.set("addModel",void 0),this.changeMode("default")},beginAdd:function(t,e){this.set("addType",t),this.set("addModel",e),this.changeMode("add")},endAdd:function(){this.set("addType",void 0),this.set("addModel",void 0),this.changeMode("default")},delete:function(){var t=this.getSelected(),e=this.get("_graph");r.each(t,function(t){e.remove(t)})},toBack:function(){var t=this.getSelected(),e=this.get("_graph");t.sort(function(t,e){var n=t.getGraphicGroup(),i=e.getGraphicGroup();return r.getIndex(i)-r.getIndex(n)}),t.forEach(function(t){e.toBack(t)})},toFront:function(){var t=this.getSelected(),e=this.get("_graph");t.sort(function(t,e){var n=t.getGraphicGroup(),i=e.getGraphicGroup();return r.getIndex(n)-r.getIndex(i)}),t.forEach(function(t){e.toFront(t)})},addGroup:function(t){var e,n=this.get("_graph"),i=this.getSelected(),a=!0;if(0!==i.length){t||(t={label:"新建分组"}),r.setId(t),n.add("group",t),n.toFront(t.id);var o=n.find(t.id);if(i.forEach(function(t){var n=t.getParent();n&&(e?e!==n&&(a=!1):e=n)}),a){e&&(t.parent=e.getModel().id),i.forEach(function(e){n.update(e,{parent:t.id})});var s=o.getInnerEdges();o.deepEach(function(t){n.toFront(t)}),s.forEach(function(t){n.toFront(t)})}else console.warn("add group elements must have the same parent")}},unGroup:function(){var t=this.get("_graph"),e=this.getSelected(),n=e[0];1===e.length&&r.isGroup(n)&&(n.getChildren().forEach(function(e){t.update(e,{parent:void 0})}),t.remove(n))},newGroup:function(t){this.addGroup(t)}},t.exports=i},function(t,e){t.exports={rectRectCrossAlgorithm:function(t,e){var n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),a=Math.min(t.maxY,e.maxY);return n>r||i>a},euclideanDistance:{pointPoint:function(t,e){var n=Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2);return Math.sqrt(n)}}}},function(t,e,n){var i=n(63);t.exports={dragingEdgeEndPoint:function(t){var e=t.endPointType,n=t.edgeModel,i=t.graph,r=t.delegation,a=t.startPoint,o=t.ev,s=t.source,l=t.target,u=o.item,c=i.getShapeObj("edge",n),h="source"===e?[o,a]:[a,o];u&&("source"===e?l=u:s=u);var d=c.getPathByPoints({points:h,source:s,target:l});r.attr("path",d),i.draw()},panGroup:function(t,e,n,r){var a=t.getModel();i.traverseTree(t,function(t){if("node"===t.type){var i=t.getModel();r.update(t,{x:i.x+e,y:i.y+n})}},function(t){return"group"===t.type?t.getChildren():[]}),r.update(t,{x:a.x+e,y:a.y+n})},dropUpdateEdge:function(t){var e=t.ev,n=t.endPointType,i=t.model,r=t.diagram,a=r.get("noEndEdge"),o=r.get("linkAnchor"),s=r.get("linkNode"),l=e.item,u=e.shape,c=e.x,h=e.y;if(r.getGraph().emit("beforedropedge"),u){if(o&&u.isAnchor&&u.hasHotspot){var d=u,f=d.getItem();return"target"===n?(i.target=f.id,i.targetAnchor=d.getIndex(),!0):(i.source=f.id,i.sourceAnchor=d.getIndex(),!0)}if(s&&l&&l.isNode)return"target"===n?(i.target=l.id,!0):(i.source=l.id,!0)}else if(a)return"target"===n?(i.target={x:c,y:h},!0):(i.source={x:c,y:h},!0);return!1}}},function(t,e,n){var i=n(24);n(115),t.exports=i},function(t,e,n){n(12).registerBehaviour("keydownCmdWheelZoom",function(t){var e=t.getGraph();e.behaviourOn("keydown",function(e){91===e.domEvent.keyCode&&t.setSignal("wheelZoom",!0)}),e.behaviourOn("keyup",function(e){91===e.domEvent.keyCode&&t.setSignal("wheelZoom",!1)})})},function(t,e,n){n(12).registerBehaviour("hoverEdgeActived",function(t){var e=t.getGraph();e.behaviourOn("edge:mouseenter",function(e){t.getSignal("panningItem")||e.item&&e.item.isSelected||t.getSignal("dragEdge")||t.setActived(e.item,!0)}),e.behaviourOn("edge:mouseleave",function(e){t.setActived(e.item,!1)})})},function(t,e,n){n(12).registerBehaviour("hoverGroupActived",function(t){var e=t.getGraph();e.behaviourOn("mouseenter",function(e){t.getSignal("panningItem")||e.item&&e.item.isSelected||t.getSignal("dragEdge")||e.shape&&e.shape.isGroupKeyShape&&(t.css({cursor:"move"}),t.setActived(e.item,!0))}),e.behaviourOn("group:mouseleave",function(e){e.item.isActived&&!e.item.isSelected&&t.setActived(e.item,!1)})})},function(t,e,n){n(12).registerBehaviour("hoverNodeActived",function(t){var e,n=t.getGraph();n.behaviourOn("node:mouseenter",function(n){!1!==n.item.getShapeObj().panAble&&t.css({cursor:"move"}),t.getSignal("panningItem")||t.getSignal("dragEdge")||n.item&&n.item.isSelected||(e=n.item,t.setActived(e,!0))}),n.behaviourOn("node:mouseleave",function(n){var i=n.toShape;e&&(i&&i.isAnchor&&i.getItem()===e||t.getSignal("dragEdge")||(e.isSelected||t.setActived(e,!1),e=void 0))})})},function(t,e,n){n(12).registerBehaviour("clickNodeSelected",function(t){t.getGraph().behaviourOn("node:click",function(e){t.get("multiSelectable")&&!0===t.getSignal("shiftKeyDown")?t.setSelected(e.item.id,!0):(t.clearActived(),t.clearSelected(),t.setSelected(e.item.id,!0))})})},function(t,e,n){n(12).registerBehaviour("clickGroupSelected",function(t){t.getGraph().behaviourOn("group:click",function(e){t.get("multiSelectable")&&!0===t.getSignal("shiftKeyDown")?t.setSelected(e.item.id,!0):(t.clearActived(),t.clearSelected(),t.setSelected(e.item.id,!0))})})},function(t,e,n){n(12).registerBehaviour("clickExpandedButton",function(t){var e=t.getGraph();e.behaviourOn("click",function(n){var i=n.item,r=n.shape;if(i&&r&&r.isExpandedButton){var a=t.editor;a?a.executeCommand("collapseExpand",{itemId:i.id}):e.update(i,{collapsed:!1})}})})},function(t,e,n){n(12).registerBehaviour("clickEdgeSelected",function(t){t.getGraph().behaviourOn("edge:click",function(e){t.get("multiSelectable")&&!0===t.getSignal("shiftKeyDown")?t.setSelected(e.item.id,!0):(t.clearActived(),t.clearSelected(),t.setSelected(e.item.id,!0))})})},function(t,e,n){n(12).registerBehaviour("clickCollapsedButton",function(t){var e=t.getGraph();e.behaviourOn("click",function(n){var i=n.item,r=n.shape;if(i&&r&&r.isCollapsedButton){var a=t.editor;a?a.executeCommand("collapseExpand",{itemId:i.id}):e.update(i,{collapsed:!0})}})})},function(t,e,n){n(12).registerBehaviour("clickCanvasSelected",function(t){var e=t.getGraph();e.behaviourOn("click",function(e){e.shape||(t.clearSelected(),t.clearActived(),t.updateStatus())}),e.behaviourOn("contextmenu",function(e){e.shape||(t.clearSelected(),t.clearActived(),t.updateStatus())})})},function(t,e,n){n(12).registerBehaviour("dblclickItemEditLabel",function(t){t.getGraph().behaviourOn("node:dblclick",function(e){e.shape&&!e.shape.isButton&&t.beginEditLabel(e.item)})})},function(t,e,n){n(12).registerBehaviour("endPanItem",function(t){var e=t.getGraph();e.behaviourOn("panitemend",function(){var n=t.get("panItemDelegation");n&&(n.remove(),e.draw()),t.setSignal("panningItem",!1),t.set("panItemDelegation",void 0),t.set("panItemStartPoint",void 0),t.set("panItemStartBox",void 0),t.set("panItems",void 0)}),e.behaviourOn("canvas:mouseleave",function(){t.get("panItems")&&(t.clearAlignLine(),e.emit("panitemend"))})})},function(t,e,n){n(12).registerBehaviour("startPanItem",function(t){var e=t.getGraph(),n=e.getRootGroup();e.behaviourOn("dragstart",function(i){if(2!==i.button&&i.item&&(i.item.isNode||i.item.isGroup)){var r,a=i.item;if((r=(r=a.isSelected?t.getSelected():[a]).filter(function(t){return t.isNode||t.isGroup}))[0]&&!1!==r[0].dragable){e.emit("beforepanitem",{items:r}),e.emit("beforeshowdelegation",{items:r});var o=t.getDelegation(r,n),s=o.getBBox();t.setSignal("panningItem",!0),t.set("panItems",r),t.set("panItemDelegation",o),t.set("panItemStartBox",s),t.set("panItemStartPoint",{x:i.x,y:i.y}),e.draw()}}})})},function(t,e,n){n(12).registerBehaviour("processPanItem",function(t){var e=t.getGraph();e.behaviourOn("mousemove",function(n){var i=t.get("panItemDelegation");if(i){var r=t.get("panItemStartPoint"),a=t.get("panItemStartBox"),o=n.x-r.x,s=n.y-r.y,l=t.align({x:a.minX+o,y:a.minY+s},{width:a.width,height:a.height});i.attr({x:l.x,y:l.y}),e.emit("itempanning",n),e.draw()}})})},function(t,e,n){var i=n(12),r=n(27),a=n(14);i.registerBehaviour("wheelChangeViewport",function(t){var e,n=t.getGraph();n.behaviourOn("wheel",function(t){t.domEvent.preventDefault()}),n.behaviourOn("wheel",a.throttle(function(i){if(!t.getSignal("preventWheelPan")){var o=i.domEvent,s=t.getSignal("wheelZoom");if(e||t.setCapture(!1),s){var l=o.wheelDelta;if(Math.abs(l)>10){var u=n.getMatrix()[0];l>0?n.zoom({x:i.x,y:i.y},1.05*u):n.zoom({x:i.x,y:i.y},u*(1/1.05))}}else{var c=[],h=n.getMatrix();a.mat3.translate(c,h,[o.wheelDeltaX*r.wheelPanRatio,o.wheelDeltaY*r.wheelPanRatio]),t.translateLimt(c)&&n.updateMatrix(c)}e&&clearTimeout(e),e=setTimeout(function(){t.setCapture(!0),e=void 0},50)}},16))})},function(t,e,n){var i=n(12),r=n(14);i.registerBehaviour("panCanvas",r.getPanCanvasBehaviour())},function(t,e,n){n(12).registerBehaviour("hoverButton",function(t){t.getGraph().behaviourOn("mouseenter",function(e){t.getSignal("panningItem")||e.shape&&e.shape.isButton&&t.css({cursor:"pointer"})})})},function(t,e,n){var i=n(12),r=n(14);i.registerBehaviour("panBlank",r.getPanCanvasBehaviour(!0))},function(t,e,n){n(165),n(164),n(163),n(162),n(161),n(160),n(159),n(158),n(157),n(156),n(155),n(154),n(153),n(152),n(151),n(150),n(149),n(148)},function(t,e){var n={AUGMENT:{updateStatus:function(){var t,e=this.getSelected();0===e.length?t="canvas-selected":1===e.length?e[0].isNode?t="node-selected":e[0].isEdge?t="edge-selected":e[0].isGroup&&(t="group-selected"):t="multi-selected",this.emit("statuschange",{status:t})}}};t.exports=n},function(t,e,n){var i=n(14),r={CFG:{labelEditable:!1},INIT:"_initLabelEditor"};r.AUGMENT={_initLabelEditor:function(){var t=this;if(this.get("labelEditable")){var e=this.getGraph(),n=i.createDOM('<div contenteditable="true" role="textbox" tabindex="1" class="g6-label-editor"></div>',{position:"absolute",visibility:"hidden","z-index":"2",padding:"0px 2px 0px 0px",resize:"none",width:"auto",height:"auto",outline:"none",border:"1px solid #1890FF","transform-origin":"left top","max-width":"320px",background:"white","box-sizing":"content-box"});e.getGraphContainer().appendChild(n),n.on("blur",function(n){n.stopPropagation(),!e.destroyed&&t.endEditLabel()}),n.on("keydown",function(e){e.stopPropagation();var n=i.getKeyboradKey(e);(e.metaKey&&"s"===n||e.ctrlKey&&"s"===n)&&e.preventDefault(),"Enter"!==n&&"Escape"!==n||t.endEditLabel()}),this.set("labelTextArea",n),e.on("beforeviewportchange",function(){n.focusItem&&t.setLabelEditorBeginPosition(n.focusItem)})}},_getLabelTextAreaBox:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0];e&&t.attr("text",e);var r=this.getGraph().getRootGroup(),a=i.getBBox(t,r);return{minX:a.minX-n[1],minY:a.minY-n[0],maxX:a.maxX+n[1],maxY:a.maxY+n[0]}},setLabelEditorBeginPosition:function(t){var e=this.get("labelTextArea"),n=t.getLabel();if(n){var r=this._getLabelTextAreaBox(n),a=n.attr("lineHeight"),o=n.attr("fontSize"),s={x:r.minX,y:r.minY-a/4+o/4-1,width:r.maxX-r.minX,height:r.maxY-r.minY};e.css({top:s.y+"px",left:s.x+"px"}),e.labelPoint=s}else{var l=this.getGraph().getRootGroup(),u=t.getKeyShape(),c=i.getBBox(u,l),h={x:c.minY+(c.maxY-c.minY-e.height())/2,y:(c.minX+c.maxX)/2};e.css({top:h.x+"px",left:h.y+"px"}),e.labelPoint=h}},beginEditLabel:function(t){var e=this.get("labelTextArea"),n=this.getGraph();if(i.isString(t)&&(t=n.find(t)),t&&!t.destroyed&&e){this.setSignal("preventWheelPan",!0);var r=t.getModel(),a=t.getLabel(),o=n.getZoom();if(e.focusItem=t,a){var s=a.attr("lineHeight"),l=this._getLabelTextAreaBox(a),u=(l.maxX-l.minX)/o,c=(l.maxY-l.minY+s/4)/o;e.innerHTML=r.label,e.innerHTML=r.label,e.css({"min-width":u+"px","min-height":c+"px",visibility:"visible","font-family":a.attr("fontFamily"),"line-height":s+"px","font-size":a.attr("fontSize")+"px",transform:"scale("+o+")"})}else e.innerHTML="",e.css({"min-width":"auto","min-height":"auto"});this.setLabelEditorBeginPosition(t),e.css({visibility:"visible"}),e.focus(),document.execCommand("selectAll",!1,null)}},endEditLabel:function(){var t=this.get("labelTextArea");if(this.setSignal("preventWheelPan",!1),t){var e=t.focusItem;if(e){var n=e.getModel(),i=this.editor;n.label!==t.textContent&&i.executeCommand("update",{action:"updateLabel",itemId:e.id,updateModel:{label:t.textContent}}),t.hide(),t.focusItem=void 0,this.focusGraphWrapper()}}}},t.exports=r},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=n(18),u=n(27),c=n(14);function h(t,e){return{line:t,point:e,dis:c.pointLineDistance(t[0],t[1],t[2],t[3],e.x,e.y)}}var d=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,o(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,l),function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(e,[{key:"getDefaultCfg",value:function(){return{line:u.alignLineStyle,item:!0,grid:!1,tolerance:5,_horizontalLines:{},_verticalLines:{},_alignLines:[]}}},{key:"init",value:function(){this.item&&this._cacheBoxLine()}},{key:"_cacheBoxLine",value:function(){var t=this.graph,e=this._horizontalLines,n=this._verticalLines,i=this.item;t.on("afteritemdraw",function(t){var r=t.item;if(!c.isEdge(r)){var a=r.getBBox();!0===i||"horizontal"===i?(e[r.id+"tltr"]=[a.minX,a.minY,a.maxX,a.minY,r],e[r.id+"lcrc"]=[a.minX,a.centerY,a.maxX,a.centerY,r],e[r.id+"blbr"]=[a.minX,a.maxY,a.maxX,a.maxY,r]):"center"===i&&(e[r.id+"lcrc"]=[a.minX,a.centerY,a.maxX,a.centerY,r]),!0===i||"vertical"===i?(n[r.id+"tlbl"]=[a.minX,a.minY,a.minX,a.maxY,r],n[r.id+"tcbc"]=[a.centerX,a.minY,a.centerX,a.maxY,r],n[r.id+"trbr"]=[a.maxX,a.minY,a.maxX,a.maxY,r]):"center"===i&&(n[r.id+"tcbc"]=[a.centerX,a.minY,a.centerX,a.maxY,r])}}),t.on("beforeitemdestroy",function(t){var i=t.item;delete e[i.id+"tltr"],delete e[i.id+"lcrc"],delete e[i.id+"blbr"],delete n[i.id+"tlbl"],delete n[i.id+"tcbc"],delete n[i.id+"trbr"]})}},{key:"align",value:function(t,e){var n=c.mix({},t),i=this.flow.getController("grid");return this.grid&&i&&i.visible&&this._gridAlign(t,e),this.item&&this._itemAlign(t,e,n),t}},{key:"_gridAlign",value:function(t,e){var n=this.flow,i=this.grid,r=n.getGridCell();if("cc"===i){var a=Math.round((t.x+e.width/2)/r)*r,o=Math.round((t.y+e.height/2)/r)*r;t.x=a-e.width/2,t.y=o-e.height/2}else t.x=Math.round(t.x/r)*r,t.y=Math.round(t.y/r)*r}},{key:"_itemAlign",value:function(t,e,n){var i=this._horizontalLines,r=this._verticalLines,a=this.tolerance,o={x:n.x+e.width/2,y:n.y},s={x:n.x+e.width/2,y:n.y+e.height/2},l={x:n.x+e.width/2,y:n.y+e.height},u={x:n.x,y:n.y+e.height/2},d={x:n.x+e.width,y:n.y+e.height/2},f=[],p=[],g=null;if(this.clearAlignLine(),c.each(i,function(t){t[4].isVisible()&&(f.push(h(t,o)),f.push(h(t,s)),f.push(h(t,l)))}),c.each(r,function(t){t[4].isVisible()&&(p.push(h(t,u)),p.push(h(t,s)),p.push(h(t,d)))}),f.sort(function(t,e){return t.dis-e.dis}),p.sort(function(t,e){return t.dis-e.dis}),0!==f.length&&f[0].dis<a){t.y=f[0].line[1]-f[0].point.y+n.y,g={type:"item",horizontals:[f[0]]};for(var m=1;m<3;m++)f[0].dis===f[m].dis&&g.horizontals.push(f[m])}if(0!==p.length&&p[0].dis<a){t.x=p[0].line[0]-p[0].point.x+n.x,g?g.verticals=[p[0]]:g={type:"item",verticals:[p[0]]};for(var v=1;v<3;v++)p[0].dis===p[v].dis&&g.verticals.push(p[v])}g&&(g.bbox=e,this._addAlignLine(g))}},{key:"clearAlignLine",value:function(){var t=this._alignLines;c.each(t,function(t){t.remove()}),this._alignLines=[]}},{key:"_addAlignLine",value:function(t){var e=t.bbox,n=this.graph.getRootGroup(),i=this.line,r=this._alignLines;"item"===t.type&&(t.horizontals&&c.each(t.horizontals,function(t){var a,o,s=t.line,l=t.point,u=(s[0]+s[2])/2;l.x<u?(a=l.x-e.width/2,o=Math.max(s[0],s[2])):(a=l.x+e.width/2,o=Math.min(s[0],s[2]));var h=n.addShape("line",{attrs:c.mix({x1:a,y1:s[1],x2:o,y2:s[1]},i),capture:!1});r.push(h)}),t.verticals&&c.each(t.verticals,function(t){var a,o,s=t.line,l=t.point,u=(s[1]+s[3])/2;l.y<u?(a=l.y-e.height/2,o=Math.max(s[1],s[3])):(a=l.y+e.height/2,o=Math.min(s[1],s[3]));var h=n.addShape("line",{attrs:c.mix({x1:s[0],y1:a,x2:s[0],y2:o},i),capture:!1});r.push(h)}))}}]),e}();t.exports=d},function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=n(169),a={CFG:{align:{}},INIT:"_initAlign"};a.AUGMENT={_initAlign:function(){var t=this.get("align"),e=this.get("_graph"),n=new r(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}({flow:this,graph:e},t));this.setController("align",n)},align:function(t,e,n){return this.getController("align").align(t,e,n)},clearAlignLine:function(){return this.getController("align").clearAlignLine()}},t.exports=a},function(t,e,n){var i=n(14),r={CFG:{activeable:!0,_activedCache:{}},INIT:"_initActived"};r.AUGMENT={_initActived:function(){var t=this,e=this.get("_graph");e.on("afteritemdraw",function(e){var n=e.item;n.isActived&&t.setItemActived(n)}),e.on("beforeitemdestroy",function(e){t.clearItemActived(e.item)})},setItemActived:function(t){var e=this.get("_graph").getShapeObj(t),n=this.get("_activedCache"),i=e.getActivedStyle(t),r=t.getKeyShape();n[t.id]=t,i&&r.attr(i),t.isEdge&&(t.startArrow&&t.startArrow.attr({fill:i.stroke}),t.endArrow&&t.endArrow.attr({fill:i.stroke}))},clearItemActived:function(t){var e=this.get("_graph"),n=t.getKeyShape(),r=e.getShapeObj(t),a=r.getStyle(t),o=this.get("_activedCache"),s=r.getActivedStyle(t),l=i.getContrast(a,s);n.attr(l),t.isEdge&&(t.startArrow&&t.startArrow.attr({fill:l.stroke}),t.endArrow&&t.endArrow.attr({fill:l.stroke})),delete o[t.id]},setActived:function(t,e){var n,r=this,a=this.get("activeable"),o=this.get("_graph");a&&(n=i.isArray(t)?t:[t],i.each(n,function(t){i.isString(t)&&(t=o.find(t)),t&&!t.destroyed&&(e?(r.emit("beforeitemactived",{item:t}),r.setItemActived(t),r.emit("afteritemactived",{item:t})):(r.emit("beforeitemunactived",{item:t}),r.clearItemActived(t),r.emit("afteritemunactived",{item:t})),t.isActived=e)}),o.draw())},getActived:function(){var t=this.get("_activedCache");return i.objectToValues(t)},clearActived:function(){var t=this,e=this.get("_graph"),n=this.get("_activedCache");i.each(n,function(e){e.isActived&&t.setActived(e,!1)}),e.draw()}},t.exports=r},function(t,e,n){var i=n(14),r={CFG:{selectable:!0,multiSelectable:!0,_selectedCache:{}},INIT:"_initSelected"};r.AUGMENT={_initSelected:function(){var t=this,e=this.get("_graph");e.on("afteritemdraw",function(e){var n=e.item;n.isSelected&&t.setItemSelected(n)}),e.on("beforeitemdestroy",function(e){t.clearItemSelected(e.item)})},setItemSelected:function(t){var e=this.get("_graph").getShapeObj(t).getSelectedStyle(t),n=t.getKeyShape();this.get("_selectedCache")[t.id]=t,e&&n.attr(e),t.isEdge&&(t.startArrow&&t.startArrow.attr({fill:e.stroke}),t.endArrow&&t.endArrow.attr({fill:e.stroke}))},clearItemSelected:function(t){var e=this.get("_graph"),n=t.getKeyShape(),r=e.getShapeObj(t),a=r.getStyle(t),o=r.getSelectedStyle(t),s=this.get("_selectedCache"),l=i.getContrast(a,o);n.attr(l),t.isEdge&&(t.startArrow&&t.startArrow.attr({fill:l.stroke}),t.endArrow&&t.endArrow.attr({fill:l.stroke})),delete s[t.id]},setSelected:function(t,e){var n,r=this,a=this.get("selectable"),o=this.get("_graph");a&&(n=i.isArray(t)?t:[t],i.each(n,function(t){i.isString(t)&&(t=o.find(t)),t&&!t.destroyed&&(e?(r.emit("beforeitemselected",{item:t}),r.setItemSelected(t),r.emit("afteritemselected",{item:t})):(r.emit("beforeitemunselected",{item:t}),r.clearItemSelected(t),r.emit("afteritemunselected",{item:t})),t.isSelected=e,r.updateStatus(),o.draw())}))},getSelected:function(){var t=this.get("_selectedCache");return i.objectToValues(t)},clearSelected:function(){var t=this,e=this.get("_graph"),n=this.get("_selectedCache");i.each(n,function(e){e.isSelected&&t.setSelected(e,!1)}),e.draw()}},t.exports=r},function(t,e){var n={};function i(t,e,n){t.on(n,function(t){e.emit(n,t)}),t.on("node:"+n,function(t){e.emit("node:"+n,t)}),t.on("edge:"+n,function(t){e.emit("edge:"+n,t)}),t.on("group:"+n,function(t){e.emit("group:"+n,t)}),t.on("anchor:"+n,function(t){e.emit("anchor:"+n,t)})}n.INIT="_initEvent",n.AUGMENT={_initEvent:function(){var t=this,e=this.get("_graph");i(e,this,"click"),i(e,this,"dblclick"),i(e,this,"mouseenter"),i(e,this,"mouseleave"),i(e,this,"mousedown"),i(e,this,"mouseup"),i(e,this,"contextmenu"),e.on("keydown",function(e){t.emit("keydown",e)}),e.on("keyup",function(e){t.emit("keyup",e)}),e.on("beforechange",function(e){t.emit("beforechange",e)}),e.on("afterchange",function(e){t.emit("afterchange",e)}),e.on("afterviewportchange",function(e){t.emit("afterviewportchange",e),e.updateMatrix[0]!==e.originMatrix[0]&&t.emit("afterzoom",e)}),e.on("beforeviewportchange",function(e){t.emit("beforeviewportchange",e),e.updateMatrix[0]!==e.originMatrix[0]&&t.emit("beforezoom",e)})}},t.exports=n},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=n(18),u=n(27),c=n(14),h=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,o(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,l),function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(e,[{key:"getDefaultCfg",value:function(){return{cell:16,line:u.gridStyle,type:"point",visible:!0}}},{key:"init",value:function(){this._draw(),this._onViewPortChange(),!this.visible&&this.hide()}},{key:"_onViewPortChange",value:function(){var t=this,e=this.graph;e.on("afterviewportchange",function(){t.update()}),e.on("beforechangesize",function(){t.update()})}},{key:"_draw",value:function(){var t=this.graph,e=this._getPath(),n=t.getRootGroup(),i=c.mix({},this.line),r=t.getMatrix(),a=this.type,o="line"===a?1/r[0]:2/r[0];"point"===a&&(i.lineDash=null),i.lineWidth=o,i.path=e;var s=n.addShape("path",{attrs:i,capture:!1,zIndex:0});c.toBack(s,n),this.gridEl=s}},{key:"show",value:function(){this.gridEl.show(),this.visible=!0}},{key:"hide",value:function(){this.gridEl.hide(),this.visible=!1}},{key:"_getLinePath",value:function(){for(var t=this.graph,e=t.get("width"),n=t.get("height"),i=t.getPoint({x:0,y:0}),r=t.getPoint({x:e,y:n}),a=this.cell,o=Math.ceil(i.x/a)*a,s=Math.ceil(i.y/a)*a,l=[],u=0;u<=r.x-i.x;u+=a){var c=o+u;l.push(["M",c,i.y]),l.push(["L",c,r.y])}for(var h=0;h<=r.y-i.y;h+=a){var d=s+h;l.push(["M",i.x,d]),l.push(["L",r.x,d])}return l}},{key:"_getPointPath",value:function(){for(var t=this.graph,e=t.get("width"),n=t.get("height"),i=t.getPoint({x:0,y:0}),r=2/t.getMatrix()[0],a=t.getPoint({x:e,y:n}),o=this.getCell(),s=Math.ceil(i.x/o)*o,l=Math.ceil(i.y/o)*o,u=[],c=0;c<=a.x-i.x;c+=o)for(var h=s+c,d=0;d<=a.y-i.y;d+=o){var f=l+d;u.push(["M",h,f]),u.push(["L",h+r,f])}return u}},{key:"getCell",value:function(){var t=this.cell,e=this.graph.getMatrix()[0];return t*e<9.6?9.6/e:t}},{key:"_getPath",value:function(){var t=this.type;return this["_get"+c.upperFirst(t)+"Path"]()}},{key:"update",value:function(t){c.mix(this,t);var e=this._getPath(),n=this.gridEl,i=this.graph.getMatrix(),r="line"===this.type?1/i[0]:2/i[0];n.attr("lineWidth",r),n.attr("path",e)}},{key:"destroy",value:function(){var t=this.gridEl;t&&t.remove()}}]),e}();t.exports=h},function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=n(174),a=n(14),o={CFG:{grid:void 0},INIT:"_initGrid"};o.AUGMENT={_initGrid:function(){var t=this.get("grid"),e=this.get("_graph");if(t){var n=new r(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}({page:this,graph:e},t));this.setController("grid",n)}},showGrid:function(t){var e=this.get("_graph"),n=this.getController("grid");n||(t?a.isObject(t)&&this.set("grid",t):this.set("grid",!0),this._initGrid()),(n=this.getController("grid")).show(),e.draw()},hideGrid:function(){var t=this.get("_graph"),e=this.getController("grid");e&&e.hide(),t.draw()},getGridCell:function(){return this.getController("grid").getCell()}},t.exports=o},function(t,e,n){function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var r=n(14),a={INIT:"_initGraph"};a.AUGMENT={_initGraph:function(){var t=this.get("graph"),e=new(this.get("graphConstructor"))(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}({page:this},t));e.draw(),this.set("_graph",e)},changeMode:function(t){this.get("_graph").changeMode(t)},updateMatrix:function(t){this.get("_graph").updateMatrix(t)},getMode:function(){return this.get("_graph").get("mode")},getMatrix:function(){return this.get("_graph").getMatrix()},getZoom:function(){return this.get("_graph").getMatrix()[0]},getMaxZoom:function(){return this.get("_graph").get("maxZoom")},getMinZoom:function(){return this.get("_graph").get("minZoom")},getGraph:function(){return this.get("_graph")},getItems:function(){return this.get("_graph").getItems()},getNodes:function(){return this.get("_graph").getNodes()},translate:function(t,e){return this.get("_graph").translate(t,e)},getEdges:function(){return this.get("_graph").getEdges()},getGroups:function(){return this.get("_graph").getGroups()},render:function(){return this.get("_graph").render(),this},add:function(t,e){return this.get("_graph").add(t,e),this},focusPointByDom:function(t){return this.get("_graph").focusPointByDom(t),this},focusPoint:function(t){return this.get("_graph").focusPoint(t),this},find:function(t){return this.get("_graph").find(t)},focus:function(t){var e=this.get("_graph"),n=e.find(t);if(n){var i=n.getCenter();e.focusPoint(i)}return this},save:function(){return this.get("_graph").save()},read:function(t){this.get("_graph").read(t)},clear:function(){this.get("_graph").clear()},remove:function(t){return this.get("_graph").remove(t),this},update:function(t,e){return this.get("_graph").update(t,e),this},zoom:function(t,e){return this.get("_graph").zoom(t,e),this},getDomPoint:function(t){return this.get("_graph").getDomPoint(t)},getPoint:function(t){return this.get("_graph").getPoint(t)},zoomByDom:function(t,e){var n=this.get("_graph"),i=n.getPoint(t);return n.zoom(i,e),this},autoZoom:function(){return this.get("_graph").autoZoom(),this},resetZoom:function(){var t=this.get("_graph"),e=t.getWidth(),n=t.getHeight();return t.zoomByDom({x:e/2,y:n/2},1),this},css:function(t){var e=this.get("_graph").getMouseEventWrapper();r.modifyCSS(e,t)},setCapture:function(t){this.get("_graph").getRootGroup().set("capture",t)},destroy:function(){this.get("_graph").destroy()},delete:function(){var t=this.getSelected(),e=this.get("_graph");r.each(t,function(t){e.remove(t)})}},t.exports=a},function(t,e){t.exports="1.2.0"},function(t,e,n){var i=n(49);i.registerCommand("collapseExpand",{getItem:function(t){var e=t.getCurrentPage(),n=e.getGraph();return this.itemId?n.find(this.itemId):e.getSelected()[0]},enable:function(t){var e=this.getItem(t);return e&&!1!==e.collapseExpand&&e.getChildren().length>0},execute:function(t){var e=t.getCurrentPage(),n=e.getGraph(),i=this.getItem(t);i.getModel().collapsed?(n.update(i,{collapsed:!1}),this.toCollapsed=!1):(n.update(i,{collapsed:!0}),this.toCollapsed=!0),e.clearSelected(),e.setSelected(i,!0),1===this.executeTimes&&(this.itemId=i.id)},back:function(t){var e=t.getCurrentPage(),n=e.getGraph(),i=this.getItem(t);this.toCollapsed?n.update(i,{collapsed:!1}):n.update(i,{collapsed:!0}),e.clearSelected(),e.setSelected(i,!0)},shortcutCodes:[["metaKey","/"],["ctrlKey","/"]]}),i.registerCommand("collapse",{enable:function(t){var e=this.getItem(t);return e&&!1!==e.collapseExpand&&e.getChildren().length>0&&!e.getModel().collapsed}},"collapseExpand"),i.registerCommand("expand",{enable:function(t){var e=this.getItem(t);return e&&!1!==e.collapseExpand&&e.getChildren().length>0&&e.getModel().collapsed}},"collapseExpand")},function(t,e,n){var i=n(49);function r(t){var e=t.getCurrentPage();this.matrixCache=e.getMatrix().slice(0),this._zoom(t),e.updateStatus()}function a(t){t.getCurrentPage().updateMatrix(this.matrixCache)}i.registerCommand("zoomTo",{_zoom:function(t){t.getCurrentPage().zoom(Number(this.zoom))},queue:!1,execute:r,back:a}),i.registerCommand("zoomIn",{enable:function(t){var e=t.getCurrentPage(),n=e.getMaxZoom(),i=e.getMinZoom(),r=e.getZoom();return r<n||r===i},_zoom:function(t){var e=t.getCurrentPage(),n=t.get("_command"),i=e.getZoom(),r=e.getMaxZoom(),a=i+n.zoomDelta;a>=r&&(a=r),e.zoom(a)},queue:!1,execute:r,back:a,shortcutCodes:[["metaKey","="],["ctrlKey","="]]}),i.registerCommand("zoomOut",{enable:function(t){var e=t.getCurrentPage(),n=e.getMaxZoom(),i=e.getMinZoom(),r=e.getZoom();return r>i||r===n},_zoom:function(t){var e=t.getCurrentPage(),n=e.getZoom(),i=e.getMinZoom(),r=n-t.get("_command").zoomDelta;r<=i&&(r=i),e.zoom(r)},queue:!1,execute:r,back:a,shortcutCodes:[["metaKey","-"],["ctrlKey","-"]]}),i.registerCommand("autoZoom",{enable:function(){return!0},_zoom:function(t){t.getCurrentPage().autoZoom()},queue:!1,execute:r,back:a}),i.registerCommand("resetZoom",{enable:function(){return!0},_zoom:function(t){t.getCurrentPage().resetZoom()},queue:!1,execute:r,back:a,shortcutCodes:[["metaKey","0"],["ctrlKey","0"]]})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){for(var e=[],n=(0,i.default)(t),r=u;r>0;r-=1){var a=n.toHsv(),o=(0,i.default)({h:h(a,r,!0),s:d(a,r,!0),v:f(a,r,!0)}).toHexString();e.push(o)}e.push(n.toHexString());for(var s=1;s<=c;s+=1){var l=n.toHsv(),p=(0,i.default)({h:h(l,s),s:d(l,s),v:f(l,s)}).toHexString();e.push(p)}return e};var i=function(t){return t&&t.__esModule?t:{default:t}}(n(83)),r=2,a=16,o=5,s=5,l=15,u=5,c=4;function h(t,e,n){var i=void 0;return(i=Math.round(t.h)>=60&&Math.round(t.h)<=240?n?Math.round(t.h)-r*e:Math.round(t.h)+r*e:n?Math.round(t.h)+r*e:Math.round(t.h)-r*e)<0?i+=360:i>=360&&(i-=360),i}function d(t,e,n){if(0===t.h&&0===t.s)return t.s;var i=void 0;return(i=n?Math.round(100*t.s)-a*e:e===c?Math.round(100*t.s)+a:Math.round(100*t.s)+o*e)>100&&(i=100),n&&e===u&&i>10&&(i=10),i<6&&(i=6),i}function f(t,e,n){return n?Math.round(100*t.v)+s*e:Math.round(100*t.v)-l*e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.presetPrimaryColors=e.presetPalettes=e.generate=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(180)),r={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},a={};Object.keys(r).forEach(function(t){a[t]=(0,i.default)(r[t])}),e.generate=i.default,e.presetPalettes=a,e.presetPrimaryColors=r},function(t,e,n){var i=n(17).Util;t.exports={getGroupIconPath:function(){return"M9.75,9.60000014 L3.75,9.60000014 C3.33578644,9.60000014 3,9.2865995 3,8.90000022 C3,8.51340093 3.33578644,8.20000029 3.75,8.20000029 L9.75,8.20000029 C10.1642136,8.20000029 10.5,8.51340093 10.5,8.90000022 C10.5,9.2865995 10.1642136,9.60000014 9.75,9.60000014 M3,11.6999999 C3,11.3134006 3.33578644,11 3.75,11 L6.75,11 C7.16421356,11 7.5,11.3134006 7.5,11.6999999 C7.5,12.0865992 7.16421356,12.3999999 6.75,12.3999999 L3.75,12.3999999 C3.33578644,12.3999999 3,12.0865992 3,11.6999999 M3.75,13.7999997 L6.75,13.7999997 C7.16421356,13.7999997 7.5,14.1134004 7.5,14.4999996 C7.5,14.8865989 7.16421356,15.1999996 6.75,15.1999996 L3.75,15.1999996 C3.33578644,15.1999996 3,14.8865989 3,14.4999996 C3,14.1134004 3.33578644,13.7999997 3.75,13.7999997 M16.4985,4.00000072 L1.5015,4.00000072 C0.674533504,3.99922416 0.00289396564,4.6232696 0,5.39510058 L0,16.6048994 C0.00289396564,17.3767304 0.674533504,18.0007758 1.5015,17.9999993 L16.4985,17.9999993 C17.3254665,18.0007758 17.997106,17.3767304 18,16.6048994 L18,5.39510058 C17.997106,4.6232696 17.3254665,3.99922416 16.4985,4.00000072M19,13.9999993 L19,3 L5,3 L5,1.39510058 C5.00289397,0.623269599 5.6745335,-0.00077583787 6.5015,7.23978642e-07 L21.4985,7.23978642e-07 C22.3254665,-0.00077583787 22.997106,0.623269599 23,1.39510058 L23,12.6048994 C22.997106,13.3767304 22.3254665,14.0007758 21.4985,13.9999993 L19,13.9999993 Z"},getCollapsedButtonPath:function(){return i.getRectPath(0,0,14,14,2)+"M3,7L11,7"},getExpandedButtonPath:function(){return i.getRectPath(0,0,14,14,2)+"M3,7L11,7M7,3L7,11"}}},function(t,e,n){var i;
/*!
 * EventEmitter v5.2.5 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - http://oli.me.uk/
 * @preserve
 */!function(e){"use strict";function r(){}var a=r.prototype,o=e.EventEmitter;function s(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function l(t){return function(){return this[t].apply(this,arguments)}}a.getListeners=function(t){var e,n,i=this._getEvents();if(t instanceof RegExp)for(n in e={},i)i.hasOwnProperty(n)&&t.test(n)&&(e[n]=i[n]);else e=i[t]||(i[t]=[]);return e},a.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},a.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&((e={})[t]=n),e||n},a.addListener=function(t,e){if(!function t(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&t(e.listener)}(e))throw new TypeError("listener must be a function");var n,i=this.getListenersAsObject(t),r="object"==typeof e;for(n in i)i.hasOwnProperty(n)&&-1===s(i[n],e)&&i[n].push(r?e:{listener:e,once:!1});return this},a.on=l("addListener"),a.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},a.once=l("addOnceListener"),a.defineEvent=function(t){return this.getListeners(t),this},a.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},a.removeListener=function(t,e){var n,i,r=this.getListenersAsObject(t);for(i in r)r.hasOwnProperty(i)&&-1!==(n=s(r[i],e))&&r[i].splice(n,1);return this},a.off=l("removeListener"),a.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},a.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},a.manipulateListeners=function(t,e,n){var i,r,a=t?this.removeListener:this.addListener,o=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(i=n.length;i--;)a.call(this,e,n[i]);else for(i in e)e.hasOwnProperty(i)&&(r=e[i])&&("function"==typeof r?a.call(this,i,r):o.call(this,i,r));return this},a.removeEvent=function(t){var e,n=typeof t,i=this._getEvents();if("string"===n)delete i[t];else if(t instanceof RegExp)for(e in i)i.hasOwnProperty(e)&&t.test(e)&&delete i[e];else delete this._events;return this},a.removeAllListeners=l("removeEvent"),a.emitEvent=function(t,e){var n,i,r,a,o=this.getListenersAsObject(t);for(a in o)if(o.hasOwnProperty(a))for(n=o[a].slice(0),r=0;r<n.length;r++)!0===(i=n[r]).once&&this.removeListener(t,i.listener),i.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,i.listener);return this},a.trigger=l("emitEvent"),a.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},a.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},a._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},a._getEvents=function(){return this._events||(this._events={})},r.noConflict=function(){return e.EventEmitter=o,r},void 0===(i=function(){return r}.call(e,n,e,t))||(t.exports=i)}("undefined"!=typeof window?window:this||{})},function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=n(65),u=n(19),c=n(38),h=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,o(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,l),function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(e,[{key:"getDefaultCfg",value:function(){return{_components:[],_command:{zoomDelta:.1,queue:[],current:0,clipboard:[]}}}},{key:"_getComponentsBy",value:function(t){return this.get("_components").filter(t)}},{key:"_bindCommands",value:function(t){var e=this;u.each(t,function(t){var n=t.dataset,i=n.command;c[i]?u.addEventListener(t,"click",function(){e.getCurrentPage().focusGraphWrapper(),e.executeCommand(i,n)}):console.warn("请设置有效的命令！")})}},{key:"getCommands",value:function(){return this.get("_command").queue}},{key:"getCurrentCommand",value:function(){var t=this.get("_command");return t.queue[t.current-1]}},{key:"executeCommand",value:function(t,e){u.isString(t)?c.execute(t,this,e):c.execute("common",this,{method:t},e)}},{key:"commandEnable",value:function(t){return c.enable(t,this)}},{key:"setCommandDOMenable",value:function(){var t=this,e=this.getComponentsByType("toolbar"),n=this.getComponentsByType("contextmenu"),i=[];e.forEach(function(t){u.each(t.getCommandDoms(),function(t){i.push(t)})}),n.forEach(function(t){u.each(t.getCommandDoms(),function(t){i.push(t)})}),u.each(i,function(e){var n=e.dataset.command;c.enable(n,t)?e.classList.remove("disable"):e.classList.add("disable")})}},{key:"_onPageStatusChange",value:function(){this.setCommandDOMenable()}},{key:"_beforeAddMinimap",value:function(t){var e=this,n=this.getComponentsByType("page");t.getGraph=function(){return e.getCurrentPage().getGraph()},0!==n.length&&n.forEach(function(e){t.bindPage(e)})}},{key:"_afterAddContextmenu",value:function(){this.getCurrentPage()&&this.setCommandDOMenable()}},{key:"_afterAddPage",value:function(t){var e=this,n=this.getComponentsByType("minimap");this.setCommandDOMenable(),n.forEach(function(e){e.bindPage(t)}),t.on("statuschange",function(t){e._onPageStatusChange(t)}),t.on("mousedown",function(){e.getComponentsByType("contextmenu").forEach(function(t){t.hide()})}),t.on("contextmenu",function(n){var i=e.getComponentsByType("contextmenu"),r=t.getGraph().getCanvas().get("el"),a=u.getBoundingClientRect(r),o={x:n.x,y:n.y},s=n.item;s&&!s.isSelected&&(t.clearSelected(),t.setSelected(n.item,!0)),e.set("contextmenuPoint",o),n.domEvent.preventDefault(),i.forEach(function(t){t.show(),t.contextmenuPoint=o,t.move(a.left+n.domX,a.top+n.domY)})}),t.on("statuschange",function(t){var n=e.getComponentsByType("contextmenu"),i=e.getComponentsByType("detailpannel");n.forEach(function(e){e.switch(t.status)}),i.forEach(function(e){e.switch(t.status)})}),this._bindShortcut(t)}},{key:"_beforeAddToolbar",value:function(t){var e=t.getCommandDoms();this._bindCommands(e)}},{key:"_beforeAddContextmenu",value:function(t){var e=t.getCommandDoms();t.bindEvent(),this._bindCommands(e)}},{key:"_beforeAddItempannel",value:function(t){t.bindEvent()}},{key:"getComponentsByType",value:function(t){return this._getComponentsBy(function(e){return e.type===t})}},{key:"getCurrentPage",value:function(){var t,e=this.getComponentsByType("page");return e.every(function(e){return!e.isActived||(t=e,!1)}),t||(t=e[0]),t}},{key:"getComponents",value:function(){return this.get("_components")}},{key:"_shortcutEnable",value:function(t,e){for(var n=t.shortcutCodes,i=u.getKeyboradKey(e),r=!1,a=0;a<n.length;a++){var o=n[a];if(u.isArray(o)){for(var s=o.length,l=!0,c=0;c<s-1;c++)if(!e[o[c]]){l=!1;break}o[s-1]!==i&&o[s-1]!==u.lowerFirst(i)||!l||(r=!0)}else o===i&&(r=!0);if(r)break}return r}},{key:"_bindShortcut",value:function(t){var e=this,n=t.get("shortcut");t.getGraph().on("keydown",function(t){var i=e.getComponentsByType("contextmenu"),r=t.domEvent;i.forEach(function(t){t.hide()}),r.preventDefault();for(var a=c.list.filter(function(t){return t.shortcutCodes&&n[t.name]}),o=0;o<a.length;o++){var s=a[o];if(e._shortcutEnable(s,r))return e.executeCommand(s.name),!1}})}},{key:"add",value:function(t){var e=this.get("_components"),n=u.upperFirst(t.type);t.editor=this,this["_beforeAdd"+n]&&this["_beforeAdd"+n](t),e.push(t),this["_afterAdd"+n]&&this["_afterAdd"+n](t)}},{key:"destroy",value:function(){this.get("_components").forEach(function(t){t.destroy()})}}]),e}();t.exports=h}])})},"18ed":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"popup"},[n("div",{staticClass:"dropDownTop"},[t._t("default")],2)])},r=[],a={name:"dropDownTop",data:function(){return{}},methods:{}},o=a,s=(n("0695"),n("2877")),l=Object(s["a"])(o,i,r,!1,null,"ba957a42",null);e["default"]=l.exports},"1a23":function(t,e,n){var i,r;!function(a,o){i=o,r="function"===typeof i?i.call(e,n,e,t):i,void 0===r||(t.exports=r)}(0,function(t,e,n){var i=function(t,e,n,i,r,a){function o(t){var e,n,i,r,a,o,s=t<0;if(t=Math.abs(t).toFixed(u.decimals),t+="",e=t.split("."),n=e[0],i=e.length>1?u.options.decimal+e[1]:"",u.options.useGrouping){for(r="",a=0,o=n.length;a<o;++a)0!==a&&a%3===0&&(r=u.options.separator+r),r=n[o-a-1]+r;n=r}return u.options.numerals.length&&(n=n.replace(/[0-9]/g,function(t){return u.options.numerals[+t]}),i=i.replace(/[0-9]/g,function(t){return u.options.numerals[+t]})),(s?"-":"")+u.options.prefix+n+i+u.options.suffix}function s(t,e,n,i){return n*(1-Math.pow(2,-10*t/i))*1024/1023+e}function l(t){return"number"==typeof t&&!isNaN(t)}var u=this;if(u.version=function(){return"1.9.3"},u.options={useEasing:!0,useGrouping:!0,separator:",",decimal:".",easingFn:s,formattingFn:o,prefix:"",suffix:"",numerals:[]},a&&"object"==typeof a)for(var c in u.options)a.hasOwnProperty(c)&&null!==a[c]&&(u.options[c]=a[c]);""===u.options.separator?u.options.useGrouping=!1:u.options.separator=""+u.options.separator;for(var h=0,d=["webkit","moz","ms","o"],f=0;f<d.length&&!window.requestAnimationFrame;++f)window.requestAnimationFrame=window[d[f]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[d[f]+"CancelAnimationFrame"]||window[d[f]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var n=(new Date).getTime(),i=Math.max(0,16-(n-h)),r=window.setTimeout(function(){t(n+i)},i);return h=n+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),u.initialize=function(){return!!u.initialized||(u.error="",u.d="string"==typeof t?document.getElementById(t):t,u.d?(u.startVal=Number(e),u.endVal=Number(n),l(u.startVal)&&l(u.endVal)?(u.decimals=Math.max(0,i||0),u.dec=Math.pow(10,u.decimals),u.duration=1e3*Number(r)||2e3,u.countDown=u.startVal>u.endVal,u.frameVal=u.startVal,u.initialized=!0,!0):(u.error="[CountUp] startVal ("+e+") or endVal ("+n+") is not a number",!1)):(u.error="[CountUp] target is null or undefined",!1))},u.printValue=function(t){var e=u.options.formattingFn(t);"INPUT"===u.d.tagName?this.d.value=e:"text"===u.d.tagName||"tspan"===u.d.tagName?this.d.textContent=e:this.d.innerHTML=e},u.count=function(t){u.startTime||(u.startTime=t),u.timestamp=t;var e=t-u.startTime;u.remaining=u.duration-e,u.options.useEasing?u.countDown?u.frameVal=u.startVal-u.options.easingFn(e,0,u.startVal-u.endVal,u.duration):u.frameVal=u.options.easingFn(e,u.startVal,u.endVal-u.startVal,u.duration):u.countDown?u.frameVal=u.startVal-(u.startVal-u.endVal)*(e/u.duration):u.frameVal=u.startVal+(u.endVal-u.startVal)*(e/u.duration),u.countDown?u.frameVal=u.frameVal<u.endVal?u.endVal:u.frameVal:u.frameVal=u.frameVal>u.endVal?u.endVal:u.frameVal,u.frameVal=Math.round(u.frameVal*u.dec)/u.dec,u.printValue(u.frameVal),e<u.duration?u.rAF=requestAnimationFrame(u.count):u.callback&&u.callback()},u.start=function(t){u.initialize()&&(u.callback=t,u.rAF=requestAnimationFrame(u.count))},u.pauseResume=function(){u.paused?(u.paused=!1,delete u.startTime,u.duration=u.remaining,u.startVal=u.frameVal,requestAnimationFrame(u.count)):(u.paused=!0,cancelAnimationFrame(u.rAF))},u.reset=function(){u.paused=!1,delete u.startTime,u.initialized=!1,u.initialize()&&(cancelAnimationFrame(u.rAF),u.printValue(u.startVal))},u.update=function(t){if(u.initialize()){if(t=Number(t),!l(t))return void(u.error="[CountUp] update() - new endVal is not a number: "+t);u.error="",t!==u.frameVal&&(cancelAnimationFrame(u.rAF),u.paused=!1,delete u.startTime,u.startVal=u.frameVal,u.endVal=t,u.countDown=u.startVal>u.endVal,u.rAF=requestAnimationFrame(u.count))}},u.initialize()&&u.printValue(u.startVal)};return i})},"1d03":function(t,e,n){},"1ddb":function(t,e,n){(function(e){(function(e,i){t.exports=i(n("1a23"))})(0,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t["default"]:t;var n="object"==typeof e&&e&&e.Object===Object&&e,i="object"==typeof self&&self&&self.Object===Object&&self,r=n||i||Function("return this")(),a=r.Symbol,o=Object.prototype,s=o.hasOwnProperty,l=o.toString,u=a?a.toStringTag:void 0;function c(t){var e=s.call(t,u),n=t[u];try{t[u]=void 0}catch(r){}var i=l.call(t);return e?t[u]=n:delete t[u],i}var h=Object.prototype,d=h.toString;function f(t){return d.call(t)}var p="[object Null]",g="[object Undefined]",m=a?a.toStringTag:void 0;function v(t){return null==t?void 0===t?g:p:m&&m in Object(t)?c(t):f(t)}function y(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var x="[object AsyncFunction]",_="[object Function]",b="[object GeneratorFunction]",w="[object Proxy]";function S(t){if(!y(t))return!1;var e=v(t);return e==_||e==b||e==x||e==w}var M={__countup__:t,name:"ICountUp",props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!0},decimals:{type:Number,required:!1,default:0},duration:{type:Number,required:!1,default:2},options:{type:Object,required:!1}},data:function(){return{instance:null}},watch:{endVal:{handler:function(t){var e=this;e.instance&&S(e.instance.update)&&e.instance.update(t)},deep:!1}},methods:{init:function(){var e=this;if(!e.instance){var n=e.$el,i=new t(n,e.startVal,e.endVal,e.decimals,e.duration,e.options);i.error||(i.start(function(){return e.$emit("ready",i,t)}),e.instance=i)}},uninit:function(){var t=this;t.instance=null},printValue:function(t){var e=this;if(e.instance&&S(e.instance.printValue))return e.instance.printValue(t)},start:function(t){var e=this;if(e.instance&&S(e.instance.start)&&S(t))return e.instance.start(t)},pauseResume:function(){var t=this;if(t.instance&&S(t.instance.pauseResume))return t.instance.pauseResume()},reset:function(){var t=this;if(t.instance&&S(t.instance.reset))return t.instance.reset()},update:function(t){var e=this;if(e.instance&&S(e.instance.update))return e.instance.update(t)}},mounted:function(){var t=this;t.init()},beforeDestroy:function(){var t=this;t.uninit()},render:function(t){return t("span",{})}};return M})}).call(this,n("c8ba"))},"1e3c":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("类型管理")])},r=[],a={name:"typeMenage",data:function(){return{}}},o=a,s=n("2877"),l=Object(s["a"])(o,i,r,!1,null,null,null);e["default"]=l.exports},"20d5":function(t,e,n){"use strict";var i=n("8601"),r=n.n(i);r.a},2303:function(t,e,n){"use strict";var i=n("6b55"),r=n.n(i);r.a},"264e":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Table",{staticStyle:{height:"calc(100vh - 116px)"},attrs:{columns:t.columns1,data:t.data1}})},r=[],a=n("57e7"),o={name:"user",data:function(){return{height:300,columns1:a["a"].user(this),data1:[{name:"John Brown",age:18,address:"New York No. 1 Lake Park",date:"2016-10-03"},{name:"Jim Green",age:24,address:"London No. 1 Lake Park",date:"2016-10-01"},{name:"Joe Black",age:30,address:"Sydney No. 1 Lake Park",date:"2016-10-02"},{name:"Jon Snow",age:26,address:"Ottawa No. 2 Lake Park",date:"2016-10-04"}]}},created:function(){}},s=o,l=n("2877"),u=Object(l["a"])(s,i,r,!1,null,null,null);e["default"]=u.exports},2651:function(t,e,n){(function(e){!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t,e){return e={exports:{}},t(e,e.exports),e.exports}function n(t){if(null==t||"object"!=typeof t)return t;var e=t,i=eu.call(t);if("[object Array]"===i){if(!h(t)){e=[];for(var r=0,a=t.length;r<a;r++)e[r]=n(t[r])}}else if(tu[i]){if(!h(t)){var o=t.constructor;if(t.constructor.from)e=o.from(t);else{e=new o(t.length);for(r=0,a=t.length;r<a;r++)e[r]=n(t[r])}}}else if(!Ql[i]&&!h(t)&&!c(t))for(var s in e={},t)t.hasOwnProperty(s)&&(e[s]=n(t[s]));return e}function i(t,e,r){if(!l(e)||!l(t))return r?n(e):t;for(var a in e)if(e.hasOwnProperty(a)){var o=t[a],d=e[a];!l(d)||!l(o)||s(d)||s(o)||c(d)||c(o)||u(d)||u(o)||h(d)||h(o)?!r&&a in t||(t[a]=n(e[a])):i(o,d,r)}return t}function r(t,e,n){for(var i in e)e.hasOwnProperty(i)&&(n?null!=e[i]:null==t[i])&&(t[i]=e[i]);return t}function a(t,e,n){if(t&&e)if(t.forEach&&t.forEach===iu)t.forEach(e,n);else if(t.length===+t.length)for(var i=0,r=t.length;i<r;i++)e.call(n,t[i],i,t);else for(var a in t)t.hasOwnProperty(a)&&e.call(n,t[a],a,t)}function o(t,e){var n=au.call(arguments,2);return function(){return t.apply(e,n.concat(au.call(arguments)))}}function s(t){return"[object Array]"===eu.call(t)}function l(t){var e=typeof t;return"function"===e||!!t&&"object"==e}function u(t){return!!Ql[eu.call(t)]}function c(t){return"object"==typeof t&&"number"==typeof t.nodeType&&"object"==typeof t.ownerDocument}function h(t){return t[hu]}function d(t){function e(t,e){n?i.set(t,e):i.set(e,t)}var n=s(t),i=this;t instanceof d?t.each(e):t&&a(t,e)}function f(t){return Math.sqrt(p(t))}function p(t){return t[0]*t[0]+t[1]*t[1]}function g(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function m(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}function v(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this),this.on("globalout",this._dragEnd,this)}function y(t,e){return{target:t,topTarget:e&&e.topTarget}}function x(){}function _(){var t=new Su(6);return b(t),t}function b(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function w(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function S(t){return t>Cu||t<-Cu}function M(t){this._target=t.target,this._life=t.life||1e3,this._delay=t.delay||0,this._initialized=!1,this.loop=null!=t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this._pausedTime=0,this._paused=!1}function A(t){return(t=Math.round(t))<0?0:t>255?255:t}function C(t){return t<0?0:t>1?1:t}function I(t){return A(t.length&&"%"===t.charAt(t.length-1)?parseFloat(t)/100*255:parseInt(t,10))}function P(t){return C(t.length&&"%"===t.charAt(t.length-1)?parseFloat(t)/100:parseFloat(t))}function T(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function O(t,e,n){return t+(e-t)*n}function k(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t}function D(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function E(t,e){ju&&D(ju,e),ju=Fu.put(t,ju||e.slice())}function L(t,e){if(t){e=e||[];var n=Fu.get(t);if(n)return D(e,n);var i=(t+="").replace(/ /g,"").toLowerCase();if(i in Gu)return D(e,Gu[i]),E(t,e),e;if("#"!==i.charAt(0)){var r=i.indexOf("("),a=i.indexOf(")");if(-1!==r&&a+1===i.length){var o=i.substr(0,r),s=i.substr(r+1,a-(r+1)).split(","),l=1;switch(o){case"rgba":if(4!==s.length)return void k(e,0,0,0,1);l=P(s.pop());case"rgb":return 3!==s.length?void k(e,0,0,0,1):(k(e,I(s[0]),I(s[1]),I(s[2]),l),E(t,e),e);case"hsla":return 4!==s.length?void k(e,0,0,0,1):(s[3]=P(s[3]),N(s,e),E(t,e),e);case"hsl":return 3!==s.length?void k(e,0,0,0,1):(N(s,e),E(t,e),e);default:return}}k(e,0,0,0,1)}else{if(4===i.length)return(u=parseInt(i.substr(1),16))>=0&&u<=4095?(k(e,(3840&u)>>4|(3840&u)>>8,240&u|(240&u)>>4,15&u|(15&u)<<4,1),E(t,e),e):void k(e,0,0,0,1);if(7===i.length){var u=parseInt(i.substr(1),16);return u>=0&&u<=16777215?(k(e,(16711680&u)>>16,(65280&u)>>8,255&u,1),E(t,e),e):void k(e,0,0,0,1)}}}}function N(t,e){var n=(parseFloat(t[0])%360+360)%360/360,i=P(t[1]),r=P(t[2]),a=r<=.5?r*(i+1):r+i-r*i,o=2*r-a;return e=e||[],k(e,A(255*T(o,a,n+1/3)),A(255*T(o,a,n)),A(255*T(o,a,n-1/3)),1),4===t.length&&(e[3]=t[3]),e}function R(t,e,n){if(e&&e.length&&t>=0&&t<=1){n=n||[];var i=t*(e.length-1),r=Math.floor(i),a=Math.ceil(i),o=e[r],s=e[a],l=i-r;return n[0]=A(O(o[0],s[0],l)),n[1]=A(O(o[1],s[1],l)),n[2]=A(O(o[2],s[2],l)),n[3]=C(O(o[3],s[3],l)),n}}function B(t,e,n){if(e&&e.length&&t>=0&&t<=1){var i=t*(e.length-1),r=Math.floor(i),a=Math.ceil(i),o=L(e[r]),s=L(e[a]),l=i-r,u=z([A(O(o[0],s[0],l)),A(O(o[1],s[1],l)),A(O(o[2],s[2],l)),C(O(o[3],s[3],l))],"rgba");return n?{color:u,leftIndex:r,rightIndex:a,value:i}:u}}function z(t,e){if(t&&t.length){var n=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(n+=","+t[3]),e+"("+n+")"}}function V(t,e,n){return(e-t)*n+t}function G(t,e,n){return n>.5?e:t}function F(t,e,n,i,r){var a=t.length;if(1==r)for(s=0;s<a;s++)i[s]=V(t[s],e[s],n);else for(var o=a&&t[0].length,s=0;s<a;s++)for(var l=0;l<o;l++)i[s][l]=V(t[s][l],e[s][l],n)}function j(t,e,n){var i=t.length,r=e.length;if(i!==r)if(i>r)t.length=r;else for(o=i;o<r;o++)t.push(1===n?e[o]:Yu.call(e[o]));for(var a=t[0]&&t[0].length,o=0;o<t.length;o++)if(1===n)isNaN(t[o])&&(t[o]=e[o]);else for(var s=0;s<a;s++)isNaN(t[o][s])&&(t[o][s]=e[o][s])}function H(t,e,n,i,r,a,o,s,l){var u=t.length;if(1==l)for(h=0;h<u;h++)s[h]=W(t[h],e[h],n[h],i[h],r,a,o);else for(var c=t[0].length,h=0;h<u;h++)for(var d=0;d<c;d++)s[h][d]=W(t[h][d],e[h][d],n[h][d],i[h][d],r,a,o)}function W(t,e,n,i,r,a,o){var s=.5*(n-t),l=.5*(i-e);return(2*(e-n)+s+l)*o+(-3*(e-n)-2*s-l)*a+s*r+e}function Y(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}function X(t,e,n,i){n<0&&(t+=n,n=-n),i<0&&(e+=i,i=-i),this.x=t,this.y=e,this.width=n,this.height=i}function U(t,e,n,i){var r=e+1;if(r===n)return 1;if(i(t[r++],t[e])<0){for(;r<n&&i(t[r],t[r-1])<0;)r++;!function(t,e,n){for(n--;e<n;){var i=t[e];t[e++]=t[n],t[n--]=i}}(t,e,r)}else for(;r<n&&i(t[r],t[r-1])>=0;)r++;return r-e}function q(t,e,n,i,r){for(i===e&&i++;i<n;i++){for(var a,o=t[i],s=e,l=i;s<l;)r(o,t[a=s+l>>>1])<0?l=a:s=a+1;var u=i-s;switch(u){case 3:t[s+3]=t[s+2];case 2:t[s+2]=t[s+1];case 1:t[s+1]=t[s];break;default:for(;u>0;)t[s+u]=t[s+u-1],u--}t[s]=o}}function Z(t,e,n,i,r,a){var o=0,s=0,l=1;if(a(t,e[n+r])>0){for(s=i-r;l<s&&a(t,e[n+r+l])>0;)o=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s),o+=r,l+=r}else{for(s=r+1;l<s&&a(t,e[n+r-l])<=0;)o=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s);var u=o;o=r-l,l=r-u}for(o++;o<l;){var c=o+(l-o>>>1);a(t,e[n+c])>0?o=c+1:l=c}return l}function K(t,e,n,i,r,a){var o=0,s=0,l=1;if(a(t,e[n+r])<0){for(s=r+1;l<s&&a(t,e[n+r-l])<0;)o=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s);var u=o;o=r-l,l=r-u}else{for(s=i-r;l<s&&a(t,e[n+r+l])>=0;)o=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s),o+=r,l+=r}for(o++;o<l;){var c=o+(l-o>>>1);a(t,e[n+c])<0?l=c:o=c+1}return l}function $(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}function J(t,e,n){var i=du.createCanvas(),r=e.getWidth(),a=e.getHeight(),o=i.style;return o&&(o.position="absolute",o.left=0,o.top=0,o.width=r+"px",o.height=a+"px",i.setAttribute("data-zr-dom-id",t)),i.width=r*n,i.height=a*n,i}function Q(t){return t&&t.width&&t.height}function tt(t,e){var n=t+":"+(e=e||Wc);if(Gc[n])return Gc[n];for(var i=(t+"").split("\n"),r=0,a=0,o=i.length;a<o;a++)r=Math.max(st(i[a],e).width,r);return Fc>jc&&(Fc=0,Gc={}),Fc++,Gc[n]=r,r}function et(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function nt(t,e,n){return"middle"===n?t-=e/2:"bottom"===n&&(t-=e),t}function it(t,e,n,i,r){if(!e)return"";var a=(t+"").split("\n");r=rt(e,n,i,r);for(var o=0,s=a.length;o<s;o++)a[o]=at(a[o],r);return a.join("\n")}function rt(t,e,n,i){(i=Rc({},i)).font=e,n=Bc(n,"..."),i.maxIterations=Bc(i.maxIterations,2);var r=i.minChar=Bc(i.minChar,0);i.cnCharWidth=tt("国",e);var a=i.ascCharWidth=tt("a",e);i.placeholder=Bc(i.placeholder,"");for(var o=t=Math.max(0,t-1),s=0;s<r&&o>=a;s++)o-=a;var l=tt(n);return l>o&&(n="",l=0),o=t-l,i.ellipsis=n,i.ellipsisWidth=l,i.contentWidth=o,i.containerWidth=t,i}function at(t,e){var n=e.containerWidth,i=e.font,r=e.contentWidth;if(!n)return"";var a=tt(t,i);if(a<=n)return t;for(var o=0;;o++){if(a<=r||o>=e.maxIterations){t+=e.ellipsis;break}var s=0===o?function(t,e,n,i){for(var r=0,a=0,o=t.length;a<o&&r<e;a++){var s=t.charCodeAt(a);r+=0<=s&&s<=127?n:i}return a}(t,r,e.ascCharWidth,e.cnCharWidth):a>0?Math.floor(t.length*r/a):0;a=tt(t=t.substr(0,s),i)}return""===t&&(t=e.placeholder),t}function ot(t){return tt("国",t)}function st(t,e){return Yc.measureText(t,e)}function lt(t,e,n,i){null!=t&&(t+="");var r=ot(e),a=t?t.split("\n"):[],o=a.length*r,s=o;if(n&&(s+=n[0]+n[2]),t&&i){var l=i.outerHeight,u=i.outerWidth;if(null!=l&&s>l)t="",a=[];else if(null!=u)for(var c=rt(u-(n?n[1]+n[3]:0),e,i.ellipsis,{minChar:i.minChar,placeholder:i.placeholder}),h=0,d=a.length;h<d;h++)a[h]=at(a[h],c)}return{lines:a,height:o,outerHeight:s,lineHeight:r}}function ut(t,e){var n={lines:[],width:0,height:0};if(null!=t&&(t+=""),!t)return n;for(var i,r=Hc.lastIndex=0;null!=(i=Hc.exec(t));){var a=i.index;a>r&&ct(n,t.substring(r,a)),ct(n,i[2],i[1]),r=Hc.lastIndex}r<t.length&&ct(n,t.substring(r,t.length));var o=n.lines,s=0,l=0,u=[],c=e.textPadding,h=e.truncate,d=h&&h.outerWidth,f=h&&h.outerHeight;for(c&&(null!=d&&(d-=c[1]+c[3]),null!=f&&(f-=c[0]+c[2])),P=0;P<o.length;P++){for(var p=o[P],g=0,m=0,v=0;v<p.tokens.length;v++){var y=(T=p.tokens[v]).styleName&&e.rich[T.styleName]||{},x=T.textPadding=y.textPadding,_=T.font=y.font||e.font,b=T.textHeight=Bc(y.textHeight,ot(_));if(x&&(b+=x[0]+x[2]),T.height=b,T.lineHeight=zc(y.textLineHeight,e.textLineHeight,b),T.textAlign=y&&y.textAlign||e.textAlign,T.textVerticalAlign=y&&y.textVerticalAlign||"middle",null!=f&&s+T.lineHeight>f)return{lines:[],width:0,height:0};T.textWidth=tt(T.text,_);var w=y.textWidth,S=null==w||"auto"===w;if("string"==typeof w&&"%"===w.charAt(w.length-1))T.percentWidth=w,u.push(T),w=0;else{if(S){w=T.textWidth;var M=y.textBackgroundColor,A=M&&M.image;A&&(A=Lc.findExistImage(A),Lc.isImageReady(A)&&(w=Math.max(w,A.width*b/A.height)))}var C=x?x[1]+x[3]:0;w+=C;var I=null!=d?d-m:null;null!=I&&I<w&&(!S||I<C?(T.text="",T.textWidth=w=0):(T.text=it(T.text,I-C,_,h.ellipsis,{minChar:h.minChar}),T.textWidth=tt(T.text,_),w=T.textWidth+C))}m+=T.width=w,y&&(g=Math.max(g,T.lineHeight))}p.width=m,p.lineHeight=g,s+=g,l=Math.max(l,m)}n.outerWidth=n.width=Bc(e.textWidth,l),n.outerHeight=n.height=Bc(e.textHeight,s),c&&(n.outerWidth+=c[1]+c[3],n.outerHeight+=c[0]+c[2]);for(var P=0;P<u.length;P++){var T=u[P],O=T.percentWidth;T.width=parseInt(O,10)/100*l}return n}function ct(t,e,n){for(var i=""===e,r=e.split("\n"),a=t.lines,o=0;o<r.length;o++){var s=r[o],l={styleName:n,text:s,isLineHolder:!s&&!i};if(o)a.push({tokens:[l]});else{var u=(a[a.length-1]||(a[0]={tokens:[]})).tokens,c=u.length;1===c&&u[0].isLineHolder?u[0]=l:(s||!c||i)&&u.push(l)}}}function ht(t){if(t){t.font=Xc.makeFont(t);var e=t.textAlign;"middle"===e&&(e="center"),t.textAlign=null==e||th[e]?e:"left";var n=t.textVerticalAlign||t.textBaseline;"center"===n&&(n="middle"),t.textVerticalAlign=null==n||eh[n]?n:"top",t.textPadding&&(t.textPadding=$c(t.textPadding))}}function dt(t,e,n,i,r){if(n&&e.textRotation){var a=e.textOrigin;"center"===a?(i=n.width/2+n.x,r=n.height/2+n.y):a&&(i=a[0]+n.x,r=a[1]+n.y),t.translate(i,r),t.rotate(-e.textRotation),t.translate(-i,-r)}}function ft(t,e,n,i,r,a,o,s){var l=i.rich[n.styleName]||{},u=n.textVerticalAlign,c=a+r/2;"top"===u?c=a+n.height/2:"bottom"===u&&(c=a+r-n.height/2),!n.isLineHolder&&pt(l)&&gt(t,e,l,"right"===s?o-n.width:"center"===s?o-n.width/2:o,c-n.height/2,n.width,n.height);var h=n.textPadding;h&&(o=bt(o,s,h),c-=n.height/2-h[2]-n.textHeight/2),vt(e,"shadowBlur",Zc(l.textShadowBlur,i.textShadowBlur,0)),vt(e,"shadowColor",l.textShadowColor||i.textShadowColor||"transparent"),vt(e,"shadowOffsetX",Zc(l.textShadowOffsetX,i.textShadowOffsetX,0)),vt(e,"shadowOffsetY",Zc(l.textShadowOffsetY,i.textShadowOffsetY,0)),vt(e,"textAlign",s),vt(e,"textBaseline","middle"),vt(e,"font",n.font||Xc.DEFAULT_FONT);var d=yt(l.textStroke||i.textStroke,p),f=xt(l.textFill||i.textFill),p=qc(l.textStrokeWidth,i.textStrokeWidth);d&&(vt(e,"lineWidth",p),vt(e,"strokeStyle",d),e.strokeText(n.text,o,c)),f&&(vt(e,"fillStyle",f),e.fillText(n.text,o,c))}function pt(t){return t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor}function gt(t,e,n,i,r,a,o){var s=n.textBackgroundColor,l=n.textBorderWidth,u=n.textBorderColor,c=Jc(s);if(vt(e,"shadowBlur",n.textBoxShadowBlur||0),vt(e,"shadowColor",n.textBoxShadowColor||"transparent"),vt(e,"shadowOffsetX",n.textBoxShadowOffsetX||0),vt(e,"shadowOffsetY",n.textBoxShadowOffsetY||0),c||l&&u){e.beginPath();var h=n.textBorderRadius;h?Uc.buildPath(e,{x:i,y:r,width:a,height:o,r:h}):e.rect(i,r,a,o),e.closePath()}if(c)vt(e,"fillStyle",s),e.fill();else if(Qc(s)){var d=s.image;(d=Lc.createOrUpdateImage(d,null,t,function(t,e){e.image=t},s))&&Lc.isImageReady(d)&&e.drawImage(d,i,r,a,o)}l&&u&&(vt(e,"lineWidth",l),vt(e,"strokeStyle",u),e.stroke())}function mt(t,e,n){var i=e.x||0,r=e.y||0,a=e.textAlign,o=e.textVerticalAlign;if(n){var s=e.textPosition;if(s instanceof Array)i=n.x+_t(s[0],n.width),r=n.y+_t(s[1],n.height);else{var l=Xc.adjustTextPositionOnRect(s,n,e.textDistance);i=l.x,r=l.y,a=a||l.textAlign,o=o||l.textVerticalAlign}var u=e.textOffset;u&&(i+=u[0],r+=u[1])}return{baseX:i,baseY:r,textAlign:a,textVerticalAlign:o}}function vt(t,e,n){return t[e]=_c(t,e,n),t[e]}function yt(t,e){return null==t||e<=0||"transparent"===t||"none"===t?null:t.image||t.colorStops?"#000":t}function xt(t){return null==t||"none"===t?null:t.image||t.colorStops?"#000":t}function _t(t,e){return"string"==typeof t?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}function bt(t,e,n){return"right"===e?t-n[1]:"center"===e?t+n[3]/2-n[1]/2:t+n[3]}function wt(t){for(var e in t=t||{},sc.call(this,t),t)t.hasOwnProperty(e)&&"style"!==e&&(this[e]=t[e]);this.style=new Cc(t.style,this),this._rect=null,this.__clipPaths=[]}function St(t){oh.call(this,t)}function Mt(t){return parseInt(t,10)}function At(t,e,n,i){return n=n||{},i||!Jl.canvasSupported?Ct(t,e,n):Jl.browser.firefox&&null!=e.layerX&&e.layerX!==e.offsetX?(n.zrX=e.layerX,n.zrY=e.layerY):null!=e.offsetX?(n.zrX=e.offsetX,n.zrY=e.offsetY):Ct(t,e,n),n}function Ct(t,e,n){var i=function(t){return t.getBoundingClientRect?t.getBoundingClientRect():{left:0,top:0}}(t);n.zrX=e.clientX-i.left,n.zrY=e.clientY-i.top}function It(t){var e=t[1][0]-t[0][0],n=t[1][1]-t[0][1];return Math.sqrt(e*e+n*n)}function Pt(t){return"mousewheel"===t&&Jl.browser.firefox?"DOMMouseScroll":t}function Tt(t,e,n){var i=t._gestureMgr;"start"===n&&i.clear();var r=i.recognize(e,t.handler.findHover(e.zrX,e.zrY,null).target,t.dom);if("end"===n&&i.clear(),r){var a=r.type;e.gestureEvent=a,t.handler.dispatchToElement({target:r.target},a,r.event)}}function Ot(t){t._touching=!0,clearTimeout(t._touchTimer),t._touchTimer=setTimeout(function(){t._touching=!1},700)}function kt(t){var e=t.pointerType;return"pen"===e||"touch"===e}function Dt(t){function e(e,n){du.each(e,function(e){Sh(t,Pt(e),n._handlers[e])},n)}yu.call(this),this.dom=t,this._touching=!1,this._touchTimer,this._gestureMgr=new wh,this._handlers={},function(t){du.each(Ih,function(e){t._handlers[e]=du.bind(Oh[e],t)}),du.each(Th,function(e){t._handlers[e]=du.bind(Oh[e],t)}),du.each(Ch,function(e){t._handlers[e]=function(t,e){return function(){if(!e._touching)return t.apply(e,arguments)}}(Oh[e],t)})}(this),Jl.pointerEventsSupported?e(Th,this):(Jl.touchEventsSupported&&e(Ih,this),e(Ch,this))}function Et(t){return t instanceof Array?t:null==t?[]:[t]}function Lt(t){return Vh(t)&&t.id&&0===(t.id+"").indexOf("\0_ec_\0")}function Nt(t,e){return t&&t.hasOwnProperty(e)}function Rt(t){var e={main:"",sub:""};return t&&(t=t.split(Wh),e.main=t[0]||"",e.sub=t[1]||""),e}function Bt(t){return t>-id&&t<id}function zt(t){return t>id||t<-id}function Vt(t,e,n,i,r){var a=1-r;return a*a*(a*t+3*r*e)+r*r*(r*i+3*a*n)}function Gt(t,e,n,i){var r=1-i;return r*(r*t+2*i*e)+i*i*n}function Ft(t,e,n,i,r){for(var a=0,o=0,s=0,l=0,u=0,c=0;c<t.length;){var h=t[c++];switch(h===qd.M&&c>1&&(n||(a+=Xd(o,s,l,u,i,r))),1==c&&(l=o=t[c],u=s=t[c+1]),h){case qd.M:o=l=t[c++],s=u=t[c++];break;case qd.L:if(n){if(Bd.containStroke(o,s,t[c],t[c+1],e,i,r))return!0}else a+=Xd(o,s,t[c],t[c+1],i,r)||0;o=t[c++],s=t[c++];break;case qd.C:if(n){if(zd.containStroke(o,s,t[c++],t[c++],t[c++],t[c++],t[c],t[c+1],e,i,r))return!0}else a+=function(t,e,n,i,r,a,o,s,l,u){if(u>e&&u>i&&u>a&&u>s||u<e&&u<i&&u<a&&u<s)return 0;var c=cd.cubicRootAt(e,i,a,s,u,$d);if(0===c)return 0;for(var h,d,f=0,p=-1,g=0;g<c;g++){var m=$d[g],v=0===m||1===m?.5:1;cd.cubicAt(t,n,r,o,m)<l||(p<0&&(p=cd.cubicExtrema(e,i,a,s,Jd),Jd[1]<Jd[0]&&p>1&&function(){var t=Jd[0];Jd[0]=Jd[1],Jd[1]=t}(),h=cd.cubicAt(e,i,a,s,Jd[0]),p>1&&(d=cd.cubicAt(e,i,a,s,Jd[1]))),2==p?m<Jd[0]?f+=h<e?v:-v:m<Jd[1]?f+=d<h?v:-v:f+=s<d?v:-v:m<Jd[0]?f+=h<e?v:-v:f+=s<h?v:-v)}return f}(o,s,t[c++],t[c++],t[c++],t[c++],t[c],t[c+1],i,r)||0;o=t[c++],s=t[c++];break;case qd.Q:if(n){if(Gd.containStroke(o,s,t[c++],t[c++],t[c],t[c+1],e,i,r))return!0}else a+=function(t,e,n,i,r,a,o,s){if(s>e&&s>i&&s>a||s<e&&s<i&&s<a)return 0;var l=cd.quadraticRootAt(e,i,a,s,$d);if(0===l)return 0;var u=cd.quadraticExtremum(e,i,a);if(u>=0&&u<=1){for(var c=0,h=cd.quadraticAt(e,i,a,u),d=0;d<l;d++)f=0===$d[d]||1===$d[d]?.5:1,(p=cd.quadraticAt(t,n,r,$d[d]))<o||($d[d]<u?c+=h<e?f:-f:c+=a<h?f:-f);return c}var f=0===$d[0]||1===$d[0]?.5:1,p=cd.quadraticAt(t,n,r,$d[0]);return p<o?0:a<e?f:-f}(o,s,t[c++],t[c++],t[c],t[c+1],i,r)||0;o=t[c++],s=t[c++];break;case qd.A:var d=t[c++],f=t[c++],p=t[c++],g=t[c++],m=t[c++],v=t[c++],y=(t[c++],1-t[c++]),x=Math.cos(m)*p+d,_=Math.sin(m)*g+f;c>1?a+=Xd(o,s,x,_,i,r):(l=x,u=_);var b=(i-d)*g/p+d;if(n){if(Yd.containStroke(d,f,g,m,m+v,y,e,b,r))return!0}else a+=function(t,e,n,i,r,a,o,s){if((s-=e)>n||s<-n)return 0;u=Math.sqrt(n*n-s*s),$d[0]=-u,$d[1]=u;var l=Math.abs(i-r);if(l<1e-4)return 0;if(l%Zd<1e-4)return i=0,r=Zd,p=a?1:-1,o>=$d[0]+t&&o<=$d[1]+t?p:0;if(a){var u=i;i=Ud(r),r=Ud(u)}else i=Ud(i),r=Ud(r);i>r&&(r+=Zd);for(var c=0,h=0;h<2;h++){var d=$d[h];if(d+t>o){var f=Math.atan2(s,d),p=a?1:-1;f<0&&(f=Zd+f),(f>=i&&f<=r||f+Zd>=i&&f+Zd<=r)&&(f>Math.PI/2&&f<1.5*Math.PI&&(p=-p),c+=p)}}return c}(d,f,g,m,m+v,y,b,r);o=Math.cos(m+v)*p+d,s=Math.sin(m+v)*g+f;break;case qd.R:l=o=t[c++],u=s=t[c++];x=l+t[c++],_=u+t[c++];if(n){if(Bd.containStroke(l,u,x,u,e,i,r)||Bd.containStroke(x,u,x,_,e,i,r)||Bd.containStroke(x,_,l,_,e,i,r)||Bd.containStroke(l,_,l,u,e,i,r))return!0}else a+=Xd(x,u,x,_,i,r),a+=Xd(l,_,l,u,i,r);break;case qd.Z:if(n){if(Bd.containStroke(o,s,l,u,e,i,r))return!0}else a+=Xd(o,s,l,u,i,r);o=l,s=u}}return n||function(t,e){return Math.abs(t-e)<Kd}(s,u)||(a+=Xd(o,s,l,u,i,r)||0),0!==a}function jt(t){oh.call(this,t),this.path=null}function Ht(t,e,n,i,r,a,o,s,l,u,c){var h=l*(gf/180),d=pf(h)*(t-n)/2+ff(h)*(e-i)/2,f=-1*ff(h)*(t-n)/2+pf(h)*(e-i)/2,p=d*d/(o*o)+f*f/(s*s);p>1&&(o*=df(p),s*=df(p));var g=(r===a?-1:1)*df((o*o*(s*s)-o*o*(f*f)-s*s*(d*d))/(o*o*(f*f)+s*s*(d*d)))||0,m=g*o*f/s,v=g*-s*d/o,y=(t+n)/2+pf(h)*m-ff(h)*v,x=(e+i)/2+ff(h)*m+pf(h)*v,_=yf([1,0],[(d-m)/o,(f-v)/s]),b=[(d-m)/o,(f-v)/s],w=[(-1*d-m)/o,(-1*f-v)/s],S=yf(b,w);vf(b,w)<=-1&&(S=gf),vf(b,w)>=1&&(S=0),0===a&&S>0&&(S-=2*gf),1===a&&S<0&&(S+=2*gf),c.addData(u,y,x,o,s,_,S,h,a)}function Wt(t,e){var n=function(t){if(!t)return[];var e,n=t.replace(/-/g," -").replace(/  /g," ").replace(/ /g,",").replace(/,,/g,",");for(e=0;e<hf.length;e++)n=n.replace(new RegExp(hf[e],"g"),"|"+hf[e]);var i,r=n.split("|"),a=0,o=0,s=new Rd,l=Rd.CMD;for(e=1;e<r.length;e++){var u,c=r[e],h=c.charAt(0),d=0,f=c.slice(1).replace(/e,-/g,"e-").split(",");f.length>0&&""===f[0]&&f.shift();for(var p=0;p<f.length;p++)f[p]=parseFloat(f[p]);for(;d<f.length&&!isNaN(f[d])&&!isNaN(f[0]);){var g,m,v,y,x,_,b,w=a,S=o;switch(h){case"l":a+=f[d++],o+=f[d++],u=l.L,s.addData(u,a,o);break;case"L":a=f[d++],o=f[d++],u=l.L,s.addData(u,a,o);break;case"m":a+=f[d++],o+=f[d++],u=l.M,s.addData(u,a,o),h="l";break;case"M":a=f[d++],o=f[d++],u=l.M,s.addData(u,a,o),h="L";break;case"h":a+=f[d++],u=l.L,s.addData(u,a,o);break;case"H":a=f[d++],u=l.L,s.addData(u,a,o);break;case"v":o+=f[d++],u=l.L,s.addData(u,a,o);break;case"V":o=f[d++],u=l.L,s.addData(u,a,o);break;case"C":u=l.C,s.addData(u,f[d++],f[d++],f[d++],f[d++],f[d++],f[d++]),a=f[d-2],o=f[d-1];break;case"c":u=l.C,s.addData(u,f[d++]+a,f[d++]+o,f[d++]+a,f[d++]+o,f[d++]+a,f[d++]+o),a+=f[d-2],o+=f[d-1];break;case"S":g=a,m=o;var M=s.len(),A=s.data;i===l.C&&(g+=a-A[M-4],m+=o-A[M-3]),u=l.C,w=f[d++],S=f[d++],a=f[d++],o=f[d++],s.addData(u,g,m,w,S,a,o);break;case"s":g=a,m=o;M=s.len(),A=s.data;i===l.C&&(g+=a-A[M-4],m+=o-A[M-3]),u=l.C,w=a+f[d++],S=o+f[d++],a+=f[d++],o+=f[d++],s.addData(u,g,m,w,S,a,o);break;case"Q":w=f[d++],S=f[d++],a=f[d++],o=f[d++],u=l.Q,s.addData(u,w,S,a,o);break;case"q":w=f[d++]+a,S=f[d++]+o,a+=f[d++],o+=f[d++],u=l.Q,s.addData(u,w,S,a,o);break;case"T":g=a,m=o;M=s.len(),A=s.data;i===l.Q&&(g+=a-A[M-4],m+=o-A[M-3]),a=f[d++],o=f[d++],u=l.Q,s.addData(u,g,m,a,o);break;case"t":g=a,m=o;M=s.len(),A=s.data;i===l.Q&&(g+=a-A[M-4],m+=o-A[M-3]),a+=f[d++],o+=f[d++],u=l.Q,s.addData(u,g,m,a,o);break;case"A":v=f[d++],y=f[d++],x=f[d++],_=f[d++],b=f[d++],Ht(w=a,S=o,a=f[d++],o=f[d++],_,b,v,y,x,u=l.A,s);break;case"a":v=f[d++],y=f[d++],x=f[d++],_=f[d++],b=f[d++],Ht(w=a,S=o,a+=f[d++],o+=f[d++],_,b,v,y,x,u=l.A,s)}}"z"!==h&&"Z"!==h||(u=l.Z,s.addData(u)),i=u}return s.toStatic(),s}(t);return e=e||{},e.buildPath=function(t){if(t.setData)t.setData(n.data),(e=t.getContext())&&t.rebuildPath(e);else{var e=t;n.rebuildPath(e)}},e.applyTransform=function(t){cf(n,t),this.dirty(!0)},e}function Yt(t,e,n,i,r,a,o){var s=.5*(n-t),l=.5*(i-e);return(2*(e-n)+s+l)*o+(-3*(e-n)-2*s-l)*a+s*r+e}function Xt(t,e,n){var i=t.cpx2,r=t.cpy2;return null===i||null===r?[(n?Uf:Yf)(t.x1,t.cpx1,t.cpx2,t.x2,e),(n?Uf:Yf)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(n?Xf:Wf)(t.x1,t.cpx1,t.x2,e),(n?Xf:Wf)(t.y1,t.cpy1,t.y2,e)]}function Ut(t){oh.call(this,t),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}function qt(t,e,n,i){var r=xf.createFromString(t,e),a=r.getBoundingRect();return n&&("center"===i&&(n=Zt(n,a)),Kt(r,n)),r}function Zt(t,e){var n,i=e.width/e.height,r=t.height*i;return n=r<=t.width?t.height:(r=t.width)/i,{x:t.x+t.width/2-r/2,y:t.y+t.height/2-n/2,width:r,height:n}}function Kt(t,e){if(t.applyTransform){var n=t.getBoundingRect().calculateTransform(e);t.applyTransform(n)}}function $t(t,e,n){var i=Mp(2*t);return(i+Mp(e))%2==0?i/2:(i+(n?1:-1))/2}function Jt(t){return null!=t&&"none"!=t}function Qt(t){return"string"==typeof t?Hu.lift(t,-.1):t}function te(t){if(t.__hoverStlDirty){var e=t.style.stroke,n=t.style.fill,i=t.__hoverStl;i.fill=i.fill||(Jt(n)?Qt(n):null),i.stroke=i.stroke||(Jt(e)?Qt(e):null);var r={};for(var a in i)null!=i[a]&&(r[a]=t.style[a]);t.__normalStl=r,t.__hoverStlDirty=!1}}function ee(t){if(!t.__isHover){if(te(t),t.useHoverLayer)t.__zr&&t.__zr.addHover(t,t.__hoverStl);else{var e=t.style,n=e.insideRollbackOpt;n&&function(t){var e=t.insideRollback;e&&(t.textFill=e.textFill,t.textStroke=e.textStroke,t.textStrokeWidth=e.textStrokeWidth)}(e),e.extendFrom(t.__hoverStl),n&&(ce(e,e.insideOriginalTextPosition,n),null==e.textFill&&(e.textFill=n.autoColor)),t.dirty(!1),t.z2+=1}t.__isHover=!0}}function ne(t){if(t.__isHover){var e=t.__normalStl;t.useHoverLayer?t.__zr&&t.__zr.removeHover(t):(e&&t.setStyle(e),t.z2-=1),t.__isHover=!1}}function ie(t){"group"===t.type?t.traverse(function(t){"group"!==t.type&&ee(t)}):ee(t)}function re(t){"group"===t.type?t.traverse(function(t){"group"!==t.type&&ne(t)}):ne(t)}function ae(t,e){t.__hoverStl=t.hoverStyle||e||{},t.__hoverStlDirty=!0,t.__isHover&&te(t)}function oe(t,e,n,i,r){return se(t,e,i,r),n&&du.extend(t,n),t.host&&t.host.dirty&&t.host.dirty(!1),t}function se(t,e,n,i){if((n=n||Ip).isRectText){var r=e.getShallow("position")||(i?null:"inside");"outside"===r&&(r="top"),t.textPosition=r,t.textOffset=e.getShallow("offset");var a=e.getShallow("rotate");null!=a&&(a*=Math.PI/180),t.textRotation=a,t.textDistance=du.retrieve2(e.getShallow("distance"),i?null:5)}var o,s=e.ecModel,l=s&&s.option.textStyle,u=function(t){for(var e;t&&t!==t.ecModel;){var n=(t.option||Ip).rich;if(n)for(var i in e=e||{},n)n.hasOwnProperty(i)&&(e[i]=1);t=t.parentModel}return e}(e);if(u)for(var c in o={},u)if(u.hasOwnProperty(c)){var h=e.getModel(["rich",c]);le(o[c]={},h,l,n,i)}return t.rich=o,le(t,e,l,n,i,!0),n.forceRich&&!n.textStyle&&(n.textStyle={}),t}function le(t,e,n,i,r,a){if(n=!r&&n||Ip,t.textFill=ue(e.getShallow("color"),i)||n.color,t.textStroke=ue(e.getShallow("textBorderColor"),i)||n.textBorderColor,t.textStrokeWidth=du.retrieve2(e.getShallow("textBorderWidth"),n.textBorderWidth),!r){if(a){var o=t.textPosition;t.insideRollback=ce(t,o,i),t.insideOriginalTextPosition=o,t.insideRollbackOpt=i}null==t.textFill&&(t.textFill=i.autoColor)}t.fontStyle=e.getShallow("fontStyle")||n.fontStyle,t.fontWeight=e.getShallow("fontWeight")||n.fontWeight,t.fontSize=e.getShallow("fontSize")||n.fontSize,t.fontFamily=e.getShallow("fontFamily")||n.fontFamily,t.textAlign=e.getShallow("align"),t.textVerticalAlign=e.getShallow("verticalAlign")||e.getShallow("baseline"),t.textLineHeight=e.getShallow("lineHeight"),t.textWidth=e.getShallow("width"),t.textHeight=e.getShallow("height"),t.textTag=e.getShallow("tag"),a&&i.disableBox||(t.textBackgroundColor=ue(e.getShallow("backgroundColor"),i),t.textPadding=e.getShallow("padding"),t.textBorderColor=ue(e.getShallow("borderColor"),i),t.textBorderWidth=e.getShallow("borderWidth"),t.textBorderRadius=e.getShallow("borderRadius"),t.textBoxShadowColor=e.getShallow("shadowColor"),t.textBoxShadowBlur=e.getShallow("shadowBlur"),t.textBoxShadowOffsetX=e.getShallow("shadowOffsetX"),t.textBoxShadowOffsetY=e.getShallow("shadowOffsetY")),t.textShadowColor=e.getShallow("textShadowColor")||n.textShadowColor,t.textShadowBlur=e.getShallow("textShadowBlur")||n.textShadowBlur,t.textShadowOffsetX=e.getShallow("textShadowOffsetX")||n.textShadowOffsetX,t.textShadowOffsetY=e.getShallow("textShadowOffsetY")||n.textShadowOffsetY}function ue(t,e){return"auto"!==t?t:e&&e.autoColor?e.autoColor:null}function ce(t,e,n){var i,r=n.useInsideStyle;return null==t.textFill&&!1!==r&&(!0===r||n.isRectText&&e&&"string"==typeof e&&e.indexOf("inside")>=0)&&(i={textFill:null,textStroke:t.textStroke,textStrokeWidth:t.textStrokeWidth},t.textFill="#fff",null==t.textStroke&&(t.textStroke=n.autoColor,null==t.textStrokeWidth&&(t.textStrokeWidth=2))),i}function he(t,e,n,i,r,a){if("function"==typeof r&&(a=r,r=null),i&&i.isAnimationEnabled()){var o=t?"Update":"",s=i.getShallow("animationDuration"+o),l=i.getShallow("animationEasing"+o),u=i.getShallow("animationDelay"+o);"function"==typeof u&&(u=u(r,i.getAnimationDelayParams?i.getAnimationDelayParams(e,r):null)),"function"==typeof s&&(s=s(r)),s>0?e.animateTo(n,s,u||0,l,a,!!a):(e.stopAnimation(),e.attr(n),a&&a())}else e.stopAnimation(),e.attr(n),a&&a()}function de(t,e,n,i,r){he(!0,t,e,n,i,r)}function fe(t,e,n){return e&&!du.isArrayLike(e)&&(e=Ou.getLocalTransform(e)),n&&(e=Mu.invert([],e)),pu.applyTransform([],t,e)}function pe(t,e,n){this.parentModel=e,this.ecModel=n,this.option=t}function ge(t,e,n){for(var i=0;i<e.length&&(!e[i]||null!=(t=t&&"object"==typeof t?t[e[i]]:null));i++);return null==t&&n&&(t=n.get(e)),t}function me(t,e){var n=Bp(t).getParent;return n?n.call(t,e):t.parentModel}function ve(t){return Math.floor(Math.log(t)/Math.LN10)}function ye(t){return null==t?"":(t+"").replace(Yp,function(t,e){return Xp[e]})}function xe(t,e){return t+="","0000".substr(0,e-t.length)+t}function _e(t,e,n,i,r){var a=0,o=0;null==i&&(i=1/0),null==r&&(r=1/0);var s=0;e.eachChild(function(l,u){var c,h,d=l.position,f=l.getBoundingRect(),p=e.childAt(u+1),g=p&&p.getBoundingRect();if("horizontal"===t){var m=f.width+(g?-g.x+f.x:0);(c=a+m)>i||l.newline?(a=0,c=m,o+=s+n,s=f.height):s=Math.max(s,f.height)}else{var v=f.height+(g?-g.y+f.y:0);(h=o+v)>r||l.newline?(a+=s+n,o=0,h=v,s=f.width):s=Math.max(s,f.width)}l.newline||(d[0]=a,d[1]=o,"horizontal"===t?a=c+n:o=h+n)})}function be(t,e,n){n=Zp.normalizeCssArray(n||0);var i=e.width,r=e.height,a=Kp(t.left,i),o=Kp(t.top,r),s=Kp(t.right,i),l=Kp(t.bottom,r),u=Kp(t.width,i),c=Kp(t.height,r),h=n[2]+n[0],d=n[1]+n[3],f=t.aspect;switch(isNaN(u)&&(u=i-s-d-a),isNaN(c)&&(c=r-l-h-o),null!=f&&(isNaN(u)&&isNaN(c)&&(f>i/r?u=.8*i:c=.8*r),isNaN(u)&&(u=f*c),isNaN(c)&&(c=u/f)),isNaN(a)&&(a=i-s-u-d),isNaN(o)&&(o=r-l-c-h),t.left||t.right){case"center":a=i/2-u/2-n[3];break;case"right":a=i-u-d}switch(t.top||t.bottom){case"middle":case"center":o=r/2-c/2-n[0];break;case"bottom":o=r-c-h}a=a||0,o=o||0,isNaN(u)&&(u=i-d-a-(s||0)),isNaN(c)&&(c=r-h-o-(l||0));var p=new hc(a+n[3],o+n[0],u,c);return p.margin=n,p}function we(t,e){return e&&t&&$p(Jp,function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t}function Se(t){return"category"===t.get("type")}function Me(t){this.fromDataset=t.fromDataset,this.data=t.data||(t.sourceFormat===Pg?{}:[]),this.sourceFormat=t.sourceFormat||Cg,this.seriesLayoutBy=t.seriesLayoutBy||Ag,this.dimensionsDefine=t.dimensionsDefine,this.encodeDefine=t.encodeDefine&&bg(t.encodeDefine),this.startIndex=t.startIndex||0,this.dimensionsDetectCount=t.dimensionsDetectCount}function Ae(t){if(t){var e=Eg();return Ng(t,function(t,n){if(null==(t=Fg({},zg(t)?t:{name:t})).name)return t;t.name+="",null==t.displayName&&(t.displayName=t.name);var i=e.get(t.name);return i?t.name+="-"+i.count++:e.set(t.name,{count:1}),t})}}function Ce(t,e,n,i){if(null==i&&(i=1/0),e===qg)for(a=0;a<n.length&&a<i;a++)t(n[a]?n[a][0]:null,a);else for(var r=n[0]||[],a=0;a<r.length&&a<i;a++)t(r[a],a)}function Ie(t,e,n,i,r,a){function o(t){return(null==t||!isFinite(t)||""===t)&&(!(!Bg(t)||"-"===t)||void 0)}var s,l;if(Vg(t))return!1;if(i&&(l=i[a],l=zg(l)?l.name:l),e===Hg)if(n===qg){for(var u=t[a],c=0;c<(u||[]).length&&c<5;c++)if(null!=(s=o(u[r+c])))return s}else for(c=0;c<t.length&&c<5;c++){var h=t[r+c];if(h&&null!=(s=o(h[a])))return s}else if(e===Wg){if(!l)return;for(c=0;c<t.length&&c<5;c++)if((d=t[c])&&null!=(s=o(d[l])))return s}else if(e===Yg){if(!l)return;if(!(u=t[l])||Vg(u))return!1;for(c=0;c<u.length&&c<5;c++)if(null!=(s=o(u[c])))return s}else if(e===jg)for(c=0;c<t.length&&c<5;c++){var d=t[c],f=kg(d);if(!Rg(f))return!1;if(null!=(s=o(f[a])))return s}return!1}function Pe(t,e){t._seriesIndicesMap=rm(t._seriesIndices=Qg(e,function(t){return t.componentIndex})||[])}function Te(t,e){return e.hasOwnProperty("subType")?Jg(t,function(t){return t.subType===e.subType}):t}function Oe(t){}function ke(){this._coordinateSystems=[]}function De(t){this._api=t,this._timelineOptions=[],this._mediaList=[],this._mediaDefault,this._currentMediaIndices=[],this._optionBackup,this._newBaseOption}function Ee(t){var e=t&&t.itemStyle;if(e)for(var n=0,i=Cm.length;n<i;n++){var r=Cm[n],a=e.normal,o=e.emphasis;a&&a[r]&&(t[r]=t[r]||{},t[r].normal?du.merge(t[r].normal,a[r]):t[r].normal=a[r],a[r]=null),o&&o[r]&&(t[r]=t[r]||{},t[r].emphasis?du.merge(t[r].emphasis,o[r]):t[r].emphasis=o[r],o[r]=null)}}function Le(t,e,n){if(t&&t[e]&&(t[e].normal||t[e].emphasis)){var i=t[e].normal,r=t[e].emphasis;i&&(n?(t[e].normal=t[e].emphasis=null,du.defaults(t[e],i)):t[e]=i),r&&(t.emphasis=t.emphasis||{},t.emphasis[e]=r)}}function Ne(t){Le(t,"itemStyle"),Le(t,"lineStyle"),Le(t,"areaStyle"),Le(t,"label"),Le(t,"labelLine"),Le(t,"upperLabel"),Le(t,"edgeLabel")}function Re(t,e){var n=Am(t)&&t[e],i=Am(n)&&n.textStyle;if(i)for(var r=0,a=Hh.TEXT_STYLE_OPTIONS.length;r<a;r++)e=Hh.TEXT_STYLE_OPTIONS[r],i.hasOwnProperty(e)&&(n[e]=i[e])}function Be(t){t&&(Ne(t),Re(t,"label"),t.emphasis&&Re(t.emphasis,"label"))}function ze(t){return du.isArray(t)?t:t?[t]:[]}function Ve(t){return(du.isArray(t)?t[0]:t)||{}}function Ge(t){Pm(Dm,function(e){e[0]in t&&!(e[1]in t)&&(t[e[1]]=t[e[0]])})}function Fe(t,e){Tg.isInstance(t)||(t=Tg.seriesDataToSource(t)),this._source=t;var n=this._data=t.data,i=t.sourceFormat;i===Wm&&(this._offset=0,this._dimSize=e,this._data=n);var r=Zm[i===Ym?i+"_"+t.seriesLayoutBy:i];zm(this,r)}function je(){return this._data.length}function He(t){return this._data[t]}function We(t){for(var e=0;e<t.length;e++)this._data.push(t[e])}function Ye(t,e,n,i){return null!=n?t[n]:t}function Xe(t,e,n,i){return Ue(t[i],this._dimensionInfos[e])}function Ue(t,e){var n=e&&e.type;if("ordinal"===n){var i=e&&e.ordinalMeta;return i?i.parseAndCollect(t):t}return"time"===n&&"number"!=typeof t&&null!=t&&"-"!==t&&(t=+Hm(t)),null==t||""===t?NaN:+t}function qe(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0,this.context}function Ze(t,e,n,i,r,a){av.reset(n,i,r,a),t._callingProgress=e,t._callingProgress({start:n,end:i,count:i-n,next:av.next},t.context)}function Ke(t){var e=t.name;Hh.isNameSpecified(t)||(t.name=function(t){var e=t.getRawData(),n=e.mapDimension("seriesName",!0),i=[];return du.each(n,function(t){var n=e.getDimensionInfo(t);n.displayName&&i.push(n.displayName)}),i.join(" ")}(t)||e)}function $e(t,e){du.each(t.CHANGABLE_METHODS,function(n){t.wrapMethod(n,du.curry(function(t){var e=Je(t);e&&e.setOutputEnd(this.count())},e))})}function Je(t){var e=(t.ecModel||{}).scheduler,n=e&&e.getPipeline(t.uid);if(n){var i=n.currentTask;if(i){var r=i.agentStubMap;r&&(i=r.get(t.uid))}return i}}function Qe(){this.group=new fc,this.uid=Fp.getUID("viewChart"),this.renderTask=Cv({plan:function(t){return Pv(t.model)},reset:function(t){var e=t.model,n=t.ecModel,i=t.api,r=t.payload,a=e.pipelineContext.progressiveRender,o=t.view,s=r&&Iv(r).updateMethod,l=a?"incrementalPrepareRender":s&&o[s]?s:"render";return"render"!==l&&o[l](e,n,i,r),Ov[l]}}),this.renderTask.context={view:this}}function tn(t,e){if(t&&(t.trigger(e),"group"===t.type))for(var n=0;n<t.childCount();n++)tn(t.childAt(n),e)}function en(t,e,n){var i=Hh.queryDataIndex(t,e);null!=i?Av(Hh.normalizeToArray(i),function(e){tn(t.getItemGraphicEl(e),n)}):t.eachItemGraphicEl(function(t){tn(t,n)})}function nn(t,e,n){function i(){c=(new Date).getTime(),h=null,t.apply(o,s||[])}var r,a,o,s,l,u=0,c=0,h=null;e=e||0;var d=function(){r=(new Date).getTime(),o=this,s=arguments;var t=l||e,d=l||n;l=null,a=r-(d?u:c)-t,clearTimeout(h),d?h=setTimeout(i,t):a>=0?i():h=setTimeout(i,-a),u=r};return d.clear=function(){h&&(clearTimeout(h),h=null)},d.debounceNextCall=function(t){l=t},d}function rn(t,e,n,i){this.ecInstance=t,this.api=e,this.unfinished;n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice();this._allHandlers=n.concat(i),this._stageTaskMap=Yv()}function an(t,e,n,i,r){function a(t,e){return t.setDirty&&(!t.dirtyMap||t.dirtyMap.get(e.__pipeline.id))}var o;r=r||{},jv(e,function(e,s){if(!r.visualType||r.visualType===e.visualType){var l=t._stageTaskMap.get(e.uid),u=l.seriesTaskMap,c=l.overallTask;if(c){var h,d=c.agentStubMap;d.each(function(t){a(r,t)&&(t.dirty(),h=!0)}),h&&c.dirty(),$v(c,i);var f=t.getPerformArgs(c,r.block);d.each(function(t){t.perform(f)}),o|=c.perform(f)}else u&&u.each(function(s,l){a(r,s)&&s.dirty();var u=t.getPerformArgs(s,r.block);u.skip=!e.performRawSeries&&n.isSeriesFiltered(s.context.model),$v(s,i),o|=s.perform(u)})}}),t.unfinished|=o}function on(t){return function(e,n){var i=n.data,r=n.resetDefines[t];if(r&&r.dataEach)for(var a=e.start;a<e.end;a++)r.dataEach(i,a);else r&&r.progress&&r.progress(e,i)}}function sn(t,e,n){var i=e.uid,r=t._pipelineMap.get(i);!r.head&&(r.head=n),r.tail&&r.tail.pipe(n),r.tail=n,n.__idxInPipeline=r.count++,n.__pipeline=r}function ln(t,e){for(var n in e.prototype)t[n]=Xv}function un(t){return t}function cn(t,e,n,i,r){this._old=t,this._new=e,this._oldKeyGetter=n||un,this._newKeyGetter=i||un,this.context=r}function hn(t,e,n,i,r){for(var a=0;a<t.length;a++){var o="_ec_"+r[i](t[a],a),s=e[o];null==s?(n.push(o),e[o]=a):(s.length||(e[o]=s=[s]),s.push(a))}}function dn(t){return t._rawCount>65535?by:wy}function fn(t,e){du.each(Sy.concat(e.__wrappedMethods||[]),function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t.__wrappedMethods=e.__wrappedMethods,du.each(My,function(n){t[n]=du.clone(e[n])}),t._calculationInfo=du.extend(e._calculationInfo)}function pn(t,e,n){var i;if(null!=e){var r=t._chunkSize,a=Math.floor(n/r),o=n%r,s=t.dimensions[e],l=t._storage[s][a];if(l){i=l[o];var u=t._dimensionInfos[s].ordinalMeta;u&&u.categories.length&&(i=u.categories[i])}}return i}function gn(t){return t}function mn(t){return t<this._count&&t>=0?this._indices[t]:-1}function vn(t,e){var n=t._idList[e];return null==n&&(n=pn(t,t._idDimIdx,e)),null==n&&(n=xy+e),n}function yn(t){return du.isArray(t)||(t=[t]),t}function xn(t,e){var n=t.dimensions,i=new Ay(du.map(n,t.getDimensionInfo,t),t.hostModel);fn(i,t);for(var r=i._storage={},a=t._storage,o=0;o<n.length;o++){var s=n[o];a[s]&&(du.indexOf(e,s)>=0?(r[s]=function(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=function(t){var e=t.constructor;return e===Array?t.slice():new e(t)}(t[n]);return e}(a[s]),i._rawExtent[s]=_n(),i._extent[s]=null):r[s]=a[s])}return i}function _n(){return[1/0,-1/0]}function bn(t,e,n){if(n||null!=e.get(t)){for(var i=0;null!=e.get(t+i);)i++;t+=i}return e.set(t,!0),t}function wn(t,e){return!!e&&e===t.getCalculationInfo("stackedDimension")}function Sn(t){this._setting=t||{},this._extent=[1/0,-1/0],this._interval=0,this.init&&this.init.apply(this,arguments)}function Mn(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this._map}function An(t){return t._map||(t._map=Ky(t.categories))}function Cn(t){return Wp.getPrecisionSafe(t)+2}function In(t,e,n){t[e]=Math.max(Math.min(t[e],n[1]),n[0])}function Pn(t,e){!isFinite(t[0])&&(t[0]=e[0]),!isFinite(t[1])&&(t[1]=e[1]),In(t,0,e),In(t,1,e),t[0]>t[1]&&(t[0]=t[1])}function Tn(t){return t.get("stack")||hx+t.seriesIndex}function On(t){return t.dim+t.index}function kn(t,e){var n=[];return e.eachSeriesByType(t,function(t){Nn(t)&&!Rn(t)&&n.push(t)}),n}function Dn(t){var e=[];return du.each(t,function(t){var n=t.getData(),i=t.coordinateSystem.getBaseAxis(),r=i.getExtent(),a="category"===i.type?i.getBandWidth():Math.abs(r[1]-r[0])/n.count(),o=ux(t.get("barWidth"),a),s=ux(t.get("barMaxWidth"),a),l=t.get("barGap"),u=t.get("barCategoryGap");e.push({bandWidth:a,barWidth:o,barMaxWidth:s,barGap:l,barCategoryGap:u,axisKey:On(i),stackId:Tn(t)})}),En(e)}function En(t){var e={};du.each(t,function(t,n){var i=t.axisKey,r=t.bandWidth,a=e[i]||{bandWidth:r,remainedWidth:r,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},o=a.stacks;e[i]=a;var s=t.stackId;o[s]||a.autoWidthCount++,o[s]=o[s]||{width:0,maxWidth:0};var l=t.barWidth;l&&!o[s].width&&(o[s].width=l,l=Math.min(a.remainedWidth,l),a.remainedWidth-=l);var u=t.barMaxWidth;u&&(o[s].maxWidth=u);var c=t.barGap;null!=c&&(a.gap=c);var h=t.barCategoryGap;null!=h&&(a.categoryGap=h)});var n={};return du.each(e,function(t,e){n[e]={};var i=t.stacks,r=t.bandWidth,a=ux(t.categoryGap,r),o=ux(t.gap,1),s=t.remainedWidth,l=t.autoWidthCount,u=(s-a)/(l+(l-1)*o);u=Math.max(u,0),du.each(i,function(t,e){var n=t.maxWidth;n&&n<u&&(n=Math.min(n,s),t.width&&(n=Math.min(n,t.width)),s-=n,t.width=n,l--)}),u=(s-a)/(l+(l-1)*o),u=Math.max(u,0);var c,h=0;du.each(i,function(t,e){t.width||(t.width=u),c=t,h+=t.width*(1+o)}),c&&(h-=c.width*o);var d=-h/2;du.each(i,function(t,i){n[e][i]=n[e][i]||{offset:d,width:t.width},d+=t.width*(1+o)})}),n}function Ln(t,e,n){if(t&&e){var i=t[On(e)];return null!=i&&null!=n&&(i=i[Tn(n)]),i}}function Nn(t){return t.coordinateSystem&&"cartesian2d"===t.coordinateSystem.type}function Rn(t){return t.pipelineContext&&t.pipelineContext.large}function Bn(t,e,n){return du.indexOf(t.getAxesOnZeroOf(),e)>=0||n?e.toGlobalCoord(e.dataToCoord(0)):e.getGlobalExtent()[0]}function zn(t,e){return Sx(t,bx(e))}function Vn(t,e){var n,i,r,a=t.type,o=e.getMin(),s=e.getMax(),l=null!=o,u=null!=s,c=t.getExtent();"ordinal"===a?n=e.getCategories().length:(i=e.get("boundaryGap"),du.isArray(i)||(i=[i||0,i||0]),"boolean"==typeof i[0]&&(i=[0,0]),i[0]=Wp.parsePercent(i[0],1),i[1]=Wp.parsePercent(i[1],1),r=c[1]-c[0]||Math.abs(c[0])),null==o&&(o="ordinal"===a?n?0:NaN:c[0]-i[0]*r),null==s&&(s="ordinal"===a?n?n-1:NaN:c[1]+i[1]*r),"dataMin"===o?o=c[0]:"function"==typeof o&&(o=o({min:c[0],max:c[1]})),"dataMax"===s?s=c[1]:"function"==typeof s&&(s=s({min:c[0],max:c[1]})),(null==o||!isFinite(o))&&(o=NaN),(null==s||!isFinite(s))&&(s=NaN),t.setBlank(du.eqNaN(o)||du.eqNaN(s)||"ordinal"===a&&!t.getOrdinalMeta().categories.length),e.getNeedCrossZero()&&(o>0&&s>0&&!l&&(o=0),o<0&&s<0&&!u&&(s=0));var h=e.ecModel;if(h&&"time"===a){var d,f=Tx("bar",h);if(du.each(f,function(t){d|=t.getBaseAxis()===e.axis}),d){var p=Ox(f),g=function(t,e,n,i){var r=n.axis.getExtent(),a=r[1]-r[0],o=kx(i,n.axis);if(void 0===o)return{min:t,max:e};var s=1/0;du.each(o,function(t){s=Math.min(t.offset,s)});var l=-1/0;du.each(o,function(t){l=Math.max(t.offset+t.width,l)}),s=Math.abs(s),l=Math.abs(l);var u=s+l,c=e-t,h=c/(1-(s+l)/a)-c;return e+=h*(l/u),t-=h*(s/u),{min:t,max:e}}(o,s,e,p);o=g.min,s=g.max}}return[o,s]}function Gn(t){var e=t.getLabelModel().get("formatter"),n="category"===t.type?t.scale.getExtent()[0]:null;return"string"==typeof e?e=function(t){return function(e){return t.replace("{value}",null!=e?e:"")}}(e):"function"==typeof e?function(i,r){return null!=n&&(r=i-n),e(Fn(t,i),r)}:function(e){return t.scale.getLabel(e)}}function Fn(t,e){return"category"===t.type?t.scale.getLabel(e):e}function jn(t,e){return Math.abs(t-e)<qx}function Hn(t,e,n){if(this.name=t,this.geometries=e,n)n=[n[0],n[1]];else{var i=this.getBoundingRect();n=[i.x+i.width/2,i.y+i.height/2]}this.center=n}function Wn(t,e,n){for(var i=[],r=e[0],a=e[1],o=0;o<t.length;o+=2){var s=t.charCodeAt(o)-64,l=t.charCodeAt(o+1)-64;s=s>>1^-(1&s),l=l>>1^-(1&l),r=s+=r,a=l+=a,i.push([s/n,l/n])}return i}function Yn(t,e){var n,i,r=Xn(t,"labels"),a=$n(e),o=Un(r,a);return o||(n=du.isFunction(a)?Kn(t,a):Zn(t,i="auto"===a?function(t){var e=t_(t).autoInterval;return null!=e?e:t_(t).autoInterval=t.calculateCategoryInterval()}(t):a),qn(r,a,{labels:n,labelCategoryInterval:i}))}function Xn(t,e){return t_(t)[e]||(t_(t)[e]=[])}function Un(t,e){for(var n=0;n<t.length;n++)if(t[n].key===e)return t[n].value}function qn(t,e,n){return t.push({key:e,value:n}),n}function Zn(t,e,n){function i(t){l.push(n?t:{formattedLabel:r(t),rawLabel:a.getLabel(t),tickValue:t})}var r=Qx(t),a=t.scale,o=a.getExtent(),s=t.getLabelModel(),l=[],u=Math.max((e||0)+1,1),c=o[0],h=a.count();0!==c&&u>1&&h/u>2&&(c=Math.round(Math.ceil(c/u)*u));var d={min:s.get("showMinLabel"),max:s.get("showMaxLabel")};d.min&&c!==o[0]&&i(o[0]);for(var f=c;f<=o[1];f+=u)i(f);return d.max&&f!==o[1]&&i(o[1]),l}function Kn(t,e,n){var i=t.scale,r=Qx(t),a=[];return du.each(i.getTicks(),function(t){var o=i.getLabel(t);e(t,o)&&a.push(n?t:{formattedLabel:r(t),rawLabel:o,tickValue:t})}),a}function $n(t){var e=t.get("interval");return null==e?"auto":e}function Jn(t,e){var n=(t[1]-t[0])/e/2;t[0]+=n,t[1]-=n}function Qn(t,e,n){Pp.Group.call(this),this.updateData(t,e,n)}function ti(t){return[t[0]/2,t[1]/2]}function ei(t){this.group=new Pp.Group,this._symbolCtor=t||F_}function ni(t,e,n,i){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(i.isIgnore&&i.isIgnore(n))&&!(i.clipShape&&!i.clipShape.contain(e[0],e[1]))&&"none"!==t.getItemVisual(n,"symbol")}function ii(t){return null==t||j_(t)||(t={isIgnore:t}),t||{}}function ri(t){var e=t.hostModel;return{itemStyle:e.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:e.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:e.get("symbolRotate"),symbolOffset:e.get("symbolOffset"),hoverAnimation:e.get("hoverAnimation"),labelModel:e.getModel("label"),hoverLabelModel:e.getModel("emphasis.label"),cursorStyle:e.get("cursor")}}function ai(t){return isNaN(t[0])||isNaN(t[1])}function oi(t,e,n,i,r,a,o,s,l,u,c){return"none"!==u&&u?function(t,e,n,i,r,a,o,s,l,u,c){for(var h=0,d=n,f=0;f<i;f++){var p=e[d];if(d>=r||d<0)break;if(ai(p)){if(c){d+=a;continue}break}if(d===n)t[a>0?"moveTo":"lineTo"](p[0],p[1]);else if(l>0){var g=e[h],m="y"===u?1:0,v=(p[m]-g[m])*l;tb(nb,g),nb[m]=g[m]+v,tb(ib,p),ib[m]=p[m]-v,t.bezierCurveTo(nb[0],nb[1],ib[0],ib[1],p[0],p[1])}else t.lineTo(p[0],p[1]);h=d,d+=a}return f}.apply(this,arguments):function(t,e,n,i,r,a,o,s,l,u,c){for(var h=0,d=n,f=0;f<i;f++){var p=e[d];if(d>=r||d<0)break;if(ai(p)){if(c){d+=a;continue}break}if(d===n)t[a>0?"moveTo":"lineTo"](p[0],p[1]),tb(nb,p);else if(l>0){var g=d+a,m=e[g];if(c)for(;m&&ai(e[g]);)m=e[g+=a];var v=.5,y=e[h];if(!(m=e[g])||ai(m))tb(ib,p);else{var x,_;if(ai(m)&&!c&&(m=p),pu.sub(eb,m,y),"x"===u||"y"===u){var b="x"===u?0:1;x=Math.abs(p[b]-y[b]),_=Math.abs(p[b]-m[b])}else x=pu.dist(p,y),_=pu.dist(p,m);Q_(ib,p,eb,-l*(1-(v=_/(_+x))))}$_(nb,nb,s),J_(nb,nb,o),$_(ib,ib,s),J_(ib,ib,o),t.bezierCurveTo(nb[0],nb[1],ib[0],ib[1],p[0],p[1]),Q_(nb,p,eb,l*v)}else t.lineTo(p[0],p[1]);h=d,d+=a}return f}.apply(this,arguments)}function si(t,e){var n=[1/0,1/0],i=[-1/0,-1/0];if(e)for(var r=0;r<t.length;r++){var a=t[r];a[0]<n[0]&&(n[0]=a[0]),a[1]<n[1]&&(n[1]=a[1]),a[0]>i[0]&&(i[0]=a[0]),a[1]>i[1]&&(i[1]=a[1])}return{min:e?n:i,max:e?i:n}}function li(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++){var i=t[n],r=e[n];if(i[0]!==r[0]||i[1]!==r[1])return}return!0}}function ui(t){return"number"==typeof t?t:t?.5:0}function ci(t){var e=t.getGlobalExtent();if(t.onBand){var n=t.getBandWidth()/2-1,i=e[1]>e[0]?1:-1;e[0]+=i*n,e[1]-=i*n}return e}function hi(t,e,n,i){return"polar"===t.type?function(t,e,n,i){var r=t.getAngleAxis(),a=t.getRadiusAxis().getExtent().slice();a[0]>a[1]&&a.reverse();var o=r.getExtent(),s=Math.PI/180;n&&(a[0]-=.5,a[1]+=.5);var l=new Pp.Sector({shape:{cx:sb(t.cx,1),cy:sb(t.cy,1),r0:sb(a[0],1),r:sb(a[1],1),startAngle:-o[0]*s,endAngle:-o[1]*s,clockwise:r.inverse}});return e&&(l.shape.endAngle=-o[0]*s,Pp.initProps(l,{shape:{endAngle:-o[1]*s}},i)),l}(t,e,n,i):function(t,e,n,i){var r=ci(t.getAxis("x")),a=ci(t.getAxis("y")),o=t.getBaseAxis().isHorizontal(),s=Math.min(r[0],r[1]),l=Math.min(a[0],a[1]),u=Math.max(r[0],r[1])-s,c=Math.max(a[0],a[1])-l;if(n)s-=.5,u+=.5,l-=.5,c+=.5;else{var h=i.get("lineStyle.width")||2,d=i.get("clipOverflow")?h/2:Math.max(u,c);o?(l-=d,c+=2*d):(s-=d,u+=2*d)}var f=new Pp.Rect({shape:{x:s,y:l,width:u,height:c}});return e&&(f.shape[o?"width":"height"]=0,Pp.initProps(f,{shape:{width:u,height:c}},i)),f}(t,e,n,i)}function di(t,e,n){for(var i=e.getBaseAxis(),r="x"===i.dim||"radius"===i.dim?0:1,a=[],o=0;o<t.length-1;o++){var s=t[o+1],l=t[o];a.push(l);var u=[];switch(n){case"end":u[r]=s[r],u[1-r]=l[1-r],a.push(u);break;case"middle":var c=(l[r]+s[r])/2,h=[];u[r]=h[r]=c,u[1-r]=l[1-r],h[1-r]=s[1-r],a.push(u),a.push(h);break;default:u[r]=l[r],u[1-r]=s[1-r],a.push(u)}}return t[o]&&a.push(t[o]),a}function fi(t){yb.call(this,t)}function pi(t,e){return e.type||(e.data?"category":"value")}function gi(t,e,n){return t.getCoordSysModel()===e}function mi(t,e,n){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(t,e,n),this.model=t}function vi(t,e,n){n.getAxesOnZeroOf=function(){return i?[i]:[]};var i,r=t[e],a=n.model,o=a.get("axisLine.onZero"),s=a.get("axisLine.onZeroAxisIndex");if(o)if(null==s){for(var l in r)if(r.hasOwnProperty(l)&&yi(r[l])){i=r[l];break}}else yi(r[s])&&(i=r[s])}function yi(t){return t&&"category"!==t.type&&"time"!==t.type&&Bb(t)}function xi(t,e){return Eb(jb,function(e){return t.getReferringComponents(e)[0]})}function _i(t){return"cartesian2d"===t.get("coordinateSystem")}function bi(t){var e={componentType:t.mainType};return e[t.mainType+"Index"]=t.componentIndex,e}function wi(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)}function Si(t){t&&(t.ignore=!0)}function Mi(t,e,n){var i=t&&t.getBoundingRect().clone(),r=e&&e.getBoundingRect().clone();if(i&&r){var a=Mu.identity([]);return Mu.rotate(a,a,-t.rotation),i.applyTransform(Mu.mul([],a,t.getLocalTransform())),r.applyTransform(Mu.mul([],a,e.getLocalTransform())),i.intersect(r)}}function Ai(t){return"middle"===t||"center"===t}function Ci(t,e){return"all"===t||du.isArray(t)&&du.indexOf(t,e)>=0||t===e}function Ii(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[Ti(t)]}function Pi(t){return!!t.get("handle.show")}function Ti(t){return t.type+"||"+t.id}function Oi(t,e,n,i,r,a){var o=aw.getAxisPointerClass(t.axisPointerClass);if(o){var s=rw.getAxisPointerModel(e);s?(t._axisPointer||(t._axisPointer=new o)).render(e,s,i,a):ki(t,i)}}function ki(t,e,n){var i=t._axisPointer;i&&i.dispose(e,n),t._axisPointer=null}function Di(t,e){"outside"===t.textPosition&&(t.textPosition=e)}function Ei(t,e,n){n.style.text=null,Pp.updateProps(n,{shape:{width:0}},e,t,function(){n.parent&&n.parent.remove(n)})}function Li(t,e,n){n.style.text=null,Pp.updateProps(n,{shape:{r:n.shape.r0}},e,t,function(){n.parent&&n.parent.remove(n)})}function Ni(t,e,n,i,r,a,o,s){var l=e.getItemVisual(n,"color"),u=e.getItemVisual(n,"opacity"),c=i.getModel("itemStyle"),h=i.getModel("emphasis.itemStyle").getBarItemStyle();s||t.setShape("r",c.get("barBorderRadius")||0),t.useStyle(du.defaults({fill:l,opacity:u},c.getBarItemStyle()));var d=i.getShallow("cursor");d&&t.attr("cursor",d);var f=o?r.height>0?"bottom":"top":r.width>0?"left":"right";s||vw(t.style,h,i,l,a,n,f),Pp.setHoverStyle(t,h)}function Ri(t,e,n){var i=t.getData(),r=[],a=i.getLayout("valueAxisHorizontal")?1:0;r[1-a]=i.getLayout("valueAxisStart");var o=new bw({shape:{points:i.getLayout("largePoints")},incremental:!!n,__startPoint:r,__valueIdx:a});e.add(o),function(t,e,n){var i=n.getVisual("borderColor")||n.getVisual("color"),r=e.getModel("itemStyle").getItemStyle(["color","borderColor"]);t.useStyle(r),t.style.fill=null,t.style.stroke=i,t.style.lineWidth=n.getLayout("barWidth")}(o,t,i)}function Bi(t,e,n,i,r){var a=(e.startAngle+e.endAngle)/2,o=Math.cos(a),s=Math.sin(a),l=n?i:0,u=[o*l,s*l];r?t.animate().when(200,{position:u}).start("bounceOut"):t.attr("position",u)}function zi(t,e){function n(){a.ignore=a.hoverIgnore,o.ignore=o.hoverIgnore}function i(){a.ignore=a.normalIgnore,o.ignore=o.normalIgnore}Pp.Group.call(this);var r=new Pp.Sector({z2:2}),a=new Pp.Polyline,o=new Pp.Text;this.add(r),this.add(a),this.add(o),this.updateData(t,e,!0),this.on("emphasis",n).on("normal",i).on("mouseover",n).on("mouseout",i)}function Vi(t,e,n,i,r,a,o){function s(e,n){for(var i=e;i>=0&&(t[i].y-=n,!(i>0&&t[i].y>t[i-1].y+t[i-1].height));i--);}function l(t,e,n,i,r,a){for(var o=e?Number.MAX_VALUE:0,s=0,l=t.length;s<l;s++)if("center"!==t[s].position){var u=Math.abs(t[s].y-i),c=t[s].len,h=t[s].len2,d=u<r+c?Math.sqrt((r+c+h)*(r+c+h)-u*u):Math.abs(t[s].x-n);e&&d>=o&&(d=o-10),!e&&d<=o&&(d=o+10),t[s].x=n+d*a,o=d}}t.sort(function(t,e){return t.y-e.y});for(var u,c=0,h=t.length,d=[],f=[],p=0;p<h;p++)(u=t[p].y-c)<0&&function(e,n,i,r){for(var a=e;a<n;a++)if(t[a].y+=i,a>e&&a+1<n&&t[a+1].y>t[a].y+t[a].height)return void s(a,i/2);s(n-1,i/2)}(p,h,-u),c=t[p].y+t[p].height;for(o-c<0&&s(h-1,c-o),p=0;p<h;p++)t[p].y>=n?f.push(t[p]):d.push(t[p]);l(d,!1,e,n,i,r),l(f,!0,e,n,i,r)}function Gi(){this.group=new Pp.Group}function Fi(t,e,n){h_.call(this,t,e,n),this.type="value",this.angle=0,this.name="",this.model}function ji(t,e,n){this._model=t,this.dimensions=[],this._indicatorAxes=du.map(t.getIndicatorModels(),function(t,e){var n="indicator_"+e,i=new Xw(n,new lx);return i.name=t.get("name"),i.model=t,t.axis=i,this.dimensions.push(n),i},this),this.resize(t,n),this.cx,this.cy,this.r,this.startAngle}function Hi(t,e){return du.defaults({show:e},t)}function Wi(){Ou.call(this)}function Yi(t){this.name=t,this.zoomLimit,Ou.call(this),this._roamTransformable=new Wi,this._rawTransformable=new Wi,this._center,this._zoom}function Xi(t,e,n,i){var r=n.seriesModel,a=r?r.coordinateSystem:null;return a===this?a[t](i):null}function Ui(t,e,n,i,r){nS.call(this,t),this.map=e,this._nameCoordMap=du.createHashMap(),this.loadGeoJson(n,i,r)}function qi(t,e,n,i){var r=n.geoModel,a=n.seriesModel,o=r?r.coordinateSystem:a?a.coordinateSystem||(a.getReferringComponents("geo")[0]||{}).coordinateSystem:null;return o===this?o[t](i):null}function Zi(t,e){var n=t.get("boundingCoords");if(null!=n){var i=n[0],r=n[1];isNaN(i[0])||isNaN(i[1])||isNaN(r[0])||isNaN(r[1])||this.setBoundingRect(i[0],i[1],r[0]-i[0],r[1]-i[1])}var a,o=this.getBoundingRect(),s=t.get("layoutCenter"),l=t.get("layoutSize"),u=e.getWidth(),c=e.getHeight(),h=t.get("aspectScale")||.75,d=o.width/o.height*h,f=!1;if(s&&l&&(s=[Wp.parsePercent(s[0],u),Wp.parsePercent(s[1],c)],l=Wp.parsePercent(l,Math.min(u,c)),isNaN(s[0])||isNaN(s[1])||isNaN(l)||(f=!0)),f){var p={};d>1?(p.width=l,p.height=l/d):(p.height=l,p.width=l*d),p.y=s[1]-p.height/2,p.x=s[0]-p.width/2}else(a=t.getBoxLayoutParams()).aspect=d,p=ig.getLayoutRect(a,{width:u,height:c});this.setViewRect(p.x,p.y,p.width,p.height),this.setCenter(t.get("center")),this.setZoom(t.get("zoom"))}function Ki(t,e){du.each(e.get("geoCoord"),function(e,n){t.addGeoCoord(n,e)})}function $i(t){return t[yS]||(t[yS]={})}function Ji(t){this.pointerChecker,this._zr=t,this._opt={};var e=du.bind,n=e(function(t){if(!(mh.notLeftMouse(t)||t.target&&t.target.draggable)){var e=t.offsetX,n=t.offsetY;this.pointerChecker&&this.pointerChecker(t,e,n)&&(this._x=e,this._y=n,this._dragging=!0)}},this),i=e(function(t){if(!mh.notLeftMouse(t)&&tr(this,"moveOnMouseMove",t)&&this._dragging&&"pinch"!==t.gestureEvent&&!xS.isTaken(this._zr,"globalPan")){var e=t.offsetX,n=t.offsetY,i=this._x,r=this._y,a=e-i,o=n-r;this._x=e,this._y=n,this._opt.preventDefaultMouseMove&&mh.stop(t.event),this.trigger("pan",a,o,i,r,e,n)}},this),r=e(function(t){mh.notLeftMouse(t)||(this._dragging=!1)},this),a=e(function(t){if(tr(this,"zoomOnMouseWheel",t)&&0!==t.wheelDelta){var e=t.wheelDelta>0?1.1:1/1.1;Qi.call(this,t,e,t.offsetX,t.offsetY)}},this),o=e(function(t){if(!xS.isTaken(this._zr,"globalPan")){var e=t.pinchScale>1?1.1:1/1.1;Qi.call(this,t,e,t.pinchX,t.pinchY)}},this);yu.call(this),this.setPointerChecker=function(t){this.pointerChecker=t},this.enable=function(e,s){this.disable(),this._opt=du.defaults(du.clone(s)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,preventDefaultMouseMove:!0}),null==e&&(e=!0),!0!==e&&"move"!==e&&"pan"!==e||(t.on("mousedown",n),t.on("mousemove",i),t.on("mouseup",r)),!0!==e&&"scale"!==e&&"zoom"!==e||(t.on("mousewheel",a),t.on("pinch",o))},this.disable=function(){t.off("mousedown",n),t.off("mousemove",i),t.off("mouseup",r),t.off("mousewheel",a),t.off("pinch",o)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}function Qi(t,e,n,i){this.pointerChecker&&this.pointerChecker(t,n,i)&&(mh.stop(t.event),this.trigger("zoom",e,n,i))}function tr(t,e,n){var i=t._opt[e];return i&&(!du.isString(i)||n.event[i+"Key"])}function er(t,e){var n=t.getItemStyle(),i=t.get("areaColor");return null!=i&&(n.fill=i),n}function nr(t,e){e.eachChild(function(e){du.each(e.__regions,function(n){e.trigger(t.isSelected(n.name)?"emphasis":"normal")})})}function ir(t,e){var n=new Pp.Group;this._controller=new _S(t.getZr()),this._controllerHost={target:e?n:null},this.group=n,this._updateGroup=e,this._mouseDownFlag}function rr(t,e,n){t[ES]={},DS(e,function(e,i){ar(e,i,t,n)})}function ar(t,e,n,i){n[ES][e]=t,t[LS]=n,t.dataType=e,i.struct&&(t[i.structAttr]=i.struct,i.struct[i.datasAttr[e]]=t),t.getLinkedData=function(t){var e=this[LS];return null==t||null==e?e:e[ES][t]}}function or(t,e,n){this.root,this.data,this._nodes=[],this.hostModel=t,this.levelModels=du.map(e||[],function(e){return new zp(e,t,t.ecModel)}),this.leavesModel=new zp(n||{},t,t.ecModel)}function sr(t){var e=t.children;return e.length&&t.isExpand?e[e.length-1]:t.hierNode.thread}function lr(t){var e=t.children;return e.length&&t.isExpand?e[0]:t.hierNode.thread}function ur(t,e){var n=t.getItemLayout(e);return n&&!isNaN(n.x)&&!isNaN(n.y)&&"none"!==t.getItemVisual(e,"symbol")}function cr(t,e,n){return n.itemModel=e,n.itemStyle=e.getModel("itemStyle").getItemStyle(),n.hoverItemStyle=e.getModel("emphasis.itemStyle").getItemStyle(),n.lineStyle=e.getModel("lineStyle").getLineStyle(),n.labelModel=e.getModel("label"),n.hoverLabelModel=e.getModel("emphasis.label"),!1===t.isExpand&&0!==t.children.length?n.symbolInnerColor=n.itemStyle.fill:n.symbolInnerColor="#fff",n}function hr(t,e,n,i,r,a){var o=!n,s=t.tree.getNodeByDataIndex(e),l=(a=cr(s,s.getModel(),a),t.tree.root),u=s.parentNode===l?s:s.parentNode||s,c=t.getItemGraphicEl(u.dataIndex),h=u.getLayout(),d=c?{x:c.position[0],y:c.position[1],rawX:c.__radialOldRawX,rawY:c.__radialOldRawY}:h,f=s.getLayout();o?(n=new F_(t,e,a)).attr("position",[d.x,d.y]):n.updateData(t,e,a),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=f.rawX,n.__radialRawY=f.rawY,i.add(n),t.setItemGraphicEl(e,n),Pp.updateProps(n,{position:[f.x,f.y]},r);var p=n.getSymbolPath();if("radial"===a.layout){var g,m,v=l.children[0],y=v.getLayout(),x=v.children.length;if(f.x===y.x&&!0===s.isExpand){var _={};_.x=(v.children[0].getLayout().x+v.children[x-1].getLayout().x)/2,_.y=(v.children[0].getLayout().y+v.children[x-1].getLayout().y)/2,(g=Math.atan2(_.y-y.y,_.x-y.x))<0&&(g=2*Math.PI+g),(m=_.x<y.x)&&(g-=Math.PI)}else(g=Math.atan2(f.y-y.y,f.x-y.x))<0&&(g=2*Math.PI+g),0===s.children.length||0!==s.children.length&&!1===s.isExpand?(m=f.x<y.x)&&(g-=Math.PI):(m=f.x>y.x)||(g-=Math.PI);var b=m?"left":"right";p.setStyle({textPosition:b,textRotation:-g,textOrigin:"center",verticalAlign:"middle"})}if(s.parentNode&&s.parentNode!==l){var w=n.__edge;w||(w=n.__edge=new Pp.BezierCurve({shape:fr(a,d,d),style:du.defaults({opacity:0},a.lineStyle)})),Pp.updateProps(w,{shape:fr(a,h,f),style:{opacity:1}},r),i.add(w)}}function dr(t,e,n,i,r,a){for(var o,s=t.tree.getNodeByDataIndex(e),l=t.tree.root,u=(a=cr(s,s.getModel(),a),s.parentNode===l?s:s.parentNode||s);null==(o=u.getLayout());)u=u.parentNode===l?u:u.parentNode||u;Pp.updateProps(n,{position:[o.x+1,o.y+1]},r,function(){i.remove(n),t.setItemGraphicEl(e,null)}),n.fadeOut(null,{keepLabel:!0});var c=n.__edge;c&&Pp.updateProps(c,{shape:fr(a,o,o),style:{opacity:0}},r,function(){i.remove(c)})}function fr(t,e,n){var i,r,a,o,s=t.orient;if("radial"===t.layout){var l=e.rawX,u=e.rawY,c=n.rawX,h=n.rawY,d=GS(l,u),f=GS(l,u+(h-u)*t.curvature),p=GS(c,h+(u-h)*t.curvature),g=GS(c,h);return{x1:d.x,y1:d.y,x2:g.x,y2:g.y,cpx1:f.x,cpy1:f.y,cpx2:p.x,cpy2:p.y}}l=e.x,u=e.y,c=n.x,h=n.y;return"LR"!==s&&"RL"!==s||(i=l+(c-l)*t.curvature,r=u,a=c+(l-c)*t.curvature,o=h),"TB"!==s&&"BT"!==s||(i=l,r=u+(h-u)*t.curvature,a=c,o=h+(u-h)*t.curvature),{x1:l,y1:u,x2:c,y2:h,cpx1:i,cpy1:r,cpx2:a,cpy2:o}}function pr(t){for(var e=[];t;)(t=t.parentNode)&&e.push(t);return e.reverse()}function gr(t){var e=0;du.each(t.children,function(t){gr(t);var n=t.value;du.isArray(n)&&(n=n[0]),e+=n});var n=t.value;du.isArray(n)&&(n=n[0]),(null==n||isNaN(n))&&(n=e),n<0&&(n=0),du.isArray(t.value)?t.value[0]=n:t.value=n}function mr(t){this.group=new Pp.Group,t.add(this.group)}function vr(t,e){var n=t.visual,i=[];du.isObject(n)?bM(n,function(t){i.push(t)}):null!=n&&i.push(n),e||1!==i.length||{color:1,symbol:1}.hasOwnProperty(t.type)||(i[1]=i[0]),Ar(t,i)}function yr(t){return{applyVisual:function(e,n,i){e=this.mapValueToVisual(e),i("color",t(n("color"),e))},_doMap:Sr([0,1])}}function xr(t){var e=this.option.visual;return e[Math.round(_M(t,[0,1],[0,e.length-1],!0))]||{}}function _r(t){return function(e,n,i){i(t,this.mapValueToVisual(e))}}function br(t){var e=this.option.visual;return e[this.option.loop&&t!==SM?t%e.length:t]}function wr(){return this.option.visual[0]}function Sr(t){return{linear:function(e){return _M(e,t,this.option.visual,!0)},category:br,piecewise:function(e,n){var i=Mr.call(this,n);return null==i&&(i=_M(e,t,this.option.visual,!0)),i},fixed:wr}}function Mr(t){var e=this.option,n=e.pieceList;if(e.hasSpecialVisual){var i=n[MM.findPieceIndex(t,n)];if(i&&i.visual)return i.visual[this.type]}}function Ar(t,e){return t.visual=e,"color"===t.type&&(t.parsedVisual=du.map(e,function(t){return Hu.parse(t)})),e}function Cr(t,e,n){return t?e<=n:e<n}function Ir(t,e,n,i,r,a){var o=t.getModel(),s=t.getLayout();if(s&&!s.invisible&&s.isInView){var l,u=t.getModel(TM),c=function(t,e,n,i){var r=du.extend({},e);return du.each(["color","colorAlpha","colorSaturation"],function(a){var o=t.get(a,!0);null==o&&n&&(o=n[a]),null==o&&(o=e[a]),null==o&&(o=i.get(a)),null!=o&&(r[a]=o)}),r}(u,e,n[t.depth],i),h=u.get("borderColor"),d=u.get("borderColorSaturation");null!=d&&(h=function(t,e){return null!=e?Hu.modifyHSL(e,null,null,t):null}(d,l=Pr(c))),t.setVisual("borderColor",h);var f=t.viewChildren;if(f&&f.length){var p=function(t,e,n,i,r,a){if(a&&a.length){var o=Or(e,"color")||null!=r.color&&"none"!==r.color&&(Or(e,"colorAlpha")||Or(e,"colorSaturation"));if(o){var s=e.get("visualMin"),l=e.get("visualMax"),u=n.dataExtent.slice();null!=s&&s<u[0]&&(u[0]=s),null!=l&&l>u[1]&&(u[1]=l);var c=e.get("colorMappingBy"),h={type:o.name,dataExtent:u,visual:o.range};"color"!==h.type||"index"!==c&&"id"!==c?h.mappingMethod="linear":(h.mappingMethod="category",h.loop=!0);var d=new IM(h);return d.__drColorMappingBy=c,d}}}(0,o,s,0,c,f);du.each(f,function(t,e){(t.depth>=r.length||t===r[t.depth])&&Ir(t,function(t,e,n,i,r,a){var o=du.extend({},e);if(r){var s=r.type,l="color"===s&&r.__drColorMappingBy,u="index"===l?i:"id"===l?a.mapIdToIndex(n.getId()):n.getValue(t.get("visualDimension"));o[s]=r.mapValueToVisual(u)}return o}(o,c,t,e,p,a),n,i,r,a)})}else l=Pr(c),t.setVisual("color",l)}}function Pr(t){var e=Tr(t,"color");if(e){var n=Tr(t,"colorAlpha"),i=Tr(t,"colorSaturation");return i&&(e=Hu.modifyHSL(e,null,null,i)),n&&(e=Hu.modifyAlpha(e,n)),e}}function Tr(t,e){var n=t[e];if(null!=n&&"none"!==n)return n}function Or(t,e){var n=t.get(e);return PM(n)&&n.length?{name:e,range:n}:null}function kr(t,e,n,i){var r,a;if(!t.isRemoved()){var o=t.getLayout();r=o.width,a=o.height;var s=(f=t.getModel()).get(BM),l=f.get(zM)/2,u=Lr(f),c=Math.max(s,u),h=s-l,d=c-l,f=t.getModel();t.setLayout({borderWidth:s,upperHeight:c,upperLabelHeight:u},!0);var p=(r=EM(r-2*h,0))*(a=EM(a-h-d,0)),g=function(t,e,n,i,r,a){var o=t.children||[],s=i.sort;"asc"!==s&&"desc"!==s&&(s=null);var l=null!=i.leafDepth&&i.leafDepth<=a;if(r&&!l)return t.viewChildren=[];!function(t,e){e&&t.sort(function(t,n){var i="asc"===e?t.getValue()-n.getValue():n.getValue()-t.getValue();return 0===i?"asc"===e?t.dataIndex-n.dataIndex:n.dataIndex-t.dataIndex:i})}(o=du.filter(o,function(t){return!t.isRemoved()}),s);var u=function(t,e,n){for(var i=0,r=0,a=e.length;r<a;r++)i+=e[r].getValue();var o=t.get("visualDimension");if(e&&e.length)if("value"===o&&n)s=[e[e.length-1].getValue(),e[0].getValue()],"asc"===n&&s.reverse();else{var s=[1/0,-1/0];RM(e,function(t){var e=t.getValue(o);e<s[0]&&(s[0]=e),e>s[1]&&(s[1]=e)})}else s=[NaN,NaN];return{sum:i,dataExtent:s}}(e,o,s);if(0===u.sum)return t.viewChildren=[];if(u.sum=function(t,e,n,i,r){if(!i)return n;for(var a=t.get("visibleMin"),o=r.length,s=o,l=o-1;l>=0;l--){var u=r["asc"===i?o-l-1:l].getValue();u/n*e<a&&(s=l,n-=u)}return"asc"===i?r.splice(0,o-s):r.splice(s,o-s),n}(e,n,u.sum,s,o),0===u.sum)return t.viewChildren=[];for(var c=0,h=o.length;c<h;c++){var d=o[c].getValue()/u.sum*n;o[c].setLayout({area:d})}return l&&(o.length&&t.setLayout({isLeafRoot:!0},!0),o.length=0),t.viewChildren=o,t.setLayout({dataExtent:u.dataExtent},!0),o}(t,f,p,e,n,i);if(g.length){var m={x:h,y:d,width:r,height:a},v=LM(r,a),y=1/0,x=[];x.area=0;for(var _=0,b=g.length;_<b;){var w=g[_];x.push(w),x.area+=w.getLayout().area;var S=function(t,e,n){for(var i,r=0,a=1/0,o=0,s=t.length;o<s;o++)(i=t[o].getLayout().area)&&(i<a&&(a=i),i>r&&(r=i));var l=t.area*t.area,u=e*e*n;return l?EM(u*r/l,l/(u*a)):1/0}(x,v,e.squareRatio);S<=y?(_++,y=S):(x.area-=x.pop().getLayout().area,Dr(x,v,m,l,!1),v=LM(m.width,m.height),x.length=x.area=0,y=1/0)}if(x.length&&Dr(x,v,m,l,!0),!n){var M=f.get("childrenVisibleMin");null!=M&&p<M&&(n=!0)}for(_=0,b=g.length;_<b;_++)kr(g[_],e,n,i+1)}}}function Dr(t,e,n,i,r){var a=e===n.width?0:1,o=1-a,s=["x","y"],l=["width","height"],u=n[s[a]],c=e?t.area/e:0;(r||c>n[l[o]])&&(c=n[l[o]]);for(var h=0,d=t.length;h<d;h++){var f=t[h],p={},g=c?f.getLayout().area/c:0,m=p[l[o]]=EM(c-2*i,0),v=n[s[a]]+n[l[a]]-u,y=h===d-1||v<g?v:g,x=p[l[a]]=EM(y-2*i,0);p[s[o]]=n[s[o]]+LM(i,m/2),p[s[a]]=u+LM(i,x/2),u+=y,f.setLayout(p,!0)}n[s[o]]+=c,n[l[o]]-=c}function Er(t,e,n,i,r){var a=t.getLayout(),o=n[r],s=o&&o===t;if(!(o&&!s||r===n.length&&t!==i)){t.setLayout({isInView:!0,invisible:!s&&!e.intersect(a),isAboveViewRoot:s},!0);var l=new hc(e.x-a.x,e.y-a.y,e.width,e.height);RM(t.viewChildren||[],function(t){Er(t,l,n,i,r+1)})}}function Lr(t){return t.get(VM)?t.get(GM):0}function Nr(t){return"_EC_"+t}function Rr(t,e){this.id=null==t?"":t,this.inEdges=[],this.outEdges=[],this.edges=[],this.hostGraph,this.dataIndex=null==e?-1:e}function Br(t,e,n){this.node1=t,this.node2=e,this.dataIndex=null==n?-1:n}function zr(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}function Vr(t){return"_"+t+"Type"}function Gr(t,e,n){var i=e.getItemVisual(n,"color"),r=e.getItemVisual(n,t),a=e.getItemVisual(n,t+"Size");if(r&&"none"!==r){du.isArray(a)||(a=[a,a]);var o=jx.createSymbol(r,-a[0]/2,-a[1]/2,a[0],a[1],i);return o.name=t,o}}function Fr(t,e){var n=e[0],i=e[1],r=e[2];t.x1=n[0],t.y1=n[1],t.x2=i[0],t.y2=i[1],t.percent=1,r?(t.cpx1=r[0],t.cpy1=r[1]):(t.cpx1=NaN,t.cpy1=NaN)}function jr(t,e,n){Pp.Group.call(this),this._createLine(t,e,n)}function Hr(t){this._ctor=t||iA,this.group=new Pp.Group}function Wr(t){var e=t.hostModel;return{lineStyle:e.getModel("lineStyle").getLineStyle(),hoverLineStyle:e.getModel("emphasis.lineStyle").getLineStyle(),labelModel:e.getModel("label"),hoverLabelModel:e.getModel("emphasis.label")}}function Yr(t){return isNaN(t[0])||isNaN(t[1])}function Xr(t){return!Yr(t[0])&&!Yr(t[1])}function Ur(t,e,n){for(var i,r=t[0],a=t[1],o=t[2],s=1/0,l=n*n,u=.1,c=.1;c<=.9;c+=.1)oA[0]=uA(r[0],a[0],o[0],c),oA[1]=uA(r[1],a[1],o[1],c),(f=hA(cA(oA,e)-l))<s&&(s=f,i=c);for(var h=0;h<32;h++){var d=i+u;sA[0]=uA(r[0],a[0],o[0],i),sA[1]=uA(r[1],a[1],o[1],i),lA[0]=uA(r[0],a[0],o[0],d),lA[1]=uA(r[1],a[1],o[1],d);var f=cA(sA,e)-l;if(hA(f)<.01)break;var p=cA(lA,e)-l;u/=2,f<0?p>=0?i+=u:i-=u:p>=0?i-=u:i+=u}return i}function qr(t,e){return t.getVisual("opacity")||t.getModel().get(e)}function Zr(t,e,n){var i=t.getGraphicEl(),r=qr(t,e);null!=n&&(null==r&&(r=1),r*=n),i.downplay&&i.downplay(),i.traverse(function(t){"group"!==t.type&&t.setStyle("opacity",r)})}function Kr(t,e){var n=qr(t,e),i=t.getGraphicEl();i.highlight&&i.highlight(),i.traverse(function(t){"group"!==t.type&&t.setStyle("opacity",n)})}function $r(t){return t instanceof Array||(t=[t,t]),t}function Jr(t){t.eachEdge(function(t){var e=t.getModel().get("lineStyle.curveness")||0,n=pu.clone(t.node1.getLayout()),i=pu.clone(t.node2.getLayout()),r=[n,i];+e&&r.push([(n[0]+i[0])/2-(n[1]-i[1])*e,(n[1]+i[1])/2-(i[0]-n[0])*e]),t.setLayout(r)})}function Qr(t,e){return e&&("string"==typeof e?t=e.replace("{value}",null!=t?t:""):"function"==typeof e&&(t=e(t))),t}function ta(t,e){function n(){a.ignore=a.hoverIgnore,o.ignore=o.hoverIgnore}function i(){a.ignore=a.normalIgnore,o.ignore=o.normalIgnore}Pp.Group.call(this);var r=new Pp.Polygon,a=new Pp.Polyline,o=new Pp.Text;this.add(r),this.add(a),this.add(o),this.updateData(t,e,!0),this.on("emphasis",n).on("normal",i).on("mouseover",n).on("mouseout",i)}function ea(t,e){var n=t[e]-t[1-e];return{span:Math.abs(n),sign:n>0?-1:n<0?1:e?-1:1}}function na(t,e){return Math.min(e[1],Math.max(e[0],t))}function ia(t,e,n){this._axesMap=du.createHashMap(),this._axesLayout={},this.dimensions=t.dimensions,this._rect,this._model=t,this._init(t,e,n)}function ra(t,e){return QA(tC(t,e[0]),e[1])}function aa(t){yu.call(this),this._zr=t,this.group=new Pp.Group,this._brushType,this._brushOption,this._panels,this._track=[],this._dragging,this._covers=[],this._creatingCover,this._creatingPanel,this._enableGlobalPan,this._uid="brushController_"+_C++,this._handlers={},lC(bC,function(t,e){this._handlers[e]=du.bind(t,this)},this)}function oa(t,e){var n=wC[e.brushType].createCover(t,e);return n.__brushOption=e,ua(n,e),t.group.add(n),n}function sa(t,e){var n=ha(e);return n.endCreating&&(n.endCreating(t,e),ua(e,e.__brushOption)),e}function la(t,e){var n=e.__brushOption;ha(e).updateCoverShape(t,e,n.range,n)}function ua(t,e){var n=e.z;null==n&&(n=fC),t.traverse(function(t){t.z=n,t.z2=n})}function ca(t,e){ha(e).updateCommon(t,e),la(t,e)}function ha(t){return wC[t.__brushOption.brushType]}function da(t,e,n){var i=t._panels;if(!i)return!0;var r,a=t._transform;return lC(i,function(t){t.isTargetByCursor(e,n,a)&&(r=t)}),r}function fa(t,e){var n=t._panels;if(!n)return!0;var i=e.__brushOption.panelId;return null==i||n[i]}function pa(t){var e=t._covers,n=e.length;return lC(e,function(e){t.group.remove(e)},t),e.length=0,!!n}function ga(t,e){var n=uC(t._covers,function(t){var e=t.__brushOption,n=du.clone(e.range);return{brushType:e.brushType,panelId:e.panelId,range:n}});t.trigger("brush",n,{isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function ma(t){var e=t.length-1;return e<0&&(e=0),[t[0],t[e]]}function va(t,e,n,i){var r=new Pp.Group;return r.add(new Pp.Rect({name:"main",style:ba(n),silent:!0,draggable:!0,cursor:"move",drift:sC(t,e,r,"nswe"),ondragend:sC(ga,e,{isEnd:!0})})),lC(i,function(n){r.add(new Pp.Rect({name:n,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:sC(t,e,r,n),ondragend:sC(ga,e,{isEnd:!0})}))}),r}function ya(t,e,n,i){var r=i.brushStyle.lineWidth||0,a=hC(r,gC),o=n[0][0],s=n[1][0],l=o-r/2,u=s-r/2,c=n[0][1],h=n[1][1],d=c-a+r/2,f=h-a+r/2,p=c-o,g=h-s,m=p+r,v=g+r;_a(t,e,"main",o,s,p,g),i.transformable&&(_a(t,e,"w",l,u,a,v),_a(t,e,"e",d,u,a,v),_a(t,e,"n",l,u,m,a),_a(t,e,"s",l,f,m,a),_a(t,e,"nw",l,u,a,a),_a(t,e,"ne",d,u,a,a),_a(t,e,"sw",l,f,a,a),_a(t,e,"se",d,f,a,a))}function xa(t,e){var n=e.__brushOption,i=n.transformable,r=e.childAt(0);r.useStyle(ba(n)),r.attr({silent:!i,cursor:i?"move":"default"}),lC(["w","e","n","s","se","sw","ne","nw"],function(n){var r=e.childOfName(n),a=Sa(t,n);r&&r.attr({silent:!i,invisible:!i,cursor:i?yC[a]+"-resize":null})})}function _a(t,e,n,i,r,a,o){var s=e.childOfName(n);s&&s.setShape(function(t){var e=cC(t[0][0],t[1][0]),n=cC(t[0][1],t[1][1]),i=hC(t[0][0],t[1][0]),r=hC(t[0][1],t[1][1]);return{x:e,y:n,width:i-e,height:r-n}}(Ca(t,e,[[i,r],[i+a,r+o]])))}function ba(t){return du.defaults({strokeNoScale:!0},t.brushStyle)}function wa(t,e,n,i){var r=[cC(t,n),cC(e,i)],a=[hC(t,n),hC(e,i)];return[[r[0],a[0]],[r[1],a[1]]]}function Sa(t,e){if(e.length>1)return("e"===(n=[Sa(t,(e=e.split(""))[0]),Sa(t,e[1])])[0]||"w"===n[0])&&n.reverse(),n.join("");var n=Pp.transformDirection({w:"left",e:"right",n:"top",s:"bottom"}[e],function(t){return Pp.getTransform(t.group)}(t));return{left:"w",right:"e",top:"n",bottom:"s"}[n]}function Ma(t,e,n,i,r,a,o,s){var l=i.__brushOption,u=t(l.range),c=Aa(n,a,o);lC(r.split(""),function(t){var e=vC[t];u[e[0]][e[1]]+=c[e[0]]}),l.range=e(wa(u[0][0],u[1][0],u[0][1],u[1][1])),ca(n,i),ga(n,{isEnd:!1})}function Aa(t,e,n){var i=t.group,r=i.transformCoordToLocal(e,n),a=i.transformCoordToLocal(0,0);return[r[0]-a[0],r[1]-a[1]]}function Ca(t,e,n){var i=fa(t,e);return i&&!0!==i?i.clipPath(n,t._transform):du.clone(n)}function Ia(t){var e=t.event;e.preventDefault&&e.preventDefault()}function Pa(t,e,n){return t.childOfName("main").contain(e,n)}function Ta(t,e,n,i){var r,a=t._creatingCover,o=t._creatingPanel,s=t._brushOption;if(t._track.push(n.slice()),function(t){var e=t._track;if(!e.length)return!1;var n=e[e.length-1],i=e[0],r=n[0]-i[0],a=n[1]-i[1];return dC(r*r+a*a,.5)>pC}(t)||a){if(o&&!a){"single"===s.brushMode&&pa(t);var l=du.clone(s);l.brushType=Oa(l.brushType,o),l.panelId=!0===o?null:o.panelId,a=t._creatingCover=oa(t,l),t._covers.push(a)}if(a){var u=wC[Oa(t._brushType,o)];a.__brushOption.range=u.getCreatingRange(Ca(t,a,t._track)),i&&(sa(t,a),u.updateCommon(t,a)),la(t,a),r={isEnd:i}}}else i&&"single"===s.brushMode&&s.removeOnClick&&da(t,e,n)&&pa(t)&&(r={isEnd:i,removeOnClick:!0});return r}function Oa(t,e){return"auto"===t?e.defaultBrushType:t}function ka(t){if(this._dragging){Ia(t);var e=Ta(this,t,this.group.transformCoordToLocal(t.offsetX,t.offsetY),!0);this._dragging=!1,this._track=[],this._creatingCover=null,e&&ga(this,e)}}function Da(t){return{createCover:function(e,n){return va(sC(Ma,function(e){var n=[e,[0,100]];return t&&n.reverse(),n},function(e){return e[t]}),e,n,[["w","e"],["n","s"]][t])},getCreatingRange:function(e){var n=ma(e);return[cC(n[0][t],n[1][t]),hC(n[0][t],n[1][t])]},updateCoverShape:function(e,n,i,r){var a,o=fa(e,n);if(!0!==o&&o.getLinearBrushOtherExtent)a=o.getLinearBrushOtherExtent(t,e._transform);else{var s=e._zr;a=[0,[s.getWidth(),s.getHeight()][1-t]]}var l=[i,a];t&&l.reverse(),ya(e,n,l,r)},updateCommon:xa,contain:Pa}}function Ea(t){return hc.create(t)}function La(t,e){var n=t._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===e}function Na(t,e,n,i){for(var r=[],a=0;a<n.length;a++){var o=n[a],s=t.get(t.mapDimension(o),e);(function(t,e){return"category"===e?null==t:null==t||isNaN(t)})(s,i.getAxis(o).type)||r.push(i.dataToPoint(s,o))}return r}function Ra(t,e,n,i,r){var a=Na(t,n,i,r),o=new Pp.Polyline({shape:{points:a},silent:!0,z2:10});return e.add(o),t.setItemGraphicEl(n,o),o}function Ba(t){var e=t.get("smooth",!0);return!0===e&&(e=kC),{lineStyle:t.getModel("lineStyle").getLineStyle(),smooth:null!=e?e:kC}}function za(t,e,n,i){var r=i.lineStyle;e.hasItemOption&&(r=e.getItemModel(n).getModel("lineStyle").getLineStyle()),t.useStyle(r);var a=t.style;a.fill=null,a.stroke=e.getItemVisual(n,"color"),a.opacity=e.getItemVisual(n,"opacity"),i.smooth&&(t.shape.smooth=i.smooth)}function Va(t,e,n){du.each(t,function(t){var i,r,a,o=0,s=t.length;for(t.sort(function(t,e){return t.getLayout().y-e.getLayout().y}),a=0;a<s;a++)i=t[a],(r=o-i.getLayout().y)>0&&(l=i.getLayout().y+r,i.setLayout({y:l},!0)),o=i.getLayout().y+i.getLayout().dy+e;if((r=o-e-n)>0){var l=i.getLayout().y-r;for(i.setLayout({y:l},!0),o=i.getLayout().y,a=s-2;a>=0;--a)(r=(i=t[a]).getLayout().y+i.getLayout().dy+e-o)>0&&(l=i.getLayout().y-r,i.setLayout({y:l},!0)),o=i.getLayout().y}})}function Ga(t,e){for(var n=0,i=t.length,r=-1;++r<i;){var a=+e.call(t,t[r],r);isNaN(a)||(n+=a)}return n}function Fa(t){return t.getLayout().y+t.getLayout().dy/2}function ja(t){return t.getValue()}function Ha(t,e,n,i,r){var a=t.ends,o=new XC({shape:{points:r?function(t,e,n){return du.map(t,function(t){return t=t.slice(),t[e]=n.initBaseline,t})}(a,i,t):a}});return Wa(t,o,e,n,r),o}function Wa(t,e,n,i,r){var a=n.hostModel;(0,Pp[r?"initProps":"updateProps"])(e,{shape:{points:t.ends}},a,i);var o=n.getItemModel(i),s=o.getModel(WC),l=n.getItemVisual(i,"color"),u=s.getItemStyle(["borderColor"]);u.stroke=l,u.strokeNoScale=!0,e.useStyle(u),e.z2=100;var c=o.getModel(YC).getItemStyle();Pp.setHoverStyle(e,c)}function Ya(t,e,n){var i=t.ends;return new iI({shape:{points:n?function(t,e){return du.map(t,function(t){return t=t.slice(),t[1]=e.initBaseline,t})}(i,t):i},z2:100})}function Xa(t,e,n,i){var r=e.getItemModel(n),a=r.getModel(tI),o=e.getItemVisual(n,"color"),s=e.getItemVisual(n,"borderColor")||o,l=a.getItemStyle(nI);t.useStyle(l),t.style.strokeNoScale=!0,t.style.fill=o,t.style.stroke=s,t.__simpleBox=i;var u=r.getModel(eI).getItemStyle();Pp.setHoverStyle(t,u)}function Ua(t,e,n){var i=t.getData(),r=i.getLayout("largePoints"),a=new rI({shape:{points:r},__sign:1});e.add(a);var o=new rI({shape:{points:r},__sign:-1});e.add(o),qa(1,a,t,i),qa(-1,o,t,i),n&&(a.incremental=!0,o.incremental=!0)}function qa(t,e,n,i){var r=t>0?"P":"N",a=i.getVisual("borderColor"+r)||i.getVisual("color"+r),o=n.getModel(tI).getItemStyle(nI);e.useStyle(o),e.style.fill=null,e.style.stroke=a}function Za(t,e,n,i,r){return n>i?-1:n<i?1:e>0?t.get(r,e-1)<=i?1:-1:1}function Ka(t,e){t.eachChild(function(t){t.attr({z:e.z,zlevel:e.zlevel,style:{stroke:"stroke"===e.brushType?e.color:null,fill:"fill"===e.brushType?e.color:null}})})}function $a(t,e){vI.call(this);var n=new F_(t,e),i=new vI;this.add(n),this.add(i),i.beforeUpdate=function(){this.attr(n.getScale())},this.updateData(t,e)}function Ja(t){var e=t.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(t.data=SI(e,function(t){var e={coords:[t[0].coord,t[1].coord]};return t[0].name&&(e.fromName=t[0].name),t[1].name&&(e.toName=t[1].name),wI([e,t[0],t[1]])}))}function Qa(t,e,n){Pp.Group.call(this),this.add(this.createLine(t,e,n)),this._updateEffectSymbol(t,e)}function to(t,e,n){Pp.Group.call(this),this._createPolyline(t,e,n)}function eo(t,e,n){OI.call(this,t,e,n),this._lastFrame=0,this._lastFramePercent=0}function no(){this.group=new Pp.Group}function io(t){return t instanceof Array||(t=[t,t]),t}function ro(){var t=du.createCanvas();this.canvas=t,this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={}}function ao(t,e,n,i){var r=t.getItemLayout(e),a=n.get("symbolRepeat"),o=n.get("symbolClip"),s=n.get("symbolPosition")||"start",l=(n.get("symbolRotate")||0)*Math.PI/180||0,u=n.get("symbolPatternSize")||2,c=n.isAnimationEnabled(),h={dataIndex:e,layout:r,itemModel:n,symbolType:t.getItemVisual(e,"symbol")||"circle",color:t.getItemVisual(e,"color"),symbolClip:o,symbolRepeat:a,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:u,rotation:l,animationModel:c?n:null,hoverAnimation:c&&n.get("hoverAnimation"),z2:n.getShallow("z",!0)||0};!function(t,e,n,i,r){var a,o=i.valueDim,s=t.get("symbolBoundingData"),l=i.coordSys.getOtherAxis(i.coordSys.getBaseAxis()),u=l.toGlobalCoord(l.dataToCoord(0)),c=1-+(n[o.wh]<=0);if(du.isArray(s)){var h=[oo(l,s[0])-u,oo(l,s[1])-u];h[1]<h[0]&&h.reverse(),a=h[c]}else a=null!=s?oo(l,s)-u:e?i.coordSysExtent[o.index][c]-u:n[o.wh];r.boundingLength=a,e&&(r.repeatCutLength=n[o.wh]),r.pxSign=a>0?1:a<0?-1:0}(n,a,r,i,h),function(t,e,n,i,r,a,o,s,l,u){var c=l.valueDim,h=l.categoryDim,d=Math.abs(n[h.wh]),f=t.getItemVisual(e,"symbolSize");du.isArray(f)?f=f.slice():(null==f&&(f="100%"),f=[f,f]),f[h.index]=WI(f[h.index],d),f[c.index]=WI(f[c.index],i?d:Math.abs(a)),u.symbolSize=f,(u.symbolScale=[f[0]/s,f[1]/s])[c.index]*=(l.isHorizontal?-1:1)*o}(t,e,r,a,0,h.boundingLength,h.pxSign,u,i,h),function(t,e,n,i,r){var a=t.get(UI)||0;a&&(ZI.attr({scale:e.slice(),rotation:n}),ZI.updateTransform(),a/=ZI.getLineScale(),a*=e[i.valueDim.index]),r.valueLineWidth=a}(n,h.symbolScale,l,i,h);var d=h.symbolSize,f=n.get("symbolOffset");return du.isArray(f)&&(f=[WI(f[0],d[0]),WI(f[1],d[1])]),function(t,e,n,i,r,a,o,s,l,u,c,h){var d=c.categoryDim,f=c.valueDim,p=h.pxSign,g=Math.max(e[f.index]+s,0),m=g;if(i){var v=Math.abs(l),y=du.retrieve(t.get("symbolMargin"),"15%")+"",x=!1;y.lastIndexOf("!")===y.length-1&&(x=!0,y=y.slice(0,y.length-1)),y=WI(y,e[f.index]);var _=Math.max(g+2*y,0),b=x?0:2*y,w=YI(i),S=w?i:bo((v+b)/_);_=g+2*(y=(v-S*g)/2/(x?S:S-1)),b=x?0:2*y,w||"fixed"===i||(S=u?bo((Math.abs(u)+b)/_):0),m=S*_-b,h.repeatTimes=S,h.symbolMargin=y}var M=p*(m/2),A=h.pathPosition=[];A[d.index]=n[d.wh]/2,A[f.index]="start"===o?M:"end"===o?l-M:l/2,a&&(A[0]+=a[0],A[1]+=a[1]);var C=h.bundlePosition=[];C[d.index]=n[d.xy],C[f.index]=n[f.xy];var I=h.barRectShape=du.extend({},n);I[f.wh]=p*Math.max(Math.abs(n[f.wh]),Math.abs(A[f.index]+M)),I[d.wh]=n[d.wh];var P=h.clipShape={};P[d.xy]=-n[d.xy],P[d.wh]=c.ecSize[d.wh],P[f.xy]=0,P[f.wh]=n[f.wh]}(n,d,r,a,0,f,s,h.valueLineWidth,h.boundingLength,h.repeatCutLength,i,h),h}function oo(t,e){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(e)))}function so(t){var e=t.symbolPatternSize,n=HI(t.symbolType,-e/2,-e/2,e,e,t.color);return n.attr({culling:!0}),"image"!==n.type&&n.setStyle({strokeNoScale:!0}),n}function lo(t,e,n,i){function r(t){var e=l.slice(),i=n.pxSign,r=t;return("start"===n.symbolRepeatDirection?i>0:i<0)&&(r=c-1-t),e[u.index]=d*(r-c/2+.5)+l[u.index],{position:e,scale:n.symbolScale.slice(),rotation:n.rotation}}var a=t.__pictorialBundle,o=n.symbolSize,s=n.valueLineWidth,l=n.pathPosition,u=e.valueDim,c=n.repeatTimes||0,h=0,d=o[e.valueDim.index]+s+2*n.symbolMargin;for(yo(t,function(t){t.__pictorialAnimationIndex=h,t.__pictorialRepeatTimes=c,h<c?xo(t,null,r(h),n,i):xo(t,null,{scale:[0,0]},n,i,function(){a.remove(t)}),po(t,n),h++});h<c;h++){var f=so(n);f.__pictorialAnimationIndex=h,f.__pictorialRepeatTimes=c,a.add(f);var p=r(h);xo(f,{position:p.position,scale:[0,0]},{scale:p.scale,rotation:p.rotation},n,i),f.on("mouseover",function(){yo(t,function(t){t.trigger("emphasis")})}).on("mouseout",function(){yo(t,function(t){t.trigger("normal")})}),po(f,n)}}function uo(t,e,n,i){var r=t.__pictorialBundle,a=t.__pictorialMainPath;a?xo(a,null,{position:n.pathPosition.slice(),scale:n.symbolScale.slice(),rotation:n.rotation},n,i):(a=t.__pictorialMainPath=so(n),r.add(a),xo(a,{position:n.pathPosition.slice(),scale:[0,0],rotation:n.rotation},{scale:n.symbolScale.slice()},n,i),a.on("mouseover",function(){this.trigger("emphasis")}).on("mouseout",function(){this.trigger("normal")})),po(a,n)}function co(t,e,n){var i=du.extend({},e.barRectShape),r=t.__pictorialBarRect;r?xo(r,null,{shape:i},e,n):(r=t.__pictorialBarRect=new Pp.Rect({z2:2,shape:i,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),t.add(r))}function ho(t,e,n,i){if(n.symbolClip){var r=t.__pictorialClipPath,a=du.extend({},n.clipShape),o=e.valueDim,s=n.animationModel,l=n.dataIndex;if(r)Pp.updateProps(r,{shape:a},s,l);else{a[o.wh]=0,r=new Pp.Rect({shape:a}),t.__pictorialBundle.setClipPath(r),t.__pictorialClipPath=r;var u={};u[o.wh]=n.clipShape[o.wh],Pp[i?"updateProps":"initProps"](r,{shape:u},s,l)}}}function fo(t,e){var n=t.getItemModel(e);return n.getAnimationDelayParams=function(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}},n.isAnimationEnabled=function(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")},n}function po(t,e){t.off("emphasis").off("normal");var n=e.symbolScale.slice();e.hoverAnimation&&t.on("emphasis",function(){this.animateTo({scale:[1.1*n[0],1.1*n[1]]},400,"elasticOut")}).on("normal",function(){this.animateTo({scale:n.slice()},400,"elasticOut")})}function go(t,e,n,i){var r=new Pp.Group,a=new Pp.Group;return r.add(a),r.__pictorialBundle=a,a.attr("position",n.bundlePosition.slice()),n.symbolRepeat?lo(r,e,n):uo(r,0,n),co(r,n,i),ho(r,e,n,i),r.__pictorialShapeStr=vo(t,n),r.__pictorialSymbolMeta=n,r}function mo(t,e,n,i){var r=i.__pictorialBarRect;r&&(r.style.text=null);var a=[];yo(i,function(t){a.push(t)}),i.__pictorialMainPath&&a.push(i.__pictorialMainPath),i.__pictorialClipPath&&(n=null),du.each(a,function(t){Pp.updateProps(t,{scale:[0,0]},n,e,function(){i.parent&&i.parent.remove(i)})}),t.setItemGraphicEl(e,null)}function vo(t,e){return[t.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function yo(t,e,n){du.each(t.__pictorialBundle.children(),function(i){i!==t.__pictorialBarRect&&e.call(n,i)})}function xo(t,e,n,i,r,a){e&&t.attr(e),i.symbolClip&&!r?n&&t.attr(n):n&&Pp[r?"updateProps":"initProps"](t,n,i.animationModel,i.dataIndex,a)}function _o(t,e,n){var i=n.color,r=n.dataIndex,a=n.itemModel,o=a.getModel("itemStyle").getItemStyle(["color"]),s=a.getModel("emphasis.itemStyle").getItemStyle(),l=a.getShallow("cursor");yo(t,function(t){t.setColor(i),t.setStyle(du.defaults({fill:i,opacity:n.opacity},o)),Pp.setHoverStyle(t,s),l&&(t.cursor=l),t.z2=n.z2});var u={},c=e.valueDim.posDesc[+(n.boundingLength>0)],h=t.__pictorialBarRect;XI(h.style,u,a,i,e.seriesModel,r,c),Pp.setHoverStyle(h,u)}function bo(t){var e=Math.round(t);return Math.abs(t-e)<1e-4?e:Math.ceil(t)}function wo(t,e,n){this.dimension="single",this.dimensions=["single"],this._axis=null,this._rect,this._init(t,e,n),this.model=t}function So(t,e,n,i,r){var a=t.axis;if(!a.scale.isBlank()&&a.containData(e))if(t.involveSeries){var o=function(t,e){var n=e.axis,i=n.dim,r=t,a=[],o=Number.MAX_VALUE,s=-1;return lP(e.seriesModels,function(e,l){var u,c,h=e.getData().mapDimension(i,!0);if(e.getAxisTooltipData){var d=e.getAxisTooltipData(h,t,n);c=d.dataIndices,u=d.nestestValue}else{if(!(c=e.getData().indicesOfNearest(h[0],t,"category"===n.type?.5:null)).length)return;u=e.getData().get(h[0],c[0])}if(null!=u&&isFinite(u)){var f=t-u,p=Math.abs(f);p<=o&&((p<o||f>=0&&s<0)&&(o=p,s=f,r=u,a.length=0),lP(c,function(t){a.push({seriesIndex:e.seriesIndex,dataIndexInside:t,dataIndex:e.getData().getRawIndex(t)})}))}}),{payloadBatch:a,snapToValue:r}}(e,t),s=o.payloadBatch,l=o.snapToValue;s[0]&&null==r.seriesIndex&&du.extend(r,s[0]),!i&&t.snap&&a.containData(l)&&null!=l&&(e=l),n.showPointer(t,e,s,r),n.showTooltip(t,o,l)}else n.showPointer(t,e)}function Mo(t){var e=t.axis.model,n={},i=n.axisDim=t.axis.dim;return n.axisIndex=n[i+"AxisIndex"]=e.componentIndex,n.axisName=n[i+"AxisName"]=e.name,n.axisId=n[i+"AxisId"]=e.id,n}function Ao(t){return!t||null==t[0]||isNaN(t[0])||null==t[1]||isNaN(t[1])}function Co(t,e,n,i){e.handler(t,n,i)}function Io(){}function Po(t,e,n,i){To(mP(n).lastProp,i)||(mP(n).lastProp=i,e?Pp.updateProps(n,i,t):(n.stopAnimation(),n.attr(i)))}function To(t,e){if(du.isObject(t)&&du.isObject(e)){var n=!0;return du.each(e,function(e,i){n=n&&To(t[i],e)}),!!n}return t===e}function Oo(t,e){t[e.get("label.show")?"show":"hide"]()}function ko(t){return{position:t.position.slice(),rotation:t.rotation||0}}function Do(t,e,n){var i=e.get("z"),r=e.get("zlevel");t&&t.traverse(function(t){"group"!==t.type&&(null!=i&&(t.z=i),null!=r&&(t.zlevel=r),t.silent=n)})}function Eo(t,e,n,i,r){var a=Lo(n.get("value"),e.axis,e.ecModel,n.get("seriesDataIndices"),{precision:n.get("label.precision"),formatter:n.get("label.formatter")}),o=n.getModel("label"),s=Zp.normalizeCssArray(o.get("padding")||0),l=o.getFont(),u=Xc.getBoundingRect(a,l),c=r.position,h=u.width+s[1]+s[3],d=u.height+s[0]+s[2],f=r.align;"right"===f&&(c[0]-=h),"center"===f&&(c[0]-=h/2);var p=r.verticalAlign;"bottom"===p&&(c[1]-=d),"middle"===p&&(c[1]-=d/2),function(t,e,n,i){var r=i.getWidth(),a=i.getHeight();t[0]=Math.min(t[0]+e,r)-e,t[1]=Math.min(t[1]+n,a)-n,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}(c,h,d,i);var g=o.get("backgroundColor");g&&"auto"!==g||(g=e.get("axisLine.lineStyle.color")),t.label={shape:{x:0,y:0,width:h,height:d,r:o.get("borderRadius")},position:c.slice(),style:{text:a,textFont:l,textFill:o.getTextColor(),textPosition:"inside",fill:g,stroke:o.get("borderColor")||"transparent",lineWidth:o.get("borderWidth")||0,shadowBlur:o.get("shadowBlur"),shadowColor:o.get("shadowColor"),shadowOffsetX:o.get("shadowOffsetX"),shadowOffsetY:o.get("shadowOffsetY")},z2:10}}function Lo(t,e,n,i,r){t=e.scale.parse(t);var a=e.scale.getLabel(t,{precision:r.precision}),o=r.formatter;if(o){var s={value:Dx.getAxisRawValue(e,t),seriesData:[]};du.each(i,function(t){var e=n.getSeriesByIndex(t.seriesIndex),i=t.dataIndexInside,r=e&&e.getDataParams(i);r&&s.seriesData.push(r)}),du.isString(o)?a=o.replace("{value}",a):du.isFunction(o)&&(a=o(s))}return a}function No(t,e,n){var i=Mu.create();return Mu.rotate(i,i,n.rotation),Mu.translate(i,i,n.position),Pp.applyTransform([t.dataToCoord(e),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],i)}function Ro(t,e){var n={};return n[e.dim+"AxisIndex"]=e.index,t.getCartesian(n)}function Bo(t){return"x"===t.dim?0:1}function zo(t){return t.isHorizontal()?0:1}function Vo(t,e){var n=t.getRect();return[n[SP[e]],n[SP[e]]+n[MP[e]]]}function Go(t,e,n){if(t.count())for(var i,r=e.coordinateSystem,a=e.getLayerSeries(),o=t.mapDimension("single"),s=t.mapDimension("value"),l=du.map(a,function(e){return du.map(e.indices,function(e){var n=r.dataToPoint(t.get(o,e));return n[1]=t.get(s,e),n})}),u=function(t){for(var e=t.length,n=t[0].length,i=[],r=[],a=0,o={},s=0;s<n;++s){for(var l=0,u=0;l<e;++l)u+=t[l][s][1];u>a&&(a=u),i.push(u)}for(var c=0;c<n;++c)r[c]=(a-i[c])/2;a=0;for(var h=0;h<n;++h){var d=i[h]+r[h];d>a&&(a=d)}return o.y0=r,o.max=a,o}(l),c=u.y0,h=n/u.max,d=a.length,f=a[0].indices.length,p=0;p<f;++p){i=c[p]*h,t.setItemLayout(a[0].indices[p],{layerIndex:0,x:l[0][p][0],y0:i,y:l[0][p][1]*h});for(var g=1;g<d;++g)i+=l[g-1][p][1]*h,t.setItemLayout(a[g].indices[p],{layerIndex:g,x:l[g][p][0],y0:i,y:l[g][p][1]*h})}}function Fo(t){var e=0;du.each(t.children,function(t){Fo(t);var n=t.value;du.isArray(n)&&(n=n[0]),e+=n});var n=t.value;du.isArray(n)&&(n=n[0]),(null==n||isNaN(n))&&(n=e),n<0&&(n=0),du.isArray(t.value)?t.value[0]=n:t.value=n}function jo(t,e,n){function i(){o.ignore=o.hoverIgnore}function r(){o.ignore=o.normalIgnore}Pp.Group.call(this);var a=new Pp.Sector({z2:zP});a.seriesIndex=e.seriesIndex;var o=new Pp.Text({z2:VP,silent:t.getModel("label").get("silent")});this.add(a),this.add(o),this.updateData(!0,t,"normal",e,n),this.on("emphasis",i).on("normal",r).on("mouseover",i).on("mouseout",r)}function Ho(t,e){var n=t.children||[];t.children=function(t,e){if("function"==typeof e)return t.sort(e);var n="asc"===e;return t.sort(function(t,e){var i=(t.getValue()-e.getValue())*(n?1:-1);return 0===i?(t.dataIndex-e.dataIndex)*(n?-1:1):i})}(n,e),n.length&&du.each(t.children,function(t){Ho(t,e)})}function Wo(t,e,n,i,r){null==n[t]||r||(e[t]=n[t],n[t]=i[t])}function Yo(t,e,n,i){function r(t){null==t&&(t=l),g&&(u=e.getItemModel(t),c=u.getModel($P),h=u.getModel(JP),d=e.getItemVisual(t,"color"),g=!1)}var a=t.get("renderItem"),o=t.coordinateSystem,s={};o&&(s=o.prepareCustoms?o.prepareCustoms():tT[o.type](o));var l,u,c,h,d,f=du.defaults({getWidth:i.getWidth,getHeight:i.getHeight,getZr:i.getZr,getDevicePixelRatio:i.getDevicePixelRatio,value:function(t,n){return null==n&&(n=l),e.get(e.getDimension(t||0),n)},style:function(n,i){null==i&&(i=l),r(i);var a=u.getModel(ZP).getItemStyle();null!=d&&(a.fill=d);var o=e.getItemVisual(i,"opacity");return null!=o&&(a.opacity=o),Pp.setTextStyle(a,c,null,{autoColor:d,isRectText:!0}),a.text=c.getShallow("show")?du.retrieve2(t.getFormattedLabel(i,"normal"),UP(e,i)):null,n&&du.extend(a,n),a},styleEmphasis:function(n,i){null==i&&(i=l),r(i);var a=u.getModel(KP).getItemStyle();return Pp.setTextStyle(a,h,null,{isRectText:!0},!0),a.text=h.getShallow("show")?du.retrieve3(t.getFormattedLabel(i,"emphasis"),t.getFormattedLabel(i,"normal"),UP(e,i)):null,n&&du.extend(a,n),a},visual:function(t,n){return null==n&&(n=l),e.getItemVisual(n,t)},barLayout:function(t){if(o.getBaseAxis){var e=o.getBaseAxis();return qP(du.defaults({axis:e},t),i)}},currentSeriesIndices:function(){return n.getCurrentSeriesIndices()},font:function(t){return Pp.getFont(t,n)}},s.api||{}),p={context:{},seriesId:t.id,seriesName:t.name,seriesIndex:t.seriesIndex,coordSys:s.coordSys,dataInsideLength:e.count(),encode:function(t){var e={};return du.each(t.dimensions,function(n,i){var r=t.getDimensionInfo(n);if(!r.isExtraCoord){var a=r.coordDim;(e[a]=e[a]||[])[r.coordDimIndex]=i}}),e}(t.getData())},g=!0;return function(t){return l=t,g=!0,a&&a(du.defaults({dataIndexInside:t,dataIndex:e.getRawIndex(t)},p),f)||{}}}function Xo(t,e,n,i,r,a){return(t=Uo(t,e,n,i,r,a))&&a.setItemGraphicEl(e,t),t}function Uo(t,e,n,i,r,a){var o=n.type;if(!t||o===t.__customGraphicType||"path"===o&&n.pathData===t.__customPathData||"image"===o&&n.style.image===t.__customImagePath||"text"===o&&n.style.text===t.__customText||(r.remove(t),t=null),null!=o){var s=!t;if(!t&&(t=function(t){var e,n=t.type;if("path"===n){var i=t.shape;(e=Pp.makePath(i.pathData,null,{x:i.x||0,y:i.y||0,width:i.width||0,height:i.height||0},"center")).__customPathData=t.pathData}else"image"===n?(e=new Pp.Image({})).__customImagePath=t.style.image:"text"===n?(e=new Pp.Text({})).__customText=t.style.text:e=new(0,Pp[n.charAt(0).toUpperCase()+n.slice(1)]);return e.__customGraphicType=n,e.name=t.name,e}(n)),function(t,e,n,i,r,a){var o={},s=n.style||{};if(n.shape&&(o.shape=du.clone(n.shape)),n.position&&(o.position=n.position.slice()),n.scale&&(o.scale=n.scale.slice()),n.origin&&(o.origin=n.origin.slice()),n.rotation&&(o.rotation=n.rotation),"image"===t.type&&n.style&&(l=o.style={},du.each(["x","y","width","height"],function(e){Wo(e,l,s,t.style,a)})),"text"===t.type&&n.style){var l=o.style={};du.each(["x","y"],function(e){Wo(e,l,s,t.style,a)}),!s.hasOwnProperty("textFill")&&s.fill&&(s.textFill=s.fill),!s.hasOwnProperty("textStroke")&&s.stroke&&(s.textStroke=s.stroke)}if("group"!==t.type&&(t.useStyle(s),a)){t.style.opacity=0;var u=s.opacity;null==u&&(u=1),Pp.initProps(t,{style:{opacity:u}},i,e)}a?t.attr(o):Pp.updateProps(t,o,i,e),t.attr({z2:n.z2||0,silent:n.silent}),!1!==n.styleEmphasis&&Pp.setHoverStyle(t,n.styleEmphasis)}(t,e,n,i,0,s),"group"===o){var l=t.children()||[],u=n.children||[];if(n.diffChildrenByName)!function(t){new cy(t.oldChildren,t.newChildren,qo,qo,t).add(Zo).update(Zo).remove(function(t){var e=this.context,n=e.oldChildren[t];n&&e.group.remove(n)}).execute()}({oldChildren:l,newChildren:u,dataIndex:e,animatableModel:i,group:t,data:a});else{for(var c=0;c<u.length;c++)Uo(t.childAt(c),e,u[c],i,t,a);for(;c<l.length;c++)l[c]&&t.remove(l[c])}}return r.add(t),t}}function qo(t,e){var n=t&&t.name;return null!=n?n:QP+e}function Zo(t,e){var n=this.context,i=null!=t?n.newChildren[t]:null;Uo(null!=e?n.oldChildren[e]:null,n.dataIndex,i,n.animatableModel,n.group,n.data)}function Ko(t,e,n,i){var r=n.type,a=new(0,Pp[r.charAt(0).toUpperCase()+r.slice(1)])(n);e.add(a),i.set(t,a),a.__ecGraphicId=t}function $o(t,e){var n=t&&t.parent;n&&("group"===t.type&&t.traverse(function(t){$o(t,e)}),e.removeKey(t.__ecGraphicId),n.remove(t))}function Jo(t,e){var n;return du.each(e,function(e){null!=t[e]&&"auto"!==t[e]&&(n=!0)}),n}function Qo(t,e,n){var i,r={},a="toggleSelected"===t;return n.eachComponent("legend",function(n){a&&null!=i?n[i?"select":"unSelect"](e.name):(n[t](e.name),i=n.isSelected(e.name));var o=n.getData();du.each(o,function(t){var e=t.get("name");if("\n"!==e&&""!==e){var i=n.isSelected(e);r.hasOwnProperty(e)?r[e]=r[e]&&i:r[e]=i}})}),{name:e.name,selected:r}}function ts(t,e){e.dispatchAction({type:"legendToggleSelect",name:t})}function es(t,e,n,i){var r=n.getZr().storage.getDisplayList()[0];r&&r.useHoverLayer||n.dispatchAction({type:"highlight",seriesName:t.name,name:e,excludeSeriesId:i})}function ns(t,e,n,i){var r=n.getZr().storage.getDisplayList()[0];r&&r.useHoverLayer||n.dispatchAction({type:"downplay",seriesName:t.name,name:e,excludeSeriesId:i})}function is(t,e,n){var i=[1,1];i[t.getOrient().index]=0,mT(e,n,{type:"box",ignoreSize:i})}function rs(t,e){if(Jl.wxa)return null;var n=document.createElement("div"),i=this._zr=e.getZr();this.el=n,this._x=e.getWidth()/2,this._y=e.getHeight()/2,t.appendChild(n),this._container=t,this._show=!1,this._hideTimeout;var r=this;n.onmouseenter=function(){r._enterable&&(clearTimeout(r._hideTimeout),r._show=!0),r._inContent=!0},n.onmousemove=function(e){if(e=e||window.event,!r._enterable){var n=i.handler;mh.normalizeEvent(t,e,!0),n.dispatch("mousemove",e)}},n.onmouseleave=function(){r._enterable&&r._show&&r.hideLater(r._hideDelay),r._inContent=!1}}function as(t){for(var e=t.pop();t.length;){var n=t.pop();n&&(zp.isInstance(n)&&(n=n.get("tooltip",!0)),"string"==typeof n&&(n={formatter:n}),e=new zp(n,e,e.ecModel))}return e}function os(t,e){return t.dispatchAction||du.bind(e.dispatchAction,e)}function ss(t){var e=t.clientWidth,n=t.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var i=document.defaultView.getComputedStyle(t);i&&(e+=parseInt(i.paddingLeft,10)+parseInt(i.paddingRight,10)+parseInt(i.borderLeftWidth,10)+parseInt(i.borderRightWidth,10),n+=parseInt(i.paddingTop,10)+parseInt(i.paddingBottom,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10))}return{width:e,height:n}}function ls(t){return"center"===t||"middle"===t}function us(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function cs(t){return t.dim}function hs(t,e){h_.call(this,"radius",t,e),this.type="category"}function ds(t,e){e=e||[0,360],h_.call(this,"angle",t,e),this.type="category"}function fs(t,e){return e.type||(e.data?"category":"value")}function ps(t,e){if(t.type=e.get("type"),t.scale=FT(e),t.onBand=e.get("boundaryGap")&&"category"===t.type,t.inverse=e.get("inverse"),"angleAxis"===e.mainType){t.inverse^=e.get("clockwise");var n=e.get("startAngle");t.setExtent(n,n+(t.inverse?-360:360))}e.axis=t,t.model=e}function gs(t,e,n){e[1]>e[0]&&(e=e.slice().reverse());var i=t.coordToPoint([e[0],n]),r=t.coordToPoint([e[1],n]);return{x1:i[0],y1:i[1],x2:r[0],y2:r[1]}}function ms(t){return t.getRadiusAxis().inverse?0:1}function vs(t){var e=t[0],n=t[t.length-1];e&&n&&Math.abs(Math.abs(e.coord-n.coord)-360)<1e-4&&t.pop()}function ys(t,e){e.update="updateView",T_.registerAction(e,function(e,n){var i={};return n.eachComponent({mainType:"geo",query:e},function(n){n[t](e.name);var r=n.coordinateSystem;du.each(r.regions,function(t){i[t.name]=n.isSelected(t.name)||!1})}),{selected:i,name:e.name}})}function xs(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!0}function _s(t){var e=["x","y"],n=["width","height"];return{point:function(e,n,i){if(e){var r=i.range;return bs(e[t],r)}},rect:function(i,r,a){if(i){var o=a.range,s=[i[e[t]],i[e[t]]+i[n[t]]];return s[1]<s[0]&&s.reverse(),bs(s[0],o)||bs(s[1],o)||bs(o[0],s)||bs(o[1],s)}}}}function bs(t,e){return e[0]<=t&&t<=e[1]}function ws(t,e,n,i,r){for(var a=0,o=r[r.length-1];a<r.length;a++){var s=r[a];if(function(t,e,n,i,r,a,o,s){var l=Ss(n-t,r-o,i-e,a-s);if(function(t){return t<=1e-6&&t>=-1e-6}(l))return!1;var u=Ss(r-t,r-o,a-e,a-s)/l;if(u<0||u>1)return!1;var c=Ss(n-t,r-t,i-e,a-e)/l;return!(c<0||c>1)}(t,e,n,i,s[0],s[1],o[0],o[1]))return!0;o=s}}function Ss(t,e,n,i){return t*i-e*n}function Ms(t,e,n){var i=this._targetInfoList=[],r={},a=Cs(e,t);nO(lO,function(t,e){(!n||!n.include||iO(n.include,e)>=0)&&t(a,i,r)})}function As(t){return t[0]>t[1]&&t.reverse(),t}function Cs(t,e){return Hh.parseFinder(t,e,{includeMainTypes:oO})}function Is(t,e,n,i){var r=n.getAxis(["x","y"][t]),a=As(du.map([0,1],function(t){return e?r.coordToData(r.toLocalCoord(i[t])):r.toGlobalCoord(r.dataToCoord(i[t]))})),o=[];return o[t]=a,o[1-t]=[NaN,NaN],{values:a,xyMinMax:o}}function Ps(t,e,n,i){return[e[0]-i[t]*n[0],e[1]-i[t]*n[1]]}function Ts(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}function Os(t,e,n,i){for(var r=0,a=e.length;r<a;r++){var o=e[r];if(t[o.brushType](i,n,o.selectors,o))return!0}}function ks(t){var e=t.brushSelector;if(du.isString(e)){var n=[];return du.each(eO,function(t,i){n[i]=function(n,i,r,a){var o=i.getItemLayout(n);return t[e](o,r,a)}}),n}if(du.isFunction(e)){var i={};return du.each(eO,function(t,n){i[n]=e}),i}return e}function Ds(t){return new hc(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}function Es(t,e){return du.merge({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new zp(t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},e,!0)}function Ls(t,e,n,i){(!i||i.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(n)).enableBrush(t.brushOption).updateCovers(t.areas.slice())}function Ns(t,e,n){this.model=t,this.ecModel=e,this.api=n,this._brushType,this._brushMode}function Rs(t,e,n){this._model=t}function Bs(t,e,n,i){var r=n.calendarModel,a=n.seriesModel,o=r?r.coordinateSystem:a?a.coordinateSystem:null;return o===this?o[t](i):null}function zs(t,e){var n=t.cellSize;du.isArray(n)?1===n.length&&(n[1]=n[0]):n=t.cellSize=[n,n];var i=du.map([0,1],function(t){return AO(e,t)&&(n[t]="auto"),null!=n[t]&&"auto"!==n[t]});CO(t,e,{type:"box",ignoreSize:i})}function Vs(t,e){t=t.slice();var n=du.map(t,Zp.capitalFirst);e=(e||[]).slice();var i=du.map(e,Zp.capitalFirst);return function(r,a){du.each(t,function(t,o){for(var s={name:t,capital:n[o]},l=0;l<e.length;l++)s[e[l]]=t+i[l];r.call(a,s)})}}function Gs(t,e){var n=t.getAxisModel(),i=t._percentWindow,r=t._valueWindow;if(i){var a=Wp.getPixelPrecision(r,[0,500]);a=Math.min(a,20);var o=e||0===i[0]&&100===i[1];n.setRange(o?null:+r[0].toFixed(a),o?null:+r[1].toFixed(a))}}function Fs(t){var e={};return BO(["start","end","startValue","endValue","throttle"],function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e}function js(t,e){var n=t._rangePropMode,i=t.get("rangeMode");BO([["start","startValue"],["end","endValue"]],function(t,r){var a=null!=e[t[0]],o=null!=e[t[1]];a&&!o?n[r]="percent":!a&&o?n[r]="value":i?n[r]=i[r]:a&&(n[r]="percent")})}function Hs(t){return"vertical"===t?"ns-resize":"ew-resize"}function Ws(t){var e=t.getZr();return e[$O]||(e[$O]={})}function Ys(t){du.each(t,function(e,n){e.count||(e.controller.dispose(),delete t[n])})}function Xs(t,e){var n=[];du.each(t.dataZoomInfos,function(t){var i=e(t);!t.disabled&&i&&n.push({dataZoomId:t.dataZoomId,start:i[0],end:i[1]})}),n.length&&t.dispatchAction(n)}function Us(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}function qs(t,e,n){if(n[0]===n[1])return n.slice();for(var i=(n[1]-n[0])/200,r=n[0],a=[],o=0;o<=200&&r<n[1];o++)a.push(r),r+=i;return a.push(n[1]),a}function Zs(t,e,n,i){return new Pp.Polygon({shape:{points:t},draggable:!!n,cursor:e,drift:n,onmousemove:function(t){mh.stop(t.event)},ondragend:i})}function Ks(t){var e=t.get("hoverLinkOnHandle");return!!(null==e?t.get("realtime"):e)}function $s(t){return"vertical"===t?"ns-resize":"ew-resize"}function Js(t,e){var n=t.inverse;("vertical"===t.orient?!n:n)&&e.reverse()}function Qs(t){Hh.defaultEmphasis(t,"label",["show"])}function tl(t,e,n,i,r,a){var o=[],s=zk(e,i)?e.getCalculationInfo("stackResultDimension"):i,l=nl(e,s,t),u=e.indicesOfNearest(s,l)[0];o[r]=e.get(n,u),o[a]=e.get(i,u);var c=Wp.getPrecision(e.get(i,u));return(c=Math.min(c,20))>=0&&(o[a]=+o[a].toFixed(c)),o}function el(t,e,n,i){var r={};return null!=t.valueIndex||null!=t.valueDim?(r.valueDataDim=null!=t.valueIndex?e.getDimension(t.valueIndex):t.valueDim,r.valueAxis=n.getAxis(function(t,e){var n=t.getData(),i=n.dimensions;e=n.getDimension(e);for(var r=0;r<i.length;r++){var a=n.getDimensionInfo(i[r]);if(a.name===e)return a.coordDim}}(i,r.valueDataDim)),r.baseAxis=n.getOtherAxis(r.valueAxis),r.baseDataDim=e.mapDimension(r.baseAxis.dim)):(r.baseAxis=i.getBaseAxis(),r.valueAxis=n.getOtherAxis(r.baseAxis),r.baseDataDim=e.mapDimension(r.baseAxis.dim),r.valueDataDim=e.mapDimension(r.valueAxis.dim)),r}function nl(t,e,n){if("average"===n){var i=0,r=0;return t.each(e,function(t,e){isNaN(t)||(i+=t,r++)}),i/r}return"median"===n?t.getMedian(e):t.getDataExtent(e,!0)["max"===n?1:0]}function il(t,e,n){var i=e.coordinateSystem;t.each(function(r){var a,o=t.getItemModel(r),s=Wp.parsePercent(o.get("x"),n.getWidth()),l=Wp.parsePercent(o.get("y"),n.getHeight());if(isNaN(s)||isNaN(l)){if(e.getMarkerPosition)a=e.getMarkerPosition(t.getValues(t.dimensions,r));else if(i){var u=t.get(i.dimensions[0],r),c=t.get(i.dimensions[1],r);a=i.dataToPoint([u,c])}}else a=[s,l];isNaN(s)||(a[0]=s),isNaN(l)||(a[1]=l),t.setItemLayout(r,a)})}function rl(t){return!isNaN(t)&&!isFinite(t)}function al(t,e,n,i){var r=1-t,a=i.dimensions[t];return rl(e[r])&&rl(n[r])&&e[t]===n[t]&&i.getAxis(a).containData(e[t])}function ol(t,e,n,i,r){var a,o=i.coordinateSystem,s=t.getItemModel(e),l=Wp.parsePercent(s.get("x"),r.getWidth()),u=Wp.parsePercent(s.get("y"),r.getHeight());if(isNaN(l)||isNaN(u)){if(i.getMarkerPosition)a=i.getMarkerPosition(t.getValues(t.dimensions,e));else{var c=o.dimensions,h=t.get(c[0],e),d=t.get(c[1],e);a=o.dataToPoint([h,d])}if("cartesian2d"===o.type){var f=o.getAxis("x"),p=o.getAxis("y");c=o.dimensions;rl(t.get(c[0],e))?a[0]=f.toGlobalCoord(f.getExtent()[n?0:1]):rl(t.get(c[1],e))&&(a[1]=p.toGlobalCoord(p.getExtent()[n?0:1]))}isNaN(l)||(a[0]=l),isNaN(u)||(a[1]=u)}else a=[l,u];t.setItemLayout(e,a)}function sl(t){return!isNaN(t)&&!isFinite(t)}function ll(t,e,n,i){var r=1-t;return sl(e[r])&&sl(n[r])}function ul(t,e,n,i,r){var a,o=i.coordinateSystem,s=t.getItemModel(e),l=Wp.parsePercent(s.get(n[0]),r.getWidth()),u=Wp.parsePercent(s.get(n[1]),r.getHeight());if(isNaN(l)||isNaN(u)){if(i.getMarkerPosition)a=i.getMarkerPosition(t.getValues(n,e));else{var c=[f=t.get(n[0],e),p=t.get(n[1],e)];o.clampData&&o.clampData(c,c),a=o.dataToPoint(c,!0)}if("cartesian2d"===o.type){var h=o.getAxis("x"),d=o.getAxis("y"),f=t.get(n[0],e),p=t.get(n[1],e);sl(f)?a[0]=h.toGlobalCoord(h.getExtent()["x0"===n[0]?0:1]):sl(p)&&(a[1]=d.toGlobalCoord(d.getExtent()["y0"===n[1]?0:1]))}isNaN(l)||(a[0]=l),isNaN(u)||(a[1]=u)}else a=[l,u];return a}function cl(t){var e=t.itemStyle||(t.itemStyle={}),n=e.emphasis||(e.emphasis={}),i=t.label||t.label||{},r=i.normal||(i.normal={}),a={normal:1,emphasis:1};du.each(i,function(t,e){a[e]||hl(r,e)||(r[e]=t)}),n.label&&!hl(i,"emphasis")&&(i.emphasis=n.label,delete n.label)}function hl(t,e){return t.hasOwnProperty(e)}function dl(t,e,n,i,r,a){var o=e.get("color");if(r)r.setColor(o),n.add(r),a&&a.onUpdate(r);else{var s=t.get("symbol");(r=Qk(s,-1,-1,2,2,o)).setStyle("strokeNoScale",!0),n.add(r),a&&a.onCreate(r)}var l=e.getItemStyle(["color","symbol","symbolSize"]);r.setStyle(l),i=du.merge({rectHover:!0,z2:100},i,!0);var u=t.get("symbolSize");(u=u instanceof Array?u.slice():[+u,+u])[0]/=2,u[1]/=2,i.scale=u;var c=t.get("symbolOffset");if(c){var h=i.position=i.position||[0,0];h[0]+=Wp.parsePercent(c[0],u[0]),h[1]+=Wp.parsePercent(c[1],u[1])}var d=t.get("symbolRotate");return i.rotation=(d||0)*Math.PI/180||0,r.attr(i),r.updateTransform(),r}function fl(t,e,n,i,r){if(!t.dragging){var a=i.getModel("checkpointStyle"),o=n.dataToCoord(i.getData().get(["value"],e));r||!a.get("animation",!0)?t.attr({position:[o,0]}):(t.stopAnimation(!0),t.animateTo({position:[o,0]},a.get("animationDuration",!0),a.get("animationEasing",!0)))}}function pl(t){this.model=t}function gl(t){this.model=t}function ml(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function vl(t){this._dom=null,this.model=t}function yl(t){var e=t[gD];return e||(e=t[gD]=[{}]),e}function xl(t,e,n){(this._brushController=new SC(n.getZr())).on("brush",du.bind(this._onBrush,this)).mount(),this._isZoomActive}function _l(t){var e={};return du.each(["xAxisIndex","yAxisIndex"],function(n){e[n]=t[n],null==e[n]&&(e[n]="all"),(!1===e[n]||"none"===e[n])&&(e[n]=[])}),e}function bl(t){this.model=t}function wl(t){return parseInt(t,10)}function Sl(t,e){PD.initVML(),this.root=t,this.storage=e;var n=document.createElement("div"),i=document.createElement("div");n.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",i.style.cssText="position:absolute;left:0;top:0;",t.appendChild(n),this._vmlRoot=i,this._vmlViewport=n,this.resize();var r=e.delFromStorage,a=e.addToStorage;e.delFromStorage=function(t){r.call(e,t),t&&t.onRemove&&t.onRemove(i)},e.addToStorage=function(t){t.onAdd&&t.onAdd(i),a.call(e,t)},this._firstPaint=!0}function Ml(t){return cE(1e4*t)/1e4}function Al(t){return t<mE&&t>-mE}function Cl(t,e){e&&Il(t,"transform","matrix("+lE.call(e,",")+")")}function Il(t,e,n){(!n||"linear"!==n.type&&"radial"!==n.type)&&("string"==typeof n&&n.indexOf("NaN")>-1&&console.log(n),t.setAttribute(e,n))}function Pl(t,e,n){if(function(t,e){var n=e?t.textFill:t.fill;return null!=n&&n!==uE}(e,n)){var i=n?e.textFill:e.fill;i="transparent"===i?uE:i,"none"!==t.getAttribute("clip-path")&&i===uE&&(i="rgba(0, 0, 0, 0.002)"),Il(t,"fill",i),Il(t,"fill-opacity",e.opacity)}else Il(t,"fill",uE);if(function(t,e){var n=e?t.textStroke:t.stroke;return null!=n&&n!==uE}(e,n)){var r=n?e.textStroke:e.stroke;Il(t,"stroke",r="transparent"===r?uE:r),Il(t,"stroke-width",(n?e.textStrokeWidth:e.lineWidth)/(!n&&e.strokeNoScale?e.host.getLineScale():1)),Il(t,"paint-order",n?"stroke":"fill"),Il(t,"stroke-opacity",e.opacity),e.lineDash?(Il(t,"stroke-dasharray",e.lineDash.join(",")),Il(t,"stroke-dashoffset",cE(e.lineDashOffset||0))):Il(t,"stroke-dasharray",""),e.lineCap&&Il(t,"stroke-linecap",e.lineCap),e.lineJoin&&Il(t,"stroke-linejoin",e.lineJoin),e.miterLimit&&Il(t,"stroke-miterlimit",e.miterLimit)}else Il(t,"stroke",uE)}function Tl(t){return"middle"===t?"middle":"bottom"===t?"baseline":"hanging"}function Ol(){}function kl(t,e,n,i,r){this._zrId=t,this._svgRoot=e,this._tagNames="string"==typeof n?[n]:n,this._markLabel=i,this._domName=r||"_dom",this.nextId=0}function Dl(t,e){TE.call(this,t,e,["linearGradient","radialGradient"],"__gradient_in_use__")}function El(t,e){TE.call(this,t,e,"clipPath","__clippath_in_use__")}function Ll(t,e){TE.call(this,t,e,["filter"],"__filter_in_use__","_shadowDom")}function Nl(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY||t.textShadowBlur||t.textShadowOffsetX||t.textShadowOffsetY)}function Rl(t){return parseInt(t,10)}function Bl(t,e){return e&&t&&e.parentNode!==t}function zl(t,e,n){if(Bl(t,e)&&n){var i=n.nextSibling;i?t.insertBefore(e,i):t.appendChild(e)}}function Vl(t,e){if(Bl(t,e)){var n=t.firstChild;n?t.insertBefore(e,n):t.appendChild(e)}}function Gl(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)}function Fl(t){return t.__textSvgEl}function jl(t){return t.__svgEl}function Hl(t,e){void 0===e&&(e={});var n=document.createElement(t);return Object.keys(e).forEach(function(t){n[t]=e[t]}),n}function Wl(t){if(!document.documentElement.contains(t))return{detached:!0,rendered:!1};for(var e=t;e!==document;){if("none"===getComputedStyle(e).display)return{detached:!1,rendered:!1};e=e.parentNode}return{detached:!1,rendered:!0}}function Yl(){var t=this;Ul(this),this.__resize_raf__&&function(t){yL||(yL=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}).bind(window)),yL(t)}(this.__resize_raf__),this.__resize_raf__=function(t){return vL||(vL=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,16)}).bind(window)),vL(t)}(function(){var e=function(t){var e=t.__resize_last__,n=e.width,i=e.height,r=t.offsetWidth,a=t.offsetHeight;return r!==n||a!==i?{width:r,height:a}:null}(t);e&&(t.__resize_last__=e,Xl(t))})}function Xl(t){t.__resize_listeners__.forEach(function(e){e.call(t)})}function Ul(t){var e=t.__resize_triggers__,n=e.expand,i=e.expandChild,r=e.contract,a=r.scrollWidth,o=r.scrollHeight,s=n.offsetWidth,l=n.offsetHeight,u=n.scrollWidth,c=n.scrollHeight;r.scrollLeft=a,r.scrollTop=o,i.style.width=s+1+"px",i.style.height=l+1+"px",n.scrollLeft=u,n.scrollTop=c}var ql,Zl="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{};"undefined"!=typeof window?ql=window.__DEV__:void 0!==Zl&&(ql=Zl),void 0===ql&&(ql=!0);var Kl=2311,$l=function(){return Kl++},Jl="object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0}:"undefined"==typeof document&&"undefined"!=typeof self?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0}:"undefined"==typeof navigator?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0}:function(t){var e={},n=t.match(/Firefox\/([\d.]+)/),i=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),r=t.match(/Edge\/([\d.]+)/),a=/micromessenger/i.test(t);return n&&(e.firefox=!0,e.version=n[1]),i&&(e.ie=!0,e.version=i[1]),r&&(e.edge=!0,e.version=r[1]),a&&(e.weChat=!0),{browser:e,os:{},node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!=typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!e.ie&&!e.edge,pointerEventsSupported:"onpointerdown"in window&&(e.edge||e.ie&&e.version>=11)}}(navigator.userAgent),Ql={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},tu={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},eu=Object.prototype.toString,nu=Array.prototype,iu=nu.forEach,ru=nu.filter,au=nu.slice,ou=nu.map,su=nu.reduce,lu={},uu=function(){return lu.createCanvas()};lu.createCanvas=function(){return document.createElement("canvas")};var cu,hu="__ec_primitive__";d.prototype={constructor:d,get:function(t){return this.hasOwnProperty(t)?this[t]:null},set:function(t,e){return this[t]=e},each:function(t,e){for(var n in void 0!==e&&(t=o(t,e)),this)this.hasOwnProperty(n)&&t(this[n],n)},removeKey:function(t){delete this[t]}};var du={$override:function(t,e){"createCanvas"===t&&(cu=null),lu[t]=e},clone:n,merge:i,mergeAll:function(t,e){for(var n=t[0],r=1,a=t.length;r<a;r++)n=i(n,t[r],e);return n},extend:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},defaults:r,createCanvas:uu,getContext:function(){return cu||(cu=uu().getContext("2d")),cu},indexOf:function(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n}return-1},inherits:function(t,e){function n(){}var i=t.prototype;for(var r in n.prototype=e.prototype,t.prototype=new n,i)t.prototype[r]=i[r];t.prototype.constructor=t,t.superClass=e},mixin:function(t,e,n){r(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,n)},isArrayLike:function(t){if(t)return"string"!=typeof t&&"number"==typeof t.length},each:a,map:function(t,e,n){if(t&&e){if(t.map&&t.map===ou)return t.map(e,n);for(var i=[],r=0,a=t.length;r<a;r++)i.push(e.call(n,t[r],r,t));return i}},reduce:function(t,e,n,i){if(t&&e){if(t.reduce&&t.reduce===su)return t.reduce(e,n,i);for(var r=0,a=t.length;r<a;r++)n=e.call(i,n,t[r],r,t);return n}},filter:function(t,e,n){if(t&&e){if(t.filter&&t.filter===ru)return t.filter(e,n);for(var i=[],r=0,a=t.length;r<a;r++)e.call(n,t[r],r,t)&&i.push(t[r]);return i}},find:function(t,e,n){if(t&&e)for(var i=0,r=t.length;i<r;i++)if(e.call(n,t[i],i,t))return t[i]},bind:o,curry:function(t){var e=au.call(arguments,1);return function(){return t.apply(this,e.concat(au.call(arguments)))}},isArray:s,isFunction:function(t){return"function"==typeof t},isString:function(t){return"[object String]"===eu.call(t)},isObject:l,isBuiltInObject:u,isTypedArray:function(t){return!!tu[eu.call(t)]},isDom:c,eqNaN:function(t){return t!=t},retrieve:function(t){for(var e=arguments,n=0,i=arguments.length;n<i;n++)if(null!=e[n])return e[n]},retrieve2:function(t,e){return null!=t?t:e},retrieve3:function(t,e,n){return null!=t?t:null!=e?e:n},slice:function(){return Function.call.apply(au,arguments)},normalizeCssArray:function(t){if("number"==typeof t)return[t,t,t,t];var e=t.length;return 2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t},assert:function(t,e){if(!t)throw new Error(e)},trim:function(t){return null==t?null:"function"==typeof t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},setAsPrimitive:function(t){t[hu]=!0},isPrimitive:h,createHashMap:function(t){return new d(t)},concatArray:function(t,e){for(var n=new t.constructor(t.length+e.length),i=0;i<t.length;i++)n[i]=t[i];var r=t.length;for(i=0;i<e.length;i++)n[i+r]=e[i];return n},noop:function(){}},fu="undefined"==typeof Float32Array?Array:Float32Array,pu={create:function(t,e){var n=new fu(2);return null==t&&(t=0),null==e&&(e=0),n[0]=t,n[1]=e,n},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t},clone:function(t){var e=new fu(2);return e[0]=t[0],e[1]=t[1],e},set:function(t,e,n){return t[0]=e,t[1]=n,t},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},scaleAndAdd:function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t},sub:function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},len:f,length:f,lenSquare:p,lengthSquare:p,mul:function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},div:function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]},scale:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},normalize:function(t,e){var n=f(e);return 0===n?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t},distance:g,dist:g,distanceSquare:m,distSquare:m,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t},lerp:function(t,e,n,i){return t[0]=e[0]+i*(n[0]-e[0]),t[1]=e[1]+i*(n[1]-e[1]),t},applyTransform:function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r+n[4],t[1]=n[1]*i+n[3]*r+n[5],t},min:function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},max:function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}};v.prototype={constructor:v,_dragStart:function(t){var e=t.target;e&&e.draggable&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.dispatchToElement(y(e,t),"dragstart",t.event))},_drag:function(t){var e=this._draggingTarget;if(e){var n=t.offsetX,i=t.offsetY,r=n-this._x,a=i-this._y;this._x=n,this._y=i,e.drift(r,a,t),this.dispatchToElement(y(e,t),"drag",t.event);var o=this.findHover(n,i,e).target,s=this._dropTarget;this._dropTarget=o,e!==o&&(s&&o!==s&&this.dispatchToElement(y(s,t),"dragleave",t.event),o&&o!==s&&this.dispatchToElement(y(o,t),"dragenter",t.event))}},_dragEnd:function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.dispatchToElement(y(e,t),"dragend",t.event),this._dropTarget&&this.dispatchToElement(y(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null}};var gu=v,mu=Array.prototype.slice,vu=function(){this._$handlers={}};vu.prototype={constructor:vu,one:function(t,e,n){var i=this._$handlers;if(!e||!t)return this;i[t]||(i[t]=[]);for(var r=0;r<i[t].length;r++)if(i[t][r].h===e)return this;return i[t].push({h:e,one:!0,ctx:n||this}),this},on:function(t,e,n){var i=this._$handlers;if(!e||!t)return this;i[t]||(i[t]=[]);for(var r=0;r<i[t].length;r++)if(i[t][r].h===e)return this;return i[t].push({h:e,one:!1,ctx:n||this}),this},isSilent:function(t){var e=this._$handlers;return e[t]&&e[t].length},off:function(t,e){var n=this._$handlers;if(!t)return this._$handlers={},this;if(e){if(n[t]){for(var i=[],r=0,a=n[t].length;r<a;r++)n[t][r].h!=e&&i.push(n[t][r]);n[t]=i}n[t]&&0===n[t].length&&delete n[t]}else delete n[t];return this},trigger:function(t){if(this._$handlers[t]){var e=arguments,n=e.length;n>3&&(e=mu.call(e,1));for(var i=this._$handlers[t],r=i.length,a=0;a<r;){switch(n){case 1:i[a].h.call(i[a].ctx);break;case 2:i[a].h.call(i[a].ctx,e[1]);break;case 3:i[a].h.call(i[a].ctx,e[1],e[2]);break;default:i[a].h.apply(i[a].ctx,e)}i[a].one?(i.splice(a,1),r--):a++}}return this},triggerWithContext:function(t){if(this._$handlers[t]){var e=arguments,n=e.length;n>4&&(e=mu.call(e,1,e.length-1));for(var i=e[e.length-1],r=this._$handlers[t],a=r.length,o=0;o<a;){switch(n){case 1:r[o].h.call(i);break;case 2:r[o].h.call(i,e[1]);break;case 3:r[o].h.call(i,e[1],e[2]);break;default:r[o].h.apply(i,e)}r[o].one?(r.splice(o,1),a--):o++}}return this}};var yu=vu,xu="silent";x.prototype.dispose=function(){};var _u=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],bu=function(t,e,n,i){yu.call(this),this.storage=t,this.painter=e,this.painterRoot=i,n=n||new x,this.proxy=null,this._hovered={},this._lastTouchMoment,this._lastX,this._lastY,gu.call(this),this.setHandlerProxy(n)};bu.prototype={constructor:bu,setHandlerProxy:function(t){this.proxy&&this.proxy.dispose(),t&&(du.each(_u,function(e){t.on&&t.on(e,this[e],this)},this),t.handler=this),this.proxy=t},mousemove:function(t){var e=t.zrX,n=t.zrY,i=this._hovered,r=i.target;r&&!r.__zr&&(r=(i=this.findHover(i.x,i.y)).target);var a=this._hovered=this.findHover(e,n),o=a.target,s=this.proxy;s.setCursor&&s.setCursor(o?o.cursor:"default"),r&&o!==r&&this.dispatchToElement(i,"mouseout",t),this.dispatchToElement(a,"mousemove",t),o&&o!==r&&this.dispatchToElement(a,"mouseover",t)},mouseout:function(t){this.dispatchToElement(this._hovered,"mouseout",t);var e,n=t.toElement||t.relatedTarget;do{n=n&&n.parentNode}while(n&&9!=n.nodeType&&!(e=n===this.painterRoot));!e&&this.trigger("globalout",{event:t})},resize:function(t){this._hovered={}},dispatch:function(t,e){var n=this[t];n&&n.call(this,e)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},dispatchToElement:function(t,e,n){var i=(t=t||{}).target;if(!i||!i.silent){for(var r="on"+e,a=function(t,e,n){return{type:t,event:n,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which}}(e,t,n);i&&(i[r]&&(a.cancelBubble=i[r].call(i,a)),i.trigger(e,a),i=i.parent,!a.cancelBubble););a.cancelBubble||(this.trigger(e,a),this.painter&&this.painter.eachOtherLayer(function(t){"function"==typeof t[r]&&t[r].call(t,a),t.trigger&&t.trigger(e,a)}))}},findHover:function(t,e,n){for(var i=this.storage.getDisplayList(),r={x:t,y:e},a=i.length-1;a>=0;a--){var o;if(i[a]!==n&&!i[a].ignore&&(o=function(t,e,n){if(t[t.rectHover?"rectContain":"contain"](e,n)){for(var i,r=t;r;){if(r.clipPath&&!r.clipPath.contain(e,n))return!1;r.silent&&(i=!0),r=r.parent}return!i||xu}return!1}(i[a],t,e))&&(!r.topTarget&&(r.topTarget=i[a]),o!==xu)){r.target=i[a];break}}return r}},du.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){bu.prototype[t]=function(e){var n=this.findHover(e.zrX,e.zrY),i=n.target;if("mousedown"===t)this._downEl=i,this._downPoint=[e.zrX,e.zrY],this._upEl=i;else if("mouseup"===t)this._upEl=i;else if("click"===t){if(this._downEl!==this._upEl||!this._downPoint||pu.dist(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(n,t,e)}}),du.mixin(bu,yu),du.mixin(bu,gu);var wu=bu,Su="undefined"==typeof Float32Array?Array:Float32Array,Mu={create:_,identity:b,copy:w,mul:function(t,e,n){var i=e[0]*n[0]+e[2]*n[1],r=e[1]*n[0]+e[3]*n[1],a=e[0]*n[2]+e[2]*n[3],o=e[1]*n[2]+e[3]*n[3],s=e[0]*n[4]+e[2]*n[5]+e[4],l=e[1]*n[4]+e[3]*n[5]+e[5];return t[0]=i,t[1]=r,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t},translate:function(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t},rotate:function(t,e,n){var i=e[0],r=e[2],a=e[4],o=e[1],s=e[3],l=e[5],u=Math.sin(n),c=Math.cos(n);return t[0]=i*c+o*u,t[1]=-i*u+o*c,t[2]=r*c+s*u,t[3]=-r*u+c*s,t[4]=c*a+u*l,t[5]=c*l-u*a,t},scale:function(t,e,n){var i=n[0],r=n[1];return t[0]=e[0]*i,t[1]=e[1]*r,t[2]=e[2]*i,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*r,t},invert:function(t,e){var n=e[0],i=e[2],r=e[4],a=e[1],o=e[3],s=e[5],l=n*o-a*i;return l?(l=1/l,t[0]=o*l,t[1]=-a*l,t[2]=-i*l,t[3]=n*l,t[4]=(i*s-o*r)*l,t[5]=(a*r-n*s)*l,t):null},clone:function(t){var e=_();return w(e,t),e}},Au=Mu.identity,Cu=5e-5,Iu=function(t){(t=t||{}).position||(this.position=[0,0]),null==t.rotation&&(this.rotation=0),t.scale||(this.scale=[1,1]),this.origin=this.origin||null},Pu=Iu.prototype;Pu.transform=null,Pu.needLocalTransform=function(){return S(this.rotation)||S(this.position[0])||S(this.position[1])||S(this.scale[0]-1)||S(this.scale[1]-1)},Pu.updateTransform=function(){var t=this.parent,e=t&&t.transform,n=this.needLocalTransform(),i=this.transform;n||e?(i=i||Mu.create(),n?this.getLocalTransform(i):Au(i),e&&(n?Mu.mul(i,t.transform,i):Mu.copy(i,t.transform)),this.transform=i,this.invTransform=this.invTransform||Mu.create(),Mu.invert(this.invTransform,i)):i&&Au(i)},Pu.getLocalTransform=function(t){return Iu.getLocalTransform(this,t)},Pu.setTransform=function(t){var e=this.transform,n=t.dpr||1;e?t.setTransform(n*e[0],n*e[1],n*e[2],n*e[3],n*e[4],n*e[5]):t.setTransform(n,0,0,n,0,0)},Pu.restoreTransform=function(t){var e=t.dpr||1;t.setTransform(e,0,0,e,0,0)};var Tu=[];Pu.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(Mu.mul(Tu,t.invTransform,e),e=Tu);var n=e[0]*e[0]+e[1]*e[1],i=e[2]*e[2]+e[3]*e[3],r=this.position,a=this.scale;S(n-1)&&(n=Math.sqrt(n)),S(i-1)&&(i=Math.sqrt(i)),e[0]<0&&(n=-n),e[3]<0&&(i=-i),r[0]=e[4],r[1]=e[5],a[0]=n,a[1]=i,this.rotation=Math.atan2(-e[1]/i,e[0]/n)}},Pu.getGlobalScale=function(){var t=this.transform;if(!t)return[1,1];var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]),n=Math.sqrt(t[2]*t[2]+t[3]*t[3]);return t[0]<0&&(e=-e),t[3]<0&&(n=-n),[e,n]},Pu.transformCoordToLocal=function(t,e){var n=[t,e],i=this.invTransform;return i&&pu.applyTransform(n,n,i),n},Pu.transformCoordToGlobal=function(t,e){var n=[t,e],i=this.transform;return i&&pu.applyTransform(n,n,i),n},Iu.getLocalTransform=function(t,e){Au(e=e||[]);var n=t.origin,i=t.scale||[1,1],r=t.rotation||0,a=t.position||[0,0];return n&&(e[4]-=n[0],e[5]-=n[1]),Mu.scale(e,e,i),r&&Mu.rotate(e,e,r),n&&(e[4]+=n[0],e[5]+=n[1]),e[4]+=a[0],e[5]+=a[1],e};var Ou=Iu,ku={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},elasticOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},elasticInOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-ku.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*ku.bounceIn(2*t):.5*ku.bounceOut(2*t-1)+.5}},Du=ku;M.prototype={constructor:M,step:function(t,e){if(this._initialized||(this._startTime=t+this._delay,this._initialized=!0),this._paused)this._pausedTime+=e;else{var n=(t-this._startTime-this._pausedTime)/this._life;if(!(n<0)){n=Math.min(n,1);var i=this.easing,r="string"==typeof i?Du[i]:i,a="function"==typeof r?r(n):n;return this.fire("frame",a),1==n?this.loop?(this.restart(t),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(t){var e=(t-this._startTime-this._pausedTime)%this._life;this._startTime=t-e+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(t,e){this[t="on"+t]&&this[t](this._target,e)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var Eu=M,Lu=function(){this.head=null,this.tail=null,this._len=0},Nu=Lu.prototype;Nu.insert=function(t){var e=new Ru(t);return this.insertEntry(e),e},Nu.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},Nu.remove=function(t){var e=t.prev,n=t.next;e?e.next=n:this.head=n,n?n.prev=e:this.tail=e,t.next=t.prev=null,this._len--},Nu.len=function(){return this._len},Nu.clear=function(){this.head=this.tail=null,this._len=0};var Ru=function(t){this.value=t,this.next,this.prev},Bu=function(t){this._list=new Lu,this._map={},this._maxSize=t||10,this._lastRemovedEntry=null},zu=Bu.prototype;zu.put=function(t,e){var n=this._list,i=this._map,r=null;if(null==i[t]){var a=n.len(),o=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var s=n.head;n.remove(s),delete i[s.key],r=s.value,this._lastRemovedEntry=s}o?o.value=e:o=new Ru(e),o.key=t,n.insertEntry(o),i[t]=o}return r},zu.get=function(t){var e=this._map[t],n=this._list;if(null!=e)return e!==n.tail&&(n.remove(e),n.insertEntry(e)),e.value},zu.clear=function(){this._list.clear(),this._map={}};var Vu=Bu,Gu={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]},Fu=new Vu(20),ju=null,Hu={parse:L,lift:function(t,e){var n=L(t);if(n){for(var i=0;i<3;i++)n[i]=e<0?n[i]*(1-e)|0:(255-n[i])*e+n[i]|0,n[i]>255?n[i]=255:t[i]<0&&(n[i]=0);return z(n,4===n.length?"rgba":"rgb")}},toHex:function(t){var e=L(t);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)},fastLerp:R,fastMapToColor:R,lerp:B,mapToColor:B,modifyHSL:function(t,e,n,i){if(t=L(t))return t=function(t){if(t){var e,n,i=t[0]/255,r=t[1]/255,a=t[2]/255,o=Math.min(i,r,a),s=Math.max(i,r,a),l=s-o,u=(s+o)/2;if(0===l)e=0,n=0;else{n=u<.5?l/(s+o):l/(2-s-o);var c=((s-i)/6+l/2)/l,h=((s-r)/6+l/2)/l,d=((s-a)/6+l/2)/l;i===s?e=d-h:r===s?e=1/3+c-d:a===s&&(e=2/3+h-c),e<0&&(e+=1),e>1&&(e-=1)}var f=[360*e,n,u];return null!=t[3]&&f.push(t[3]),f}}(t),null!=e&&(t[0]=function(t){return(t=Math.round(t))<0?0:t>360?360:t}(e)),null!=n&&(t[1]=P(n)),null!=i&&(t[2]=P(i)),z(N(t),"rgba")},modifyAlpha:function(t,e){if((t=L(t))&&null!=e)return t[3]=C(e),z(t,"rgba")},stringify:z},Wu=du.isArrayLike,Yu=Array.prototype.slice,Xu=function(t,e,n,i){this._tracks={},this._target=t,this._loop=e||!1,this._getter=n||function(t,e){return t[e]},this._setter=i||function(t,e,n){t[e]=n},this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};Xu.prototype={when:function(t,e){var n=this._tracks;for(var i in e)if(e.hasOwnProperty(i)){if(!n[i]){n[i]=[];var r=this._getter(this._target,i);if(null==r)continue;0!==t&&n[i].push({time:0,value:function(t){if(Wu(t)){var e=t.length;if(Wu(t[0])){for(var n=[],i=0;i<e;i++)n.push(Yu.call(t[i]));return n}return Yu.call(t)}return t}(r)})}n[i].push({time:t,value:e[i]})}return this},during:function(t){return this._onframeList.push(t),this},pause:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].pause();this._paused=!0},resume:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var t=this._doneList,e=t.length,n=0;n<e;n++)t[n].call(this)},start:function(t,e){var n,i=this,r=0;for(var a in this._tracks)if(this._tracks.hasOwnProperty(a)){var o=function(t,e,n,i,r,a){var o=t._getter,s=t._setter,l="spline"===e,u=i.length;if(u){var c,h=i[0].value,d=Wu(h),f=!1,p=!1,g=d?function(t){var e=t[t.length-1].value;return Wu(e&&e[0])?2:1}(i):0;i.sort(function(t,e){return t.time-e.time}),c=i[u-1].time;for(var m=[],v=[],y=i[0].value,x=!0,_=0;_<u;_++){m.push(i[_].time/c);var b=i[_].value;if(d&&function(t,e,n){if(t===e)return!0;var i=t.length;if(i!==e.length)return!1;if(1===n){for(a=0;a<i;a++)if(t[a]!==e[a])return!1}else for(var r=t[0].length,a=0;a<i;a++)for(var o=0;o<r;o++)if(t[a][o]!==e[a][o])return!1;return!0}(b,y,g)||!d&&b===y||(x=!1),y=b,"string"==typeof b){var w=Hu.parse(b);w?(b=w,f=!0):p=!0}v.push(b)}if(a||!x){var S=v[u-1];for(_=0;_<u-1;_++)d?j(v[_],S,g):!isNaN(v[_])||isNaN(S)||p||f||(v[_]=S);d&&j(o(t._target,r),S,g);var M,A,C,I,P,T=0,O=0;if(f)var k=[0,0,0,0];var D=new Eu({target:t._target,life:c,loop:t._loop,delay:t._delay,onframe:function(t,e){var n;if(e<0)n=0;else if(e<O){for(n=Math.min(T+1,u-1);n>=0&&!(m[n]<=e);n--);n=Math.min(n,u-2)}else{for(n=T;n<u&&!(m[n]>e);n++);n=Math.min(n-1,u-2)}T=n,O=e;var i=m[n+1]-m[n];if(0!==i)if(M=(e-m[n])/i,l)if(C=v[n],A=v[0===n?n:n-1],I=v[n>u-2?u-1:n+1],P=v[n>u-3?u-1:n+2],d)H(A,C,I,P,M,M*M,M*M*M,o(t,r),g);else{if(f)a=H(A,C,I,P,M,M*M,M*M*M,k,1),a=Y(k);else{if(p)return G(C,I,M);a=W(A,C,I,P,M,M*M,M*M*M)}s(t,r,a)}else if(d)F(v[n],v[n+1],M,o(t,r),g);else{var a;if(f)F(v[n],v[n+1],M,k,1),a=Y(k);else{if(p)return G(v[n],v[n+1],M);a=V(v[n],v[n+1],M)}s(t,r,a)}},ondestroy:n});return e&&"spline"!==e&&(D.easing=e),D}}}(this,t,function(){--r||i._doneCallback()},this._tracks[a],a,e);o&&(this._clipList.push(o),r++,this.animation&&this.animation.addClip(o),n=o)}if(n){var s=n.onframe;n.onframe=function(t,e){s(t,e);for(var n=0;n<i._onframeList.length;n++)i._onframeList[n](t,e)}}return r||this._doneCallback(),this},stop:function(t){for(var e=this._clipList,n=this.animation,i=0;i<e.length;i++){var r=e[i];t&&r.onframe(this._target,1),n&&n.removeClip(r)}e.length=0},delay:function(t){return this._delay=t,this},done:function(t){return t&&this._doneList.push(t),this},getClips:function(){return this._clipList}};var Uu=Xu,qu=1;"undefined"!=typeof window&&(qu=Math.max(window.devicePixelRatio||1,1));var Zu={debugMode:0,devicePixelRatio:qu},Ku=Zu.debugMode,$u=function(){};1===Ku?$u=function(){var t=arguments;for(var e in arguments)throw new Error(t[e])}:Ku>1&&($u=function(){var t=arguments;for(var e in arguments)console.log(t[e])});var Ju=$u,Qu=du.isString,tc=du.isFunction,ec=du.isObject,nc=du.isArrayLike,ic=du.indexOf,rc=function(){this.animators=[]};rc.prototype={constructor:rc,animate:function(t,e){var n,i=!1,r=this,a=this.__zr;if(t){var o=t.split("."),s=r;i="shape"===o[0];for(var l=0,u=o.length;l<u;l++)s&&(s=s[o[l]]);s&&(n=s)}else n=r;if(n){var c=r.animators,h=new Uu(n,e);return h.during(function(t){r.dirty(i)}).done(function(){c.splice(ic(c,h),1)}),c.push(h),a&&a.animation.addAnimator(h),h}Ju('Property "'+t+'" is not existed in element '+r.id)},stopAnimation:function(t){for(var e=this.animators,n=e.length,i=0;i<n;i++)e[i].stop(t);return e.length=0,this},animateTo:function(t,e,n,i,r,a){Qu(n)?(r=i,i=n,n=0):tc(i)?(r=i,i="linear",n=0):tc(n)?(r=n,n=0):tc(e)?(r=e,e=500):e||(e=500),this.stopAnimation(),this._animateToShallow("",this,t,e,n);var o=this.animators.slice(),s=o.length;s||r&&r();for(var l=0;l<o.length;l++)o[l].done(function(){--s||r&&r()}).start(i,a)},_animateToShallow:function(t,e,n,i,r){var a={},o=0;for(var s in n)if(n.hasOwnProperty(s))if(null!=e[s])ec(n[s])&&!nc(n[s])?this._animateToShallow(t?t+"."+s:s,e[s],n[s],i,r):(a[s]=n[s],o++);else if(null!=n[s])if(t){var l={};l[t]={},l[t][s]=n[s],this.attr(l)}else this.attr(s,n[s]);return o>0&&this.animate(t,!1).when(null==i?500:i,a).delay(r||0),this}};var ac=rc,oc=function(t){Ou.call(this,t),yu.call(this,t),ac.call(this,t),this.id=t.id||$l()};oc.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(t,e){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0}var n=this.transform;n||(n=this.transform=[1,0,0,1,0,0]),n[4]+=t,n[5]+=e,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(t,e){},attrKV:function(t,e){if("position"===t||"scale"===t||"origin"===t){if(e){var n=this[t];n||(n=this[t]=[]),n[0]=e[0],n[1]=e[1]}}else this[t]=e},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(t,e){if("string"==typeof t)this.attrKV(t,e);else if(du.isObject(t))for(var n in t)t.hasOwnProperty(n)&&this.attrKV(n,t[n]);return this.dirty(!1),this},setClipPath:function(t){var e=this.__zr;e&&t.addSelfToZr(e),this.clipPath&&this.clipPath!==t&&this.removeClipPath(),this.clipPath=t,t.__zr=e,t.__clipTarget=this,this.dirty(!1)},removeClipPath:function(){var t=this.clipPath;t&&(t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(t){this.__zr=t;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.addAnimator(e[n]);this.clipPath&&this.clipPath.addSelfToZr(t)},removeSelfFromZr:function(t){this.__zr=null;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.removeAnimator(e[n]);this.clipPath&&this.clipPath.removeSelfFromZr(t)}},du.mixin(oc,ac),du.mixin(oc,Ou),du.mixin(oc,yu);var sc=oc,lc=pu.applyTransform,uc=Math.min,cc=Math.max;X.prototype={constructor:X,union:function(t){var e=uc(t.x,this.x),n=uc(t.y,this.y);this.width=cc(t.x+t.width,this.x+this.width)-e,this.height=cc(t.y+t.height,this.y+this.height)-n,this.x=e,this.y=n},applyTransform:function(){var t=[],e=[],n=[],i=[];return function(r){if(r){t[0]=n[0]=this.x,t[1]=i[1]=this.y,e[0]=i[0]=this.x+this.width,e[1]=n[1]=this.y+this.height,lc(t,t,r),lc(e,e,r),lc(n,n,r),lc(i,i,r),this.x=uc(t[0],e[0],n[0],i[0]),this.y=uc(t[1],e[1],n[1],i[1]);var a=cc(t[0],e[0],n[0],i[0]),o=cc(t[1],e[1],n[1],i[1]);this.width=a-this.x,this.height=o-this.y}}}(),calculateTransform:function(t){var e=this,n=t.width/e.width,i=t.height/e.height,r=Mu.create();return Mu.translate(r,r,[-e.x,-e.y]),Mu.scale(r,r,[n,i]),Mu.translate(r,r,[t.x,t.y]),r},intersect:function(t){if(!t)return!1;t instanceof X||(t=X.create(t));var e=this,n=e.x,i=e.x+e.width,r=e.y,a=e.y+e.height,o=t.x,s=t.x+t.width,l=t.y,u=t.y+t.height;return!(i<o||s<n||a<l||u<r)},contain:function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},clone:function(){return new X(this.x,this.y,this.width,this.height)},copy:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},X.create=function(t){return new X(t.x,t.y,t.width,t.height)};var hc=X,dc=function(t){for(var e in t=t||{},sc.call(this,t),t)t.hasOwnProperty(e)&&(this[e]=t[e]);this._children=[],this.__storage=null,this.__dirty=!0};dc.prototype={constructor:dc,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},childOfName:function(t){for(var e=this._children,n=0;n<e.length;n++)if(e[n].name===t)return e[n]},childCount:function(){return this._children.length},add:function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},addBefore:function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var n=this._children,i=n.indexOf(e);i>=0&&(n.splice(i,0,t),this._doAdd(t))}return this},_doAdd:function(t){t.parent&&t.parent.remove(t),t.parent=this;var e=this.__storage,n=this.__zr;e&&e!==t.__storage&&(e.addToStorage(t),t instanceof dc&&t.addChildrenToStorage(e)),n&&n.refresh()},remove:function(t){var e=this.__zr,n=this.__storage,i=this._children,r=du.indexOf(i,t);return r<0?this:(i.splice(r,1),t.parent=null,n&&(n.delFromStorage(t),t instanceof dc&&t.delChildrenFromStorage(n)),e&&e.refresh(),this)},removeAll:function(){var t,e,n=this._children,i=this.__storage;for(e=0;e<n.length;e++)t=n[e],i&&(i.delFromStorage(t),t instanceof dc&&t.delChildrenFromStorage(i)),t.parent=null;return n.length=0,this},eachChild:function(t,e){for(var n=this._children,i=0;i<n.length;i++){var r=n[i];t.call(e,r,i)}return this},traverse:function(t,e){for(var n=0;n<this._children.length;n++){var i=this._children[n];t.call(e,i),"group"===i.type&&i.traverse(t,e)}return this},addChildrenToStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.addToStorage(n),n instanceof dc&&n.addChildrenToStorage(t)}},delChildrenFromStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.delFromStorage(n),n instanceof dc&&n.delChildrenFromStorage(t)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(t){for(var e=null,n=new hc(0,0,0,0),i=t||this._children,r=[],a=0;a<i.length;a++){var o=i[a];if(!o.ignore&&!o.invisible){var s=o.getBoundingRect(),l=o.getLocalTransform(r);l?(n.copy(s),n.applyTransform(l),(e=e||n.clone()).union(n)):(e=e||s.clone()).union(s)}}return e||n}},du.inherits(dc,sc);var fc=dc,pc=32,gc=7,mc=function(t,e,n,i){n||(n=0),i||(i=t.length);var r=i-n;if(!(r<2)){var a=0;if(r<pc)return a=U(t,n,i,e),void q(t,n,i,n+a,e);var o=new function(t,e){function n(n){var l=i[n],u=r[n],c=i[n+1],h=r[n+1];r[n]=u+h,n===o-3&&(i[n+1]=i[n+2],r[n+1]=r[n+2]),o--;var d=K(t[c],t,l,u,0,e);l+=d,0!=(u-=d)&&0!==(h=Z(t[l+u-1],t,c,h,h-1,e))&&(u<=h?function(n,i,r,o){var l=0;for(l=0;l<i;l++)s[l]=t[n+l];var u=0,c=r,h=n;if(t[h++]=t[c++],0!=--o)if(1!==i){for(var d,f,p,g=a;;){d=0,f=0,p=!1;do{if(e(t[c],s[u])<0){if(t[h++]=t[c++],f++,d=0,0==--o){p=!0;break}}else if(t[h++]=s[u++],d++,f=0,1==--i){p=!0;break}}while((d|f)<g);if(p)break;do{if(0!==(d=K(t[c],s,u,i,0,e))){for(l=0;l<d;l++)t[h+l]=s[u+l];if(h+=d,u+=d,(i-=d)<=1){p=!0;break}}if(t[h++]=t[c++],0==--o){p=!0;break}if(0!==(f=Z(s[u],t,c,o,0,e))){for(l=0;l<f;l++)t[h+l]=t[c+l];if(h+=f,c+=f,0==(o-=f)){p=!0;break}}if(t[h++]=s[u++],1==--i){p=!0;break}g--}while(d>=gc||f>=gc);if(p)break;g<0&&(g=0),g+=2}if((a=g)<1&&(a=1),1===i){for(l=0;l<o;l++)t[h+l]=t[c+l];t[h+o]=s[u]}else{if(0===i)throw new Error;for(l=0;l<i;l++)t[h+l]=s[u+l]}}else{for(l=0;l<o;l++)t[h+l]=t[c+l];t[h+o]=s[u]}else for(l=0;l<i;l++)t[h+l]=s[u+l]}(l,u,c,h):function(n,i,r,o){var l=0;for(l=0;l<o;l++)s[l]=t[r+l];var u=n+i-1,c=o-1,h=r+o-1,d=0,f=0;if(t[h--]=t[u--],0!=--i)if(1!==o){for(var p=a;;){var g=0,m=0,v=!1;do{if(e(s[c],t[u])<0){if(t[h--]=t[u--],g++,m=0,0==--i){v=!0;break}}else if(t[h--]=s[c--],m++,g=0,1==--o){v=!0;break}}while((g|m)<p);if(v)break;do{if(0!=(g=i-K(s[c],t,n,i,i-1,e))){for(i-=g,f=1+(h-=g),d=1+(u-=g),l=g-1;l>=0;l--)t[f+l]=t[d+l];if(0===i){v=!0;break}}if(t[h--]=s[c--],1==--o){v=!0;break}if(0!=(m=o-Z(t[u],s,0,o,o-1,e))){for(o-=m,f=1+(h-=m),d=1+(c-=m),l=0;l<m;l++)t[f+l]=s[d+l];if(o<=1){v=!0;break}}if(t[h--]=t[u--],0==--i){v=!0;break}p--}while(g>=gc||m>=gc);if(v)break;p<0&&(p=0),p+=2}if((a=p)<1&&(a=1),1===o){for(f=1+(h-=i),d=1+(u-=i),l=i-1;l>=0;l--)t[f+l]=t[d+l];t[h]=s[c]}else{if(0===o)throw new Error;for(d=h-(o-1),l=0;l<o;l++)t[d+l]=s[l]}}else{for(f=1+(h-=i),d=1+(u-=i),l=i-1;l>=0;l--)t[f+l]=t[d+l];t[h]=s[c]}else for(d=h-(o-1),l=0;l<o;l++)t[d+l]=s[l]}(l,u,c,h))}var i,r,a=gc,o=0;t.length;var s=[];i=[],r=[],this.mergeRuns=function(){for(;o>1;){var t=o-2;if(t>=1&&r[t-1]<=r[t]+r[t+1]||t>=2&&r[t-2]<=r[t]+r[t-1])r[t-1]<r[t+1]&&t--;else if(r[t]>r[t+1])break;n(t)}},this.forceMergeRuns=function(){for(;o>1;){var t=o-2;t>0&&r[t-1]<r[t+1]&&t--,n(t)}},this.pushRun=function(t,e){i[o]=t,r[o]=e,o+=1}}(t,e),s=function(t){for(var e=0;t>=pc;)e|=1&t,t>>=1;return t+e}(r);do{if((a=U(t,n,i,e))<s){var l=r;l>s&&(l=s),q(t,n,n+l,n+a,e),a=l}o.pushRun(n,a),o.mergeRuns(),r-=a,n+=a}while(0!==r);o.forceMergeRuns()}},vc=function(){this._roots=[],this._displayList=[],this._displayListLen=0};vc.prototype={constructor:vc,traverse:function(t,e){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,e)},getDisplayList:function(t,e){return e=e||!1,t&&this.updateDisplayList(e),this._displayList},updateDisplayList:function(t){this._displayListLen=0;for(var e=this._roots,n=this._displayList,i=0,r=e.length;i<r;i++)this._updateAndAddDisplayable(e[i],null,t);n.length=this._displayListLen,Jl.canvasSupported&&mc(n,$)},_updateAndAddDisplayable:function(t,e,n){if(!t.ignore||n){t.beforeUpdate(),t.__dirty&&t.update(),t.afterUpdate();var i=t.clipPath;if(i){e=e?e.slice():[];for(var r=i,a=t;r;)r.parent=a,r.updateTransform(),e.push(r),a=r,r=r.clipPath}if(t.isGroup){for(var o=t._children,s=0;s<o.length;s++){var l=o[s];t.__dirty&&(l.__dirty=!0),this._updateAndAddDisplayable(l,e,n)}t.__dirty=!1}else t.__clipPaths=e,this._displayList[this._displayListLen++]=t}},addRoot:function(t){t.__storage!==this&&(t instanceof fc&&t.addChildrenToStorage(this),this.addToStorage(t),this._roots.push(t))},delRoot:function(t){if(null==t){for(n=0;n<this._roots.length;n++){var e=this._roots[n];e instanceof fc&&e.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(t instanceof Array)for(var n=0,i=t.length;n<i;n++)this.delRoot(t[n]);else{var r=du.indexOf(this._roots,t);r>=0&&(this.delFromStorage(t),this._roots.splice(r,1),t instanceof fc&&t.delChildrenFromStorage(this))}},addToStorage:function(t){return t&&(t.__storage=this,t.dirty(!1)),this},delFromStorage:function(t){return t&&(t.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:$};for(var yc=vc,xc={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1},_c=function(t,e,n){return xc.hasOwnProperty(e)?n*=t.dpr:n},bc=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],wc=function(t,e){this.extendFrom(t,!1),this.host=e},Sc=wc.prototype={constructor:wc,host:null,fill:"#000",stroke:null,opacity:1,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(t,e,n){for(var i=n&&n.style,r=!i,a=0;a<bc.length;a++){var o=bc[a],s=o[0];(r||this[s]!==i[s])&&(t[s]=_c(t,s,this[s]||o[1]))}if((r||this.fill!==i.fill)&&(t.fillStyle=this.fill),(r||this.stroke!==i.stroke)&&(t.strokeStyle=this.stroke),(r||this.opacity!==i.opacity)&&(t.globalAlpha=null==this.opacity?1:this.opacity),(r||this.blend!==i.blend)&&(t.globalCompositeOperation=this.blend||"source-over"),this.hasStroke()){var l=this.lineWidth;t.lineWidth=l/(this.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1)}},hasFill:function(){var t=this.fill;return null!=t&&"none"!==t},hasStroke:function(){var t=this.stroke;return null!=t&&"none"!==t&&this.lineWidth>0},extendFrom:function(t,e){if(t)for(var n in t)!t.hasOwnProperty(n)||!0!==e&&(!1===e?this.hasOwnProperty(n):null==t[n])||(this[n]=t[n])},set:function(t,e){"string"==typeof t?this[t]=e:this.extendFrom(t,!0)},clone:function(){var t=new this.constructor;return t.extendFrom(this,!0),t},getGradient:function(t,e,n){for(var i=("radial"===e.type?function(t,e,n){var i=n.width,r=n.height,a=Math.min(i,r),o=null==e.x?.5:e.x,s=null==e.y?.5:e.y,l=null==e.r?.5:e.r;return e.global||(o=o*i+n.x,s=s*r+n.y,l*=a),t.createRadialGradient(o,s,0,o,s,l)}:function(t,e,n){var i=null==e.x?0:e.x,r=null==e.x2?1:e.x2,a=null==e.y?0:e.y,o=null==e.y2?0:e.y2;return e.global||(i=i*n.width+n.x,r=r*n.width+n.x,a=a*n.height+n.y,o=o*n.height+n.y),i=isNaN(i)?0:i,r=isNaN(r)?1:r,a=isNaN(a)?0:a,o=isNaN(o)?0:o,t.createLinearGradient(i,a,r,o)})(t,e,n),r=e.colorStops,a=0;a<r.length;a++)i.addColorStop(r[a].offset,r[a].color);return i}},Mc=0;Mc<bc.length;Mc++){var Ac=bc[Mc];Ac[0]in Sc||(Sc[Ac[0]]=Ac[1])}wc.getGradient=Sc.getGradient;var Cc=wc,Ic=function(t,e){this.image=t,this.repeat=e,this.type="pattern"};Ic.prototype.getCanvasPattern=function(t){return t.createPattern(this.image,this.repeat||"repeat")};var Pc=Ic,Tc=Zu.devicePixelRatio,Oc=function(t,e,n){var i;n=n||Tc,"string"==typeof t?i=J(t,e,n):du.isObject(t)&&(t=(i=t).id),this.id=t,this.dom=i;var r=i.style;r&&(i.onselectstart=function(){return!1},r["-webkit-user-select"]="none",r["user-select"]="none",r["-webkit-touch-callout"]="none",r["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",r.padding=0,r.margin=0,r["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=e,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=n};Oc.prototype={constructor:Oc,__dirty:!0,__used:!1,__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var t=this.dpr;this.domBack=J("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!=t&&this.ctxBack.scale(t,t)},resize:function(t,e){var n=this.dpr,i=this.dom,r=i.style,a=this.domBack;r&&(r.width=t+"px",r.height=e+"px"),i.width=t*n,i.height=e*n,a&&(a.width=t*n,a.height=e*n,1!=n&&this.ctxBack.scale(n,n))},clear:function(t,e){var n,i=this.dom,r=this.ctx,a=i.width,o=i.height,s=(e=e||this.clearColor,this.motionBlur&&!t),l=this.lastFrameAlpha,u=this.dpr;(s&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(i,0,0,a/u,o/u)),r.clearRect(0,0,a,o),e&&"transparent"!==e)&&(e.colorStops?(n=e.__canvasGradient||Cc.getGradient(r,e,{x:0,y:0,width:a,height:o}),e.__canvasGradient=n):e.image&&(n=Pc.prototype.getCanvasPattern.call(e,r)),r.save(),r.fillStyle=n||e,r.fillRect(0,0,a,o),r.restore());if(s){var c=this.domBack;r.save(),r.globalAlpha=l,r.drawImage(c,0,0,a,o),r.restore()}}};var kc=Oc,Dc="undefined"!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){setTimeout(t,16)},Ec=new Vu(50),Lc={findExistImage:function(t){if("string"==typeof t){var e=Ec.get(t);return e&&e.image}return t},createOrUpdateImage:function(t,e,n,i,r){if(t){if("string"==typeof t){if(e&&e.__zrImageSrc===t||!n)return e;var a=Ec.get(t),o={hostEl:n,cb:i,cbPayload:r};return a?!Q(e=a.image)&&a.pending.push(o):(!e&&(e=new Image),e.onload=function(){var t=this.__cachedImgObj;this.onload=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var n=t.pending[e],i=n.cb;i&&i(this,n.cbPayload),n.hostEl.dirty()}t.pending.length=0},Ec.put(t,e.__cachedImgObj={image:e,pending:[o]}),e.src=e.__zrImageSrc=t),e}return t}return e},isImageReady:Q},Nc=du.getContext,Rc=du.extend,Bc=du.retrieve2,zc=du.retrieve3,Vc=du.trim,Gc={},Fc=0,jc=5e3,Hc=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,Wc="12px sans-serif",Yc={measureText:function(t,e){var n=Nc();return n.font=e||Wc,n.measureText(t)}},Xc={DEFAULT_FONT:Wc,$override:function(t,e){Yc[t]=e},getWidth:tt,getBoundingRect:function(t,e,n,i,r,a,o){return a?function(t,e,n,i,r,a,o){var s=ut(t,{rich:a,truncate:o,font:e,textAlign:n,textPadding:r}),l=s.outerWidth,u=s.outerHeight,c=et(0,l,n),h=nt(0,u,i);return new hc(c,h,l,u)}(t,e,n,i,r,a,o):function(t,e,n,i,r,a){var o=lt(t,e,r,a),s=tt(t,e);r&&(s+=r[1]+r[3]);var l=o.outerHeight,u=et(0,s,n),c=nt(0,l,i),h=new hc(u,c,s,l);return h.lineHeight=o.lineHeight,h}(t,e,n,i,r,o)},adjustTextX:et,adjustTextY:nt,adjustTextPositionOnRect:function(t,e,n){var i=e.x,r=e.y,a=e.height,o=e.width,s=a/2,l="left",u="top";switch(t){case"left":i-=n,r+=s,l="right",u="middle";break;case"right":i+=n+o,r+=s,u="middle";break;case"top":i+=o/2,r-=n,l="center",u="bottom";break;case"bottom":i+=o/2,r+=a+n,l="center";break;case"inside":i+=o/2,r+=s,l="center",u="middle";break;case"insideLeft":i+=n,r+=s,u="middle";break;case"insideRight":i+=o-n,r+=s,l="right",u="middle";break;case"insideTop":i+=o/2,r+=n,l="center";break;case"insideBottom":i+=o/2,r+=a-n,l="center",u="bottom";break;case"insideTopLeft":i+=n,r+=n;break;case"insideTopRight":i+=o-n,r+=n,l="right";break;case"insideBottomLeft":i+=n,r+=a-n,u="bottom";break;case"insideBottomRight":i+=o-n,r+=a-n,l="right",u="bottom"}return{x:i,y:r,textAlign:l,textVerticalAlign:u}},truncateText:it,getLineHeight:ot,measureText:st,parsePlainText:lt,parseRichText:ut,makeFont:function(t){var e=(t.fontSize||t.fontFamily)&&[t.fontStyle,t.fontWeight,(t.fontSize||12)+"px",t.fontFamily||"sans-serif"].join(" ");return e&&Vc(e)||t.textFont||t.font}},Uc={buildPath:function(t,e){var n,i,r,a,o,s=e.x,l=e.y,u=e.width,c=e.height,h=e.r;u<0&&(s+=u,u=-u),c<0&&(l+=c,c=-c),"number"==typeof h?n=i=r=a=h:h instanceof Array?1===h.length?n=i=r=a=h[0]:2===h.length?(n=r=h[0],i=a=h[1]):3===h.length?(n=h[0],i=a=h[1],r=h[2]):(n=h[0],i=h[1],r=h[2],a=h[3]):n=i=r=a=0,n+i>u&&(n*=u/(o=n+i),i*=u/o),r+a>u&&(r*=u/(o=r+a),a*=u/o),i+r>c&&(i*=c/(o=i+r),r*=c/o),n+a>c&&(n*=c/(o=n+a),a*=c/o),t.moveTo(s+n,l),t.lineTo(s+u-i,l),0!==i&&t.arc(s+u-i,l+i,i,-Math.PI/2,0),t.lineTo(s+u,l+c-r),0!==r&&t.arc(s+u-r,l+c-r,r,0,Math.PI/2),t.lineTo(s+a,l+c),0!==a&&t.arc(s+a,l+c-a,a,Math.PI/2,Math.PI),t.lineTo(s,l+n),0!==n&&t.arc(s+n,l+n,n,Math.PI,1.5*Math.PI)}},qc=du.retrieve2,Zc=du.retrieve3,Kc=du.each,$c=du.normalizeCssArray,Jc=du.isString,Qc=du.isObject,th={left:1,right:1,center:1},eh={top:1,bottom:1,middle:1},nh={normalizeTextStyle:function(t){return ht(t),Kc(t.rich,ht),t},renderText:function(t,e,n,i,r){i.rich?function(t,e,n,i,r){var a=t.__textCotentBlock;a&&!t.__dirty||(a=t.__textCotentBlock=Xc.parseRichText(n,i)),function(t,e,n,i,r){var a=n.width,o=n.outerWidth,s=n.outerHeight,l=i.textPadding,u=mt(0,i,r),c=u.baseX,h=u.baseY,d=u.textAlign,f=u.textVerticalAlign;dt(e,i,r,c,h);var p=Xc.adjustTextX(c,o,d),g=Xc.adjustTextY(h,s,f),m=p,v=g;l&&(m+=l[3],v+=l[0]);var y=m+a;pt(i)&&gt(t,e,i,p,g,o,s);for(var x=0;x<n.lines.length;x++){for(var _,b=n.lines[x],w=b.tokens,S=w.length,M=b.lineHeight,A=b.width,C=0,I=m,P=y,T=S-1;C<S&&(!(_=w[C]).textAlign||"left"===_.textAlign);)ft(t,e,_,i,M,v,I,"left"),A-=_.width,I+=_.width,C++;for(;T>=0&&"right"===(_=w[T]).textAlign;)ft(t,e,_,i,M,v,P,"right"),A-=_.width,P-=_.width,T--;for(I+=(a-(I-m)-(y-P)-A)/2;C<=T;)_=w[C],ft(t,e,_,i,M,v,I+_.width/2,"center"),I+=_.width,C++;v+=M}}(t,e,a,i,r)}(t,e,n,i,r):function(t,e,n,i,r){var a=vt(e,"font",i.font||Xc.DEFAULT_FONT),o=i.textPadding,s=t.__textCotentBlock;s&&!t.__dirty||(s=t.__textCotentBlock=Xc.parsePlainText(n,a,o,i.truncate));var l=s.outerHeight,u=s.lines,c=s.lineHeight,h=mt(0,i,r),d=h.baseX,f=h.baseY,p=h.textAlign,g=h.textVerticalAlign;dt(e,i,r,d,f);var m=Xc.adjustTextY(f,l,g),v=d,y=m,x=pt(i);if(x||o){var _=Xc.getWidth(n,a);o&&(_+=o[1]+o[3]);var b=Xc.adjustTextX(d,_,p);x&&gt(t,e,i,b,m,_,l),o&&(v=bt(d,p,o),y+=o[0])}vt(e,"textAlign",p||"left"),vt(e,"textBaseline","middle"),vt(e,"shadowBlur",i.textShadowBlur||0),vt(e,"shadowColor",i.textShadowColor||"transparent"),vt(e,"shadowOffsetX",i.textShadowOffsetX||0),vt(e,"shadowOffsetY",i.textShadowOffsetY||0),y+=c/2;var w=i.textStrokeWidth,S=yt(i.textStroke,w),M=xt(i.textFill);S&&(vt(e,"lineWidth",w),vt(e,"strokeStyle",S)),M&&vt(e,"fillStyle",M);for(var A=0;A<u.length;A++)S&&e.strokeText(u[A],v,y),M&&e.fillText(u[A],v,y),y+=c}(t,e,n,i,r)},getStroke:yt,getFill:xt,needDrawText:function(t,e){return null!=t&&(t||e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor||e.textPadding)}},ih=new hc,rh=function(){};rh.prototype={constructor:rh,drawRectText:function(t,e){var n=this.style;e=n.textRect||e,this.__dirty&&nh.normalizeTextStyle(n,!0);var i=n.text;if(null!=i&&(i+=""),nh.needDrawText(i,n)){t.save();var r=this.transform;n.transformText?this.setTransform(t):r&&(ih.copy(e),ih.applyTransform(r),e=ih),nh.renderText(this,t,i,n,e),t.restore()}}};var ah=rh;wt.prototype={constructor:wt,type:"displayable",__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,inplace:!1,beforeBrush:function(t){},afterBrush:function(t){},brush:function(t,e){},getBoundingRect:function(){},contain:function(t,e){return this.rectContain(t,e)},traverse:function(t,e){t.call(e,this)},rectContain:function(t,e){var n=this.transformCoordToLocal(t,e);return this.getBoundingRect().contain(n[0],n[1])},dirty:function(){this.__dirty=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(t){return this.animate("style",t)},attrKV:function(t,e){"style"!==t?sc.prototype.attrKV.call(this,t,e):this.style.set(e)},setStyle:function(t,e){return this.style.set(t,e),this.dirty(!1),this},useStyle:function(t){return this.style=new Cc(t,this),this.dirty(!1),this}},du.inherits(wt,sc),du.mixin(wt,ah);var oh=wt;St.prototype={constructor:St,type:"image",brush:function(t,e){var n=this.style,i=n.image;n.bind(t,this,e);var r=this._image=Lc.createOrUpdateImage(i,this._image,this,this.onload);if(r&&Lc.isImageReady(r)){var a=n.x||0,o=n.y||0,s=n.width,l=n.height,u=r.width/r.height;if(null==s&&null!=l?s=l*u:null==l&&null!=s?l=s/u:null==s&&null==l&&(s=r.width,l=r.height),this.setTransform(t),n.sWidth&&n.sHeight){var c=n.sx||0,h=n.sy||0;t.drawImage(r,c,h,n.sWidth,n.sHeight,a,o,s,l)}else if(n.sx&&n.sy){var d=s-(c=n.sx),f=l-(h=n.sy);t.drawImage(r,c,h,d,f,a,o,s,l)}else t.drawImage(r,a,o,s,l);null!=n.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))}},getBoundingRect:function(){var t=this.style;return this._rect||(this._rect=new hc(t.x||0,t.y||0,t.width||0,t.height||0)),this._rect}},du.inherits(St,oh);var sh=St,lh=Zu.devicePixelRatio,uh=new hc(0,0,0,0),ch=new hc(0,0,0,0),hh=function(t,e,n){this.type="canvas";var i=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=n=du.extend({},n||{}),this.dpr=n.devicePixelRatio||lh,this._singleCanvas=i,this.root=t;var r=t.style;r&&(r["-webkit-tap-highlight-color"]="transparent",r["-webkit-user-select"]=r["user-select"]=r["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e;var a=this._zlevelList=[],o=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,i){var s=t.width,l=t.height;null!=n.width&&(s=n.width),null!=n.height&&(l=n.height),this.dpr=n.devicePixelRatio||1,t.width=s*this.dpr,t.height=l*this.dpr,this._width=s,this._height=l;var u=new kc(t,this,this.dpr);u.__builtin__=!0,u.initContext(),o[314159]=u,u.zlevel=314159,a.push(314159),this._domRoot=t}else{this._width=this._getSize(0),this._height=this._getSize(1);var c=this._domRoot=function(t,e){var n=document.createElement("div");return n.style.cssText=["position:relative","overflow:hidden","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}(this._width,this._height);t.appendChild(c)}this._hoverlayer=null,this._hoverElements=[]};hh.prototype={constructor:hh,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(t){var e=this.storage.getDisplayList(!0),n=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,t,this._redrawId);for(var i=0;i<n.length;i++){var r=n[i],a=this._layers[r];if(!a.__builtin__&&a.refresh){var o=0===i?this._backgroundColor:null;a.refresh(o)}}return this.refreshHover(),this},addHover:function(t,e){if(!t.__hoverMir){var n=new t.constructor({style:t.style,shape:t.shape});n.__from=t,t.__hoverMir=n,n.setStyle(e),this._hoverElements.push(n)}},removeHover:function(t){var e=t.__hoverMir,n=this._hoverElements,i=du.indexOf(n,e);i>=0&&n.splice(i,1),t.__hoverMir=null},clearHover:function(t){for(var e=this._hoverElements,n=0;n<e.length;n++){var i=e[n].__from;i&&(i.__hoverMir=null)}e.length=0},refreshHover:function(){var t=this._hoverElements,e=t.length,n=this._hoverlayer;if(n&&n.clear(),e){mc(t,this.storage.displayableSortFunc),n||(n=this._hoverlayer=this.getLayer(1e5));var i={};n.ctx.save();for(var r=0;r<e;){var a=t[r],o=a.__from;o&&o.__zr?(r++,o.invisible||(a.transform=o.transform,a.invTransform=o.invTransform,a.__clipPaths=o.__clipPaths,this._doPaintEl(a,n,!0,i))):(t.splice(r,1),o.__hoverMir=null,e--)}n.ctx.restore()}},getHoverLayer:function(){return this.getLayer(1e5)},_paintList:function(t,e,n){if(this._redrawId===n){e=e||!1,this._updateLayerStatus(t);var i=this._doPaintList(t,e);if(this._needsManuallyCompositing&&this._compositeManually(),!i){var r=this;Dc(function(){r._paintList(t,e,n)})}}},_compositeManually:function(){var t=this.getLayer(314159).ctx,e=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,e,n),this.eachBuiltinLayer(function(i){i.virtual&&t.drawImage(i.dom,0,0,e,n)})},_doPaintList:function(t,e){for(var n=[],i=0;i<this._zlevelList.length;i++){var r=this._zlevelList[i];(s=this._layers[r]).__builtin__&&s!==this._hoverlayer&&(s.__dirty||e)&&n.push(s)}for(var a=!0,o=0;o<n.length;o++){var s=n[o],l=s.ctx,u={};l.save();var c=e?s.__startIndex:s.__drawIndex,h=!e&&s.incremental&&Date.now,d=h&&Date.now(),f=s.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(s.__startIndex===s.__endIndex)s.clear(!1,f);else if(c===s.__startIndex){var p=t[c];p.incremental&&p.notClear&&!e||s.clear(!1,f)}-1===c&&(console.error("For some unknown reason. drawIndex is -1"),c=s.__startIndex);for(var g=c;g<s.__endIndex;g++){var m=t[g];if(this._doPaintEl(m,s,e,u),m.__dirty=!1,h&&Date.now()-d>15)break}s.__drawIndex=g,s.__drawIndex<s.__endIndex&&(a=!1),u.prevElClipPaths&&l.restore(),l.restore()}return Jl.wxa&&du.each(this._layers,function(t){t&&t.ctx&&t.ctx.draw&&t.ctx.draw()}),a},_doPaintEl:function(t,e,n,i){var r=e.ctx,a=t.transform;if((e.__dirty||n)&&!t.invisible&&0!==t.style.opacity&&(!a||a[0]||a[3])&&(!t.culling||!function(t,e,n){return uh.copy(t.getBoundingRect()),t.transform&&uh.applyTransform(t.transform),ch.width=e,ch.height=n,!uh.intersect(ch)}(t,this._width,this._height))){var o=t.__clipPaths;i.prevElClipPaths&&!function(t,e){if(t==e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!0}(o,i.prevElClipPaths)||(i.prevElClipPaths&&(e.ctx.restore(),i.prevElClipPaths=null,i.prevEl=null),o&&(r.save(),function(t,e){for(var n=0;n<t.length;n++){var i=t[n];i.setTransform(e),e.beginPath(),i.buildPath(e,i.shape),e.clip(),i.restoreTransform(e)}}(o,r),i.prevElClipPaths=o)),t.beforeBrush&&t.beforeBrush(r),t.brush(r,i.prevEl||null),i.prevEl=t,t.afterBrush&&t.afterBrush(r)}},getLayer:function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=314159);var n=this._layers[t];return n||((n=new kc("zr_"+t,this,this.dpr)).zlevel=t,n.__builtin__=!0,this._layerConfig[t]&&du.merge(n,this._layerConfig[t],!0),e&&(n.virtual=e),this.insertLayer(t,n),n.initContext()),n},insertLayer:function(t,e){var n=this._layers,i=this._zlevelList,r=i.length,a=null,o=-1,s=this._domRoot;if(n[t])Ju("ZLevel "+t+" has been used already");else if(function(t){return!!t&&(!!t.__builtin__||"function"==typeof t.resize&&"function"==typeof t.refresh)}(e)){if(r>0&&t>i[0]){for(o=0;o<r-1&&!(i[o]<t&&i[o+1]>t);o++);a=n[i[o]]}if(i.splice(o+1,0,t),n[t]=e,!e.virtual)if(a){var l=a.dom;l.nextSibling?s.insertBefore(e.dom,l.nextSibling):s.appendChild(e.dom)}else s.firstChild?s.insertBefore(e.dom,s.firstChild):s.appendChild(e.dom)}else Ju("Layer of zlevel "+t+" is not valid")},eachLayer:function(t,e){var n,i,r=this._zlevelList;for(i=0;i<r.length;i++)n=r[i],t.call(e,this._layers[n],n)},eachBuiltinLayer:function(t,e){var n,i,r,a=this._zlevelList;for(r=0;r<a.length;r++)i=a[r],(n=this._layers[i]).__builtin__&&t.call(e,n,i)},eachOtherLayer:function(t,e){var n,i,r,a=this._zlevelList;for(r=0;r<a.length;r++)i=a[r],(n=this._layers[i]).__builtin__||t.call(e,n,i)},getLayers:function(){return this._layers},_updateLayerStatus:function(t){function e(t){n&&(n.__endIndex!==t&&(n.__dirty=!0),n.__endIndex=t)}if(this.eachBuiltinLayer(function(t,e){t.__dirty=t.__used=!1}),this._singleCanvas)for(r=1;r<t.length;r++)if((o=t[r]).zlevel!==t[r-1].zlevel||o.incremental){this._needsManuallyCompositing=!0;break}for(var n=null,i=0,r=0;r<t.length;r++){var a,o=t[r],s=o.zlevel;o.incremental?((a=this.getLayer(s+.001,this._needsManuallyCompositing)).incremental=!0,i=1):a=this.getLayer(s+(i>0?.01:0),this._needsManuallyCompositing),a.__builtin__||Ju("ZLevel "+s+" has been used by unkown layer "+a.id),a!==n&&(a.__used=!0,a.__startIndex!==r&&(a.__dirty=!0),a.__startIndex=r,a.incremental?a.__drawIndex=-1:a.__drawIndex=r,e(r),n=a),o.__dirty&&(a.__dirty=!0,a.incremental&&a.__drawIndex<0&&(a.__drawIndex=r))}e(r),this.eachBuiltinLayer(function(t,e){!t.__used&&t.getElementCount()>0&&(t.__dirty=!0,t.__startIndex=t.__endIndex=t.__drawIndex=0),t.__dirty&&t.__drawIndex<0&&(t.__drawIndex=t.__startIndex)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(t){t.clear()},setBackgroundColor:function(t){this._backgroundColor=t},configLayer:function(t,e){if(e){var n=this._layerConfig;n[t]?du.merge(n[t],e,!0):n[t]=e;for(var i=0;i<this._zlevelList.length;i++){var r=this._zlevelList[i];if(r===t||r===t+.01){var a=this._layers[r];du.merge(a,n[t],!0)}}}},delLayer:function(t){var e=this._layers,n=this._zlevelList,i=e[t];i&&(i.dom.parentNode.removeChild(i.dom),delete e[t],n.splice(du.indexOf(n,t),1))},resize:function(t,e){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var i=this._opts;if(null!=t&&(i.width=t),null!=e&&(i.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!=t||e!=this._height){for(var r in n.style.width=t+"px",n.style.height=e+"px",this._layers)this._layers.hasOwnProperty(r)&&this._layers[r].resize(t,e);du.each(this._progressiveLayers,function(n){n.resize(t,e)}),this.refresh(!0)}this._width=t,this._height=e}else{if(null==t||null==e)return;this._width=t,this._height=e,this.getLayer(314159).resize(t,e)}return this},clearLayer:function(t){var e=this._layers[t];e&&e.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[314159].dom;var e=new kc("image",this,t.pixelRatio||this.dpr);if(e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor),t.pixelRatio<=this.dpr){this.refresh();var n=e.dom.width,i=e.dom.height,r=e.ctx;this.eachLayer(function(t){t.__builtin__?r.drawImage(t.dom,0,0,n,i):t.renderToCanvas&&(e.ctx.save(),t.renderToCanvas(e.ctx),e.ctx.restore())})}else for(var a={},o=this.storage.getDisplayList(!0),s=0;s<o.length;s++){var l=o[s];this._doPaintEl(l,e,!0,a)}return e.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,n=["width","height"][t],i=["clientWidth","clientHeight"][t],r=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var o=this.root,s=document.defaultView.getComputedStyle(o);return(o[i]||Mt(s[n])||Mt(o.style[n]))-(Mt(s[r])||0)-(Mt(s[a])||0)|0},pathToImage:function(t,e){e=e||this.dpr;var n=document.createElement("canvas"),i=n.getContext("2d"),r=t.getBoundingRect(),a=t.style,o=a.shadowBlur*e,s=a.shadowOffsetX*e,l=a.shadowOffsetY*e,u=a.hasStroke()?a.lineWidth:0,c=Math.max(u/2,-s+o),h=Math.max(u/2,s+o),d=Math.max(u/2,-l+o),f=Math.max(u/2,l+o),p=r.width+c+h,g=r.height+d+f;n.width=p*e,n.height=g*e,i.scale(e,e),i.clearRect(0,0,p,g),i.dpr=e;var m={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[c-r.x,d-r.y],t.rotation=0,t.scale=[1,1],t.updateTransform(),t&&t.brush(i);var v=new sh({style:{x:0,y:0,image:n}});return null!=m.position&&(v.position=t.position=m.position),null!=m.rotation&&(v.rotation=t.rotation=m.rotation),null!=m.scale&&(v.scale=t.scale=m.scale),v}};var dh=hh,fh=yu,ph="undefined"!=typeof window&&!!window.addEventListener,gh=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,mh={Dispatcher:fh,clientToLocal:At,normalizeEvent:function(t,e,n){if(null!=(e=e||window.event).zrX)return e;var i=e.type;if(i&&i.indexOf("touch")>=0){var r="touchend"!=i?e.targetTouches[0]:e.changedTouches[0];r&&At(t,r,e,n)}else At(t,e,e,n),e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3;var a=e.button;return null==e.which&&void 0!==a&&gh.test(e.type)&&(e.which=1&a?1:2&a?3:4&a?2:0),e},addEventListener:function(t,e,n){ph?t.addEventListener(e,n):t.attachEvent("on"+e,n)},removeEventListener:function(t,e,n){ph?t.removeEventListener(e,n):t.detachEvent("on"+e,n)},stop:ph?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0},notLeftMouse:function(t){return t.which>1}},vh=mh.Dispatcher,yh=function(t){t=t||{},this.stage=t.stage||{},this.onframe=t.onframe||function(){},this._clips=[],this._running=!1,this._time,this._pausedTime,this._pauseStart,this._paused=!1,vh.call(this)};yh.prototype={constructor:yh,addClip:function(t){this._clips.push(t)},addAnimator:function(t){t.animation=this;for(var e=t.getClips(),n=0;n<e.length;n++)this.addClip(e[n])},removeClip:function(t){var e=du.indexOf(this._clips,t);e>=0&&this._clips.splice(e,1)},removeAnimator:function(t){for(var e=t.getClips(),n=0;n<e.length;n++)this.removeClip(e[n]);t.animation=null},_update:function(){for(var t=(new Date).getTime()-this._pausedTime,e=t-this._time,n=this._clips,i=n.length,r=[],a=[],o=0;o<i;o++){var s=n[o],l=s.step(t,e);l&&(r.push(l),a.push(s))}for(o=0;o<i;)n[o]._needsRemove?(n[o]=n[i-1],n.pop(),i--):o++;for(i=r.length,o=0;o<i;o++)a[o].fire(r[o]);this._time=t,this.onframe(e),this.trigger("frame",e),this.stage.update&&this.stage.update()},_startLoop:function(){function t(){e._running&&(Dc(t),!e._paused&&e._update())}var e=this;this._running=!0,Dc(t)},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(t,e){var n=new Uu(t,(e=e||{}).loop,e.getter,e.setter);return this.addAnimator(n),n}},du.mixin(yh,vh);var xh=yh,_h=function(){this._track=[]};_h.prototype={constructor:_h,recognize:function(t,e,n){return this._doTrack(t,e,n),this._recognize(t)},clear:function(){return this._track.length=0,this},_doTrack:function(t,e,n){var i=t.touches;if(i){for(var r={points:[],touches:[],target:e,event:t},a=0,o=i.length;a<o;a++){var s=i[a],l=mh.clientToLocal(n,s,{});r.points.push([l.zrX,l.zrY]),r.touches.push(s)}this._track.push(r)}},_recognize:function(t){for(var e in bh)if(bh.hasOwnProperty(e)){var n=bh[e](this._track,t);if(n)return n}}};var bh={pinch:function(t,e){var n=t.length;if(n){var i=(t[n-1]||{}).points,r=(t[n-2]||{}).points||i;if(r&&r.length>1&&i&&i.length>1){var a=It(i)/It(r);!isFinite(a)&&(a=1),e.pinchScale=a;var o=function(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}(i);return e.pinchX=o[0],e.pinchY=o[1],{type:"pinch",target:t[0].target,event:e}}}}},wh=_h,Sh=mh.addEventListener,Mh=mh.removeEventListener,Ah=mh.normalizeEvent,Ch=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Ih=["touchstart","touchend","touchmove"],Ph={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},Th=du.map(Ch,function(t){var e=t.replace("mouse","pointer");return Ph[e]?e:t}),Oh={mousemove:function(t){t=Ah(this.dom,t),this.trigger("mousemove",t)},mouseout:function(t){var e=(t=Ah(this.dom,t)).toElement||t.relatedTarget;if(e!=this.dom)for(;e&&9!=e.nodeType;){if(e===this.dom)return;e=e.parentNode}this.trigger("mouseout",t)},touchstart:function(t){(t=Ah(this.dom,t)).zrByTouch=!0,this._lastTouchMoment=new Date,Tt(this,t,"start"),Oh.mousemove.call(this,t),Oh.mousedown.call(this,t),Ot(this)},touchmove:function(t){(t=Ah(this.dom,t)).zrByTouch=!0,Tt(this,t,"change"),Oh.mousemove.call(this,t),Ot(this)},touchend:function(t){(t=Ah(this.dom,t)).zrByTouch=!0,Tt(this,t,"end"),Oh.mouseup.call(this,t),+new Date-this._lastTouchMoment<300&&Oh.click.call(this,t),Ot(this)},pointerdown:function(t){Oh.mousedown.call(this,t)},pointermove:function(t){kt(t)||Oh.mousemove.call(this,t)},pointerup:function(t){Oh.mouseup.call(this,t)},pointerout:function(t){kt(t)||Oh.mouseout.call(this,t)}};du.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){Oh[t]=function(e){e=Ah(this.dom,e),this.trigger(t,e)}});var kh=Dt.prototype;kh.dispose=function(){for(var t=Ch.concat(Ih),e=0;e<t.length;e++){var n=t[e];Mh(this.dom,Pt(n),this._handlers[n])}},kh.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},du.mixin(Dt,yu);var Dh=Dt,Eh=!Jl.canvasSupported,Lh={canvas:dh},Nh={},Rh=function(t,e,n){n=n||{},this.dom=e,this.id=t;var i=this,r=new yc,a=n.renderer;if(Eh){if(!Lh.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");a="vml"}else a&&Lh[a]||(a="canvas");var o=new Lh[a](e,r,n,t);this.storage=r,this.painter=o;var s=Jl.node||Jl.worker?null:new Dh(o.getViewportRoot());this.handler=new wu(r,o,s,o.root),this.animation=new xh({stage:{update:du.bind(this.flush,this)}}),this.animation.start(),this._needsRefresh;var l=r.delFromStorage,u=r.addToStorage;r.delFromStorage=function(t){l.call(r,t),t&&t.removeSelfFromZr(i)},r.addToStorage=function(t){u.call(r,t),t.addSelfToZr(i)}};Rh.prototype={constructor:Rh,getId:function(){return this.id},add:function(t){this.storage.addRoot(t),this._needsRefresh=!0},remove:function(t){this.storage.delRoot(t),this._needsRefresh=!0},configLayer:function(t,e){this.painter.configLayer&&this.painter.configLayer(t,e),this._needsRefresh=!0},setBackgroundColor:function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var t;this._needsRefresh&&(t=!0,this.refreshImmediately()),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately()),t&&this.trigger("rendered")},addHover:function(t,e){this.painter.addHover&&(this.painter.addHover(t,e),this.refreshHover())},removeHover:function(t){this.painter.removeHover&&(this.painter.removeHover(t),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(t,e){return this.painter.pathToImage(t,e)},setCursorStyle:function(t){this.handler.setCursorStyle(t)},findHover:function(t,e){return this.handler.findHover(t,e)},on:function(t,e,n){this.handler.on(t,e,n)},off:function(t,e){this.handler.off(t,e)},trigger:function(t,e){this.handler.trigger(t,e)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,function(t){delete Nh[t]}(this.id)}};var Bh={version:"4.0.4",init:function(t,e){var n=new Rh($l(),t,e);return Nh[n.id]=n,n},dispose:function(t){if(t)t.dispose();else{for(var e in Nh)Nh.hasOwnProperty(e)&&Nh[e].dispose();Nh={}}return this},getInstance:function(t){return Nh[t]},registerPainter:function(t,e){Lh[t]=e}},zh=du.each,Vh=du.isObject,Gh=du.isArray,Fh="series\0",jh=0,Hh={normalizeToArray:Et,defaultEmphasis:function(t,e,n){if(t){t[e]=t[e]||{},t.emphasis=t.emphasis||{},t.emphasis[e]=t.emphasis[e]||{};for(var i=0,r=n.length;i<r;i++){var a=n[i];!t.emphasis[e].hasOwnProperty(a)&&t[e].hasOwnProperty(a)&&(t.emphasis[e][a]=t[e][a])}}},TEXT_STYLE_OPTIONS:["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"],getDataItemValue:function(t){return!Vh(t)||Gh(t)||t instanceof Date?t:t.value},isDataItemOption:function(t){return Vh(t)&&!(t instanceof Array)},mappingToExists:function(t,e){e=(e||[]).slice();var n=du.map(t||[],function(t,e){return{exist:t}});return zh(e,function(t,i){if(Vh(t)){for(r=0;r<n.length;r++)if(!n[r].option&&null!=t.id&&n[r].exist.id===t.id+"")return n[r].option=t,void(e[i]=null);for(var r=0;r<n.length;r++){var a=n[r].exist;if(!(n[r].option||null!=a.id&&null!=t.id||null==t.name||Lt(t)||Lt(a)||a.name!==t.name+""))return n[r].option=t,void(e[i]=null)}}}),zh(e,function(t,e){if(Vh(t)){for(var i=0;i<n.length;i++){var r=n[i].exist;if(!n[i].option&&!Lt(r)&&null==t.id){n[i].option=t;break}}i>=n.length&&n.push({option:t})}}),n},makeIdAndName:function(t){var e=du.createHashMap();zh(t,function(t,n){var i=t.exist;i&&e.set(i.id,t)}),zh(t,function(t,n){var i=t.option;du.assert(!i||null==i.id||!e.get(i.id)||e.get(i.id)===t,"id duplicates: "+(i&&i.id)),i&&null!=i.id&&e.set(i.id,t),!t.keyInfo&&(t.keyInfo={})}),zh(t,function(t,n){var i=t.exist,r=t.option,a=t.keyInfo;if(Vh(r)){if(a.name=null!=r.name?r.name+"":i?i.name:Fh+n,i)a.id=i.id;else if(null!=r.id)a.id=r.id+"";else{var o=0;do{a.id="\0"+a.name+"\0"+o++}while(e.get(a.id))}e.set(a.id,t)}})},isNameSpecified:function(t){var e=t.name;return!(!e||!e.indexOf(Fh))},isIdInner:Lt,compressBatches:function(t,e){function n(t,e,n){for(var i=0,r=t.length;i<r;i++)for(var a=t[i].seriesId,o=Et(t[i].dataIndex),s=n&&n[a],l=0,u=o.length;l<u;l++){var c=o[l];s&&s[c]?s[c]=null:(e[a]||(e[a]={}))[c]=1}}function i(t,e){var n=[];for(var r in t)if(t.hasOwnProperty(r)&&null!=t[r])if(e)n.push(+r);else{var a=i(t[r],!0);a.length&&n.push({seriesId:r,dataIndex:a})}return n}var r={},a={};return n(t||[],r),n(e||[],a,r),[i(r),i(a)]},queryDataIndex:function(t,e){return null!=e.dataIndexInside?e.dataIndexInside:null!=e.dataIndex?du.isArray(e.dataIndex)?du.map(e.dataIndex,function(e){return t.indexOfRawIndex(e)}):t.indexOfRawIndex(e.dataIndex):null!=e.name?du.isArray(e.name)?du.map(e.name,function(e){return t.indexOfName(e)}):t.indexOfName(e.name):void 0},makeInner:function(){var t="__\0ec_inner_"+jh+++"_"+Math.random().toFixed(5);return function(e){return e[t]||(e[t]={})}},parseFinder:function(t,e,n){if(du.isString(e)){var i={};i[e+"Index"]=0,e=i}var r=n&&n.defaultMainType;!r||Nt(e,r+"Index")||Nt(e,r+"Id")||Nt(e,r+"Name")||(e[r+"Index"]=0);var a={};return zh(e,function(i,r){if(i=e[r],"dataIndex"!==r&&"dataIndexInside"!==r){var o=r.match(/^(\w+)(Index|Id|Name)$/)||[],s=o[1],l=(o[2]||"").toLowerCase();if(!(!s||!l||null==i||"index"===l&&"none"===i||n&&n.includeMainTypes&&du.indexOf(n.includeMainTypes,s)<0)){var u={mainType:s};"index"===l&&"all"===i||(u[l]=i);var c=t.queryComponents(u);a[s+"Models"]=c,a[s+"Model"]=c[0]}}else a[r]=i}),a},setAttribute:function(t,e,n){t.setAttribute?t.setAttribute(e,n):t[e]=n},getAttribute:function(t,e){return t.getAttribute?t.getAttribute(e):t[e]}},Wh=".",Yh="___EC__COMPONENT__CONTAINER___",Xh=0,Uh={parseClassType:Rt,enableClassExtend:function(t,e){t.$constructor=t,t.extend=function(t){var e=this,n=function(){t.$constructor?t.$constructor.apply(this,arguments):e.apply(this,arguments)};return du.extend(n.prototype,t),n.extend=this.extend,n.superCall=function(t,e){var n=du.slice(arguments,2);return this.superClass.prototype[e].apply(t,n)},n.superApply=function(t,e,n){return this.superClass.prototype[e].apply(t,n)},du.inherits(n,this),n.superClass=e,n}},enableClassCheck:function(t){var e=["__\0is_clz",Xh++,Math.random().toFixed(3)].join("_");t.prototype[e]=!0,t.isInstance=function(t){return!(!t||!t[e])}},enableClassManagement:function(t,e){e=e||{};var n={};if(t.registerClass=function(t,e){return e&&(function(t){du.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t),'componentType "'+t+'" illegal')}(e),(e=Rt(e)).sub?e.sub!==Yh&&((function(t){var e=n[t.main];return e&&e[Yh]||((e=n[t.main]={})[Yh]=!0),e}(e))[e.sub]=t):n[e.main]=t),t},t.getClass=function(t,e,i){var r=n[t];if(r&&r[Yh]&&(r=e?r[e]:null),i&&!r)throw new Error(e?"Component "+t+"."+(e||"")+" not exists. Load it first.":t+".type should be specified.");return r},t.getClassesByMainType=function(t){t=Rt(t);var e=[],i=n[t.main];return i&&i[Yh]?du.each(i,function(t,n){n!==Yh&&e.push(t)}):e.push(i),e},t.hasClass=function(t){return t=Rt(t),!!n[t.main]},t.getAllClassMainTypes=function(){var t=[];return du.each(n,function(e,n){t.push(n)}),t},t.hasSubTypes=function(t){t=Rt(t);var e=n[t.main];return e&&e[Yh]},t.parseClassType=Rt,e.registerWhenExtend){var i=t.extend;i&&(t.extend=function(e){var n=i.call(this,e);return t.registerClass(n,e.type)})}return t},setReadOnly:function(t,e){}},qh=function(t){for(var e=0;e<t.length;e++)t[e][1]||(t[e][1]=t[e][0]);return function(e,n,i){for(var r={},a=0;a<t.length;a++){var o=t[a][1];if(!(n&&du.indexOf(n,o)>=0||i&&du.indexOf(i,o)<0)){var s=e.getShallow(o);null!=s&&(r[t[a][0]]=s)}}return r}},Zh=qh([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Kh={getLineStyle:function(t){var e=Zh(this,t),n=this.getLineDash(e.lineWidth);return n&&(e.lineDash=n),e},getLineDash:function(t){null==t&&(t=1);var e=this.get("type"),n=Math.max(t,2),i=4*t;return"solid"===e||null==e?null:"dashed"===e?[i,i]:[n,n]}},$h=qh([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),Jh={getAreaStyle:function(t,e){return $h(this,t,e)}},Qh=pu.create,td=pu.distSquare,ed=Math.pow,nd=Math.sqrt,id=1e-8,rd=1e-4,ad=nd(3),od=1/3,sd=Qh(),ld=Qh(),ud=Qh(),cd={cubicAt:Vt,cubicDerivativeAt:function(t,e,n,i,r){var a=1-r;return 3*(((e-t)*a+2*(n-e)*r)*a+(i-n)*r*r)},cubicRootAt:function(t,e,n,i,r,a){var o=i+3*(e-n)-t,s=3*(n-2*e+t),l=3*(e-t),u=t-r,c=s*s-3*o*l,h=s*l-9*o*u,d=l*l-3*s*u,f=0;if(Bt(c)&&Bt(h))Bt(s)?a[0]=0:(M=-l/s)>=0&&M<=1&&(a[f++]=M);else{var p=h*h-4*c*d;if(Bt(p)){var g=h/c,m=-g/2;(M=-s/o+g)>=0&&M<=1&&(a[f++]=M),m>=0&&m<=1&&(a[f++]=m)}else if(p>0){var v=nd(p),y=c*s+1.5*o*(-h+v),x=c*s+1.5*o*(-h-v);(M=(-s-((y=y<0?-ed(-y,od):ed(y,od))+(x=x<0?-ed(-x,od):ed(x,od))))/(3*o))>=0&&M<=1&&(a[f++]=M)}else{var _=(2*c*s-3*o*h)/(2*nd(c*c*c)),b=Math.acos(_)/3,w=nd(c),S=Math.cos(b),M=(-s-2*w*S)/(3*o),A=(m=(-s+w*(S+ad*Math.sin(b)))/(3*o),(-s+w*(S-ad*Math.sin(b)))/(3*o));M>=0&&M<=1&&(a[f++]=M),m>=0&&m<=1&&(a[f++]=m),A>=0&&A<=1&&(a[f++]=A)}}return f},cubicExtrema:function(t,e,n,i,r){var a=6*n-12*e+6*t,o=9*e+3*i-3*t-9*n,s=3*e-3*t,l=0;if(Bt(o))zt(a)&&(h=-s/a)>=0&&h<=1&&(r[l++]=h);else{var u=a*a-4*o*s;if(Bt(u))r[0]=-a/(2*o);else if(u>0){var c=nd(u),h=(-a+c)/(2*o),d=(-a-c)/(2*o);h>=0&&h<=1&&(r[l++]=h),d>=0&&d<=1&&(r[l++]=d)}}return l},cubicSubdivide:function(t,e,n,i,r,a){var o=(e-t)*r+t,s=(n-e)*r+e,l=(i-n)*r+n,u=(s-o)*r+o,c=(l-s)*r+s,h=(c-u)*r+u;a[0]=t,a[1]=o,a[2]=u,a[3]=h,a[4]=h,a[5]=c,a[6]=l,a[7]=i},cubicProjectPoint:function(t,e,n,i,r,a,o,s,l,u,c){var h,d,f,p,g,m=.005,v=1/0;sd[0]=l,sd[1]=u;for(var y=0;y<1;y+=.05)ld[0]=Vt(t,n,r,o,y),ld[1]=Vt(e,i,a,s,y),(p=td(sd,ld))<v&&(h=y,v=p);v=1/0;for(var x=0;x<32&&!(m<rd);x++)d=h-m,f=h+m,ld[0]=Vt(t,n,r,o,d),ld[1]=Vt(e,i,a,s,d),p=td(ld,sd),d>=0&&p<v?(h=d,v=p):(ud[0]=Vt(t,n,r,o,f),ud[1]=Vt(e,i,a,s,f),g=td(ud,sd),f<=1&&g<v?(h=f,v=g):m*=.5);return c&&(c[0]=Vt(t,n,r,o,h),c[1]=Vt(e,i,a,s,h)),nd(v)},quadraticAt:Gt,quadraticDerivativeAt:function(t,e,n,i){return 2*((1-i)*(e-t)+i*(n-e))},quadraticRootAt:function(t,e,n,i,r){var a=t-2*e+n,o=2*(e-t),s=t-i,l=0;if(Bt(a))zt(o)&&(h=-s/o)>=0&&h<=1&&(r[l++]=h);else{var u=o*o-4*a*s;if(Bt(u))(h=-o/(2*a))>=0&&h<=1&&(r[l++]=h);else if(u>0){var c=nd(u),h=(-o+c)/(2*a),d=(-o-c)/(2*a);h>=0&&h<=1&&(r[l++]=h),d>=0&&d<=1&&(r[l++]=d)}}return l},quadraticExtremum:function(t,e,n){var i=t+n-2*e;return 0===i?.5:(t-e)/i},quadraticSubdivide:function(t,e,n,i,r){var a=(e-t)*i+t,o=(n-e)*i+e,s=(o-a)*i+a;r[0]=t,r[1]=a,r[2]=s,r[3]=s,r[4]=o,r[5]=n},quadraticProjectPoint:function(t,e,n,i,r,a,o,s,l){var u,c=.005,h=1/0;sd[0]=o,sd[1]=s;for(var d=0;d<1;d+=.05)ld[0]=Gt(t,n,r,d),ld[1]=Gt(e,i,a,d),(m=td(sd,ld))<h&&(u=d,h=m);h=1/0;for(var f=0;f<32&&!(c<rd);f++){var p=u-c,g=u+c;ld[0]=Gt(t,n,r,p),ld[1]=Gt(e,i,a,p);var m=td(ld,sd);if(p>=0&&m<h)u=p,h=m;else{ud[0]=Gt(t,n,r,g),ud[1]=Gt(e,i,a,g);var v=td(ud,sd);g<=1&&v<h?(u=g,h=v):c*=.5}}return l&&(l[0]=Gt(t,n,r,u),l[1]=Gt(e,i,a,u)),nd(h)}},hd=Math.min,dd=Math.max,fd=Math.sin,pd=Math.cos,gd=2*Math.PI,md=pu.create(),vd=pu.create(),yd=pu.create(),xd=[],_d=[],bd={fromPoints:function(t,e,n){if(0!==t.length){var i,r=t[0],a=r[0],o=r[0],s=r[1],l=r[1];for(i=1;i<t.length;i++)r=t[i],a=hd(a,r[0]),o=dd(o,r[0]),s=hd(s,r[1]),l=dd(l,r[1]);e[0]=a,e[1]=s,n[0]=o,n[1]=l}},fromLine:function(t,e,n,i,r,a){r[0]=hd(t,n),r[1]=hd(e,i),a[0]=dd(t,n),a[1]=dd(e,i)},fromCubic:function(t,e,n,i,r,a,o,s,l,u){var c,h=cd.cubicExtrema,d=cd.cubicAt,f=h(t,n,r,o,xd);for(l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0,c=0;c<f;c++){var p=d(t,n,r,o,xd[c]);l[0]=hd(p,l[0]),u[0]=dd(p,u[0])}for(f=h(e,i,a,s,_d),c=0;c<f;c++){var g=d(e,i,a,s,_d[c]);l[1]=hd(g,l[1]),u[1]=dd(g,u[1])}l[0]=hd(t,l[0]),u[0]=dd(t,u[0]),l[0]=hd(o,l[0]),u[0]=dd(o,u[0]),l[1]=hd(e,l[1]),u[1]=dd(e,u[1]),l[1]=hd(s,l[1]),u[1]=dd(s,u[1])},fromQuadratic:function(t,e,n,i,r,a,o,s){var l=cd.quadraticExtremum,u=cd.quadraticAt,c=dd(hd(l(t,n,r),1),0),h=dd(hd(l(e,i,a),1),0),d=u(t,n,r,c),f=u(e,i,a,h);o[0]=hd(t,r,d),o[1]=hd(e,a,f),s[0]=dd(t,r,d),s[1]=dd(e,a,f)},fromArc:function(t,e,n,i,r,a,o,s,l){var u=pu.min,c=pu.max,h=Math.abs(r-a);if(h%gd<1e-4&&h>1e-4)return s[0]=t-n,s[1]=e-i,l[0]=t+n,void(l[1]=e+i);if(md[0]=pd(r)*n+t,md[1]=fd(r)*i+e,vd[0]=pd(a)*n+t,vd[1]=fd(a)*i+e,u(s,md,vd),c(l,md,vd),(r%=gd)<0&&(r+=gd),(a%=gd)<0&&(a+=gd),r>a&&!o?a+=gd:r<a&&o&&(r+=gd),o){var d=a;a=r,r=d}for(var f=0;f<a;f+=Math.PI/2)f>r&&(yd[0]=pd(f)*n+t,yd[1]=fd(f)*i+e,u(s,yd,s),c(l,yd,l))}},wd=Zu.devicePixelRatio,Sd={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Md=[],Ad=[],Cd=[],Id=[],Pd=Math.min,Td=Math.max,Od=Math.cos,kd=Math.sin,Dd=Math.sqrt,Ed=Math.abs,Ld="undefined"!=typeof Float32Array,Nd=function(t){this._saveData=!t,this._saveData&&(this.data=[]),this._ctx=null};Nd.prototype={constructor:Nd,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(t,e){this._ux=Ed(1/wd/t)||0,this._uy=Ed(1/wd/e)||0},getContext:function(){return this._ctx},beginPath:function(t){return this._ctx=t,t&&t.beginPath(),t&&(this.dpr=t.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(t,e){return this.addData(Sd.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},lineTo:function(t,e){var n=Ed(t-this._xi)>this._ux||Ed(e-this._yi)>this._uy||this._len<5;return this.addData(Sd.L,t,e),this._ctx&&n&&(this._needsDash()?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)),n&&(this._xi=t,this._yi=e),this},bezierCurveTo:function(t,e,n,i,r,a){return this.addData(Sd.C,t,e,n,i,r,a),this._ctx&&(this._needsDash()?this._dashedBezierTo(t,e,n,i,r,a):this._ctx.bezierCurveTo(t,e,n,i,r,a)),this._xi=r,this._yi=a,this},quadraticCurveTo:function(t,e,n,i){return this.addData(Sd.Q,t,e,n,i),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(t,e,n,i):this._ctx.quadraticCurveTo(t,e,n,i)),this._xi=n,this._yi=i,this},arc:function(t,e,n,i,r,a){return this.addData(Sd.A,t,e,n,n,i,r-i,0,a?0:1),this._ctx&&this._ctx.arc(t,e,n,i,r,a),this._xi=Od(r)*n+t,this._yi=kd(r)*n+t,this},arcTo:function(t,e,n,i,r){return this._ctx&&this._ctx.arcTo(t,e,n,i,r),this},rect:function(t,e,n,i){return this._ctx&&this._ctx.rect(t,e,n,i),this.addData(Sd.R,t,e,n,i),this},closePath:function(){this.addData(Sd.Z);var t=this._ctx,e=this._x0,n=this._y0;return t&&(this._needsDash()&&this._dashedLineTo(e,n),t.closePath()),this._xi=e,this._yi=n,this},fill:function(t){t&&t.fill(),this.toStatic()},stroke:function(t){t&&t.stroke(),this.toStatic()},setLineDash:function(t){if(t instanceof Array){this._lineDash=t,this._dashIdx=0;for(var e=0,n=0;n<t.length;n++)e+=t[n];this._dashSum=e}return this},setLineDashOffset:function(t){return this._dashOffset=t,this},len:function(){return this._len},setData:function(t){var e=t.length;this.data&&this.data.length==e||!Ld||(this.data=new Float32Array(e));for(var n=0;n<e;n++)this.data[n]=t[n];this._len=e},appendPath:function(t){t instanceof Array||(t=[t]);for(var e=t.length,n=0,i=this._len,r=0;r<e;r++)n+=t[r].len();for(Ld&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n)),r=0;r<e;r++)for(var a=t[r].data,o=0;o<a.length;o++)this.data[i++]=a[o];this._len=i},addData:function(t){var e=arguments;if(this._saveData){var n=this.data;this._len+arguments.length>n.length&&(this._expandData(),n=this.data);for(var i=0;i<arguments.length;i++)n[this._len++]=e[i];this._prevCmd=t}},_expandData:function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(t,e){var n,i,r=this._dashSum,a=this._dashOffset,o=this._lineDash,s=this._ctx,l=this._xi,u=this._yi,c=t-l,h=e-u,d=Dd(c*c+h*h),f=l,p=u,g=o.length;for(c/=d,h/=d,a<0&&(a=r+a),f-=(a%=r)*c,p-=a*h;c>0&&f<=t||c<0&&f>=t||0==c&&(h>0&&p<=e||h<0&&p>=e);)f+=c*(n=o[i=this._dashIdx]),p+=h*n,this._dashIdx=(i+1)%g,c>0&&f<l||c<0&&f>l||h>0&&p<u||h<0&&p>u||s[i%2?"moveTo":"lineTo"](c>=0?Pd(f,t):Td(f,t),h>=0?Pd(p,e):Td(p,e));c=f-t,h=p-e,this._dashOffset=-Dd(c*c+h*h)},_dashedBezierTo:function(t,e,n,i,r,a){var o,s,l,u,c,h=this._dashSum,d=this._dashOffset,f=this._lineDash,p=this._ctx,g=this._xi,m=this._yi,v=cd.cubicAt,y=0,x=this._dashIdx,_=f.length,b=0;for(d<0&&(d=h+d),d%=h,o=0;o<1;o+=.1)s=v(g,t,n,r,o+.1)-v(g,t,n,r,o),l=v(m,e,i,a,o+.1)-v(m,e,i,a,o),y+=Dd(s*s+l*l);for(;x<_&&!((b+=f[x])>d);x++);for(o=(b-d)/y;o<=1;)u=v(g,t,n,r,o),c=v(m,e,i,a,o),x%2?p.moveTo(u,c):p.lineTo(u,c),o+=f[x]/y,x=(x+1)%_;x%2!=0&&p.lineTo(r,a),s=r-u,l=a-c,this._dashOffset=-Dd(s*s+l*l)},_dashedQuadraticTo:function(t,e,n,i){var r=n,a=i;n=(n+2*t)/3,i=(i+2*e)/3,t=(this._xi+2*t)/3,e=(this._yi+2*e)/3,this._dashedBezierTo(t,e,n,i,r,a)},toStatic:function(){var t=this.data;t instanceof Array&&(t.length=this._len,Ld&&(this.data=new Float32Array(t)))},getBoundingRect:function(){Md[0]=Md[1]=Cd[0]=Cd[1]=Number.MAX_VALUE,Ad[0]=Ad[1]=Id[0]=Id[1]=-Number.MAX_VALUE;for(var t=this.data,e=0,n=0,i=0,r=0,a=0;a<t.length;){var o=t[a++];switch(1==a&&(i=e=t[a],r=n=t[a+1]),o){case Sd.M:e=i=t[a++],n=r=t[a++],Cd[0]=i,Cd[1]=r,Id[0]=i,Id[1]=r;break;case Sd.L:bd.fromLine(e,n,t[a],t[a+1],Cd,Id),e=t[a++],n=t[a++];break;case Sd.C:bd.fromCubic(e,n,t[a++],t[a++],t[a++],t[a++],t[a],t[a+1],Cd,Id),e=t[a++],n=t[a++];break;case Sd.Q:bd.fromQuadratic(e,n,t[a++],t[a++],t[a],t[a+1],Cd,Id),e=t[a++],n=t[a++];break;case Sd.A:var s=t[a++],l=t[a++],u=t[a++],c=t[a++],h=t[a++],d=t[a++]+h,f=(t[a++],1-t[a++]);1==a&&(i=Od(h)*u+s,r=kd(h)*c+l),bd.fromArc(s,l,u,c,h,d,f,Cd,Id),e=Od(d)*u+s,n=kd(d)*c+l;break;case Sd.R:i=e=t[a++],r=n=t[a++];var p=t[a++],g=t[a++];bd.fromLine(i,r,i+p,r+g,Cd,Id);break;case Sd.Z:e=i,n=r}pu.min(Md,Md,Cd),pu.max(Ad,Ad,Id)}return 0===a&&(Md[0]=Md[1]=Ad[0]=Ad[1]=0),new hc(Md[0],Md[1],Ad[0]-Md[0],Ad[1]-Md[1])},rebuildPath:function(t){for(var e,n,i,r,a,o,s=this.data,l=this._ux,u=this._uy,c=this._len,h=0;h<c;){var d=s[h++];switch(1==h&&(e=i=s[h],n=r=s[h+1]),d){case Sd.M:e=i=s[h++],n=r=s[h++],t.moveTo(i,r);break;case Sd.L:a=s[h++],o=s[h++],(Ed(a-i)>l||Ed(o-r)>u||h===c-1)&&(t.lineTo(a,o),i=a,r=o);break;case Sd.C:t.bezierCurveTo(s[h++],s[h++],s[h++],s[h++],s[h++],s[h++]),i=s[h-2],r=s[h-1];break;case Sd.Q:t.quadraticCurveTo(s[h++],s[h++],s[h++],s[h++]),i=s[h-2],r=s[h-1];break;case Sd.A:var f=s[h++],p=s[h++],g=s[h++],m=s[h++],v=s[h++],y=s[h++],x=s[h++],_=s[h++],b=g>m?g:m,w=g>m?1:g/m,S=g>m?m/g:1,M=v+y;Math.abs(g-m)>.001?(t.translate(f,p),t.rotate(x),t.scale(w,S),t.arc(0,0,b,v,M,1-_),t.scale(1/w,1/S),t.rotate(-x),t.translate(-f,-p)):t.arc(f,p,b,v,M,1-_),1==h&&(e=Od(v)*g+f,n=kd(v)*m+p),i=Od(M)*g+f,r=kd(M)*m+p;break;case Sd.R:e=i=s[h],n=r=s[h+1],t.rect(s[h++],s[h++],s[h++],s[h++]);break;case Sd.Z:t.closePath(),i=e,r=n}}}},Nd.CMD=Sd;var Rd=Nd,Bd={containStroke:function(t,e,n,i,r,a,o){if(0===r)return!1;var s=r,l=0;if(o>e+s&&o>i+s||o<e-s&&o<i-s||a>t+s&&a>n+s||a<t-s&&a<n-s)return!1;if(t===n)return Math.abs(a-t)<=s/2;var u=(l=(e-i)/(t-n))*a-o+(t*i-n*e)/(t-n);return u*u/(l*l+1)<=s/2*s/2}},zd={containStroke:function(t,e,n,i,r,a,o,s,l,u,c){if(0===l)return!1;var h=l;return!(c>e+h&&c>i+h&&c>a+h&&c>s+h||c<e-h&&c<i-h&&c<a-h&&c<s-h||u>t+h&&u>n+h&&u>r+h&&u>o+h||u<t-h&&u<n-h&&u<r-h&&u<o-h)&&cd.cubicProjectPoint(t,e,n,i,r,a,o,s,u,c,null)<=h/2}},Vd=cd.quadraticProjectPoint,Gd={containStroke:function(t,e,n,i,r,a,o,s,l){if(0===o)return!1;var u=o;return!(l>e+u&&l>i+u&&l>a+u||l<e-u&&l<i-u&&l<a-u||s>t+u&&s>n+u&&s>r+u||s<t-u&&s<n-u&&s<r-u)&&Vd(t,e,n,i,r,a,s,l,null)<=u/2}},Fd=2*Math.PI,jd={normalizeRadian:function(t){return(t%=Fd)<0&&(t+=Fd),t}},Hd=jd.normalizeRadian,Wd=2*Math.PI,Yd={containStroke:function(t,e,n,i,r,a,o,s,l){if(0===o)return!1;var u=o;s-=t,l-=e;var c=Math.sqrt(s*s+l*l);if(c-u>n||c+u<n)return!1;if(Math.abs(i-r)%Wd<1e-4)return!0;if(a){var h=i;i=Hd(r),r=Hd(h)}else i=Hd(i),r=Hd(r);i>r&&(r+=Wd);var d=Math.atan2(l,s);return d<0&&(d+=Wd),d>=i&&d<=r||d+Wd>=i&&d+Wd<=r}},Xd=function(t,e,n,i,r,a){if(a>e&&a>i||a<e&&a<i)return 0;if(i===e)return 0;var o=i<e?1:-1,s=(a-e)/(i-e);1!==s&&0!==s||(o=i<e?.5:-.5);var l=s*(n-t)+t;return l===r?1/0:l>r?o:0},Ud=jd.normalizeRadian,qd=Rd.CMD,Zd=2*Math.PI,Kd=1e-4,$d=[-1,-1,-1],Jd=[-1,-1],Qd={contain:function(t,e,n){return Ft(t,0,!1,e,n)},containStroke:function(t,e,n,i){return Ft(t,e,!0,n,i)}},tf=Pc.prototype.getCanvasPattern,ef=Math.abs,nf=new Rd(!0);jt.prototype={constructor:jt,type:"path",__dirtyPath:!0,strokeContainThreshold:5,brush:function(t,e){var n,i=this.style,r=this.path||nf,a=i.hasStroke(),o=i.hasFill(),s=i.fill,l=i.stroke,u=o&&!!s.colorStops,c=a&&!!l.colorStops,h=o&&!!s.image,d=a&&!!l.image;(i.bind(t,this,e),this.setTransform(t),this.__dirty)&&(u&&(n=n||this.getBoundingRect(),this._fillGradient=i.getGradient(t,s,n)),c&&(n=n||this.getBoundingRect(),this._strokeGradient=i.getGradient(t,l,n)));u?t.fillStyle=this._fillGradient:h&&(t.fillStyle=tf.call(s,t)),c?t.strokeStyle=this._strokeGradient:d&&(t.strokeStyle=tf.call(l,t));var f=i.lineDash,p=i.lineDashOffset,g=!!t.setLineDash,m=this.getGlobalScale();r.setScale(m[0],m[1]),this.__dirtyPath||f&&!g&&a?(r.beginPath(t),f&&!g&&(r.setLineDash(f),r.setLineDashOffset(p)),this.buildPath(r,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(t.beginPath(),this.path.rebuildPath(t)),o&&r.fill(t),f&&g&&(t.setLineDash(f),t.lineDashOffset=p),a&&r.stroke(t),f&&g&&t.setLineDash([]),null!=i.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))},buildPath:function(t,e,n){},createPathProxy:function(){this.path=new Rd},getBoundingRect:function(){var t=this._rect,e=this.style,n=!t;if(n){var i=this.path;i||(i=this.path=new Rd),this.__dirtyPath&&(i.beginPath(),this.buildPath(i,this.shape,!1)),t=i.getBoundingRect()}if(this._rect=t,e.hasStroke()){var r=this._rectWithStroke||(this._rectWithStroke=t.clone());if(this.__dirty||n){r.copy(t);var a=e.lineWidth,o=e.strokeNoScale?this.getLineScale():1;e.hasFill()||(a=Math.max(a,this.strokeContainThreshold||4)),o>1e-10&&(r.width+=a/o,r.height+=a/o,r.x-=a/o/2,r.y-=a/o/2)}return r}return t},contain:function(t,e){var n=this.transformCoordToLocal(t,e),i=this.getBoundingRect(),r=this.style;if(t=n[0],e=n[1],i.contain(t,e)){var a=this.path.data;if(r.hasStroke()){var o=r.lineWidth,s=r.strokeNoScale?this.getLineScale():1;if(s>1e-10&&(r.hasFill()||(o=Math.max(o,this.strokeContainThreshold)),Qd.containStroke(a,o/s,t,e)))return!0}if(r.hasFill())return Qd.contain(a,t,e)}return!1},dirty:function(t){null==t&&(t=!0),t&&(this.__dirtyPath=t,this._rect=null),this.__dirty=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(t){return this.animate("shape",t)},attrKV:function(t,e){"shape"===t?(this.setShape(e),this.__dirtyPath=!0,this._rect=null):oh.prototype.attrKV.call(this,t,e)},setShape:function(t,e){var n=this.shape;if(n){if(du.isObject(t))for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);else n[t]=e;this.dirty(!0)}return this},getLineScale:function(){var t=this.transform;return t&&ef(t[0]-1)>1e-10&&ef(t[3]-1)>1e-10?Math.sqrt(ef(t[0]*t[3]-t[2]*t[1])):1}},jt.extend=function(t){var e=function(e){jt.call(this,e),t.style&&this.style.extendFrom(t.style,!1);var n=t.shape;if(n){this.shape=this.shape||{};var i=this.shape;for(var r in n)!i.hasOwnProperty(r)&&n.hasOwnProperty(r)&&(i[r]=n[r])}t.init&&t.init.call(this,e)};for(var n in du.inherits(e,jt),t)"style"!==n&&"shape"!==n&&(e.prototype[n]=t[n]);return e},du.inherits(jt,oh);var rf=jt,af=pu.applyTransform,of=Rd.CMD,sf=[[],[],[]],lf=Math.sqrt,uf=Math.atan2,cf=function(t,e){var n,i,r,a,o,s=t.data,l=of.M,u=of.C,c=of.L,h=of.R,d=of.A,f=of.Q;for(r=0,a=0;r<s.length;){switch(n=s[r++],a=r,i=0,n){case l:case c:i=1;break;case u:i=3;break;case f:i=2;break;case d:var p=e[4],g=e[5],m=lf(e[0]*e[0]+e[1]*e[1]),v=lf(e[2]*e[2]+e[3]*e[3]),y=uf(-e[1]/v,e[0]/m);s[r]*=m,s[r++]+=p,s[r]*=v,s[r++]+=g,s[r++]*=m,s[r++]*=v,s[r++]+=y,s[r++]+=y,a=r+=2;break;case h:x[0]=s[r++],x[1]=s[r++],af(x,x,e),s[a++]=x[0],s[a++]=x[1],x[0]+=s[r++],x[1]+=s[r++],af(x,x,e),s[a++]=x[0],s[a++]=x[1]}for(o=0;o<i;o++){var x;(x=sf[o])[0]=s[r++],x[1]=s[r++],af(x,x,e),s[a++]=x[0],s[a++]=x[1]}}},hf=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"],df=Math.sqrt,ff=Math.sin,pf=Math.cos,gf=Math.PI,mf=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},vf=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(mf(t)*mf(e))},yf=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(vf(t,e))},xf={createFromString:function(t,e){return new rf(Wt(t,e))},extendFromString:function(t,e){return rf.extend(Wt(t,e))},mergePath:function(t,e){for(var n=[],i=t.length,r=0;r<i;r++){var a=t[r];a.path||a.createPathProxy(),a.__dirtyPath&&a.buildPath(a.path,a.shape,!0),n.push(a.path)}var o=new rf(e);return o.createPathProxy(),o.buildPath=function(t){t.appendPath(n);var e=t.getContext();e&&t.rebuildPath(e)},o}},_f=function(t){oh.call(this,t)};_f.prototype={constructor:_f,type:"text",brush:function(t,e){var n=this.style;this.__dirty&&nh.normalizeTextStyle(n,!0),n.fill=n.stroke=n.shadowBlur=n.shadowColor=n.shadowOffsetX=n.shadowOffsetY=null;var i=n.text;null!=i&&(i+=""),n.bind(t,this,e),nh.needDrawText(i,n)&&(this.setTransform(t),nh.renderText(this,t,i,n),this.restoreTransform(t))},getBoundingRect:function(){var t=this.style;if(this.__dirty&&nh.normalizeTextStyle(t,!0),!this._rect){var e=t.text;null!=e?e+="":e="";var n=Xc.getBoundingRect(t.text+"",t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.rich);if(n.x+=t.x||0,n.y+=t.y||0,nh.getStroke(t.textStroke,t.textStrokeWidth)){var i=t.textStrokeWidth;n.x-=i/2,n.y-=i/2,n.width+=i,n.height+=i}this._rect=n}return this._rect}},du.inherits(_f,oh);var bf=_f,wf=rf.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(t,e,n){n&&t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI,!0)}}),Sf=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]],Mf=function(t){return Jl.browser.ie&&Jl.browser.version>=11?function(){var e,n=this.__clipPaths,i=this.style;if(n)for(var r=0;r<n.length;r++){var a=n[r],o=a&&a.shape,s=a&&a.type;if(o&&("sector"===s&&o.startAngle===o.endAngle||"rect"===s&&(!o.width||!o.height))){for(l=0;l<Sf.length;l++)Sf[l][2]=i[Sf[l][0]],i[Sf[l][0]]=Sf[l][1];e=!0;break}}if(t.apply(this,arguments),e)for(var l=0;l<Sf.length;l++)i[Sf[l][0]]=Sf[l][2]}:t},Af=rf.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:Mf(rf.prototype.brush),buildPath:function(t,e){var n=e.cx,i=e.cy,r=Math.max(e.r0||0,0),a=Math.max(e.r,0),o=e.startAngle,s=e.endAngle,l=e.clockwise,u=Math.cos(o),c=Math.sin(o);t.moveTo(u*r+n,c*r+i),t.lineTo(u*a+n,c*a+i),t.arc(n,i,a,o,s,!l),t.lineTo(Math.cos(s)*r+n,Math.sin(s)*r+i),0!==r&&t.arc(n,i,r,s,o,l),t.closePath()}}),Cf=rf.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=2*Math.PI;t.moveTo(n+e.r,i),t.arc(n,i,e.r,0,r,!1),t.moveTo(n+e.r0,i),t.arc(n,i,e.r0,0,r,!0)}}),If=pu.distance,Pf=function(t,e){for(var n=t.length,i=[],r=0,a=1;a<n;a++)r+=If(t[a-1],t[a]);var o=r/2;for(o=o<n?n:o,a=0;a<o;a++){var s,l,u,c=a/(o-1)*(e?n:n-1),h=Math.floor(c),d=c-h,f=t[h%n];e?(s=t[(h-1+n)%n],l=t[(h+1)%n],u=t[(h+2)%n]):(s=t[0===h?h:h-1],l=t[h>n-2?n-1:h+1],u=t[h>n-3?n-1:h+2]);var p=d*d,g=d*p;i.push([Yt(s[0],f[0],l[0],u[0],d,p,g),Yt(s[1],f[1],l[1],u[1],d,p,g)])}return i},Tf=pu.min,Of=pu.max,kf=pu.scale,Df=pu.distance,Ef=pu.add,Lf=pu.clone,Nf=pu.sub,Rf=function(t,e,n,i){var r,a,o,s,l=[],u=[],c=[],h=[];if(i){o=[1/0,1/0],s=[-1/0,-1/0];for(var d=0,f=t.length;d<f;d++)Tf(o,o,t[d]),Of(s,s,t[d]);Tf(o,o,i[0]),Of(s,s,i[1])}for(d=0,f=t.length;d<f;d++){var p=t[d];if(n)r=t[d?d-1:f-1],a=t[(d+1)%f];else{if(0===d||d===f-1){l.push(Lf(t[d]));continue}r=t[d-1],a=t[d+1]}Nf(u,a,r),kf(u,u,e);var g=Df(p,r),m=Df(p,a),v=g+m;0!==v&&(g/=v,m/=v),kf(c,u,-g),kf(h,u,m);var y=Ef([],p,c),x=Ef([],p,h);i&&(Of(y,y,o),Tf(y,y,s),Of(x,x,o),Tf(x,x,s)),l.push(y),l.push(x)}return n&&l.push(l.shift()),l},Bf={buildPath:function(t,e,n){var i=e.points,r=e.smooth;if(i&&i.length>=2){if(r&&"spline"!==r){var a=Rf(i,r,n,e.smoothConstraint);t.moveTo(i[0][0],i[0][1]);for(var o=i.length,s=0;s<(n?o:o-1);s++){var l=a[2*s],u=a[2*s+1],c=i[(s+1)%o];t.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1])}}else{"spline"===r&&(i=Pf(i,n)),t.moveTo(i[0][0],i[0][1]);s=1;for(var h=i.length;s<h;s++)t.lineTo(i[s][0],i[s][1])}n&&t.closePath()}}},zf=rf.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(t,e){Bf.buildPath(t,e,!0)}}),Vf=rf.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(t,e){Bf.buildPath(t,e,!1)}}),Gf=rf.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.x,i=e.y,r=e.width,a=e.height;e.r?Uc.buildPath(t,e):t.rect(n,i,r,a),t.closePath()}}),Ff=rf.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.x1,i=e.y1,r=e.x2,a=e.y2,o=e.percent;0!==o&&(t.moveTo(n,i),o<1&&(r=n*(1-o)+r*o,a=i*(1-o)+a*o),t.lineTo(r,a))},pointAt:function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]}}),jf=cd.quadraticSubdivide,Hf=cd.cubicSubdivide,Wf=cd.quadraticAt,Yf=cd.cubicAt,Xf=cd.quadraticDerivativeAt,Uf=cd.cubicDerivativeAt,qf=[],Zf=rf.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.x1,i=e.y1,r=e.x2,a=e.y2,o=e.cpx1,s=e.cpy1,l=e.cpx2,u=e.cpy2,c=e.percent;0!==c&&(t.moveTo(n,i),null==l||null==u?(c<1&&(jf(n,o,r,c,qf),o=qf[1],r=qf[2],jf(i,s,a,c,qf),s=qf[1],a=qf[2]),t.quadraticCurveTo(o,s,r,a)):(c<1&&(Hf(n,o,l,r,c,qf),o=qf[1],l=qf[2],r=qf[3],Hf(i,s,u,a,c,qf),s=qf[1],u=qf[2],a=qf[3]),t.bezierCurveTo(o,s,l,u,r,a)))},pointAt:function(t){return Xt(this.shape,t,!1)},tangentAt:function(t){var e=Xt(this.shape,t,!0);return pu.normalize(e,e)}}),Kf=rf.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.cx,i=e.cy,r=Math.max(e.r,0),a=e.startAngle,o=e.endAngle,s=e.clockwise,l=Math.cos(a),u=Math.sin(a);t.moveTo(l*r+n,u*r+i),t.arc(n,i,r,a,o,!s)}}),$f=rf.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var t=this.__dirtyPath,e=this.shape.paths,n=0;n<e.length;n++)t=t||e[n].__dirtyPath;this.__dirtyPath=t,this.__dirty=this.__dirty||t},beforeBrush:function(){this._updatePathDirty();for(var t=this.shape.paths||[],e=this.getGlobalScale(),n=0;n<t.length;n++)t[n].path||t[n].createPathProxy(),t[n].path.setScale(e[0],e[1])},buildPath:function(t,e){for(var n=e.paths||[],i=0;i<n.length;i++)n[i].buildPath(t,n[i].shape,!0)},afterBrush:function(){for(var t=this.shape.paths||[],e=0;e<t.length;e++)t[e].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),rf.prototype.getBoundingRect.call(this)}}),Jf=function(t){this.colorStops=t||[]};Jf.prototype={constructor:Jf,addColorStop:function(t,e){this.colorStops.push({offset:t,color:e})}};var Qf=Jf,tp=function(t,e,n,i,r,a){this.x=null==t?0:t,this.y=null==e?0:e,this.x2=null==n?1:n,this.y2=null==i?0:i,this.type="linear",this.global=a||!1,Qf.call(this,r)};tp.prototype={constructor:tp},du.inherits(tp,Qf);var ep=tp,np=function(t,e,n,i,r){this.x=null==t?.5:t,this.y=null==e?.5:e,this.r=null==n?.5:n,this.type="radial",this.global=r||!1,Qf.call(this,i)};np.prototype={constructor:np},du.inherits(np,Qf);var ip=np,rp=du.inherits;Ut.prototype.incremental=!0,Ut.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},Ut.prototype.addDisplayable=function(t,e){e?this._temporaryDisplayables.push(t):this._displayables.push(t),this.dirty()},Ut.prototype.addDisplayables=function(t,e){e=e||!1;for(var n=0;n<t.length;n++)this.addDisplayable(t[n],e)},Ut.prototype.eachPendingDisplayable=function(t){for(e=this._cursor;e<this._displayables.length;e++)t&&t(this._displayables[e]);for(var e=0;e<this._temporaryDisplayables.length;e++)t&&t(this._temporaryDisplayables[e])},Ut.prototype.update=function(){for(this.updateTransform(),t=this._cursor;t<this._displayables.length;t++)(e=this._displayables[t]).parent=this,e.update(),e.parent=null;for(var t=0;t<this._temporaryDisplayables.length;t++){var e=this._temporaryDisplayables[t];e.parent=this,e.update(),e.parent=null}},Ut.prototype.brush=function(t,e){for(n=this._cursor;n<this._displayables.length;n++)(i=this._displayables[n]).beforeBrush&&i.beforeBrush(t),i.brush(t,n===this._cursor?null:this._displayables[n-1]),i.afterBrush&&i.afterBrush(t);this._cursor=n;for(var n=0;n<this._temporaryDisplayables.length;n++){var i=this._temporaryDisplayables[n];i.beforeBrush&&i.beforeBrush(t),i.brush(t,0===n?null:this._temporaryDisplayables[n-1]),i.afterBrush&&i.afterBrush(t)}this._temporaryDisplayables=[],this.notClear=!0};var ap=[];Ut.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new hc(1/0,1/0,-1/0,-1/0),e=0;e<this._displayables.length;e++){var n=this._displayables[e],i=n.getBoundingRect().clone();n.needLocalTransform()&&i.applyTransform(n.getLocalTransform(ap)),t.union(i)}this._rect=t}return this._rect},Ut.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e);if(this.getBoundingRect().contain(n[0],n[1]))for(var i=0;i<this._displayables.length;i++)if(this._displayables[i].contain(t,e))return!0;return!1},rp(Ut,oh);var op=Ut,sp=sh,lp=fc,up=bf,cp=wf,hp=Af,dp=Cf,fp=zf,pp=Vf,gp=Gf,mp=Ff,vp=Zf,yp=Kf,xp=$f,_p=ep,bp=ip,wp=hc,Sp=op,Mp=Math.round,Ap=Math.max,Cp=Math.min,Ip={},Pp={Image:sp,Group:lp,Text:up,Circle:cp,Sector:hp,Ring:dp,Polygon:fp,Polyline:pp,Rect:gp,Line:mp,BezierCurve:vp,Arc:yp,CompoundPath:xp,LinearGradient:_p,RadialGradient:bp,BoundingRect:wp,IncrementalDisplayable:Sp,extendShape:function(t){return rf.extend(t)},extendPath:function(t,e){return xf.extendFromString(t,e)},makePath:qt,makeImage:function(t,e,n){var i=new sh({style:{image:t,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(t){if("center"===n){var r={width:t.width,height:t.height};i.setStyle(Zt(e,r))}}});return i},mergePath:xf.mergePath,resizePath:Kt,subPixelOptimizeLine:function(t){var e=t.shape,n=t.style.lineWidth;return Mp(2*e.x1)===Mp(2*e.x2)&&(e.x1=e.x2=$t(e.x1,n,!0)),Mp(2*e.y1)===Mp(2*e.y2)&&(e.y1=e.y2=$t(e.y1,n,!0)),t},subPixelOptimizeRect:function(t){var e=t.shape,n=t.style.lineWidth,i=e.x,r=e.y,a=e.width,o=e.height;return e.x=$t(e.x,n,!0),e.y=$t(e.y,n,!0),e.width=Math.max($t(i+a,n,!1)-e.x,0===a?0:1),e.height=Math.max($t(r+o,n,!1)-e.y,0===o?0:1),t},subPixelOptimize:$t,setHoverStyle:function(t,e,n){t.__hoverSilentOnTouch=n&&n.hoverSilentOnTouch,"group"===t.type?t.traverse(function(t){"group"!==t.type&&ae(t,e)}):ae(t,e),t.on("mouseover",function(t){this.__hoverSilentOnTouch&&t.zrByTouch||!this.__isEmphasis&&ie(this)}).on("mouseout",function(t){this.__hoverSilentOnTouch&&t.zrByTouch||!this.__isEmphasis&&re(this)}),t.on("emphasis",function(){this.__isEmphasis=!0,ie(this)}).on("normal",function(){this.__isEmphasis=!1,re(this)})},setLabelStyle:function(t,e,n,i,r,a,o){var s,l=(r=r||Ip).labelFetcher,u=r.labelDataIndex,c=r.labelDimIndex,h=n.getShallow("show"),d=i.getShallow("show");(h||d)&&(l&&(s=l.getFormattedLabel(u,"normal",null,c)),null==s&&(s=du.isFunction(r.defaultText)?r.defaultText(u,r):r.defaultText));var f=h?s:null,p=d?du.retrieve2(l?l.getFormattedLabel(u,"emphasis",null,c):null,s):null;null==f&&null==p||(oe(t,n,a,r),oe(e,i,o,r,!0)),t.text=f,e.text=p},setTextStyle:oe,setText:function(t,e,n){var i,r={isRectText:!0};!1===n?i=!0:r.autoColor=n,se(t,e,r,i),t.host&&t.host.dirty&&t.host.dirty(!1)},getFont:function(t,e){var n=e||e.getModel("textStyle");return du.trim([t.fontStyle||n&&n.getShallow("fontStyle")||"",t.fontWeight||n&&n.getShallow("fontWeight")||"",(t.fontSize||n&&n.getShallow("fontSize")||12)+"px",t.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))},updateProps:de,initProps:function(t,e,n,i,r){he(!1,t,e,n,i,r)},getTransform:function(t,e){for(var n=Mu.identity([]);t&&t!==e;)Mu.mul(n,t.getLocalTransform(),n),t=t.parent;return n},applyTransform:fe,transformDirection:function(t,e,n){var i=0===e[4]||0===e[5]||0===e[0]?1:Math.abs(2*e[4]/e[0]),r=0===e[4]||0===e[5]||0===e[2]?1:Math.abs(2*e[4]/e[2]),a=["left"===t?-i:"right"===t?i:0,"top"===t?-r:"bottom"===t?r:0];return a=fe(a,e,n),Math.abs(a[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"},groupTransition:function(t,e,n,i){function r(t){var e={position:pu.clone(t.position),rotation:t.rotation};return t.shape&&(e.shape=du.extend({},t.shape)),e}if(t&&e){var a=function(e){var n={};return t.traverse(function(t){!t.isGroup&&t.anid&&(n[t.anid]=t)}),n}();e.traverse(function(t){if(!t.isGroup&&t.anid){var e=a[t.anid];if(e){var i=r(t);t.attr(r(e)),de(t,i,n,t.dataIndex)}}})}},clipPointsByRect:function(t,e){return du.map(t,function(t){var n=t[0];n=Ap(n,e.x),n=Cp(n,e.x+e.width);var i=t[1];return i=Ap(i,e.y),i=Cp(i,e.y+e.height),[n,i]})},clipRectByRect:function(t,e){var n=Ap(t.x,e.x),i=Cp(t.x+t.width,e.x+e.width),r=Ap(t.y,e.y),a=Cp(t.y+t.height,e.y+e.height);if(i>=n&&a>=r)return{x:n,y:r,width:i-n,height:a-r}},createIcon:function(t,e,n){var i=(e=du.extend({rectHover:!0},e)).style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},t)return 0===t.indexOf("image://")?(i.image=t.slice(8),du.defaults(i,n),new sh(e)):qt(t.replace("path://",""),e,n,"center")}},Tp=["textStyle","color"],Op={getTextColor:function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(Tp):null)},getFont:function(){return Pp.getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(t){return Xc.getBoundingRect(t,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("rich"),this.getShallow("truncateText"))}},kp=qh([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),Dp={getItemStyle:function(t,e){var n=kp(this,t,e),i=this.getBorderLineDash();return i&&(n.lineDash=i),n},getBorderLineDash:function(){var t=this.get("borderType");return"solid"===t||null==t?null:"dashed"===t?[5,5]:[1,1]}},Ep=Hh.makeInner,Lp=Uh.enableClassExtend,Np=Uh.enableClassCheck,Rp=du.mixin,Bp=Ep();pe.prototype={constructor:pe,init:null,mergeOption:function(t){du.merge(this.option,t,!0)},get:function(t,e){return null==t?this.option:ge(this.option,this.parsePath(t),!e&&me(this,t))},getShallow:function(t,e){var n=this.option,i=null==n?n:n[t],r=!e&&me(this,t);return null==i&&r&&(i=r.getShallow(t)),i},getModel:function(t,e){var n,i=null==t?this.option:ge(this.option,t=this.parsePath(t));return e=e||(n=me(this,t))&&n.getModel(t),new pe(i,e,this.ecModel)},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){return new(0,this.constructor)(du.clone(this.option))},setReadOnly:function(t){},parsePath:function(t){return"string"==typeof t&&(t=t.split(".")),t},customizeGetParent:function(t){Bp(this).getParent=t},isAnimationEnabled:function(){if(!Jl.node){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}},Lp(pe),Np(pe),Rp(pe,Kh),Rp(pe,Jh),Rp(pe,Op),Rp(pe,Dp);var zp=pe,Vp=Uh.parseClassType,Gp=0,Fp={getUID:function(t){return[t||"",Gp++,Math.random().toFixed(5)].join("_")},enableSubTypeDefaulter:function(t){var e={};return t.registerSubTypeDefaulter=function(t,n){t=Vp(t),e[t.main]=n},t.determineSubType=function(n,i){var r=i.type;if(!r){var a=Vp(n).main;t.hasSubTypes(n)&&e[a]&&(r=e[a](i))}return r},t},enableTopologicalTravel:function(t,e){function n(t,e){return t[e]||(t[e]={predecessor:[],successor:[]}),t[e]}t.topologicalTravel=function(t,i,r,a){function o(t){l[t].entryCount--,0===l[t].entryCount&&u.push(t)}if(t.length){var s=function(t){var i={},r=[];return du.each(t,function(a){var o=n(i,a),s=function(t,e){var n=[];return du.each(t,function(t){du.indexOf(e,t)>=0&&n.push(t)}),n}(o.originalDeps=e(a),t);o.entryCount=s.length,0===o.entryCount&&r.push(a),du.each(s,function(t){du.indexOf(o.predecessor,t)<0&&o.predecessor.push(t);var e=n(i,t);du.indexOf(e.successor,t)<0&&e.successor.push(a)})}),{graph:i,noEntryList:r}}(i),l=s.graph,u=s.noEntryList,c={};for(du.each(t,function(t){c[t]=!0});u.length;){var h=u.pop(),d=l[h],f=!!c[h];f&&(r.call(a,h,d.originalDeps.slice()),delete c[h]),du.each(d.successor,f?function(t){c[t]=!0,o(t)}:o)}du.each(c,function(){throw new Error("Circle dependency may exists")})}}}},jp=1e-4,Hp=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/,Wp={linearMap:function(t,e,n,i){var r=e[1]-e[0],a=n[1]-n[0];if(0===r)return 0===a?n[0]:(n[0]+n[1])/2;if(i)if(r>0){if(t<=e[0])return n[0];if(t>=e[1])return n[1]}else{if(t>=e[0])return n[0];if(t<=e[1])return n[1]}else{if(t===e[0])return n[0];if(t===e[1])return n[1]}return(t-e[0])/r*a+n[0]},parsePercent:function(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%"}return"string"==typeof t?t.replace(/^\s+/,"").replace(/\s+$/,"").match(/%$/)?parseFloat(t)/100*e:parseFloat(t):null==t?NaN:+t},round:function(t,e,n){return null==e&&(e=10),e=Math.min(Math.max(0,e),20),t=(+t).toFixed(e),n?t:+t},asc:function(t){return t.sort(function(t,e){return t-e}),t},getPrecision:function(t){if(t=+t,isNaN(t))return 0;for(var e=1,n=0;Math.round(t*e)/e!==t;)e*=10,n++;return n},getPrecisionSafe:function(t){var e=t.toString(),n=e.indexOf("e");if(n>0){var i=+e.slice(n+1);return i<0?-i:0}var r=e.indexOf(".");return r<0?0:e.length-1-r},getPixelPrecision:function(t,e){var n=Math.log,i=Math.LN10,r=Math.floor(n(t[1]-t[0])/i),a=Math.round(n(Math.abs(e[1]-e[0]))/i),o=Math.min(Math.max(-r+a,0),20);return isFinite(o)?o:20},getPercentWithPrecision:function(t,e,n){if(!t[e])return 0;var i=du.reduce(t,function(t,e){return t+(isNaN(e)?0:e)},0);if(0===i)return 0;for(var r=Math.pow(10,n),a=du.map(t,function(t){return(isNaN(t)?0:t)/i*r*100}),o=100*r,s=du.map(a,function(t){return Math.floor(t)}),l=du.reduce(s,function(t,e){return t+e},0),u=du.map(a,function(t,e){return t-s[e]});l<o;){for(var c=Number.NEGATIVE_INFINITY,h=null,d=0,f=u.length;d<f;++d)u[d]>c&&(c=u[d],h=d);++s[h],u[h]=0,++l}return s[e]/r},MAX_SAFE_INTEGER:9007199254740991,remRadian:function(t){var e=2*Math.PI;return(t%e+e)%e},isRadianAroundZero:function(t){return t>-jp&&t<jp},parseDate:function(t){if(t instanceof Date)return t;if("string"==typeof t){var e=Hp.exec(t);if(!e)return new Date(NaN);if(e[8]){var n=+e[4]||0;return"Z"!==e[8].toUpperCase()&&(n-=e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,n,+(e[5]||0),+e[6]||0,+e[7]||0))}return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,+e[7]||0)}return null==t?new Date(NaN):new Date(Math.round(t))},quantity:function(t){return Math.pow(10,ve(t))},nice:function(t,e){var n,i=ve(t),r=Math.pow(10,i),a=t/r;return n=e?a<1.5?1:a<2.5?2:a<4?3:a<7?5:10:a<1?1:a<2?2:a<3?3:a<5?5:10,t=n*r,i>=-20?+t.toFixed(i<0?-i:0):t},reformIntervals:function(t){function e(t,n,i){return t.interval[i]<n.interval[i]||t.interval[i]===n.interval[i]&&(t.close[i]-n.close[i]==(i?-1:1)||!i&&e(t,n,1))}t.sort(function(t,n){return e(t,n,0)?-1:1});for(var n=-1/0,i=1,r=0;r<t.length;){for(var a=t[r].interval,o=t[r].close,s=0;s<2;s++)a[s]<=n&&(a[s]=n,o[s]=s?1:1-i),n=a[s],i=o[s];a[0]===a[1]&&o[0]*o[1]!=1?t.splice(r,1):r++}return t},isNumeric:function(t){return t-parseFloat(t)>=0}},Yp=/([&<>"'])/g,Xp={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Up=["a","b","c","d","e","f","g"],qp=function(t,e){return"{"+t+(null==e?"":e)+"}"},Zp={addCommas:function(t){return isNaN(t)?"-":(t=(t+"").split("."))[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")},toCamelCase:function(t,e){return t=(t||"").toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()}),e&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t},normalizeCssArray:du.normalizeCssArray,encodeHTML:ye,formatTpl:function(t,e,n){du.isArray(e)||(e=[e]);var i=e.length;if(!i)return"";for(var r=e[0].$vars||[],a=0;a<r.length;a++){var o=Up[a];t=t.replace(qp(o),qp(o,0))}for(var s=0;s<i;s++)for(var l=0;l<r.length;l++){var u=e[s][r[l]];t=t.replace(qp(Up[l],s),n?ye(u):u)}return t},formatTplSimple:function(t,e,n){return du.each(e,function(e,i){t=t.replace("{"+i+"}",n?ye(e):e)}),t},getTooltipMarker:function(t,e){var n=(t=du.isString(t)?{color:t,extraCssText:e}:t||{}).color,i=t.type;e=t.extraCssText;return n?"subItem"===i?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+ye(n)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+ye(n)+";"+(e||"")+'"></span>':""},formatTime:function(t,e,n){"week"!==t&&"month"!==t&&"quarter"!==t&&"half-year"!==t&&"year"!==t||(t="MM-dd\nyyyy");var i=Wp.parseDate(e),r=n?"UTC":"",a=i["get"+r+"FullYear"](),o=i["get"+r+"Month"]()+1,s=i["get"+r+"Date"](),l=i["get"+r+"Hours"](),u=i["get"+r+"Minutes"](),c=i["get"+r+"Seconds"](),h=i["get"+r+"Milliseconds"]();return t.replace("MM",xe(o,2)).replace("M",o).replace("yyyy",a).replace("yy",a%100).replace("dd",xe(s,2)).replace("d",s).replace("hh",xe(l,2)).replace("h",l).replace("mm",xe(u,2)).replace("m",u).replace("ss",xe(c,2)).replace("s",c).replace("SSS",xe(h,3))},capitalFirst:function(t){return t?t.charAt(0).toUpperCase()+t.substr(1):t},truncateText:Xc.truncateText,getTextRect:Xc.getBoundingRect},Kp=Wp.parsePercent,$p=du.each,Jp=["left","right","top","bottom","width","height"],Qp=[["width","left","right"],["height","top","bottom"]],tg=_e,eg=du.curry(_e,"vertical"),ng=du.curry(_e,"horizontal"),ig={LOCATION_PARAMS:Jp,HV_NAMES:Qp,box:tg,vbox:eg,hbox:ng,getAvailableSize:function(t,e,n){var i=e.width,r=e.height,a=Kp(t.x,i),o=Kp(t.y,r),s=Kp(t.x2,i),l=Kp(t.y2,r);return(isNaN(a)||isNaN(parseFloat(t.x)))&&(a=0),(isNaN(s)||isNaN(parseFloat(t.x2)))&&(s=i),(isNaN(o)||isNaN(parseFloat(t.y)))&&(o=0),(isNaN(l)||isNaN(parseFloat(t.y2)))&&(l=r),n=Zp.normalizeCssArray(n||0),{width:Math.max(s-a-n[1]-n[3],0),height:Math.max(l-o-n[0]-n[2],0)}},getLayoutRect:be,positionElement:function(t,e,n,i,r){var a=!r||!r.hv||r.hv[0],o=!r||!r.hv||r.hv[1],s=r&&r.boundingMode||"all";if(a||o){var l;if("raw"===s)l="group"===t.type?new hc(0,0,+e.width||0,+e.height||0):t.getBoundingRect();else if(l=t.getBoundingRect(),t.needLocalTransform()){var u=t.getLocalTransform();(l=l.clone()).applyTransform(u)}e=be(du.defaults({width:l.width,height:l.height},e),n,i);var c=t.position,h=a?e.x-l.x:0,d=o?e.y-l.y:0;t.attr("position","raw"===s?[h,d]:[c[0]+h,c[1]+d])}},sizeCalculable:function(t,e){return null!=t[Qp[e][0]]||null!=t[Qp[e][1]]&&null!=t[Qp[e][2]]},mergeLayoutParam:function(t,e,n){function i(n,i){var o={},l=0,u={},c=0;if($p(n,function(e){u[e]=t[e]}),$p(n,function(t){r(e,t)&&(o[t]=u[t]=e[t]),a(o,t)&&l++,a(u,t)&&c++}),s[i])return a(e,n[1])?u[n[2]]=null:a(e,n[2])&&(u[n[1]]=null),u;if(2!==c&&l){if(l>=2)return o;for(var h=0;h<n.length;h++){var d=n[h];if(!r(o,d)&&r(t,d)){o[d]=t[d];break}}return o}return u}function r(t,e){return t.hasOwnProperty(e)}function a(t,e){return null!=t[e]&&"auto"!==t[e]}function o(t,e,n){$p(t,function(t){e[t]=n[t]})}!du.isObject(n)&&(n={});var s=n.ignoreSize;!du.isArray(s)&&(s=[s,s]);var l=i(Qp[0],0),u=i(Qp[1],1);o(Qp[0],t,l),o(Qp[1],t,u)},getLayoutParams:function(t){return we({},t)},copyLayoutParams:we},rg={getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}},ag=Uh.enableClassManagement,og=Uh.parseClassType,sg=(0,Hh.makeInner)(),lg=zp.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(t,e,n,i){zp.call(this,t,e,n,i),this.uid=Fp.getUID("ec_cpt_model")},init:function(t,e,n,i){this.mergeDefaultAndTheme(t,n)},mergeDefaultAndTheme:function(t,e){var n=this.layoutMode,i=n?ig.getLayoutParams(t):{},r=e.getTheme();du.merge(t,r.get(this.mainType)),du.merge(t,this.getDefaultOption()),n&&ig.mergeLayoutParam(t,i,n)},mergeOption:function(t,e){du.merge(this.option,t,!0);var n=this.layoutMode;n&&ig.mergeLayoutParam(this.option,t,n)},optionUpdated:function(t,e){},getDefaultOption:function(){var t=sg(this);if(!t.defaultOption){for(var e=[],n=this.constructor;n;){var i=n.prototype.defaultOption;i&&e.push(i),n=n.superClass}for(var r={},a=e.length-1;a>=0;a--)r=du.merge(r,e[a],!0);t.defaultOption=r}return t.defaultOption},getReferringComponents:function(t){return this.ecModel.queryComponents({mainType:t,index:this.get(t+"Index",!0),id:this.get(t+"Id",!0)})}});ag(lg,{registerWhenExtend:!0}),Fp.enableSubTypeDefaulter(lg),Fp.enableTopologicalTravel(lg,function(t){var e=[];return du.each(lg.getClassesByMainType(t),function(t){e=e.concat(t.prototype.dependencies||[])}),e=du.map(e,function(t){return og(t).main}),"dataset"!==t&&du.indexOf(e,"dataset")<=0&&e.unshift("dataset"),e}),du.mixin(lg,rg);var ug=lg,cg="";"undefined"!=typeof navigator&&(cg=navigator.platform||"");var hg={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:cg.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},dg=Hh.makeInner,fg=Hh.normalizeToArray,pg=dg(),gg={clearColorPalette:function(){pg(this).colorIdx=0,pg(this).colorNameMap={}},getColorFromPalette:function(t,e,n){var i=pg(e=e||this),r=i.colorIdx||0,a=i.colorNameMap=i.colorNameMap||{};if(a.hasOwnProperty(t))return a[t];var o=fg(this.get("color",!0)),s=this.get("colorLayer",!0),l=null!=n&&s?function(t,e){for(var n=t.length,i=0;i<n;i++)if(t[i].length>e)return t[i];return t[n-1]}(s,n):o;if((l=l||o)&&l.length){var u=l[r];return t&&(a[t]=u),i.colorIdx=(r+1)%l.length,u}}},mg=du.createHashMap,vg=(du.retrieve,du.each),yg={cartesian2d:function(t,e,n,i){var r=t.getReferringComponents("xAxis")[0],a=t.getReferringComponents("yAxis")[0];e.coordSysDims=["x","y"],n.set("x",r),n.set("y",a),Se(r)&&(i.set("x",r),e.firstCategoryDimIndex=0),Se(a)&&(i.set("y",a),e.firstCategoryDimIndex=1)},singleAxis:function(t,e,n,i){var r=t.getReferringComponents("singleAxis")[0];e.coordSysDims=["single"],n.set("single",r),Se(r)&&(i.set("single",r),e.firstCategoryDimIndex=0)},polar:function(t,e,n,i){var r=t.getReferringComponents("polar")[0],a=r.findAxisModel("radiusAxis"),o=r.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],n.set("radius",a),n.set("angle",o),Se(a)&&(i.set("radius",a),e.firstCategoryDimIndex=0),Se(o)&&(i.set("angle",o),e.firstCategoryDimIndex=1)},geo:function(t,e,n,i){e.coordSysDims=["lng","lat"]},parallel:function(t,e,n,i){var r=t.ecModel,a=r.getComponent("parallel",t.get("parallelIndex")),o=e.coordSysDims=a.dimensions.slice();vg(a.parallelAxisIndex,function(t,a){var s=r.getComponent("parallelAxis",t),l=o[a];n.set(l,s),Se(s)&&null==e.firstCategoryDimIndex&&(i.set(l,s),e.firstCategoryDimIndex=a)})}},xg={getCoordSysDefineBySeries:function(t){var e=t.get("coordinateSystem"),n={coordSysName:e,coordSysDims:[],axisMap:mg(),categoryAxisMap:mg()},i=yg[e];if(i)return i(t,n,n.axisMap,n.categoryAxisMap),n}},_g={SOURCE_FORMAT_ORIGINAL:"original",SOURCE_FORMAT_ARRAY_ROWS:"arrayRows",SOURCE_FORMAT_OBJECT_ROWS:"objectRows",SOURCE_FORMAT_KEYED_COLUMNS:"keyedColumns",SOURCE_FORMAT_UNKNOWN:"unknown",SOURCE_FORMAT_TYPED_ARRAY:"typedArray",SERIES_LAYOUT_BY_COLUMN:"column",SERIES_LAYOUT_BY_ROW:"row"},bg=du.createHashMap,wg=du.isTypedArray,Sg=Uh.enableClassCheck,Mg=_g.SOURCE_FORMAT_ORIGINAL,Ag=_g.SERIES_LAYOUT_BY_COLUMN,Cg=_g.SOURCE_FORMAT_UNKNOWN,Ig=_g.SOURCE_FORMAT_TYPED_ARRAY,Pg=_g.SOURCE_FORMAT_KEYED_COLUMNS;Me.seriesDataToSource=function(t){return new Me({data:t,sourceFormat:wg(t)?Ig:Mg,fromDataset:!1})},Sg(Me);var Tg=Me,Og=Hh.makeInner,kg=Hh.getDataItemValue,Dg=xg.getCoordSysDefineBySeries,Eg=du.createHashMap,Lg=du.each,Ng=du.map,Rg=du.isArray,Bg=du.isString,zg=du.isObject,Vg=du.isTypedArray,Gg=du.isArrayLike,Fg=du.extend,jg=(du.assert,_g.SOURCE_FORMAT_ORIGINAL),Hg=_g.SOURCE_FORMAT_ARRAY_ROWS,Wg=_g.SOURCE_FORMAT_OBJECT_ROWS,Yg=_g.SOURCE_FORMAT_KEYED_COLUMNS,Xg=_g.SOURCE_FORMAT_UNKNOWN,Ug=_g.SOURCE_FORMAT_TYPED_ARRAY,qg=_g.SERIES_LAYOUT_BY_ROW,Zg=Og(),Kg={detectSourceFormat:function(t){var e=t.option.source,n=Xg;if(Vg(e))n=Ug;else if(Rg(e))for(var i=0,r=e.length;i<r;i++){var a=e[i];if(null!=a){if(Rg(a)){n=Hg;break}if(zg(a)){n=Wg;break}}}else if(zg(e)){for(var o in e)if(e.hasOwnProperty(o)&&Gg(e[o])){n=Yg;break}}else if(null!=e)throw new Error("Invalid data");Zg(t).sourceFormat=n},getSource:function(t){return Zg(t).source},resetSourceDefaulter:function(t){Zg(t).datasetMap=Eg()},prepareSource:function(t){var e=t.option,n=e.data,i=Vg(n)?Ug:jg,r=!1,a=e.seriesLayoutBy,o=e.sourceHeader,s=e.dimensions,l=function(t){var e=t.option;if(!e.data)return t.ecModel.getComponent("dataset",e.datasetIndex||0)}(t);if(l){var u=l.option;n=u.source,i=Zg(l).sourceFormat,r=!0,a=a||u.seriesLayoutBy,null==o&&(o=u.sourceHeader),s=s||u.dimensions}var c=function(t,e,n,i,r){if(!t)return{dimensionsDefine:Ae(r)};var a,o,s,l;if(e===Hg)"auto"===i||null==i?Ce(function(t){null!=t&&"-"!==t&&(Bg(t)?null==o&&(o=1):o=0)},n,t,10):o=i?1:0,r||1!==o||(r=[],Ce(function(t,e){r[e]=null!=t?t:""},n,t)),a=r?r.length:n===qg?t.length:t[0]?t[0].length:null;else if(e===Wg)r||(r=function(t){for(var e,n=0;n<t.length&&!(e=t[n++]););if(e){var i=[];return Lg(e,function(t,e){i.push(e)}),i}}(t),s=!0);else if(e===Yg)r||(r=[],s=!0,Lg(t,function(t,e){r.push(e)}));else if(e===jg){var u=kg(t[0]);a=Rg(u)&&u.length||1}return s&&Lg(r,function(t,e){"name"===(zg(t)?t.name:t)&&(l=e)}),{startIndex:o,dimensionsDefine:Ae(r),dimensionsDetectCount:a,potentialNameDimIndex:l}}(n,i,a,o,s),h=e.encode;!h&&l&&(h=function(t,e,n,i,r,a){var o=Dg(t),s={},l=[],u=[],c=t.subType,h=Eg(["pie","map","funnel"]),d=Eg(["line","bar","pictorialBar","scatter","effectScatter","candlestick","boxplot"]);if(o&&null!=d.get(c)){var f=t.ecModel,p=Zg(f).datasetMap,g=e.uid+"_"+r,m=p.get(g)||p.set(g,{categoryWayDim:1,valueWayDim:0});Lg(o.coordSysDims,function(t){if(null==o.firstCategoryDimIndex)e=m.valueWayDim++,s[t]=e,u.push(e);else if(o.categoryAxisMap.get(t))s[t]=0,l.push(0);else{var e=m.categoryWayDim++;s[t]=e,u.push(e)}})}else if(null!=h.get(c)){for(var v,y=0;y<5&&null==v;y++)Ie(n,i,r,a.dimensionsDefine,a.startIndex,y)||(v=y);if(null!=v){s.value=v;var x=a.potentialNameDimIndex||Math.max(v-1,0);u.push(x),l.push(x)}}return l.length&&(s.itemName=l),u.length&&(s.seriesName=u),s}(t,l,n,i,a,c)),Zg(t).source=new Tg({data:n,fromDataset:r,seriesLayoutBy:a,sourceFormat:i,dimensionsDefine:c.dimensionsDefine,startIndex:c.startIndex,dimensionsDetectCount:c.dimensionsDetectCount,encodeDefine:h})},guessOrdinal:function(t,e){return Ie(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,e)}},$g=du.each,Jg=du.filter,Qg=du.map,tm=du.isArray,em=du.indexOf,nm=du.isObject,im=du.isString,rm=du.createHashMap,am=du.assert,om=du.clone,sm=du.merge,lm=du.extend,um=du.mixin,cm=Kg.resetSourceDefaulter,hm="\0_ec_inner",dm=zp.extend({init:function(t,e,n,i){n=n||{},this.option=null,this._theme=new zp(n),this._optionManager=i},setOption:function(t,e){am(!(hm in t),"please use chart.getOption()"),this._optionManager.setOption(t,e),this.resetOption(null)},resetOption:function(t){var e=!1,n=this._optionManager;if(!t||"recreate"===t){var i=n.mountOption("recreate"===t);this.option&&"recreate"!==t?(this.restoreData(),this.mergeOption(i)):function(t){t=t,this.option={},this.option[hm]=1,this._componentsMap=rm({series:[]}),this._seriesIndices,this._seriesIndicesMap,function(t,e){var n=t.color&&!t.colorLayer;$g(e,function(e,i){"colorLayer"===i&&n||ug.hasClass(i)||("object"==typeof e?t[i]=t[i]?sm(t[i],e,!1):om(e):null==t[i]&&(t[i]=e))})}(t,this._theme.option),sm(t,hg,!1),this.mergeOption(t)}.call(this,i),e=!0}if("timeline"!==t&&"media"!==t||this.restoreData(),!t||"recreate"===t||"timeline"===t){var r=n.getTimelineOption(this);r&&(this.mergeOption(r),e=!0)}if(!t||"recreate"===t||"media"===t){var a=n.getMediaOption(this,this._api);a.length&&$g(a,function(t){this.mergeOption(t,e=!0)},this)}return e},mergeOption:function(t){var e=this.option,n=this._componentsMap,i=[];cm(this),$g(t,function(t,n){null!=t&&(ug.hasClass(n)?n&&i.push(n):e[n]=null==e[n]?om(t):sm(e[n],t,!0))}),ug.topologicalTravel(i,ug.getAllClassMainTypes(),function(i,r){var a=Hh.normalizeToArray(t[i]),o=Hh.mappingToExists(n.get(i),a);Hh.makeIdAndName(o),$g(o,function(t,e){var n=t.option;nm(n)&&(t.keyInfo.mainType=i,t.keyInfo.subType=function(t,e,n){return e.type?e.type:n?n.subType:ug.determineSubType(t,e)}(i,n,t.exist))});var s=function(t,e){tm(e)||(e=e?[e]:[]);var n={};return $g(e,function(e){n[e]=(t.get(e)||[]).slice()}),n}(n,r);e[i]=[],n.set(i,[]),$g(o,function(t,r){var a=t.exist,o=t.option;if(am(nm(o)||a,"Empty component definition"),o){var l=ug.getClass(i,t.keyInfo.subType,!0);if(a&&a instanceof l)a.name=t.keyInfo.name,a.mergeOption(o,this),a.optionUpdated(o,!1);else{var u=lm({dependentModels:s,componentIndex:r},t.keyInfo);a=new l(o,this,this,u),lm(a,u),a.init(o,this,this,u),a.optionUpdated(null,!0)}}else a.mergeOption({},this),a.optionUpdated({},!1);n.get(i)[r]=a,e[i][r]=a.option},this),"series"===i&&Pe(this,n.get("series"))},this),this._seriesIndicesMap=rm(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var t=om(this.option);return $g(t,function(e,n){if(ug.hasClass(n)){for(var i=(e=Hh.normalizeToArray(e)).length-1;i>=0;i--)Hh.isIdInner(e[i])&&e.splice(i,1);t[n]=e}}),delete t[hm],t},getTheme:function(){return this._theme},getComponent:function(t,e){var n=this._componentsMap.get(t);if(n)return n[e||0]},queryComponents:function(t){var e=t.mainType;if(!e)return[];var n,i=t.index,r=t.id,a=t.name,o=this._componentsMap.get(e);if(!o||!o.length)return[];if(null!=i)tm(i)||(i=[i]),n=Jg(Qg(i,function(t){return o[t]}),function(t){return!!t});else if(null!=r){var s=tm(r);n=Jg(o,function(t){return s&&em(r,t.id)>=0||!s&&t.id===r})}else if(null!=a){var l=tm(a);n=Jg(o,function(t){return l&&em(a,t.name)>=0||!l&&t.name===a})}else n=o.slice();return Te(n,t)},findComponents:function(t){var e=t.query,n=t.mainType,i=function(t){var e=n+"Index",i=n+"Id",r=n+"Name";return!t||null==t[e]&&null==t[i]&&null==t[r]?null:{mainType:n,index:t[e],id:t[i],name:t[r]}}(e);return function(e){return t.filter?Jg(e,t.filter):e}(Te(i?this.queryComponents(i):this._componentsMap.get(n),t))},eachComponent:function(t,e,n){var i=this._componentsMap;if("function"==typeof t)n=e,e=t,i.each(function(t,i){$g(t,function(t,r){e.call(n,i,t,r)})});else if(im(t))$g(i.get(t),e,n);else if(nm(t)){var r=this.findComponents(t);$g(r,e,n)}},getSeriesByName:function(t){var e=this._componentsMap.get("series");return Jg(e,function(e){return e.name===t})},getSeriesByIndex:function(t){return this._componentsMap.get("series")[t]},getSeriesByType:function(t){var e=this._componentsMap.get("series");return Jg(e,function(e){return e.subType===t})},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(t,e){Oe(),$g(this._seriesIndices,function(n){var i=this._componentsMap.get("series")[n];t.call(e,i,n)},this)},eachRawSeries:function(t,e){$g(this._componentsMap.get("series"),t,e)},eachSeriesByType:function(t,e,n){Oe(),$g(this._seriesIndices,function(i){var r=this._componentsMap.get("series")[i];r.subType===t&&e.call(n,r,i)},this)},eachRawSeriesByType:function(t,e,n){return $g(this.getSeriesByType(t),e,n)},isSeriesFiltered:function(t){return Oe(),null==this._seriesIndicesMap.get(t.componentIndex)},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(t,e){Oe(),Pe(this,Jg(this._componentsMap.get("series"),t,e))},restoreData:function(t){var e=this._componentsMap;Pe(this,e.get("series"));var n=[];e.each(function(t,e){n.push(e)}),ug.topologicalTravel(n,ug.getAllClassMainTypes(),function(n,i){$g(e.get(n),function(e){("series"!==n||!function(t,e){if(e){var n=e.seiresIndex,i=e.seriesId,r=e.seriesName;return null!=n&&t.componentIndex!==n||null!=i&&t.id!==i||null!=r&&t.name!==r}}(e,t))&&e.restoreData()})})}});um(dm,gg);var fm=dm,pm=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"],gm=function(t){du.each(pm,function(e){this[e]=du.bind(t[e],t)},this)},mm={};ke.prototype={constructor:ke,create:function(t,e){var n=[];du.each(mm,function(i,r){var a=i.create(t,e);n=n.concat(a||[])}),this._coordinateSystems=n},update:function(t,e){du.each(this._coordinateSystems,function(n){n.update&&n.update(t,e)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},ke.register=function(t,e){mm[t]=e},ke.get=function(t){return mm[t]};var vm=ke,ym=du.each,xm=du.clone,_m=du.map,bm=du.merge,wm=/^(min|max)?(.+)$/;De.prototype={constructor:De,setOption:function(t,e){t&&du.each(Hh.normalizeToArray(t.series),function(t){t&&t.data&&du.isTypedArray(t.data)&&du.setAsPrimitive(t.data)}),t=xm(t,!0);var n=this._optionBackup,i=function(t,e,n){var i,r,a=[],o=[],s=t.timeline;if(t.baseOption&&(r=t.baseOption),(s||t.options)&&(r=r||{},a=(t.options||[]).slice()),t.media){r=r||{};var l=t.media;ym(l,function(t){t&&t.option&&(t.query?o.push(t):i||(i=t))})}return r||(r=t),r.timeline||(r.timeline=s),ym([r].concat(a).concat(du.map(o,function(t){return t.option})),function(t){ym(e,function(e){e(t,n)})}),{baseOption:r,timelineOptions:a,mediaDefault:i,mediaList:o}}.call(this,t,e,!n);this._newBaseOption=i.baseOption,n?(function(t,e){ym(e=e||{},function(e,n){if(null!=e){var i=t[n];if(ug.hasClass(n)){e=Hh.normalizeToArray(e),i=Hh.normalizeToArray(i);var r=Hh.mappingToExists(i,e);t[n]=_m(r,function(t){return t.option&&t.exist?bm(t.exist,t.option,!0):t.exist||t.option})}else t[n]=bm(i,e,!0)}})}(n.baseOption,i.baseOption),i.timelineOptions.length&&(n.timelineOptions=i.timelineOptions),i.mediaList.length&&(n.mediaList=i.mediaList),i.mediaDefault&&(n.mediaDefault=i.mediaDefault)):this._optionBackup=i},mountOption:function(t){var e=this._optionBackup;return this._timelineOptions=_m(e.timelineOptions,xm),this._mediaList=_m(e.mediaList,xm),this._mediaDefault=xm(e.mediaDefault),this._currentMediaIndices=[],xm(t?e.baseOption:this._newBaseOption)},getTimelineOption:function(t){var e,n=this._timelineOptions;if(n.length){var i=t.getComponent("timeline");i&&(e=xm(n[i.getCurrentIndex()],!0))}return e},getMediaOption:function(t){var e=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,r=this._mediaDefault,a=[],o=[];if(!i.length&&!r)return o;for(var s=0,l=i.length;s<l;s++)(function(t,e,n){var i={width:e,height:n,aspectratio:e/n},r=!0;return du.each(t,function(t,e){var n=e.match(wm);if(n&&n[1]&&n[2]){var a=n[1],o=n[2].toLowerCase();(function(t,e,n){return"min"===n?t>=e:"max"===n?t<=e:t===e})(i[o],t,a)||(r=!1)}}),r})(i[s].query,e,n)&&a.push(s);return!a.length&&r&&(a=[-1]),a.length&&!function(t,e){return t.join(",")===e.join(",")}(a,this._currentMediaIndices)&&(o=_m(a,function(t){return xm(-1===t?r.option:i[t].option)})),this._currentMediaIndices=a,o}};var Sm=De,Mm=du.each,Am=du.isObject,Cm=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"],Im=function(t,e){Mm(ze(t.series),function(t){Am(t)&&function(t){if(Am(t)){Ee(t),Ne(t),Re(t,"label"),Re(t,"upperLabel"),Re(t,"edgeLabel"),t.emphasis&&(Re(t.emphasis,"label"),Re(t.emphasis,"upperLabel"),Re(t.emphasis,"edgeLabel")),(n=t.markPoint)&&(Ee(n),Be(n)),(i=t.markLine)&&(Ee(i),Be(i));var e=t.markArea;e&&Be(e);var n,i,r=t.data;if("graph"===t.type){r=r||t.nodes;var a=t.links||t.edges;if(a&&!du.isTypedArray(a))for(s=0;s<a.length;s++)Be(a[s]);du.each(t.categories,function(t){Ne(t)})}if(r&&!du.isTypedArray(r))for(s=0;s<r.length;s++)Be(r[s]);if((n=t.markPoint)&&n.data)for(var o=n.data,s=0;s<o.length;s++)Be(o[s]);if((i=t.markLine)&&i.data){var l=i.data;for(s=0;s<l.length;s++)du.isArray(l[s])?(Be(l[s][0]),Be(l[s][1])):Be(l[s])}"gauge"===t.type?(Re(t,"axisLabel"),Re(t,"title"),Re(t,"detail")):"treemap"===t.type?(Le(t.breadcrumb,"itemStyle"),du.each(t.levels,function(t){Ne(t)})):"tree"===t.type&&Ne(t.leaves)}}(t)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),Mm(n,function(e){Mm(ze(t[e]),function(t){t&&(Re(t,"axisLabel"),Re(t.axisPointer,"label"))})}),Mm(ze(t.parallel),function(t){var e=t&&t.parallelAxisDefault;Re(e,"axisLabel"),Re(e&&e.axisPointer,"label")}),Mm(ze(t.calendar),function(t){Le(t,"itemStyle"),Re(t,"dayLabel"),Re(t,"monthLabel"),Re(t,"yearLabel")}),Mm(ze(t.radar),function(t){Re(t,"name")}),Mm(ze(t.geo),function(t){Am(t)&&(Be(t),Mm(ze(t.regions),function(t){Be(t)}))}),Mm(ze(t.timeline),function(t){Be(t),Le(t,"label"),Le(t,"itemStyle"),Le(t,"controlStyle",!0);var e=t.data;du.isArray(e)&&du.each(e,function(t){du.isObject(t)&&(Le(t,"label"),Le(t,"itemStyle"))})}),Mm(ze(t.toolbox),function(t){Le(t,"iconStyle"),Mm(t.feature,function(t){Le(t,"iconStyle")})}),Re(Ve(t.axisPointer),"label"),Re(Ve(t.tooltip).axisPointer,"label")},Pm=du.each,Tm=du.isArray,Om=du.isObject,km=Hh.normalizeToArray,Dm=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Em=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],Lm=function(t,e){Im(t,e),t.series=km(t.series),Pm(t.series,function(t){if(Om(t)){var e=t.type;if("pie"!==e&&"gauge"!==e||null!=t.clockWise&&(t.clockwise=t.clockWise),"gauge"===e){var n=function(t,e){e=e.split(",");for(var n=t,i=0;i<e.length&&null!=(n=n&&n[e[i]]);i++);return n}(t,"pointer.color");null!=n&&function(t,e,n,i){e=e.split(",");for(var r,a=t,o=0;o<e.length-1;o++)null==a[r=e[o]]&&(a[r]={}),a=a[r];(i||null==a[e[o]])&&(a[e[o]]=n)}(t,"itemStyle.normal.color",n)}Ge(t)}}),t.dataRange&&(t.visualMap=t.dataRange),Pm(Em,function(e){var n=t[e];n&&(Tm(n)||(n=[n]),Pm(n,function(t){Ge(t)}))})},Nm=du.createHashMap,Rm=du.each,Bm=function(t){var e=Nm();t.eachSeries(function(t){var n=t.get("stack");if(n){var i=e.get(n)||e.set(n,[]),r=t.getData(),a={stackResultDimension:r.getCalculationInfo("stackResultDimension"),stackedOverDimension:r.getCalculationInfo("stackedOverDimension"),stackedDimension:r.getCalculationInfo("stackedDimension"),stackedByDimension:r.getCalculationInfo("stackedByDimension"),isStackedByIndex:r.getCalculationInfo("isStackedByIndex"),data:r,seriesModel:t};if(!a.stackedDimension||!a.isStackedByIndex&&!a.stackedByDimension)return;i.length&&r.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(a)}}),e.each(function(t){Rm(t,function(e,n){var i=[],r=[NaN,NaN],a=[e.stackResultDimension,e.stackedOverDimension],o=e.data,s=e.isStackedByIndex,l=o.map(a,function(a,l,u){var c,h,d=o.get(e.stackedDimension,u);if(isNaN(d))return r;s?h=o.getRawIndex(u):c=o.get(e.stackedByDimension,u);for(var f=NaN,p=n-1;p>=0;p--){var g=t[p];if(s||(h=g.data.rawIndexOf(g.stackedByDimension,c)),h>=0){var m=g.data.getByRawIndex(g.stackResultDimension,h);if(d>=0&&m>0||d<=0&&m<0){d+=m,f=m;break}}}return i[0]=d,i[1]=f,i});o.hostModel.setData(l),e.data=l})})},zm=(du.isTypedArray,du.extend),Vm=(du.assert,du.each),Gm=du.isObject,Fm=Hh.getDataItemValue,jm=Hh.isDataItemOption,Hm=Wp.parseDate,Wm=_g.SOURCE_FORMAT_TYPED_ARRAY,Ym=_g.SOURCE_FORMAT_ARRAY_ROWS,Xm=_g.SOURCE_FORMAT_ORIGINAL,Um=_g.SOURCE_FORMAT_OBJECT_ROWS,qm=Fe.prototype;qm.pure=!1,qm.persistent=!0,qm.getSource=function(){return this._source};var Zm={arrayRows_column:{pure:!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(t){return this._data[t+this._source.startIndex]},appendData:We},arrayRows_row:{pure:!0,count:function(){var t=this._data[0];return t?Math.max(0,t.length-this._source.startIndex):0},getItem:function(t){t+=this._source.startIndex;for(var e=[],n=this._data,i=0;i<n.length;i++){var r=n[i];e.push(r?r[t]:null)}return e},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:!0,count:je,getItem:He,appendData:We},keyedColumns:{pure:!0,count:function(){var t=this._source.dimensionsDefine[0].name,e=this._data[t];return e?e.length:0},getItem:function(t){for(var e=[],n=this._source.dimensionsDefine,i=0;i<n.length;i++){var r=this._data[n[i].name];e.push(r?r[t]:null)}return e},appendData:function(t){var e=this._data;Vm(t,function(t,n){for(var i=e[n]||(e[n]=[]),r=0;r<(t||[]).length;r++)i.push(t[r])})}},original:{count:je,getItem:He,appendData:We},typedArray:{persistent:!1,pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(t,e){t-=this._offset,e=e||[];for(var n=this._dimSize*t,i=0;i<this._dimSize;i++)e[i]=this._data[n+i];return e},appendData:function(t){this._data=t},clean:function(){this._offset+=this.count(),this._data=null}}},Km={arrayRows:Ye,objectRows:function(t,e,n,i){return null!=n?t[i]:t},keyedColumns:Ye,original:function(t,e,n,i){var r=Fm(t);return null!=n&&r instanceof Array?r[n]:r},typedArray:Ye},$m={DefaultDataProvider:Fe,defaultDimValueGetters:{arrayRows:Xe,objectRows:function(t,e,n,i){return Ue(t[e],this._dimensionInfos[e])},keyedColumns:Xe,original:function(t,e,n,i){var r=t&&(null==t.value?t:t.value);return!this._rawData.pure&&jm(t)&&(this.hasItemOption=!0),Ue(r instanceof Array?r[i]:r,this._dimensionInfos[e])},typedArray:function(t,e,n,i){return t[i]}},retrieveRawValue:function(t,e,n){if(t){var i=t.getRawDataItem(e);if(null!=i){var r,a,o=t.getProvider().getSource().sourceFormat,s=t.getDimensionInfo(n);return s&&(r=s.name,a=s.index),Km[o](i,e,a,r)}}},retrieveRawAttr:function(t,e,n){if(t){var i=t.getProvider().getSource().sourceFormat;if(i===Xm||i===Um){var r=t.getRawDataItem(e);return i!==Xm||Gm(r)||(r=null),r?r[n]:void 0}}}},Jm=$m.retrieveRawValue,Qm=Zp.getTooltipMarker,tv=Zp.formatTpl,ev=/\{@(.+?)\}/g,nv={getDataParams:function(t,e){var n=this.getData(e),i=this.getRawValue(t,e),r=n.getRawIndex(t),a=n.getName(t),o=n.getRawDataItem(t),s=n.getItemVisual(t,"color");return{componentType:this.mainType,componentSubType:this.subType,seriesType:"series"===this.mainType?this.subType:null,seriesIndex:this.seriesIndex,seriesId:this.id,seriesName:this.name,name:a,dataIndex:r,data:o,dataType:e,value:i,color:s,marker:Qm(s),$vars:["seriesName","name","value"]}},getFormattedLabel:function(t,e,n,i,r){e=e||"normal";var a=this.getData(n),o=a.getItemModel(t),s=this.getDataParams(t,n);null!=i&&s.value instanceof Array&&(s.value=s.value[i]);var l=o.get("normal"===e?[r||"label","formatter"]:[e,r||"label","formatter"]);return"function"==typeof l?(s.status=e,l(s)):"string"==typeof l?tv(l,s).replace(ev,function(e,n){var i=n.length;return"["===n.charAt(0)&&"]"===n.charAt(i-1)&&(n=+n.slice(1,i-1)),Jm(a,t,n)}):void 0},getRawValue:function(t,e){return Jm(this.getData(e),t)},formatTooltip:function(){}},iv=(du.assert,du.isArray),rv=qe.prototype;rv.perform=function(t){function e(t){return!(t>=1)&&(t=1),t}var n,i=this._upstream,r=t&&t.skip;if(this._dirty&&i){var a=this.context;a.data=a.outputData=i.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!r&&(n=this._plan(this.context));var o,s=e(this._modBy),l=this._modDataCount||0,u=e(t&&t.modBy),c=t&&t.modDataCount||0;s===u&&l===c||(n="reset"),(this._dirty||"reset"===n)&&(this._dirty=!1,o=function(t,e){var n,i;t._dueIndex=t._outputDueEnd=t._dueEnd=0,t._settedOutputEnd=null,!e&&t._reset&&((n=t._reset(t.context))&&n.progress&&(i=n.forceFirstProgress,n=n.progress),iv(n)&&!n.length&&(n=null)),t._progress=n,t._modBy=t._modDataCount=null;var r=t._downstream;return r&&r.dirty(),i}(this,r)),this._modBy=u,this._modDataCount=c;var h=t&&t.step;if(this._dueEnd=i?i._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,f=Math.min(null!=h?this._dueIndex+h:1/0,this._dueEnd);if(!r&&(o||d<f)){var p=this._progress;if(iv(p))for(var g=0;g<p.length;g++)Ze(this,p[g],d,f,u,c);else Ze(this,p,d,f,u,c)}this._dueIndex=f;var m=null!=this._settedOutputEnd?this._settedOutputEnd:f;this._outputDueEnd=m}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()};var av=function(){var t,e,n,i,r,a={reset:function(o,s,l,u){e=o,t=s,n=l,i=u,r=Math.ceil(i/n),a.next=n>1&&i>0?function(){var a=e%r*n+Math.ceil(e/r),o=e>=t?null:a<i?a:e;return e++,o}:function(){return e<t?e++:null}}};return a}();rv.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},rv.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},rv.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},rv.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},rv.getUpstream=function(){return this._upstream},rv.getDownstream=function(){return this._downstream},rv.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t};var ov={createTask:function(t){return new qe(t)}},sv=Zp.formatTime,lv=Zp.encodeHTML,uv=Zp.addCommas,cv=Zp.getTooltipMarker,hv=ig.getLayoutParams,dv=ig.mergeLayoutParam,fv=ov.createTask,pv=Kg.prepareSource,gv=Kg.getSource,mv=$m.retrieveRawValue,vv=Hh.makeInner(),yv=ug.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendDataProvider:null,visualColorAccessPath:"itemStyle.color",layoutMode:null,init:function(t,e,n,i){this.seriesIndex=this.componentIndex,this.dataTask=fv({count:function(t){return t.model.getRawData().count()},reset:function(t){var e=t.model;return e.setData(e.getRawData().cloneShallow()),function(t,e){t.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}}}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,n),pv(this);var r=this.getInitialData(t,n);$e(r,this),this.dataTask.context.data=r,vv(this).dataBeforeProcessed=r,Ke(this)},mergeDefaultAndTheme:function(t,e){var n=this.layoutMode,i=n?hv(t):{},r=this.subType;ug.hasClass(r)&&(r+="Series"),du.merge(t,e.getTheme().get(this.subType)),du.merge(t,this.getDefaultOption()),Hh.defaultEmphasis(t,"label",["show"]),this.fillDataTextStyle(t.data),n&&dv(t,i,n)},mergeOption:function(t,e){t=du.merge(this.option,t,!0),this.fillDataTextStyle(t.data);var n=this.layoutMode;n&&dv(this.option,t,n),pv(this);var i=this.getInitialData(t,e);$e(i,this),this.dataTask.dirty(),this.dataTask.context.data=i,vv(this).dataBeforeProcessed=i,Ke(this)},fillDataTextStyle:function(t){if(t&&!du.isTypedArray(t))for(var e=["show"],n=0;n<t.length;n++)t[n]&&t[n].label&&Hh.defaultEmphasis(t[n],"label",e)},getInitialData:function(){},appendData:function(t){this.getRawData().appendData(t.data)},getData:function(t){var e=Je(this);if(e){var n=e.context.data;return null==t?n:n.getLinkedData(t)}return vv(this).data},setData:function(t){var e=Je(this);if(e){var n=e.context;n.data!==t&&e.modifyOutputEnd&&e.setOutputEnd(t.count()),n.outputData=t,e!==this.dataTask&&(n.data=t)}vv(this).data=t},getSource:function(){return gv(this)},getRawData:function(){return vv(this).dataBeforeProcessed},getBaseAxis:function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},formatTooltip:function(t,e,n){function i(t){return lv(uv(t))}var r=this.getData(),a=r.mapDimension("defaultedTooltip",!0),o=a.length,s=this.getRawValue(t),l=du.isArray(s),u=r.getItemVisual(t,"color");du.isObject(u)&&u.colorStops&&(u=(u.colorStops[0]||{}).color),u=u||"transparent";var c=o>1||l&&!o?function(n){function i(t,n){var i=r.getDimensionInfo(n);if(i&&!1!==i.otherDims.tooltip){var a=i.type,l=cv({color:u,type:"subItem"}),c=(o?l+lv(i.displayName||"-")+": ":"")+lv("ordinal"===a?t+"":"time"===a?e?"":sv("yyyy/MM/dd hh:mm:ss",t):uv(t));c&&s.push(c)}}var o=du.reduce(n,function(t,e,n){var i=r.getDimensionInfo(n);return t|(i&&!1!==i.tooltip&&null!=i.displayName)},0),s=[];return a.length?du.each(a,function(e){i(mv(r,t,e),e)}):du.each(n,i),(o?"<br/>":"")+s.join(o?"<br/>":", ")}(s):i(o?mv(r,t,a[0]):l?s[0]:s),h=cv(u),d=r.getName(t),f=this.name;return Hh.isNameSpecified(this)||(f=""),f=f?lv(f)+(e?": ":"<br/>"):"",e?h+f+c:f+h+(d?lv(d)+": "+c:c)},isAnimationEnabled:function(){if(Jl.node)return!1;var t=this.getShallow("animation");return t&&this.getData().count()>this.getShallow("animationThreshold")&&(t=!1),t},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(t,e,n){var i=this.ecModel,r=gg.getColorFromPalette.call(this,t,e,n);return r||(r=i.getColorFromPalette(t,e,n)),r},coordDimToDataDim:function(t){return this.getRawData().mapDimension(t,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});du.mixin(yv,nv),du.mixin(yv,gg);var xv=yv,_v=function(){this.group=new fc,this.uid=Fp.getUID("viewComponent")},bv=_v.prototype={constructor:_v,init:function(t,e){},render:function(t,e,n,i){},dispose:function(){}};bv.updateView=bv.updateLayout=bv.updateVisual=function(t,e,n,i){},Uh.enableClassExtend(_v),Uh.enableClassManagement(_v,{registerWhenExtend:!0});var wv=_v,Sv=Hh.makeInner,Mv=function(){var t=Sv();return function(e){var n=t(e),i=e.pipelineContext,r=n.large,a=n.progressiveRender,o=n.large=i.large,s=n.progressiveRender=i.progressiveRender;return!!(r^o||a^s)&&"reset"}},Av=du.each,Cv=ov.createTask,Iv=Hh.makeInner(),Pv=Mv(),Tv=Qe.prototype={type:"chart",init:function(t,e){},render:function(t,e,n,i){},highlight:function(t,e,n,i){en(t.getData(),i,"emphasis")},downplay:function(t,e,n,i){en(t.getData(),i,"normal")},remove:function(t,e){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null};Tv.updateView=Tv.updateLayout=Tv.updateVisual=function(t,e,n,i){this.render(t,e,n,i)},Uh.enableClassExtend(Qe,["dispose"]),Uh.enableClassManagement(Qe,{registerWhenExtend:!0}),Qe.markUpdateMethod=function(t,e){Iv(t).updateMethod=e};var Ov={incrementalPrepareRender:{progress:function(t,e){e.view.incrementalRender(t,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(t,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},kv=Qe,Dv="\0__throttleOriginMethod",Ev="\0__throttleRate",Lv="\0__throttleType",Nv={throttle:nn,createOrUpdate:function(t,e,n,i){var r=t[e];if(r){var a=r[Dv]||r,o=r[Lv];if(r[Ev]!==n||o!==i){if(null==n||!i)return t[e]=a;(r=t[e]=nn(a,n,"debounce"===i))[Dv]=a,r[Lv]=i,r[Ev]=n}return r}},clear:function(t,e){var n=t[e];n&&n[Dv]&&(t[e]=n[Dv])}},Rv={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData(),i=(t.visualColorAccessPath||"itemStyle.color").split("."),r=t.get(i)||t.getColorFromPalette(t.name,null,e.getSeriesCount());if(n.setVisual("color",r),!e.isSeriesFiltered(t))return"function"!=typeof r||r instanceof Qf||n.each(function(e){n.setItemVisual(e,"color",r(t.getDataParams(e)))}),{dataEach:n.hasItemOption?function(t,e){var n=t.getItemModel(e).get(i,!0);null!=n&&t.setItemVisual(e,"color",n)}:null}}},Bv={toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}},zv=$m.retrieveRawValue,Vv=function(t,e){function n(t,e){if("string"!=typeof t)return t;var n=t;return du.each(e,function(t,e){n=n.replace(new RegExp("\\{\\s*"+e+"\\s*\\}","g"),t)}),n}function i(t){var e=r.get(t);if(null==e){for(var n=t.split("."),i=Bv.aria,a=0;a<n.length;++a)i=i[n[a]];return i}return e}var r=e.getModel("aria");if(r.get("show"))if(r.get("description"))t.setAttribute("aria-label",r.get("description"));else{var a=0;e.eachSeries(function(t,e){++a},this);var o,s=r.get("data.maxCount")||10,l=r.get("series.maxCount")||10,u=Math.min(a,l);if(!(a<1)){var c=function(){var t=e.getModel("title").option;return t&&t.length&&(t=t[0]),t&&t.text}();o=c?n(i("general.withTitle"),{title:c}):i("general.withoutTitle");var h=[];o+=n(i(a>1?"series.multiple.prefix":"series.single.prefix"),{seriesCount:a}),e.eachSeries(function(t,e){if(e<u){var r,o=t.get("name"),l="series."+(a>1?"multiple":"single")+".";r=n(r=i(o?l+"withName":l+"withoutName"),{seriesId:t.seriesIndex,seriesName:t.get("name"),seriesType:function(t){return Bv.series.typeNames[t]||"自定义图"}(t.subType)});var c=t.getData();window.data=c,c.count()>s?r+=n(i("data.partialData"),{displayCnt:s}):r+=i("data.allData");for(var d=[],f=0;f<c.count();f++)if(f<s){var p=c.getName(f),g=zv(c,f);d.push(n(i(p?"data.withName":"data.withoutName"),{name:p,value:g}))}r+=d.join(i("data.separator.middle"))+i("data.separator.end"),h.push(r)}}),o+=h.join(i("series.multiple.separator.middle"))+i("series.multiple.separator.end"),t.setAttribute("aria-label",o)}}},Gv=Math.PI,Fv=function(t,e){e=e||{},du.defaults(e,{text:"loading",color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)",zlevel:0});var n=new Pp.Rect({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4}),i=new Pp.Arc({shape:{startAngle:-Gv/2,endAngle:-Gv/2+.1,r:10},style:{stroke:e.color,lineCap:"round",lineWidth:5},zlevel:e.zlevel,z:10001}),r=new Pp.Rect({style:{fill:"none",text:e.text,textPosition:"right",textDistance:10,textFill:e.textColor},zlevel:e.zlevel,z:10001});i.animateShape(!0).when(1e3,{endAngle:3*Gv/2}).start("circularInOut"),i.animateShape(!0).when(1e3,{startAngle:3*Gv/2}).delay(300).start("circularInOut");var a=new Pp.Group;return a.add(i),a.add(r),a.add(n),a.resize=function(){var e=t.getWidth()/2,a=t.getHeight()/2;i.setShape({cx:e,cy:a});var o=i.shape.r;r.setShape({x:e-o,y:a-o,width:2*o,height:2*o}),n.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},a.resize(),a},jv=du.each,Hv=du.map,Wv=(du.isArray,du.isFunction),Yv=du.createHashMap,Xv=du.noop,Uv=ov.createTask,qv=Fp.getUID,Zv=Hh.normalizeToArray,Kv=rn.prototype;Kv.restoreData=function(t,e){t.restoreData(e),this._stageTaskMap.each(function(t){var e=t.overallTask;e&&e.dirty()})},Kv.getPerformArgs=function(t,e){if(t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),i=n.context,r=!e&&n.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>n.blockIndex?n.step:null,a=i&&i.modDataCount;return{step:r,modBy:null!=a?Math.ceil(a/r):null,modDataCount:a}}},Kv.getPipeline=function(t){return this._pipelineMap.get(t)},Kv.updateStreamModes=function(t,e){var n=this._pipelineMap.get(t.uid),i=t.getData().count(),r=n.progressiveEnabled&&e.incrementalPrepareRender&&i>=n.threshold,a=t.get("large")&&i>=t.get("largeThreshold"),o="mod"===t.get("progressiveChunkMode")?i:null;t.pipelineContext=n.context={progressiveRender:r,modDataCount:o,large:a}},Kv.restorePipelines=function(t){var e=this,n=e._pipelineMap=Yv();t.eachSeries(function(t){var i=t.getProgressive(),r=t.uid;n.set(r,{id:r,head:null,tail:null,threshold:t.getProgressiveThreshold(),progressiveEnabled:i&&!(t.preventIncremental&&t.preventIncremental()),blockIndex:-1,step:Math.round(i||700),count:0}),sn(e,t,t.dataTask)})},Kv.prepareStageTasks=function(){var t=this._stageTaskMap,e=this.ecInstance.getModel(),n=this.api;jv(this._allHandlers,function(i){var r=t.get(i.uid)||t.set(i.uid,[]);i.reset&&function(t,e,n,i,r){function a(n){var a=n.uid,s=o.get(a)||o.set(a,Uv({plan:function(t){return t.plan&&t.plan(t.model,t.ecModel,t.api,t.payload)},reset:function(t){t.useClearVisual&&t.data.clearAllVisual();var e=t.resetDefines=Zv(t.reset(t.model,t.ecModel,t.api,t.payload));return e.length>1?Hv(e,function(t,e){return on(e)}):Jv},count:function(t){return t.data.count()}}));s.context={model:n,ecModel:i,api:r,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:t},sn(t,n,s)}var o=n.seriesTaskMap||(n.seriesTaskMap=Yv()),s=e.seriesType,l=e.getTargetSeries;e.createOnAllSeries?i.eachRawSeries(a):s?i.eachRawSeriesByType(s,a):l&&l(i,r).each(a);var u=t._pipelineMap;o.each(function(t,e){u.get(e)||(t.dispose(),o.removeKey(e))})}(this,i,r,e,n),i.overallReset&&function(t,e,n,i,r){function a(e){var n=e.uid,i=s.get(n);i||(i=s.set(n,Uv({reset:function(t,e){return t.overallProgress&&function(){this.agent.dirty(),this.getDownstream().dirty()}},onDirty:function(){this.agent&&this.agent.dirty()}})),o.dirty()),i.context={model:e,overallProgress:c,modifyOutputEnd:h},i.agent=o,i.__block=c,sn(t,e,i)}var o=n.overallTask=n.overallTask||Uv({reset:function(t){t.overallReset(t.ecModel,t.api,t.payload)}});o.context={ecModel:i,api:r,overallReset:e.overallReset,scheduler:t};var s=o.agentStubMap=o.agentStubMap||Yv(),l=e.seriesType,u=e.getTargetSeries,c=!0,h=e.modifyOutputEnd;l?i.eachRawSeriesByType(l,a):u?u(i,r).each(a):(c=!1,jv(i.getSeries(),a));var d=t._pipelineMap;s.each(function(t,e){d.get(e)||(t.dispose(),o.dirty(),s.removeKey(e))})}(this,i,r,e,n)},this)},Kv.prepareView=function(t,e,n,i){var r=t.renderTask,a=r.context;a.model=e,a.ecModel=n,a.api=i,r.__block=!t.incrementalPrepareRender,sn(this,e,r)},Kv.performDataProcessorTasks=function(t,e){an(this,this._dataProcessorHandlers,t,e,{block:!0})},Kv.performVisualTasks=function(t,e,n){an(this,this._visualHandlers,t,e,n)},Kv.performSeriesTasks=function(t){var e;t.eachSeries(function(t){e|=t.dataTask.perform()}),this.unfinished|=e},Kv.plan=function(){this._pipelineMap.each(function(t){var e=t.tail;do{if(e.__block){t.blockIndex=e.__idxInPipeline;break}e=e.getUpstream()}while(e)})};var $v=Kv.updatePayload=function(t,e){"remain"!==e&&(t.context.payload=e)},Jv=on(0);rn.wrapStageHandler=function(t,e){return Wv(t)&&(t={overallReset:t,seriesType:function(t){Qv=null;try{t(ty,ey)}catch(t){}return Qv}(t)}),t.uid=qv("stageHandler"),e&&(t.visualType=e),t};var Qv,ty={},ey={};ln(ty,fm),ln(ey,gm),ty.eachSeriesByType=ty.eachRawSeriesByType=function(t){Qv=t},ty.eachComponent=function(t){"series"===t.mainType&&t.subType&&(Qv=t.subType)};var ny=rn,iy=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],ry={color:iy,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],iy]},ay=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],oy={color:ay,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:"#eee"},crossStyle:{color:"#eee"}}},legend:{textStyle:{color:"#eee"}},textStyle:{color:"#eee"},title:{textStyle:{color:"#eee"}},toolbox:{iconStyle:{normal:{borderColor:"#eee"}}},dataZoom:{textStyle:{color:"#eee"}},visualMap:{textStyle:{color:"#eee"}},timeline:{lineStyle:{color:"#eee"},itemStyle:{normal:{color:ay[1]}},label:{normal:{textStyle:{color:"#eee"}}},controlStyle:{normal:{color:"#eee",borderColor:"#eee"}}},timeAxis:{axisLine:{lineStyle:{color:"#eee"}},axisTick:{lineStyle:{color:"#eee"}},axisLabel:{textStyle:{color:"#eee"}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:"#eee"}}},logAxis:{axisLine:{lineStyle:{color:"#eee"}},axisTick:{lineStyle:{color:"#eee"}},axisLabel:{textStyle:{color:"#eee"}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:"#eee"}}},valueAxis:{axisLine:{lineStyle:{color:"#eee"}},axisTick:{lineStyle:{color:"#eee"}},axisLabel:{textStyle:{color:"#eee"}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:"#eee"}}},categoryAxis:{axisLine:{lineStyle:{color:"#eee"}},axisTick:{lineStyle:{color:"#eee"}},axisLabel:{textStyle:{color:"#eee"}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:"#eee"}}},line:{symbol:"circle"},graph:{color:ay},gauge:{title:{textStyle:{color:"#eee"}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};oy.categoryAxis.splitLine.show=!1;var sy=oy,ly=Kg.detectSourceFormat,uy=_g.SERIES_LAYOUT_BY_COLUMN;ug.extend({type:"dataset",defaultOption:{seriesLayoutBy:uy,sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){ly(this)}}),wv.extend({type:"dataset"}),cn.prototype={constructor:cn,add:function(t){return this._add=t,this},update:function(t){return this._update=t,this},remove:function(t){return this._remove=t,this},execute:function(){var t=this._old,e=this._new,n={},i=[],r=[];for(hn(t,{},i,"_oldKeyGetter",this),hn(e,n,r,"_newKeyGetter",this),a=0;a<t.length;a++)null!=(s=n[o=i[a]])?((u=s.length)?(1===u&&(n[o]=null),s=s.unshift()):n[o]=null,this._update&&this._update(s,a)):this._remove&&this._remove(a);for(var a=0;a<r.length;a++){var o=r[a];if(n.hasOwnProperty(o)){var s=n[o];if(null==s)continue;if(s.length)for(var l=0,u=s.length;l<u;l++)this._add&&this._add(s[l]);else this._add&&this._add(s)}}}};var cy=cn,hy=du.each,dy=du.createHashMap,fy=(du.assert,dy(["tooltip","label","itemName","itemId","seriesName"])),py={OTHER_DIMENSIONS:fy,summarizeDimensions:function(t){var e={},n=e.encode={},i=dy(),r=[],a=[];hy(t.dimensions,function(e){var o=t.getDimensionInfo(e),s=o.coordDim;if(s){var l=n[s];n.hasOwnProperty(s)||(l=n[s]=[]),l[o.coordDimIndex]=e,o.isExtraCoord||(i.set(s,1),function(t){return!("ordinal"===t||"time"===t)}(o.type)&&(r[0]=e)),o.defaultTooltip&&a.push(e)}fy.each(function(t,e){var i=n[e];n.hasOwnProperty(e)||(i=n[e]=[]);var r=o.otherDims[e];null!=r&&!1!==r&&(i[r]=o.name)})});var o=[],s={};i.each(function(t,e){var i=n[e];s[e]=i[0],o=o.concat(i)}),e.dataDimsOnCoord=o,e.encodeFirstDimNotExtra=s;var l=n.label;l&&l.length&&(r=l.slice());var u=n.tooltip;return u&&u.length?a=u.slice():a.length||(a=r.slice()),n.defaultedLabel=r,n.defaultedTooltip=a,e},getDimensionTypeByAxis:function(t){return"category"===t?"ordinal":"time"===t?"time":"float"}},gy=$m.defaultDimValueGetters,my=$m.DefaultDataProvider,vy=py.summarizeDimensions,yy=du.isObject,xy="e\0\0",_y={float:"undefined"==typeof Float64Array?Array:Float64Array,int:"undefined"==typeof Int32Array?Array:Int32Array,ordinal:Array,number:Array,time:Array},by="undefined"==typeof Uint32Array?Array:Uint32Array,wy="undefined"==typeof Uint16Array?Array:Uint16Array,Sy=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"],My=["_extent","_approximateExtent","_rawExtent"],Ay=function(t,e){t=t||["x","y"];for(var n={},i=[],r={},a=0;a<t.length;a++){var o=t[a];du.isString(o)&&(o={name:o});var s=o.name;o.type=o.type||"float",o.coordDim||(o.coordDim=s,o.coordDimIndex=0),o.otherDims=o.otherDims||{},i.push(s),n[s]=o,o.index=a,o.createInvertedIndices&&(r[s]=[])}this.dimensions=i,this._dimensionInfos=n,this.hostModel=e,this.dataType,this._indices=null,this._count=0,this._rawCount=0,this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this._visual={},this._layout={},this._itemVisuals=[],this.hasItemVisual={},this._itemLayouts=[],this._graphicEls=[],this._chunkSize=1e5,this._chunkCount=0,this._rawData,this._rawExtent={},this._extent={},this._approximateExtent={},this._dimensionsSummary=vy(this),this._invertedIndicesMap=r,this._calculationInfo={}},Cy=Ay.prototype;Cy.type="list",Cy.hasItemOption=!0,Cy.getDimension=function(t){return isNaN(t)||(t=this.dimensions[t]||t),t},Cy.getDimensionInfo=function(t){return this._dimensionInfos[this.getDimension(t)]},Cy.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},Cy.mapDimension=function(t,e){var n=this._dimensionsSummary;if(null==e)return n.encodeFirstDimNotExtra[t];var i=n.encode[t];return!0===e?(i||[]).slice():i&&i[e]},Cy.initData=function(t,e,n){(Tg.isInstance(t)||du.isArrayLike(t))&&(t=new my(t,this.dimensions.length)),this._rawData=t,this._storage={},this._indices=null,this._nameList=e||[],this._idList=[],this._nameRepeatCount={},n||(this.hasItemOption=!1),this.defaultDimValueGetter=gy[this._rawData.getSource().sourceFormat],this._dimValueGetter=n=n||this.defaultDimValueGetter,this._rawExtent={},this._initDataFromProvider(0,t.count()),t.pure&&(this.hasItemOption=!1)},Cy.getProvider=function(){return this._rawData},Cy.appendData=function(t){var e=this._rawData,n=this.count();e.appendData(t);var i=e.count();e.persistent||(i+=n),this._initDataFromProvider(n,i)},Cy._initDataFromProvider=function(t,e){if(!(t>=e)){for(var n,i=this._chunkSize,r=this._rawData,a=this._storage,o=this.dimensions,s=o.length,l=this._dimensionInfos,u=this._nameList,c=this._idList,h=this._rawExtent,d=this._nameRepeatCount={},f=this._chunkCount,p=f-1,g=0;g<s;g++){h[C=o[g]]||(h[C]=[1/0,-1/0]);var m=l[C];0===m.otherDims.itemName&&(n=this._nameDimIdx=g),0===m.otherDims.itemId&&(this._idDimIdx=g);var v=_y[m.type];a[C]||(a[C]=[]);var y=a[C][p];if(y&&y.length<i){for(var x=new v(Math.min(e-p*i,i)),_=0;_<y.length;_++)x[_]=y[_];a[C][p]=x}for(A=f*i;A<e;A+=i)a[C].push(new v(Math.min(e-A,i)));this._chunkCount=a[C].length}for(var b=new Array(s),w=t;w<e;w++){b=r.getItem(w,b);for(var S=Math.floor(w/i),M=w%i,A=0;A<s;A++){var C=o[A],I=a[C][S],P=this._dimValueGetter(b,C,w,A);I[M]=P;var T=h[C];P<T[0]&&(T[0]=P),P>T[1]&&(T[1]=P)}if(!r.pure){var O=u[w];if(b&&null==O)if(null!=b.name)u[w]=O=b.name;else if(null!=n){var k=o[n],D=a[k][S];if(D){O=D[M];var E=l[k].ordinalMeta;E&&E.categories.length&&(O=E.categories[O])}}var L=null==b?null:b.id;null==L&&null!=O&&(d[O]=d[O]||0,L=O,d[O]>0&&(L+="__ec__"+d[O]),d[O]++),null!=L&&(c[w]=L)}}!r.persistent&&r.clean&&r.clean(),this._rawCount=this._count=e,this._extent={},function(t){var e=t._invertedIndicesMap;du.each(e,function(n,i){var r=t._dimensionInfos[i].ordinalMeta;if(r){for(n=e[i]=new by(r.categories.length),a=0;a<n.length;a++)n[a]=NaN;for(var a=0;a<t._count;a++)n[t.get(i,a)]=a}})}(this)}},Cy.count=function(){return this._count},Cy.getIndices=function(){var t=this._indices;if(t){var e=t.constructor,n=this._count;if(e===Array)for(i=new e(n),r=0;r<n;r++)i[r]=t[r];else i=new e(t.buffer,0,n)}else for(var i=new(e=dn(this))(this.count()),r=0;r<i.length;r++)i[r]=r;return i},Cy.get=function(t,e){if(!(e>=0&&e<this._count))return NaN;var n=this._storage;if(!n[t])return NaN;e=this.getRawIndex(e);var i=Math.floor(e/this._chunkSize),r=e%this._chunkSize;return n[t][i][r]},Cy.getByRawIndex=function(t,e){if(!(e>=0&&e<this._rawCount))return NaN;var n=this._storage[t];if(!n)return NaN;var i=Math.floor(e/this._chunkSize),r=e%this._chunkSize;return n[i][r]},Cy._getFast=function(t,e){var n=Math.floor(e/this._chunkSize),i=e%this._chunkSize;return this._storage[t][n][i]},Cy.getValues=function(t,e){var n=[];du.isArray(t)||(e=t,t=this.dimensions);for(var i=0,r=t.length;i<r;i++)n.push(this.get(t[i],e));return n},Cy.hasValue=function(t){for(var e=this._dimensionsSummary.dataDimsOnCoord,n=this._dimensionInfos,i=0,r=e.length;i<r;i++)if("ordinal"!==n[e[i]].type&&isNaN(this.get(e[i],t)))return!1;return!0},Cy.getDataExtent=function(t){t=this.getDimension(t);var e=[1/0,-1/0];if(!this._storage[t])return e;var n,i=this.count();if(!this._indices)return this._rawExtent[t].slice();if(n=this._extent[t])return n.slice();for(var r=(n=e)[0],a=n[1],o=0;o<i;o++){var s=this._getFast(t,this.getRawIndex(o));s<r&&(r=s),s>a&&(a=s)}return n=[r,a],this._extent[t]=n,n},Cy.getApproximateExtent=function(t){return t=this.getDimension(t),this._approximateExtent[t]||this.getDataExtent(t)},Cy.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},Cy.getCalculationInfo=function(t){return this._calculationInfo[t]},Cy.setCalculationInfo=function(t,e){yy(t)?du.extend(this._calculationInfo,t):this._calculationInfo[t]=e},Cy.getSum=function(t){var e=0;if(this._storage[t])for(var n=0,i=this.count();n<i;n++){var r=this.get(t,n);isNaN(r)||(e+=r)}return e},Cy.getMedian=function(t){var e=[];this.each(t,function(t,n){isNaN(t)||e.push(t)});var n=[].concat(e).sort(function(t,e){return t-e}),i=this.count();return 0===i?0:i%2==1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},Cy.rawIndexOf=function(t,e){var n=(t&&this._invertedIndicesMap[t])[e];return null==n||isNaN(n)?-1:n},Cy.indexOfName=function(t){for(var e=0,n=this.count();e<n;e++)if(this.getName(e)===t)return e;return-1},Cy.indexOfRawIndex=function(t){if(!this._indices)return t;if(t>=this._rawCount||t<0)return-1;var e=this._indices,n=e[t];if(null!=n&&n<this._count&&n===t)return t;for(var i=0,r=this._count-1;i<=r;){var a=(i+r)/2|0;if(e[a]<t)i=a+1;else{if(!(e[a]>t))return a;r=a-1}}return-1},Cy.indicesOfNearest=function(t,e,n){var i=[];if(!this._storage[t])return i;null==n&&(n=1/0);for(var r=Number.MAX_VALUE,a=-1,o=0,s=this.count();o<s;o++){var l=e-this.get(t,o),u=Math.abs(l);l<=n&&u<=r&&((u<r||l>=0&&a<0)&&(r=u,a=l,i.length=0),i.push(o))}return i},Cy.getRawIndex=gn,Cy.getRawDataItem=function(t){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(t));for(var e=[],n=0;n<this.dimensions.length;n++){var i=this.dimensions[n];e.push(this.get(i,t))}return e},Cy.getName=function(t){var e=this.getRawIndex(t);return this._nameList[e]||pn(this,this._nameDimIdx,e)||""},Cy.getId=function(t){return vn(this,this.getRawIndex(t))},Cy.each=function(t,e,n,i){if(this._count){"function"==typeof t&&(i=n,n=e,e=t,t=[]),n=n||i||this;for(var r=(t=du.map(yn(t),this.getDimension,this)).length,a=0;a<this.count();a++)switch(r){case 0:e.call(n,a);break;case 1:e.call(n,this.get(t[0],a),a);break;case 2:e.call(n,this.get(t[0],a),this.get(t[1],a),a);break;default:for(var o=0,s=[];o<r;o++)s[o]=this.get(t[o],a);s[o]=a,e.apply(n,s)}}},Cy.filterSelf=function(t,e,n,i){if(this._count){"function"==typeof t&&(i=n,n=e,e=t,t=[]),n=n||i||this,t=du.map(yn(t),this.getDimension,this);for(var r=this.count(),a=new(dn(this))(r),o=[],s=t.length,l=0,u=t[0],c=0;c<r;c++){var h,d=this.getRawIndex(c);if(0===s)h=e.call(n,c);else if(1===s){var f=this._getFast(u,d);h=e.call(n,f,c)}else{for(var p=0;p<s;p++)o[p]=this._getFast(u,d);o[p]=c,h=e.apply(n,o)}h&&(a[l++]=d)}return l<r&&(this._indices=a),this._count=l,this._extent={},this.getRawIndex=this._indices?mn:gn,this}},Cy.selectRange=function(t){if(this._count){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);var i=e.length;if(i){var r=this.count(),a=new(dn(this))(r),o=0,s=e[0],l=t[s][0],u=t[s][1],c=!1;if(!this._indices){var h=0;if(1===i){for(var d=this._storage[e[0]],f=0;f<this._chunkCount;f++)for(var p=d[f],g=Math.min(this._count-f*this._chunkSize,this._chunkSize),m=0;m<g;m++)((b=p[m])>=l&&b<=u||isNaN(b))&&(a[o++]=h),h++;c=!0}else if(2===i){d=this._storage[s];var v=this._storage[e[1]],y=t[e[1]][0],x=t[e[1]][1];for(f=0;f<this._chunkCount;f++){p=d[f];var _=v[f];for(g=Math.min(this._count-f*this._chunkSize,this._chunkSize),m=0;m<g;m++){var b=p[m],w=_[m];(b>=l&&b<=u||isNaN(b))&&(w>=y&&w<=x||isNaN(w))&&(a[o++]=h),h++}}c=!0}}if(!c)if(1===i)for(m=0;m<r;m++)M=this.getRawIndex(m),((b=this._getFast(s,M))>=l&&b<=u||isNaN(b))&&(a[o++]=M);else for(m=0;m<r;m++){var S=!0,M=this.getRawIndex(m);for(f=0;f<i;f++){var A=e[f];((b=this._getFast(n,M))<t[A][0]||b>t[A][1])&&(S=!1)}S&&(a[o++]=this.getRawIndex(m))}return o<r&&(this._indices=a),this._count=o,this._extent={},this.getRawIndex=this._indices?mn:gn,this}}},Cy.mapArray=function(t,e,n,i){"function"==typeof t&&(i=n,n=e,e=t,t=[]),n=n||i||this;var r=[];return this.each(t,function(){r.push(e&&e.apply(this,arguments))},n),r},Cy.map=function(t,e,n,i){n=n||i||this;var r=xn(this,t=du.map(yn(t),this.getDimension,this));r._indices=this._indices,r.getRawIndex=r._indices?mn:gn;for(var a=r._storage,o=[],s=this._chunkSize,l=t.length,u=this.count(),c=[],h=r._rawExtent,d=0;d<u;d++){for(var f=0;f<l;f++)c[f]=this.get(t[f],d);c[l]=d;var p=e&&e.apply(n,c);if(null!=p){"object"!=typeof p&&(o[0]=p,p=o);for(var g=this.getRawIndex(d),m=Math.floor(g/s),v=g%s,y=0;y<p.length;y++){var x=t[y],_=p[y],b=h[x],w=a[x];w&&(w[m][v]=_),_<b[0]&&(b[0]=_),_>b[1]&&(b[1]=_)}}}return r},Cy.downSample=function(t,e,n,i){for(var r=xn(this,[t]),a=r._storage,o=[],s=Math.floor(1/e),l=a[t],u=this.count(),c=this._chunkSize,h=r._rawExtent[t],d=new(dn(this))(u),f=0,p=0;p<u;p+=s){s>u-p&&(s=u-p,o.length=s);for(var g=0;g<s;g++){var m=this.getRawIndex(p+g),v=Math.floor(m/c),y=m%c;o[g]=l[v][y]}var x=n(o),_=this.getRawIndex(Math.min(p+i(o,x)||0,u-1)),b=_%c;l[Math.floor(_/c)][b]=x,x<h[0]&&(h[0]=x),x>h[1]&&(h[1]=x),d[f++]=_}return r._count=f,r._indices=d,r.getRawIndex=mn,r},Cy.getItemModel=function(t){var e=this.hostModel;return new zp(this.getRawDataItem(t),e,e&&e.ecModel)},Cy.diff=function(t){var e=this;return new cy(t?t.getIndices():[],this.getIndices(),function(e){return vn(t,e)},function(t){return vn(e,t)})},Cy.getVisual=function(t){var e=this._visual;return e&&e[t]},Cy.setVisual=function(t,e){if(yy(t))for(var n in t)t.hasOwnProperty(n)&&this.setVisual(n,t[n]);else this._visual=this._visual||{},this._visual[t]=e},Cy.setLayout=function(t,e){if(yy(t))for(var n in t)t.hasOwnProperty(n)&&this.setLayout(n,t[n]);else this._layout[t]=e},Cy.getLayout=function(t){return this._layout[t]},Cy.getItemLayout=function(t){return this._itemLayouts[t]},Cy.setItemLayout=function(t,e,n){this._itemLayouts[t]=n?du.extend(this._itemLayouts[t]||{},e):e},Cy.clearItemLayouts=function(){this._itemLayouts.length=0},Cy.getItemVisual=function(t,e,n){var i=this._itemVisuals[t],r=i&&i[e];return null!=r||n?r:this.getVisual(e)},Cy.setItemVisual=function(t,e,n){var i=this._itemVisuals[t]||{},r=this.hasItemVisual;if(this._itemVisuals[t]=i,yy(e))for(var a in e)e.hasOwnProperty(a)&&(i[a]=e[a],r[a]=!0);else i[e]=n,r[e]=!0},Cy.clearAllVisual=function(){this._visual={},this._itemVisuals=[],this.hasItemVisual={}},Cy.setItemGraphicEl=function(t,e){var n=this.hostModel;e&&(e.dataIndex=t,e.dataType=this.dataType,e.seriesIndex=n&&n.seriesIndex,"group"===e.type&&e.traverse(function(t){t.seriesIndex=this.seriesIndex,t.dataIndex=this.dataIndex,t.dataType=this.dataType},e)),this._graphicEls[t]=e},Cy.getItemGraphicEl=function(t){return this._graphicEls[t]},Cy.eachItemGraphicEl=function(t,e){du.each(this._graphicEls,function(n,i){n&&t&&t.call(e,n,i)})},Cy.cloneShallow=function(t){if(!t){var e=du.map(this.dimensions,this.getDimensionInfo,this);t=new Ay(e,this.hostModel)}if(t._storage=this._storage,fn(t,this),this._indices){var n=this._indices.constructor;t._indices=new n(this._indices)}else t._indices=null;return t.getRawIndex=t._indices?mn:gn,t},Cy.wrapMethod=function(t,e){var n=this[t];"function"==typeof n&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var t=n.apply(this,arguments);return e.apply(this,[t].concat(du.slice(arguments)))})},Cy.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],Cy.CHANGABLE_METHODS=["filterSelf","selectRange"];var Iy=Ay,Py=du.createHashMap,Ty=du.each,Oy=du.isString,ky=du.defaults,Dy=du.extend,Ey=du.isObject,Ly=du.clone,Ny=Hh.normalizeToArray,Ry=Kg.guessOrdinal,By=py.OTHER_DIMENSIONS,zy=function(t,e,n){function i(t,e,n){null!=By.get(e)?t.otherDims[e]=n:(t.coordDim=e,t.coordDimIndex=n,s.set(e,!0))}Tg.isInstance(e)||(e=Tg.seriesDataToSource(e)),n=n||{},t=(t||[]).slice();for(var r=(n.dimsDef||[]).slice(),a=Py(n.encodeDef),o=Py(),s=Py(),l=[],u=function(t,e,n,i){var r=Math.max(t.dimensionsDetectCount||1,e.length,n.length,i||0);return Ty(e,function(t){var e=t.dimsDef;e&&(r=Math.max(r,e.length))}),r}(e,t,r,n.dimCount),c=0;c<u;c++){var h=r[c]=Dy({},Ey(r[c])?r[c]:{name:r[c]}),d=h.name,f=l[c]={otherDims:{}};null!=d&&null==o.get(d)&&(f.name=f.displayName=d,o.set(d,c)),null!=h.type&&(f.type=h.type),null!=h.displayName&&(f.displayName=h.displayName)}a.each(function(t,e){t=Ny(t).slice();var n=a.set(e,[]);Ty(t,function(t,r){Oy(t)&&(t=o.get(t)),null!=t&&t<u&&(n[r]=t,i(l[t],e,r))})});var p=0;Ty(t,function(t,e){var n,r,o;if(Oy(t))n=t,t={};else{n=t.name;var s=t.ordinalMeta;t.ordinalMeta=null,(t=Ly(t)).ordinalMeta=s,r=t.dimsDef,o=t.otherDims,t.name=t.coordDim=t.coordDimIndex=t.dimsDef=t.otherDims=null}var u=Ny(a.get(n));if(!u.length)for(var c=0;c<(r&&r.length||1);c++){for(;p<l.length&&null!=l[p].coordDim;)p++;p<l.length&&u.push(p++)}Ty(u,function(e,a){var s=l[e];if(i(ky(s,t),n,a),null==s.name&&r){var u=r[a];!Ey(u)&&(u={name:u}),s.name=s.displayName=u.name,s.defaultTooltip=u.defaultTooltip}o&&ky(s.otherDims,o)})});var g=n.generateCoord,m=n.generateCoordCount,v=null!=m;m=g?m||1:0;for(var y=g||"value",x=0;x<u;x++)null==(f=l[x]=l[x]||{}).coordDim&&(f.coordDim=bn(y,s,v),f.coordDimIndex=0,(!g||m<=0)&&(f.isExtraCoord=!0),m--),null==f.name&&(f.name=bn(f.coordDim,o)),null==f.type&&Ry(e,x,f.name)&&(f.type="ordinal");return l},Vy=function(t,e){return e=e||{},zy(e.coordDimensions||[],t,{dimsDef:e.dimensionsDefine||t.dimensionsDefine,encodeDef:e.encodeDefine||t.encodeDefine,dimCount:e.dimensionsCount,generateCoord:e.generateCoord,generateCoordCount:e.generateCoordCount})},Gy=du.each,Fy=du.isString,jy={enableDataStack:function(t,e,n){var i,r,a,o,s=(n=n||{}).byIndex,l=n.stackedCoordDimension,u=!(!t||!t.get("stack"));if(Gy(e,function(t,n){Fy(t)&&(e[n]=t={name:t}),u&&!t.isExtraCoord&&(s||i||!t.ordinalMeta||(i=t),r||"ordinal"===t.type||"time"===t.type||l&&l!==t.coordDim||(r=t))}),!r||s||i||(s=!0),r){a="__\0ecstackresult",o="__\0ecstackedover",i&&(i.createInvertedIndices=!0);var c=r.coordDim,h=r.type,d=0;Gy(e,function(t){t.coordDim===c&&d++}),e.push({name:a,coordDim:c,coordDimIndex:d,type:h,isExtraCoord:!0,isCalculationCoord:!0}),d++,e.push({name:o,coordDim:o,coordDimIndex:d,type:h,isExtraCoord:!0,isCalculationCoord:!0})}return{stackedDimension:r&&r.name,stackedByDimension:i&&i.name,isStackedByIndex:s,stackedOverDimension:o,stackResultDimension:a}},isDimensionStacked:wn,getStackedDimension:function(t,e){return wn(t,e)?t.getCalculationInfo("stackResultDimension"):e}},Hy=_g.SOURCE_FORMAT_ORIGINAL,Wy=py.getDimensionTypeByAxis,Yy=Hh.getDataItemValue,Xy=xg.getCoordSysDefineBySeries,Uy=jy.enableDataStack,qy=function(t,e,n){n=n||{},Tg.isInstance(t)||(t=Tg.seriesDataToSource(t));var i,r=e.get("coordinateSystem"),a=vm.get(r),o=Xy(e);o&&(i=du.map(o.coordSysDims,function(t){var e={name:t},n=o.axisMap.get(t);if(n){var i=n.get("type");e.type=Wy(i)}return e})),i||(i=a&&(a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice())||["x","y"]);var s,l,u=Vy(t,{coordDimensions:i,generateCoord:n.generateCoord});o&&du.each(u,function(t,e){var n=t.coordDim,i=o.categoryAxisMap.get(n);i&&(null==s&&(s=e),t.ordinalMeta=i.getOrdinalMeta()),null!=t.otherDims.itemName&&(l=!0)}),l||null==s||(u[s].otherDims.itemName=0);var c=Uy(e,u),h=new Iy(u,e);h.setCalculationInfo(c);var d=null!=s&&function(t){if(t.sourceFormat===Hy){var e=function(t){for(var e=0;e<t.length&&null==t[e];)e++;return t[e]}(t.data||[]);return null!=e&&!du.isArray(Yy(e))}}(t)?function(t,e,n,i){return i===s?n:this.defaultDimValueGetter(t,e,n,i)}:null;return h.hasItemOption=!1,h.initData(t,null,d),h};Sn.prototype.parse=function(t){return t},Sn.prototype.getSetting=function(t){return this._setting[t]},Sn.prototype.contain=function(t){var e=this._extent;return t>=e[0]&&t<=e[1]},Sn.prototype.normalize=function(t){var e=this._extent;return e[1]===e[0]?.5:(t-e[0])/(e[1]-e[0])},Sn.prototype.scale=function(t){var e=this._extent;return t*(e[1]-e[0])+e[0]},Sn.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},Sn.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},Sn.prototype.getExtent=function(){return this._extent.slice()},Sn.prototype.setExtent=function(t,e){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(e)||(n[1]=e)},Sn.prototype.isBlank=function(){return this._isBlank},Sn.prototype.setBlank=function(t){this._isBlank=t},Sn.prototype.getLabel=null,Uh.enableClassExtend(Sn),Uh.enableClassManagement(Sn,{registerWhenExtend:!0});var Zy=Sn,Ky=du.createHashMap,$y=du.isObject,Jy=du.map;Mn.createByAxisModel=function(t){var e=t.option,n=e.data,i=n&&Jy(n,function(t){return $y(t)&&null!=t.value?t.value:t+""});return new Mn({categories:i,needCollect:!i,deduplication:!1!==e.dedplication})};var Qy=Mn.prototype;Qy.getOrdinal=function(t){return An(this).get(t)},Qy.parseAndCollect=function(t){var e,n=this._needCollect;if("string"!=typeof t&&!n)return t;if(n&&!this._deduplication)return e=this.categories.length,this.categories[e]=t,e;var i=An(this);return null==(e=i.get(t))&&(n?(e=this.categories.length,this.categories[e]=t,i.set(t,e)):e=NaN),e};var tx=Mn,ex=Zy.prototype,nx=Zy.extend({type:"ordinal",init:function(t,e){t&&!du.isArray(t)||(t=new tx({categories:t})),this._ordinalMeta=t,this._extent=e||[0,t.categories.length-1]},parse:function(t){return"string"==typeof t?this._ordinalMeta.getOrdinal(t):Math.round(t)},contain:function(t){return t=this.parse(t),ex.contain.call(this,t)&&null!=this._ordinalMeta.categories[t]},normalize:function(t){return ex.normalize.call(this,this.parse(t))},scale:function(t){return Math.round(ex.scale.call(this,t))},getTicks:function(){for(var t=[],e=this._extent,n=e[0];n<=e[1];)t.push(n),n++;return t},getLabel:function(t){if(!this.isBlank())return this._ordinalMeta.categories[t]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(t,e){this.unionExtent(t.getApproximateExtent(e))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:du.noop,niceExtent:du.noop});nx.create=function(){return new nx};var ix=nx,rx=Wp.round,ax={intervalScaleNiceTicks:function(t,e,n,i){var r={},a=t[1]-t[0],o=r.interval=Wp.nice(a/e,!0);null!=n&&o<n&&(o=r.interval=n),null!=i&&o>i&&(o=r.interval=i);var s=r.intervalPrecision=Cn(o);return Pn(r.niceTickExtent=[rx(Math.ceil(t[0]/o)*o,s),rx(Math.floor(t[1]/o)*o,s)],t),r},getIntervalPrecision:Cn,fixExtent:Pn,intervalScaleGetTicks:function(t,e,n,i){var r=[];if(!t)return r;e[0]<n[0]&&r.push(e[0]);for(var a=n[0];a<=n[1]&&(r.push(a),(a=rx(a+t,i))!==r[r.length-1]);)if(r.length>1e4)return[];return e[1]>(r.length?r[r.length-1]:n[1])&&r.push(e[1]),r}},ox=Wp.round,sx=Zy.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(t,e){var n=this._extent;isNaN(t)||(n[0]=parseFloat(t)),isNaN(e)||(n[1]=parseFloat(e))},unionExtent:function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1]),sx.prototype.setExtent.call(this,e[0],e[1])},getInterval:function(){return this._interval},setInterval:function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=ax.getIntervalPrecision(t)},getTicks:function(){return ax.intervalScaleGetTicks(this._interval,this._extent,this._niceExtent,this._intervalPrecision)},getLabel:function(t,e){if(null==t)return"";var n=e&&e.precision;return null==n?n=Wp.getPrecisionSafe(t)||0:"auto"===n&&(n=this._intervalPrecision),t=ox(t,n,!0),Zp.addCommas(t)},niceTicks:function(t,e,n){t=t||5;var i=this._extent,r=i[1]-i[0];if(isFinite(r)){r<0&&(r=-r,i.reverse());var a=ax.intervalScaleNiceTicks(i,t,e,n);this._intervalPrecision=a.intervalPrecision,this._interval=a.interval,this._niceExtent=a.niceTickExtent}},niceExtent:function(t){var e=this._extent;if(e[0]===e[1])if(0!==e[0]){var n=e[0];t.fixMax?e[0]-=n/2:(e[1]+=n/2,e[0]-=n/2)}else e[1]=1;var i=e[1]-e[0];isFinite(i)||(e[0]=0,e[1]=1),this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var r=this._interval;t.fixMin||(e[0]=ox(Math.floor(e[0]/r)*r)),t.fixMax||(e[1]=ox(Math.ceil(e[1]/r)*r))}});sx.create=function(){return new sx};var lx=sx,ux=Wp.parsePercent,cx=jy.isDimensionStacked,hx="__ec_stack_",dx="undefined"!=typeof Float32Array?Float32Array:Array,fx={getLayoutOnAxis:function(t){var e=[],n=t.axis;if("category"===n.type){for(var i=n.getBandWidth(),r=0;r<t.count;r++)e.push(du.defaults({bandWidth:i,axisKey:"axis0",stackId:hx+r},t));var a=En(e),o=[];for(r=0;r<t.count;r++){var s=a.axis0[hx+r];s.offsetCenter=s.offset+s.width/2,o.push(s)}return o}},prepareLayoutBarSeries:kn,makeColumnLayout:Dn,retrieveColumnLayout:Ln,layout:function(t,e){var n=kn(t,e),i=Dn(n),r={},a={};du.each(n,function(t){var e=t.getData(),n=t.coordinateSystem,o=n.getBaseAxis(),s=Tn(t),l=i[On(o)][s],u=l.offset,c=l.width,h=n.getOtherAxis(o),d=t.get("barMinHeight")||0;r[s]=r[s]||[],a[s]=a[s]||[],e.setLayout({offset:u,size:c});for(var f=e.mapDimension(h.dim),p=e.mapDimension(o.dim),g=cx(e,f),m=h.isHorizontal(),v=Bn(o,h,g),y=0,x=e.count();y<x;y++){var _=e.get(f,y),b=e.get(p,y);if(!isNaN(_)){var w,S,M,A,C=_>=0?"p":"n",I=v;if(g&&(r[s][b]||(r[s][b]={p:v,n:v}),I=r[s][b][C]),m)w=I,S=(P=n.dataToPoint([_,b]))[1]+u,M=P[0]-v,A=c,Math.abs(M)<d&&(M=(M<0?-1:1)*d),g&&(r[s][b][C]+=M);else{var P=n.dataToPoint([b,_]);w=P[0]+u,S=I,M=c,A=P[1]-v,Math.abs(A)<d&&(A=(A<=0?-1:1)*d),g&&(r[s][b][C]+=A)}e.setItemLayout(y,{x:w,y:S,width:M,height:A})}}},this)},largeLayout:{seriesType:"bar",plan:Mv(),reset:function(t){if(Nn(t)&&Rn(t)){var e=t.getData(),n=t.coordinateSystem,i=n.getBaseAxis(),r=n.getOtherAxis(i),a=e.mapDimension(r.dim),o=e.mapDimension(i.dim),s=r.isHorizontal(),l=s?0:1,u=Ln(Dn([t]),i,t).width;return u>.5||(u=.5),{progress:function(t,e){for(var c,h=new dx(2*t.count),d=[],f=[],p=0;null!=(c=t.next());)f[l]=e.get(a,c),f[1-l]=e.get(o,c),d=n.dataToPoint(f,null,d),h[p++]=d[0],h[p++]=d[1];e.setLayout({largePoints:h,barWidth:u,valueAxisStart:Bn(i,r,!1),valueAxisHorizontal:s})}}}}}},px=lx.prototype,gx=Math.ceil,mx=Math.floor,vx=lx.extend({type:"time",getLabel:function(t){var e=this._stepLvl,n=new Date(t);return Zp.formatTime(e[0],n,this.getSetting("useUTC"))},niceExtent:function(t){var e=this._extent;if(e[0]===e[1]&&(e[0]-=864e5,e[1]+=864e5),e[1]===-1/0&&e[0]===1/0){var n=new Date;e[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),e[0]=e[1]-864e5}this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var i=this._interval;t.fixMin||(e[0]=Wp.round(mx(e[0]/i)*i)),t.fixMax||(e[1]=Wp.round(gx(e[1]/i)*i))},niceTicks:function(t,e,n){t=t||10;var i=this._extent,r=i[1]-i[0],a=r/t;null!=e&&a<e&&(a=e),null!=n&&a>n&&(a=n);var o=yx.length,s=function(t,e,n,i){for(;n<i;){var r=n+i>>>1;t[r][1]<e?n=r+1:i=r}return n}(yx,a,0,o),l=yx[Math.min(s,o-1)],u=l[1];if("year"===l[0]){var c=r/u;u*=Wp.nice(c/t,!0)}var h=this.getSetting("useUTC")?0:60*new Date(+i[0]||+i[1]).getTimezoneOffset()*1e3,d=[Math.round(gx((i[0]-h)/u)*u+h),Math.round(mx((i[1]-h)/u)*u+h)];ax.fixExtent(d,i),this._stepLvl=l,this._interval=u,this._niceExtent=d},parse:function(t){return+Wp.parseDate(t)}});du.each(["contain","normalize"],function(t){vx.prototype[t]=function(e){return px[t].call(this,this.parse(e))}});var yx=[["hh:mm:ss",1e3],["hh:mm:ss",5e3],["hh:mm:ss",1e4],["hh:mm:ss",15e3],["hh:mm:ss",3e4],["hh:mm\nMM-dd",6e4],["hh:mm\nMM-dd",3e5],["hh:mm\nMM-dd",6e5],["hh:mm\nMM-dd",9e5],["hh:mm\nMM-dd",18e5],["hh:mm\nMM-dd",36e5],["hh:mm\nMM-dd",72e5],["hh:mm\nMM-dd",216e5],["hh:mm\nMM-dd",432e5],["MM-dd\nyyyy",864e5],["MM-dd\nyyyy",1728e5],["MM-dd\nyyyy",2592e5],["MM-dd\nyyyy",3456e5],["MM-dd\nyyyy",432e6],["MM-dd\nyyyy",5184e5],["week",6048e5],["MM-dd\nyyyy",864e6],["week",12096e5],["week",18144e5],["month",26784e5],["week",36288e5],["month",53568e5],["week",36288e5],["quarter",8208e6],["month",107136e5],["month",13392e6],["half-year",16416e6],["month",214272e5],["month",26784e6],["year",32832e6]];vx.create=function(t){return new vx({useUTC:t.ecModel.get("useUTC")})};var xx=Zy.prototype,_x=lx.prototype,bx=Wp.getPrecisionSafe,Sx=Wp.round,Mx=Math.floor,Ax=Math.ceil,Cx=Math.pow,Ix=Math.log,Px=Zy.extend({type:"log",base:10,$constructor:function(){Zy.apply(this,arguments),this._originalScale=new lx},getTicks:function(){var t=this._originalScale,e=this._extent,n=t.getExtent();return du.map(_x.getTicks.call(this),function(i){var r=Wp.round(Cx(this.base,i));return r=i===e[0]&&t.__fixMin?zn(r,n[0]):r,i===e[1]&&t.__fixMax?zn(r,n[1]):r},this)},getLabel:_x.getLabel,scale:function(t){return t=xx.scale.call(this,t),Cx(this.base,t)},setExtent:function(t,e){var n=this.base;t=Ix(t)/Ix(n),e=Ix(e)/Ix(n),_x.setExtent.call(this,t,e)},getExtent:function(){var t=this.base,e=xx.getExtent.call(this);e[0]=Cx(t,e[0]),e[1]=Cx(t,e[1]);var n=this._originalScale,i=n.getExtent();return n.__fixMin&&(e[0]=zn(e[0],i[0])),n.__fixMax&&(e[1]=zn(e[1],i[1])),e},unionExtent:function(t){this._originalScale.unionExtent(t);var e=this.base;t[0]=Ix(t[0])/Ix(e),t[1]=Ix(t[1])/Ix(e),xx.unionExtent.call(this,t)},unionExtentFromData:function(t,e){this.unionExtent(t.getApproximateExtent(e))},niceTicks:function(t){t=t||10;var e=this._extent,n=e[1]-e[0];if(!(n===1/0||n<=0)){var i=Wp.quantity(n);for(t/n*i<=.5&&(i*=10);!isNaN(i)&&Math.abs(i)<1&&Math.abs(i)>0;)i*=10;var r=[Wp.round(Ax(e[0]/i)*i),Wp.round(Mx(e[1]/i)*i)];this._interval=i,this._niceExtent=r}},niceExtent:function(t){_x.niceExtent.call(this,t);var e=this._originalScale;e.__fixMin=t.fixMin,e.__fixMax=t.fixMax}});du.each(["contain","normalize"],function(t){Px.prototype[t]=function(e){return e=Ix(e)/Ix(this.base),xx[t].call(this,e)}}),Px.create=function(){return new Px};var Tx=fx.prepareLayoutBarSeries,Ox=fx.makeColumnLayout,kx=fx.retrieveColumnLayout,Dx={getScaleExtent:Vn,niceScaleExtent:function(t,e){var n=Vn(t,e),i=null!=e.getMin(),r=null!=e.getMax(),a=e.get("splitNumber");"log"===t.type&&(t.base=e.get("logBase"));var o=t.type;t.setExtent(n[0],n[1]),t.niceExtent({splitNumber:a,fixMin:i,fixMax:r,minInterval:"interval"===o||"time"===o?e.get("minInterval"):null,maxInterval:"interval"===o||"time"===o?e.get("maxInterval"):null});var s=e.get("interval");null!=s&&t.setInterval&&t.setInterval(s)},createScaleByModel:function(t,e){if(e=e||t.get("type"))switch(e){case"category":return new ix(t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),[1/0,-1/0]);case"value":return new lx;default:return(Zy.getClass(e)||lx).create(t)}},ifAxisCrossZero:function(t){var e=t.scale.getExtent(),n=e[0],i=e[1];return!(n>0&&i>0||n<0&&i<0)},makeLabelFormatter:Gn,getAxisRawValue:Fn,estimateLabelUnionRect:function(t){var e=t.model,n=t.scale;if(e.get("axisLabel.show")&&!n.isBlank()){var i,r,a="category"===t.type,o=n.getExtent();r=a?n.count():(i=n.getTicks()).length;var s,l=t.getLabelModel(),u=Gn(t),c=1;r>40&&(c=Math.ceil(r/40));for(var h=0;h<r;h+=c){var d=u(i?i[h]:o[0]+h),f=function(t,e){var n=(l.get("rotate")||0)*Math.PI/180,i=t.plain(),r=i.width,a=i.height,o=r*Math.cos(n)+a*Math.sin(n),s=r*Math.sin(n)+a*Math.cos(n);return new hc(i.x,i.y,o,s)}(l.getTextRect(d));s?s.union(f):s=f}return s}}},Ex={getMin:function(t){var e=this.option,n=t||null==e.rangeStart?e.min:e.rangeStart;return this.axis&&null!=n&&"dataMin"!==n&&"function"!=typeof n&&!du.eqNaN(n)&&(n=this.axis.scale.parse(n)),n},getMax:function(t){var e=this.option,n=t||null==e.rangeEnd?e.max:e.rangeEnd;return this.axis&&null!=n&&"dataMax"!==n&&"function"!=typeof n&&!du.eqNaN(n)&&(n=this.axis.scale.parse(n)),n},getNeedCrossZero:function(){var t=this.option;return null==t.rangeStart&&null==t.rangeEnd&&!t.scale},getCoordSysModel:du.noop,setRange:function(t,e){this.option.rangeStart=t,this.option.rangeEnd=e},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}},Lx=Pp.extendShape({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=e.width/2,a=e.height/2;t.moveTo(n,i-a),t.lineTo(n+r,i+a),t.lineTo(n-r,i+a),t.closePath()}}),Nx=Pp.extendShape({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=e.width/2,a=e.height/2;t.moveTo(n,i-a),t.lineTo(n+r,i),t.lineTo(n,i+a),t.lineTo(n-r,i),t.closePath()}}),Rx=Pp.extendShape({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.x,i=e.y,r=e.width/5*3,a=Math.max(r,e.height),o=r/2,s=o*o/(a-o),l=i-a+o+s,u=Math.asin(s/o),c=Math.cos(u)*o,h=Math.sin(u),d=Math.cos(u),f=.6*o,p=.7*o;t.moveTo(n-c,l+s),t.arc(n,l,o,Math.PI-u,2*Math.PI+u),t.bezierCurveTo(n+c-h*f,l+s+d*f,n,i-p,n,i),t.bezierCurveTo(n,i-p,n-c+h*f,l+s+d*f,n-c,l+s),t.closePath()}}),Bx=Pp.extendShape({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.height,i=e.width,r=e.x,a=e.y,o=i/3*2;t.moveTo(r,a),t.lineTo(r+o,a+n),t.lineTo(r,a+n/4*3),t.lineTo(r-o,a+n),t.lineTo(r,a),t.closePath()}}),zx={line:Pp.Line,rect:Pp.Rect,roundRect:Pp.Rect,square:Pp.Rect,circle:Pp.Circle,diamond:Nx,pin:Rx,arrow:Bx,triangle:Lx},Vx={line:function(t,e,n,i,r){r.x1=t,r.y1=e+i/2,r.x2=t+n,r.y2=e+i/2},rect:function(t,e,n,i,r){r.x=t,r.y=e,r.width=n,r.height=i},roundRect:function(t,e,n,i,r){r.x=t,r.y=e,r.width=n,r.height=i,r.r=Math.min(n,i)/4},square:function(t,e,n,i,r){var a=Math.min(n,i);r.x=t,r.y=e,r.width=a,r.height=a},circle:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.r=Math.min(n,i)/2},diamond:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.width=n,r.height=i},pin:function(t,e,n,i,r){r.x=t+n/2,r.y=e+i/2,r.width=n,r.height=i},arrow:function(t,e,n,i,r){r.x=t+n/2,r.y=e+i/2,r.width=n,r.height=i},triangle:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.width=n,r.height=i}},Gx={};du.each(zx,function(t,e){Gx[e]=new t});var Fx=Pp.extendShape({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},beforeBrush:function(){var t=this.style;"pin"===this.shape.symbolType&&"inside"===t.textPosition&&(t.textPosition=["50%","40%"],t.textAlign="center",t.textVerticalAlign="middle")},buildPath:function(t,e,n){var i=e.symbolType,r=Gx[i];"none"!==e.symbolType&&(r||(r=Gx[i="rect"]),Vx[i](e.x,e.y,e.width,e.height,r.shape),r.buildPath(t,r.shape,n))}}),jx={createSymbol:function(t,e,n,i,r,a,o){var s,l=0===t.indexOf("empty");return l&&(t=t.substr(5,1).toLowerCase()+t.substr(6)),s=0===t.indexOf("image://")?Pp.makeImage(t.slice(8),new hc(e,n,i,r),o?"center":"cover"):0===t.indexOf("path://")?Pp.makePath(t.slice(7),{},new hc(e,n,i,r),o?"center":"cover"):new Fx({shape:{symbolType:t,x:e,y:n,width:i,height:r}}),s.__isEmptyBrush=l,s.setColor=function(t,e){if("image"!==this.type){var n=this.style,i=this.shape;i&&"line"===i.symbolType?n.stroke=t:this.__isEmptyBrush?(n.stroke=t,n.fill=e||"#fff"):(n.fill&&(n.fill=t),n.stroke&&(n.stroke=t)),this.dirty(!1)}},s.setColor(a),s}},Hx=(ig.getLayoutRect,ig.getLayoutRect),Wx=jy.enableDataStack,Yx=jy.isDimensionStacked,Xx=jy.getStackedDimension,Ux={getLayoutRect:Hx,completeDimensions:zy,createDimensions:Vy,createSymbol:jx.createSymbol,createList:function(t){return qy(t.getSource(),t)},dataStack:{isDimensionStacked:Yx,enableDataStack:Wx,getStackedDimension:Xx},createScale:function(t,e){var n=e;zp.isInstance(e)||(n=new zp(e),du.mixin(n,Ex));var i=Dx.createScaleByModel(n);return i.setExtent(t[0],t[1]),Dx.niceScaleExtent(i,n),i},mixinAxisModelCommonMethods:function(t){du.mixin(t,Ex)}},qx=1e-8,Zx={contain:function(t,e,n){var i=0,r=t[0];if(!r)return!1;for(var a=1;a<t.length;a++){var o=t[a];i+=Xd(r[0],r[1],o[0],o[1],e,n),r=o}var s=t[0];return jn(r[0],s[0])&&jn(r[1],s[1])||(i+=Xd(r[0],r[1],s[0],s[1],e,n)),0!==i}};Hn.prototype={constructor:Hn,properties:null,getBoundingRect:function(){var t=this._rect;if(t)return t;for(var e=Number.MAX_VALUE,n=[e,e],i=[-e,-e],r=[],a=[],o=this.geometries,s=0;s<o.length;s++)if("polygon"===o[s].type){var l=o[s].exterior;bd.fromPoints(l,r,a),pu.min(n,n,r),pu.max(i,i,a)}return 0===s&&(n[0]=n[1]=i[0]=i[1]=0),this._rect=new hc(n[0],n[1],i[0]-n[0],i[1]-n[1])},contain:function(t){var e=this.getBoundingRect(),n=this.geometries;if(!e.contain(t[0],t[1]))return!1;t:for(var i=0,r=n.length;i<r;i++)if("polygon"===n[i].type){var a=n[i].exterior,o=n[i].interiors;if(Zx.contain(a,t[0],t[1])){for(var s=0;s<(o?o.length:0);s++)if(Zx.contain(o[s]))continue t;return!0}}return!1},transformTo:function(t,e,n,i){var r=this.getBoundingRect(),a=r.width/r.height;n?i||(i=n/a):n=a*i;for(var o=new hc(t,e,n,i),s=r.calculateTransform(o),l=this.geometries,u=0;u<l.length;u++)if("polygon"===l[u].type){for(var c=l[u].exterior,h=l[u].interiors,d=0;d<c.length;d++)pu.applyTransform(c[d],c[d],s);for(var f=0;f<(h?h.length:0);f++)for(d=0;d<h[f].length;d++)pu.applyTransform(h[f][d],h[f][d],s)}(r=this._rect).copy(o),this.center=[r.x+r.width/2,r.y+r.height/2]}};var Kx=Hn,$x=function(t){return function(t){if(!t.UTF8Encoding)return t;var e=t.UTF8Scale;null==e&&(e=1024);for(var n=t.features,i=0;i<n.length;i++)for(var r=n[i].geometry,a=r.coordinates,o=r.encodeOffsets,s=0;s<a.length;s++){var l=a[s];if("Polygon"===r.type)a[s]=Wn(l,o[s],e);else if("MultiPolygon"===r.type)for(var u=0;u<l.length;u++){var c=l[u];l[u]=Wn(c,o[s][u],e)}}t.UTF8Encoding=!1}(t),du.map(du.filter(t.features,function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0}),function(t){var e=t.properties,n=t.geometry,i=n.coordinates,r=[];"Polygon"===n.type&&r.push({type:"polygon",exterior:i[0],interiors:i.slice(1)}),"MultiPolygon"===n.type&&du.each(i,function(t){t[0]&&r.push({type:"polygon",exterior:t[0],interiors:t.slice(1)})});var a=new Kx(e.name,r,e.cp);return a.properties=e,a})},Jx=Hh.makeInner,Qx=Dx.makeLabelFormatter,t_=Jx(),e_={createAxisLabels:function(t){return"category"===t.type?function(t){var e=t.getLabelModel(),n=Yn(t,e);return!e.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}(t):function(t){var e=t.scale.getTicks(),n=Qx(t);return{labels:du.map(e,function(e,i){return{formattedLabel:n(e,i),rawLabel:t.scale.getLabel(e),tickValue:e}})}}(t)},createAxisTicks:function(t,e){return"category"===t.type?function(t,e){var n,i,r=Xn(t,"ticks"),a=$n(e),o=Un(r,a);if(o)return o;if(e.get("show")&&!t.scale.isBlank()||(n=[]),du.isFunction(a))n=Kn(t,a,!0);else if("auto"===a){var s=Yn(t,t.getLabelModel());i=s.labelCategoryInterval,n=du.map(s.labels,function(t){return t.tickValue})}else n=Zn(t,i=a,!0);return qn(r,a,{ticks:n,tickCategoryInterval:i})}(t,e):{ticks:t.scale.getTicks()}},calculateCategoryInterval:function(t){var e=function(t){var e=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}(t),n=Qx(t),i=(e.axisRotate-e.labelRotate)/180*Math.PI,r=t.scale,a=r.getExtent(),o=r.count();if(a[1]-a[0]<1)return 0;var s=1;o>40&&(s=Math.max(1,Math.floor(o/40)));for(var l=a[0],u=t.dataToCoord(l+1)-t.dataToCoord(l),c=Math.abs(u*Math.cos(i)),h=Math.abs(u*Math.sin(i)),d=0,f=0;l<=a[1];l+=s){var p=0,g=0,m=Xc.getBoundingRect(n(l),e.font,"center","top");p=1.3*m.width,g=1.3*m.height,d=Math.max(d,p,7),f=Math.max(f,g,7)}var v=d/c,y=f/h;isNaN(v)&&(v=1/0),isNaN(y)&&(y=1/0);var x=Math.max(0,Math.floor(Math.min(v,y))),_=t_(t.model),b=_.lastAutoInterval,w=_.lastTickCount;return null!=b&&null!=w&&Math.abs(b-x)<=1&&Math.abs(w-o)<=1&&b>x?x=b:(_.lastTickCount=o,_.lastAutoInterval=x),x}},n_=du.each,i_=du.map,r_=Wp.linearMap,a_=Wp.getPixelPrecision,o_=e_.createAxisTicks,s_=e_.createAxisLabels,l_=e_.calculateCategoryInterval,u_=[0,1],c_=function(t,e,n){this.dim=t,this.scale=e,this._extent=n||[0,0],this.inverse=!1,this.onBand=!1};c_.prototype={constructor:c_,contain:function(t){var e=this._extent,n=Math.min(e[0],e[1]),i=Math.max(e[0],e[1]);return t>=n&&t<=i},containData:function(t){return this.contain(this.dataToCoord(t))},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(t){return a_(t||this.scale.getExtent(),this._extent)},setExtent:function(t,e){var n=this._extent;n[0]=t,n[1]=e},dataToCoord:function(t,e){var n=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&"ordinal"===i.type&&Jn(n=n.slice(),i.count()),r_(t,u_,n,e)},coordToData:function(t,e){var n=this._extent,i=this.scale;this.onBand&&"ordinal"===i.type&&Jn(n=n.slice(),i.count());var r=r_(t,n,u_,e);return this.scale.scale(r)},pointToData:function(t,e){},getTicksCoords:function(t){var e=(t=t||{}).tickModel||this.getTickModel(),n=o_(this,e),i=n.ticks,r=i_(i,function(t){return{coord:this.dataToCoord(t),tickValue:t}},this),a=e.get("alignWithLabel");return function(t,e,n,i,r){function a(t,e){return c?t>e:t<e}var o=e.length;if(t.onBand&&!i&&o){var s,l=t.getExtent();if(1===o)e[0].coord=l[0],s=e[1]={coord:l[0]};else{var u=e[1].coord-e[0].coord;n_(e,function(t){t.coord-=u/2;var e=e||0;e%2>0&&(t.coord-=u/(2*(e+1)))}),s={coord:e[o-1].coord+u},e.push(s)}var c=l[0]>l[1];a(e[0].coord,l[0])&&(r?e[0].coord=l[0]:e.shift()),r&&a(l[0],e[0].coord)&&e.unshift({coord:l[0]}),a(l[1],s.coord)&&(r?s.coord=l[1]:e.pop()),r&&a(s.coord,l[1])&&e.push({coord:l[1]})}}(this,r,n.tickCategoryInterval,a,t.clamp),r},getViewLabels:function(){return s_(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var t=this._extent,e=this.scale.getExtent(),n=e[1]-e[0]+(this.onBand?1:0);0===n&&(n=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/n},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return l_(this)}};var h_=c_,d_=Bh,f_=Mu,p_=pu,g_=Hu,m_=Pp,v_=Wp,y_=Zp,x_=(Nv.throttle,Nv.throttle),__=Ux,b_=$x,w_=Iy,S_=zp,M_=h_,A_=Jl,C_=$x,I_={};du.each(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(t){I_[t]=du[t]});var P_={zrender:d_,matrix:f_,vector:p_,color:g_,graphic:m_,number:v_,format:y_,throttle:x_,helper:__,parseGeoJSON:b_,List:w_,Model:S_,Axis:M_,env:A_,parseGeoJson:C_,util:I_},T_=t(function(t,e){function n(t){return function(e,n,i){e=e&&e.toLowerCase(),yu.prototype[t].call(this,e,n,i)}}function i(){yu.call(this)}function r(t,e,n){function r(t,e){return t.__prio-e.__prio}n=n||{},"string"==typeof e&&(e=Z[e]),this.id,this.group,this._dom=t;var a=this._zr=Bh.init(t,{renderer:n.renderer||"canvas",devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height});this._throttledZrFlush=I(du.bind(a.flush,a),17),(e=du.clone(e))&&Lm(e,!0),this._theme=e,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new vm;var o=this._api=function(t){var e=t._coordSysMgr;return du.extend(new gm(t),{getCoordinateSystems:du.bind(e.getCoordinateSystems,e),getComponentByElement:function(e){for(;e;){var n=e.__ecComponentInfo;if(null!=n)return t._model.getComponent(n.mainType,n.index);e=e.parent}}})}(this);mc(q,r),mc(Y,r),this._scheduler=new ny(this,o,Y,q),yu.call(this),this._messageCenter=new i,this._initEvents(),this.resize=du.bind(this.resize,this),this._pendingActions=[],a.animation.on("frame",this._onframe,this),function(t,e){t.on("rendered",function(){e.trigger("rendered"),!t.animation.isFinished()||e[z]||e._scheduler.unfinished||e._pendingActions.length||e.trigger("finished")})}(a,this),du.setAsPrimitive(this)}function a(t,e,n){var i,r=this._model,a=this._coordSysMgr.getCoordinateSystems();e=Hh.parseFinder(r,e);for(var o=0;o<a.length;o++){var s=a[o];if(s[t]&&null!=(i=s[t](r,e,n)))return i}}function o(t){var e=t._model,n=t._scheduler;n.restorePipelines(e),n.prepareStageTasks(),d(t,"component",e,n),d(t,"chart",e,n),n.plan()}function s(t,e,n,i,r){function a(i){i&&i.__alive&&i[e]&&i[e](i.__model,o,t._api,n)}var o=t._model;if(i){var s={};s[i+"Id"]=n[i+"Id"],s[i+"Index"]=n[i+"Index"],s[i+"Name"]=n[i+"Name"];var l={mainType:i,query:s};r&&(l.subType=r);var u=n.excludeSeriesId;null!=u&&(u=du.createHashMap(Hh.normalizeToArray(u))),o&&o.eachComponent(l,function(e){u&&null!=u.get(e.id)||a(t["series"===i?"_chartsMap":"_componentsMap"][e.__viewId])},t)}else T(t._componentsViews.concat(t._chartsViews),a)}function l(t,e){var n=t._chartsMap,i=t._scheduler;e.eachSeries(function(t){i.updateStreamModes(t,n[t.__viewId])})}function u(t,e){var n=t.type,i=t.escapeConnect,r=H[n],a=r.actionInfo,l=(a.update||"update").split(":"),u=l.pop();l=null!=l[0]&&D(l[0]),this[B]=!0;var c=[t],h=!1;t.batch&&(h=!0,c=du.map(t.batch,function(e){return e=du.defaults(du.extend({},e),t),e.batch=null,e}));var d,f=[],p="highlight"===n||"downplay"===n;T(c,function(t){d=r.action(t,this._model,this._api),(d=d||du.extend({},t)).type=a.event||d.type,f.push(d),p?s(this,u,t,"series"):l&&s(this,u,t,l.main,l.sub)},this),"none"===u||p||l||(this[z]?(o(this),F.update.call(this,t),this[z]=!1):F[u].call(this,t)),d=h?{type:a.event||n,escapeConnect:i,batch:f}:f[0],this[B]=!1,!e&&this._messageCenter.trigger(d.type,d)}function c(t){for(var e=this._pendingActions;e.length;){var n=e.shift();u.call(this,n,t)}}function h(t){!t&&this.trigger("updated")}function d(t,e,n,i){function r(t){var e="_ec_"+t.id+"_"+t.type,r=s[e];if(!r){var c=D(t.type);(r=new(a?wv.getClass(c.main,c.sub):kv.getClass(c.sub))).init(n,u),s[e]=r,o.push(r),l.add(r.group)}t.__viewId=r.__id=e,r.__alive=!0,r.__model=t,r.group.__ecComponentInfo={mainType:t.mainType,index:t.componentIndex},!a&&i.prepareView(r,t,n,u)}for(var a="component"===e,o=a?t._componentsViews:t._chartsViews,s=a?t._componentsMap:t._chartsMap,l=t._zr,u=t._api,c=0;c<o.length;c++)o[c].__alive=!1;for(a?n.eachComponent(function(t,e){"series"!==t&&r(e)}):n.eachSeries(r),c=0;c<o.length;){var h=o[c];h.__alive?c++:(!a&&h.renderTask.dispose(),l.remove(h.group),h.dispose(n,u),o.splice(c,1),delete s[h.__id],h.__id=h.group.__ecComponentInfo=null)}}function f(t){t.clearColorPalette(),t.eachSeries(function(t){t.clearColorPalette()})}function p(t,e,n,i){!function(t,e,n,i,r){T(r||t._componentsViews,function(t){var r=t.__model;t.render(r,e,n,i),v(r,t)})}(t,e,n,i),T(t._chartsViews,function(t){t.__alive=!1}),g(t,e,n,i),T(t._chartsViews,function(t){t.__alive||t.remove(e,n)})}function g(t,e,n,i,r){var a,o=t._scheduler;e.eachSeries(function(e){var n=t._chartsMap[e.__viewId];n.__alive=!0;var s=n.renderTask;o.updatePayload(s,i),r&&r.get(e.uid)&&s.dirty(),a|=s.perform(o.getPerformArgs(s)),n.group.silent=!!e.get("silent"),v(e,n),function(t,e){var n=t.get("blendMode")||null;e.group.traverse(function(t){t.isGroup||t.style.blend!==n&&t.setStyle("blend",n),t.eachPendingDisplayable&&t.eachPendingDisplayable(function(t){t.setStyle("blend",n)})})}(e,n)}),o.unfinished|=a,function(t,e){var n=t.storage,i=0;n.traverse(function(t){t.isGroup||i++}),i>e.get("hoverLayerThreshold")&&!Jl.node&&n.traverse(function(t){t.isGroup||(t.useHoverLayer=!0)})}(t._zr,e),Vv(t._zr.dom,e)}function m(t,e){T(U,function(n){n(t,e)})}function v(t,e){var n=t.get("z"),i=t.get("zlevel");e.group.traverse(function(t){"group"!==t.type&&(null!=n&&(t.z=n),null!=i&&(t.zlevel=i))})}function y(t){J[t]=!1}function x(t){return $[Hh.getAttribute(t,et)]}function _(t,e){Z[t]=e}function b(t){X.push(t)}function w(t,e){A(Y,t,e,E)}function S(t,e,n){"function"==typeof e&&(n=e,e="");var i=k(t)?t.type:[t,t={event:e}][0];t.event=(t.event||i).toLowerCase(),e=t.event,P(V.test(i)&&V.test(e)),H[i]||(H[i]={action:n,actionInfo:t}),W[e]=i}function M(t,e){A(q,t,e,N,"visual")}function A(t,e,n,i,r){(O(e)||k(e))&&(n=e,e=i);var a=ny.wrapStageHandler(n,r);return a.__prio=e,a.__raw=n,t.push(a),a}function C(t,e){K[t]=e}var I=Nv.throttle,P=du.assert,T=du.each,O=du.isFunction,k=du.isObject,D=ug.parseClassType,E=1e3,L=1e3,N=3e3,R={PROCESSOR:{FILTER:E,STATISTIC:5e3},VISUAL:{LAYOUT:L,GLOBAL:2e3,CHART:N,COMPONENT:4e3,BRUSH:5e3}},B="__flagInMainProcess",z="__optionUpdated",V=/^[a-zA-Z0-9_]+$/;i.prototype.on=n("on"),i.prototype.off=n("off"),i.prototype.one=n("one"),du.mixin(i,yu);var G=r.prototype;G._onframe=function(){if(!this._disposed){var t=this._scheduler;if(this[z]){var e=this[z].silent;this[B]=!0,o(this),F.update.call(this),this[B]=!1,this[z]=!1,c.call(this,e),h.call(this,e)}else if(t.unfinished){var n=1,i=this._model;this._api,t.unfinished=!1;do{var r=+new Date;t.performSeriesTasks(i),t.performDataProcessorTasks(i),l(this,i),t.performVisualTasks(i),g(this,this._model,0,"remain"),n-=+new Date-r}while(n>0&&t.unfinished);t.unfinished||this._zr.flush()}}},G.getDom=function(){return this._dom},G.getZr=function(){return this._zr},G.setOption=function(t,e,n){var i;if(k(e)&&(n=e.lazyUpdate,i=e.silent,e=e.notMerge),this[B]=!0,!this._model||e){var r=new Sm(this._api),a=this._theme,s=this._model=new fm(null,null,a,r);s.scheduler=this._scheduler,s.init(null,null,a,r)}this._model.setOption(t,X),n?(this[z]={silent:i},this[B]=!1):(o(this),F.update.call(this),this._zr.flush(),this[z]=!1,this[B]=!1,c.call(this,i),h.call(this,i))},G.setTheme=function(){console.log("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},G.getModel=function(){return this._model},G.getOption=function(){return this._model&&this._model.getOption()},G.getWidth=function(){return this._zr.getWidth()},G.getHeight=function(){return this._zr.getHeight()},G.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},G.getRenderedCanvas=function(t){if(Jl.canvasSupported)return(t=t||{}).pixelRatio=t.pixelRatio||1,t.backgroundColor=t.backgroundColor||this._model.get("backgroundColor"),this._zr.painter.getRenderedCanvas(t)},G.getSvgDataUrl=function(){if(Jl.svgSupported){var t=this._zr,e=t.storage.getDisplayList();return du.each(e,function(t){t.stopAnimation(!0)}),t.painter.pathToDataUrl()}},G.getDataURL=function(t){var e=(t=t||{}).excludeComponents,n=this._model,i=[],r=this;T(e,function(t){n.eachComponent({mainType:t},function(t){var e=r._componentsMap[t.__viewId];e.group.ignore||(i.push(e),e.group.ignore=!0)})});var a="svg"===this._zr.painter.getType()?this.getSvgDataUrl():this.getRenderedCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return T(i,function(t){t.group.ignore=!1}),a},G.getConnectedDataURL=function(t){if(Jl.canvasSupported){var e=this.group,n=Math.min,i=Math.max;if(J[e]){var r=1/0,a=1/0,o=-1/0,s=-1/0,l=[],u=t&&t.pixelRatio||1;du.each($,function(u,c){if(u.group===e){var h=u.getRenderedCanvas(du.clone(t)),d=u.getDom().getBoundingClientRect();r=n(d.left,r),a=n(d.top,a),o=i(d.right,o),s=i(d.bottom,s),l.push({dom:h,left:d.left,top:d.top})}});var c=(o*=u)-(r*=u),h=(s*=u)-(a*=u),d=du.createCanvas();d.width=c,d.height=h;var f=Bh.init(d);return T(l,function(t){var e=new Pp.Image({style:{x:t.left*u-r,y:t.top*u-a,image:t.dom}});f.add(e)}),f.refreshImmediately(),d.toDataURL("image/"+(t&&t.type||"png"))}return this.getDataURL(t)}},G.convertToPixel=du.curry(a,"convertToPixel"),G.convertFromPixel=du.curry(a,"convertFromPixel"),G.containPixel=function(t,e){var n,i=this._model;return t=Hh.parseFinder(i,t),du.each(t,function(t,i){i.indexOf("Models")>=0&&du.each(t,function(t){var r=t.coordinateSystem;if(r&&r.containPoint)n|=!!r.containPoint(e);else if("seriesModels"===i){var a=this._chartsMap[t.__viewId];a&&a.containPoint&&(n|=a.containPoint(e,t))}},this)},this),!!n},G.getVisual=function(t,e){var n=this._model,i=(t=Hh.parseFinder(n,t,{defaultMainType:"series"})).seriesModel.getData(),r=t.hasOwnProperty("dataIndexInside")?t.dataIndexInside:t.hasOwnProperty("dataIndex")?i.indexOfRawIndex(t.dataIndex):null;return null!=r?i.getItemVisual(r,e):i.getVisual(e)},G.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},G.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]};var F={prepareAndUpdate:function(t){o(this),F.update.call(this,t)},update:function(t){var e=this._model,n=this._api,i=this._zr,r=this._coordSysMgr,a=this._scheduler;if(e){a.restoreData(e,t),a.performSeriesTasks(e),r.create(e,n),a.performDataProcessorTasks(e,t),l(this,e),r.update(e,n),f(e),a.performVisualTasks(e,t),p(this,e,n,t);var o=e.get("backgroundColor")||"transparent";if(Jl.canvasSupported)i.setBackgroundColor(o);else{var s=Hu.parse(o);o=Hu.stringify(s,"rgb"),0===s[3]&&(o="transparent")}m(e,n)}},updateTransform:function(t){var e=this._model,n=this,i=this._api;if(e){var r=[];e.eachComponent(function(a,o){var s=n.getViewOfComponentModel(o);if(s&&s.__alive)if(s.updateTransform){var l=s.updateTransform(o,e,i,t);l&&l.update&&r.push(s)}else r.push(s)});var a=du.createHashMap();e.eachSeries(function(r){var o=n._chartsMap[r.__viewId];if(o.updateTransform){var s=o.updateTransform(r,e,i,t);s&&s.update&&a.set(r.uid,1)}else a.set(r.uid,1)}),f(e),this._scheduler.performVisualTasks(e,t,{setDirty:!0,dirtyMap:a}),g(n,e,0,t,a),m(e,this._api)}},updateView:function(t){var e=this._model;e&&(kv.markUpdateMethod(t,"updateView"),f(e),this._scheduler.performVisualTasks(e,t,{setDirty:!0}),p(this,this._model,this._api,t),m(e,this._api))},updateVisual:function(t){F.update.call(this,t)},updateLayout:function(t){F.update.call(this,t)}};G.resize=function(t){this._zr.resize(t);var e=this._model;if(this._loadingFX&&this._loadingFX.resize(),e){var n=e.resetOption("media"),i=t&&t.silent;this[B]=!0,n&&o(this),F.update.call(this),this[B]=!1,c.call(this,i),h.call(this,i)}},G.showLoading=function(t,e){if(k(t)&&(e=t,t=""),t=t||"default",this.hideLoading(),K[t]){var n=K[t](this._api,e),i=this._zr;this._loadingFX=n,i.add(n)}},G.hideLoading=function(){this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},G.makeActionFromEvent=function(t){var e=du.extend({},t);return e.type=W[t.type],e},G.dispatchAction=function(t,e){k(e)||(e={silent:!!e}),H[t.type]&&this._model&&(this[B]?this._pendingActions.push(t):(u.call(this,t,e.silent),e.flush?this._zr.flush(!0):!1!==e.flush&&Jl.browser.weChat&&this._throttledZrFlush(),c.call(this,e.silent),h.call(this,e.silent)))},G.appendData=function(t){var e=t.seriesIndex;this.getModel().getSeriesByIndex(e).appendData(t),this._scheduler.unfinished=!0},G.on=n("on"),G.off=n("off"),G.one=n("one");var j=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];G._initEvents=function(){T(j,function(t){this._zr.on(t,function(e){var n,i=this.getModel(),r=e.target;if("globalout"===t)n={};else if(r&&null!=r.dataIndex){var a=r.dataModel||i.getSeriesByIndex(r.seriesIndex);n=a&&a.getDataParams(r.dataIndex,r.dataType)||{}}else r&&r.eventData&&(n=du.extend({},r.eventData));n&&(n.event=e,n.type=t,this.trigger(t,n))},this)},this),T(W,function(t,e){this._messageCenter.on(e,function(t){this.trigger(e,t)},this)},this)},G.isDisposed=function(){return this._disposed},G.clear=function(){this.setOption({series:[]},!0)},G.dispose=function(){if(!this._disposed){this._disposed=!0,Hh.setAttribute(this.getDom(),et,"");var t=this._api,e=this._model;T(this._componentsViews,function(n){n.dispose(e,t)}),T(this._chartsViews,function(n){n.dispose(e,t)}),this._zr.dispose(),delete $[this.id]}},du.mixin(r,yu);var H={},W={},Y=[],X=[],U=[],q=[],Z={},K={},$={},J={},Q=new Date-0,tt=new Date-0,et="_echarts_instance_",nt={},it=y;M(2e3,Rv),b(Lm),w(5e3,Bm),C("default",Fv),S({type:"highlight",event:"highlight",update:"highlight"},du.noop),S({type:"downplay",event:"downplay",update:"downplay"},du.noop),_("light",ry),_("dark",sy),e.version="4.1.0",e.dependencies={zrender:"4.0.4"},e.PRIORITY=R,e.init=function(t,e,n){var i=x(t);if(i)return i;var a=new r(t,e,n);return a.id="ec_"+Q++,$[a.id]=a,Hh.setAttribute(t,et,a.id),function(t){function e(t,e){for(var i=0;i<t.length;i++)t[i][n]=e}var n="__connectUpdateStatus";T(W,function(i,r){t._messageCenter.on(r,function(i){if(J[t.group]&&0!==t[n]){if(i&&i.escapeConnect)return;var r=t.makeActionFromEvent(i),a=[];T($,function(e){e!==t&&e.group===t.group&&a.push(e)}),e(a,0),T(a,function(t){1!==t[n]&&t.dispatchAction(r)}),e(a,2)}})})}(a),a},e.connect=function(t){if(du.isArray(t)){var e=t;t=null,T(e,function(e){null!=e.group&&(t=e.group)}),t=t||"g_"+tt++,T(e,function(e){e.group=t})}return J[t]=!0,t},e.disConnect=y,e.disconnect=it,e.dispose=function(t){"string"==typeof t?t=$[t]:t instanceof r||(t=x(t)),t instanceof r&&!t.isDisposed()&&t.dispose()},e.getInstanceByDom=x,e.getInstanceById=function(t){return $[t]},e.registerTheme=_,e.registerPreprocessor=b,e.registerProcessor=w,e.registerPostUpdate=function(t){U.push(t)},e.registerAction=S,e.registerCoordinateSystem=function(t,e){vm.register(t,e)},e.getCoordinateSystemDimensions=function(t){var e=vm.get(t);if(e)return e.getDimensionsInfo?e.getDimensionsInfo():e.dimensions.slice()},e.registerLayout=function(t,e){A(q,t,e,L,"layout")},e.registerVisual=M,e.registerLoading=C,e.extendComponentModel=function(t){return ug.extend(t)},e.extendComponentView=function(t){return wv.extend(t)},e.extendSeriesModel=function(t){return xv.extend(t)},e.extendChartView=function(t){return kv.extend(t)},e.setCanvasCreator=function(t){du.$override("createCanvas",t)},e.registerMap=function(t,e,n){e.geoJson&&!e.features&&(n=e.specialAreas,e=e.geoJson),"string"==typeof e&&(e="undefined"!=typeof JSON&&JSON.parse?JSON.parse(e):new Function("return ("+e+");")()),nt[t]={geoJson:e,specialAreas:n}},e.getMap=function(t){return nt[t]},e.dataTool={},function(){for(var t in P_)P_.hasOwnProperty(t)&&(e[t]=P_[t])}()}),O_=(T_.version,T_.dependencies,T_.PRIORITY,T_.init,T_.connect,T_.disConnect,T_.disconnect,T_.dispose,T_.getInstanceByDom,T_.getInstanceById,T_.registerTheme,T_.registerPreprocessor,T_.registerProcessor,T_.registerPostUpdate,T_.registerAction,T_.registerCoordinateSystem,T_.getCoordinateSystemDimensions,T_.registerLayout,T_.registerVisual,T_.registerLoading,T_.extendComponentModel,T_.extendComponentView,T_.extendSeriesModel,T_.extendChartView,T_.setCanvasCreator,T_.registerMap,T_.getMap,T_.dataTool,xv.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(t,e){return qy(this.getSource(),this)},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clipOverflow:!0,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}}),$m.retrieveRawValue),k_={getDefaultLabel:function(t,e){var n=t.mapDimension("defaultedLabel",!0),i=n.length;if(1===i)return O_(t,e,n[0]);if(i){for(var r=[],a=0;a<n.length;a++){var o=O_(t,e,n[a]);r.push(o)}return r.join(" ")}}},D_=jx.createSymbol,E_=Wp.parsePercent,L_=k_.getDefaultLabel,N_=Qn.prototype,R_=Qn.getSymbolSize=function(t,e){var n=t.getItemVisual(e,"symbolSize");return n instanceof Array?n.slice():[+n,+n]};N_._createSymbol=function(t,e,n,i,r){this.removeAll();var a=e.getItemVisual(n,"color"),o=D_(t,-1,-1,2,2,a,r);o.attr({z2:100,culling:!0,scale:ti(i)}),o.drift=function(t,e){this.parent.drift(t,e)},this._symbolType=t,this.add(o)},N_.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(t)},N_.getSymbolPath=function(){return this.childAt(0)},N_.getScale=function(){return this.childAt(0).scale},N_.highlight=function(){this.childAt(0).trigger("emphasis")},N_.downplay=function(){this.childAt(0).trigger("normal")},N_.setZ=function(t,e){var n=this.childAt(0);n.zlevel=t,n.z=e},N_.setDraggable=function(t){var e=this.childAt(0);e.draggable=t,e.cursor=t?"move":"pointer"},N_.updateData=function(t,e,n){this.silent=!1;var i=t.getItemVisual(e,"symbol")||"circle",r=t.hostModel,a=R_(t,e),o=i!==this._symbolType;if(o){var s=t.getItemVisual(e,"symbolKeepAspect");this._createSymbol(i,t,e,a,s)}else(l=this.childAt(0)).silent=!1,Pp.updateProps(l,{scale:ti(a)},r,e);if(this._updateCommon(t,e,a,n),o){var l=this.childAt(0),u=n&&n.fadeIn,c={scale:l.scale.slice()};u&&(c.style={opacity:l.style.opacity}),l.scale=[0,0],u&&(l.style.opacity=0),Pp.initProps(l,c,r,e)}this._seriesModel=r};var B_=["itemStyle"],z_=["emphasis","itemStyle"],V_=["label"],G_=["emphasis","label"];N_._updateCommon=function(t,e,n,i){var r=this.childAt(0),a=t.hostModel,o=t.getItemVisual(e,"color");"image"!==r.type&&r.useStyle({strokeNoScale:!0});var s=i&&i.itemStyle,l=i&&i.hoverItemStyle,u=i&&i.symbolRotate,c=i&&i.symbolOffset,h=i&&i.labelModel,d=i&&i.hoverLabelModel,f=i&&i.hoverAnimation,p=i&&i.cursorStyle;if(!i||t.hasItemOption){var g=i&&i.itemModel?i.itemModel:t.getItemModel(e);s=g.getModel(B_).getItemStyle(["color"]),l=g.getModel(z_).getItemStyle(),u=g.getShallow("symbolRotate"),c=g.getShallow("symbolOffset"),h=g.getModel(V_),d=g.getModel(G_),f=g.getShallow("hoverAnimation"),p=g.getShallow("cursor")}else l=du.extend({},l);var m=r.style;r.attr("rotation",(u||0)*Math.PI/180||0),c&&r.attr("position",[E_(c[0],n[0]),E_(c[1],n[1])]),p&&r.attr("cursor",p),r.setColor(o,i&&i.symbolInnerColor),r.setStyle(s);var v=t.getItemVisual(e,"opacity");null!=v&&(m.opacity=v);var y=t.getItemVisual(e,"liftZ"),x=r.__z2Origin;null!=y?null==x&&(r.__z2Origin=r.z2,r.z2+=y):null!=x&&(r.z2=x,r.__z2Origin=null);var _=i&&i.useNameLabel;Pp.setLabelStyle(m,l,h,d,{labelFetcher:a,labelDataIndex:e,defaultText:function(e,n){return _?t.getName(e):L_(t,e)},isRectText:!0,autoColor:o}),r.off("mouseover").off("mouseout").off("emphasis").off("normal"),r.hoverStyle=l,Pp.setHoverStyle(r);var b=ti(n);if(f&&a.isAnimationEnabled()){var w=function(){if(!this.incremental){var t=b[1]/b[0];this.animateTo({scale:[Math.max(1.1*b[0],b[0]+3),Math.max(1.1*b[1],b[1]+3*t)]},400,"elasticOut")}},S=function(){this.incremental||this.animateTo({scale:b},400,"elasticOut")};r.on("mouseover",w).on("mouseout",S).on("emphasis",w).on("normal",S)}},N_.fadeOut=function(t,e){var n=this.childAt(0);this.silent=n.silent=!0,!(e&&e.keepLabel)&&(n.style.text=null),Pp.updateProps(n,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,t)},du.inherits(Qn,Pp.Group);var F_=Qn,j_=du.isObject,H_=ei.prototype;H_.updateData=function(t,e){e=ii(e);var n=this.group,i=t.hostModel,r=this._data,a=this._symbolCtor,o=ri(t);r||n.removeAll(),t.diff(r).add(function(i){var r=t.getItemLayout(i);if(ni(t,r,i,e)){var s=new a(t,i,o);s.attr("position",r),t.setItemGraphicEl(i,s),n.add(s)}}).update(function(s,l){var u=r.getItemGraphicEl(l),c=t.getItemLayout(s);ni(t,c,s,e)?(u?(u.updateData(t,s,o),Pp.updateProps(u,{position:c},i)):(u=new a(t,s)).attr("position",c),n.add(u),t.setItemGraphicEl(s,u)):n.remove(u)}).remove(function(t){var e=r.getItemGraphicEl(t);e&&e.fadeOut(function(){n.remove(e)})}).execute(),this._data=t},H_.isPersistent=function(){return!0},H_.updateLayout=function(){var t=this._data;t&&t.eachItemGraphicEl(function(e,n){var i=t.getItemLayout(n);e.attr("position",i)})},H_.incrementalPrepareUpdate=function(t){this._seriesScope=ri(t),this._data=null,this.group.removeAll()},H_.incrementalUpdate=function(t,e,n){n=ii(n);for(var i=t.start;i<t.end;i++){var r=e.getItemLayout(i);if(ni(e,r,i,n)){var a=new this._symbolCtor(e,i,this._seriesScope);a.traverse(function(t){t.isGroup||(t.incremental=t.useHoverLayer=!0)}),a.attr("position",r),this.group.add(a),e.setItemGraphicEl(i,a)}}},H_.remove=function(t){var e=this.group,n=this._data;n&&t?n.eachItemGraphicEl(function(t){t.fadeOut(function(){e.remove(t)})}):e.removeAll()};var W_=ei,Y_=jy.isDimensionStacked,X_=du.map,U_={prepareDataCoordInfo:function(t,e,n){var i,r=t.getBaseAxis(),a=t.getOtherAxis(r),o=function(t,e){var n=0,i=t.scale.getExtent();return"start"===e?n=i[0]:"end"===e?n=i[1]:i[0]>0?n=i[0]:i[1]<0&&(n=i[1]),n}(a,n),s=r.dim,l=a.dim,u=e.mapDimension(l),c=e.mapDimension(s),h="x"===l||"radius"===l?1:0,d=X_(t.dimensions,function(t){return e.mapDimension(t)}),f=e.getCalculationInfo("stackResultDimension");return(i|=Y_(e,d[0]))&&(d[0]=f),(i|=Y_(e,d[1]))&&(d[1]=f),{dataDimsForPoint:d,valueStart:o,valueAxisDim:l,baseAxisDim:s,stacked:!!i,valueDim:u,baseDim:c,baseDataOffset:h,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}},getStackedOnPoint:function(t,e,n,i){var r=NaN;t.stacked&&(r=n.get(n.getCalculationInfo("stackedOverDimension"),i)),isNaN(r)&&(r=t.valueStart);var a=t.baseDataOffset,o=[];return o[a]=n.get(t.baseDim,i),o[1-a]=r,e.dataToPoint(o)}},q_=U_.prepareDataCoordInfo,Z_=U_.getStackedOnPoint,K_=function(t,e,n,i,r,a,o,s){for(var l=function(t,e){var n=[];return e.diff(t).add(function(t){n.push({cmd:"+",idx:t})}).update(function(t,e){n.push({cmd:"=",idx:e,idx1:t})}).remove(function(t){n.push({cmd:"-",idx:t})}).execute(),n}(t,e),u=[],c=[],h=[],d=[],f=[],p=[],g=[],m=q_(r,e,o),v=q_(a,t,s),y=0;y<l.length;y++){var x=l[y],_=!0;switch(x.cmd){case"=":var b=t.getItemLayout(x.idx),w=e.getItemLayout(x.idx1);(isNaN(b[0])||isNaN(b[1]))&&(b=w.slice()),u.push(b),c.push(w),h.push(n[x.idx]),d.push(i[x.idx1]),g.push(e.getRawIndex(x.idx1));break;case"+":S=x.idx,u.push(r.dataToPoint([e.get(m.dataDimsForPoint[0],S),e.get(m.dataDimsForPoint[1],S)])),c.push(e.getItemLayout(S).slice()),h.push(Z_(m,r,e,S)),d.push(i[S]),g.push(e.getRawIndex(S));break;case"-":var S=x.idx,M=t.getRawIndex(S);M!==S?(u.push(t.getItemLayout(S)),c.push(a.dataToPoint([t.get(v.dataDimsForPoint[0],S),t.get(v.dataDimsForPoint[1],S)])),h.push(n[S]),d.push(Z_(v,a,t,S)),g.push(M)):_=!1}_&&(f.push(x),p.push(p.length))}p.sort(function(t,e){return g[t]-g[e]});var A=[],C=[],I=[],P=[],T=[];for(y=0;y<p.length;y++)S=p[y],A[y]=u[S],C[y]=c[S],I[y]=h[S],P[y]=d[S],T[y]=f[S];return{current:A,next:C,stackedOnCurrent:I,stackedOnNext:P,status:T}},$_=pu.min,J_=pu.max,Q_=pu.scaleAndAdd,tb=pu.copy,eb=[],nb=[],ib=[],rb={Polyline:rf.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:Mf(rf.prototype.brush),buildPath:function(t,e){var n=e.points,i=0,r=n.length,a=si(n,e.smoothConstraint);if(e.connectNulls){for(;r>0&&ai(n[r-1]);r--);for(;i<r&&ai(n[i]);i++);}for(;i<r;)i+=oi(t,n,i,r,r,1,a.min,a.max,e.smooth,e.smoothMonotone,e.connectNulls)+1}}),Polygon:rf.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:Mf(rf.prototype.brush),buildPath:function(t,e){var n=e.points,i=e.stackedOnPoints,r=0,a=n.length,o=e.smoothMonotone,s=si(n,e.smoothConstraint),l=si(i,e.smoothConstraint);if(e.connectNulls){for(;a>0&&ai(n[a-1]);a--);for(;r<a&&ai(n[r]);r++);}for(;r<a;){var u=oi(t,n,r,a,a,1,s.min,s.max,e.smooth,o,e.connectNulls);oi(t,i,r+u-1,u,a,-1,l.min,l.max,e.stackedOnSmooth,o,e.connectNulls),r+=u+1,t.closePath()}}})},ab=rb.Polyline,ob=rb.Polygon,sb=Wp.round,lb=U_.prepareDataCoordInfo,ub=U_.getStackedOnPoint,cb=(kv.extend({type:"line",init:function(){var t=new Pp.Group,e=new W_;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t},render:function(t,e,n){var i=t.coordinateSystem,r=this.group,a=t.getData(),o=t.getModel("lineStyle"),s=t.getModel("areaStyle"),l=a.mapArray(a.getItemLayout),u="polar"===i.type,c=this._coordSys,h=this._symbolDraw,d=this._polyline,f=this._polygon,p=this._lineGroup,g=t.get("animation"),m=!s.isEmpty(),v=s.get("origin"),y=function(t,e,n){if(!n.valueDim)return[];for(var i=[],r=0,a=e.count();r<a;r++)i.push(ub(n,t,e,r));return i}(i,a,lb(i,a,v)),x=t.get("showSymbol"),_=x&&!u&&function(t,e,n){var i=t.get("showAllSymbol"),r="auto"===i;if(!i||r){var a=n.getAxesByScale("ordinal")[0];if(a&&(!r||!function(t,e){var n=t.getExtent(),i=Math.abs(n[1]-n[0])/t.scale.count();isNaN(i)&&(i=0);for(var r=e.count(),a=Math.max(1,Math.round(r/5)),o=0;o<r;o+=a)if(1.5*F_.getSymbolSize(e,o)[t.isHorizontal()?1:0]>i)return!1;return!0}(a,e))){var o=e.mapDimension(a.dim),s={};return du.each(a.getViewLabels(),function(t){s[t.tickValue]=1}),function(t){return!s.hasOwnProperty(e.get(o,t))}}}}(t,a,i),b=this._data;b&&b.eachItemGraphicEl(function(t,e){t.__temp&&(r.remove(t),b.setItemGraphicEl(e,null))}),x||h.remove(),r.add(p);var w=!u&&t.get("step");d&&c.type===i.type&&w===this._step?(m&&!f?f=this._newPolygon(l,y,i,g):f&&!m&&(p.remove(f),f=this._polygon=null),p.setClipPath(hi(i,!1,!1,t)),x&&h.updateData(a,{isIgnore:_,clipShape:hi(i,!1,!0,t)}),a.eachItemGraphicEl(function(t){t.stopAnimation(!0)}),li(this._stackedOnPoints,y)&&li(this._points,l)||(g?this._updateAnimation(a,y,i,n,w,v):(w&&(l=di(l,i,w),y=di(y,i,w)),d.setShape({points:l}),f&&f.setShape({points:l,stackedOnPoints:y})))):(x&&h.updateData(a,{isIgnore:_,clipShape:hi(i,!1,!0,t)}),w&&(l=di(l,i,w),y=di(y,i,w)),d=this._newPolyline(l,i,g),m&&(f=this._newPolygon(l,y,i,g)),p.setClipPath(hi(i,!0,!1,t)));var S=function(t,e){var n=t.getVisual("visualMeta");if(n&&n.length&&t.count()&&"cartesian2d"===e.type){for(var i,r,a=n.length-1;a>=0;a--){var o=n[a].dimension,s=t.dimensions[o],l=t.getDimensionInfo(s);if("x"===(i=l&&l.coordDim)||"y"===i){r=n[a];break}}if(r){var u=e.getAxis(i),c=du.map(r.stops,function(t){return{coord:u.toGlobalCoord(u.dataToCoord(t.value)),color:t.color}}),h=c.length,d=r.outerColors.slice();h&&c[0].coord>c[h-1].coord&&(c.reverse(),d.reverse());var f=c[0].coord-10,p=c[h-1].coord+10,g=p-f;if(g<.001)return"transparent";du.each(c,function(t){t.offset=(t.coord-f)/g}),c.push({offset:h?c[h-1].offset:.5,color:d[1]||"transparent"}),c.unshift({offset:h?c[0].offset:.5,color:d[0]||"transparent"});var m=new Pp.LinearGradient(0,0,0,0,c,!0);return m[i]=f,m[i+"2"]=p,m}}}(a,i)||a.getVisual("color");d.useStyle(du.defaults(o.getLineStyle(),{fill:"none",stroke:S,lineJoin:"bevel"}));var M=t.get("smooth");if(M=ui(t.get("smooth")),d.setShape({smooth:M,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")}),f){var A=a.getCalculationInfo("stackedOnSeries"),C=0;f.useStyle(du.defaults(s.getAreaStyle(),{fill:S,opacity:.7,lineJoin:"bevel"})),A&&(C=ui(A.get("smooth"))),f.setShape({smooth:M,stackedOnSmooth:C,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")})}this._data=a,this._coordSys=i,this._stackedOnPoints=y,this._points=l,this._step=w,this._valueOrigin=v},dispose:function(){},highlight:function(t,e,n,i){var r=t.getData(),a=Hh.queryDataIndex(r,i);if(!(a instanceof Array)&&null!=a&&a>=0){var o=r.getItemGraphicEl(a);if(!o){var s=r.getItemLayout(a);if(!s)return;(o=new F_(r,a)).position=s,o.setZ(t.get("zlevel"),t.get("z")),o.ignore=isNaN(s[0])||isNaN(s[1]),o.__temp=!0,r.setItemGraphicEl(a,o),o.stopSymbolAnimation(!0),this.group.add(o)}o.highlight()}else kv.prototype.highlight.call(this,t,e,n,i)},downplay:function(t,e,n,i){var r=t.getData(),a=Hh.queryDataIndex(r,i);if(null!=a&&a>=0){var o=r.getItemGraphicEl(a);o&&(o.__temp?(r.setItemGraphicEl(a,null),this.group.remove(o)):o.downplay())}else kv.prototype.downplay.call(this,t,e,n,i)},_newPolyline:function(t){var e=this._polyline;return e&&this._lineGroup.remove(e),e=new ab({shape:{points:t},silent:!0,z2:10}),this._lineGroup.add(e),this._polyline=e,e},_newPolygon:function(t,e){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new ob({shape:{points:t,stackedOnPoints:e},silent:!0}),this._lineGroup.add(n),this._polygon=n,n},_updateAnimation:function(t,e,n,i,r,a){var o=this._polyline,s=this._polygon,l=t.hostModel,u=K_(this._data,t,this._stackedOnPoints,e,this._coordSys,n,this._valueOrigin,a),c=u.current,h=u.stackedOnCurrent,d=u.next,f=u.stackedOnNext;r&&(c=di(u.current,n,r),h=di(u.stackedOnCurrent,n,r),d=di(u.next,n,r),f=di(u.stackedOnNext,n,r)),o.shape.__points=u.current,o.shape.points=c,Pp.updateProps(o,{shape:{points:d}},l),s&&(s.setShape({points:c,stackedOnPoints:h}),Pp.updateProps(s,{shape:{points:d,stackedOnPoints:f}},l));for(var p=[],g=u.status,m=0;m<g.length;m++)if("="===g[m].cmd){var v=t.getItemGraphicEl(g[m].idx1);v&&p.push({el:v,ptIdx:m})}o.animators&&o.animators.length&&o.animators[0].during(function(){for(var t=0;t<p.length;t++)p[t].el.attr("position",o.shape.__points[p[t].ptIdx])})},remove:function(t){var e=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(t,i){t.__temp&&(e.remove(t),n.setItemGraphicEl(i,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}}),function(t,e,n){return{seriesType:t,performRawSeries:!0,reset:function(t,i,r){var a=t.getData(),o=t.get("symbol")||e,s=t.get("symbolSize"),l=t.get("symbolKeepAspect");if(a.setVisual({legendSymbol:n||o,symbol:o,symbolSize:s,symbolKeepAspect:l}),!i.isSeriesFiltered(t)){var u="function"==typeof s;return{dataEach:a.hasItemOption||u?function(e,n){if("function"==typeof s){var i=t.getRawValue(n),r=t.getDataParams(n);e.setItemVisual(n,"symbolSize",s(i,r))}if(e.hasItemOption){var a=e.getItemModel(n),o=a.getShallow("symbol",!0),l=a.getShallow("symbolSize",!0),u=a.getShallow("symbolKeepAspect",!0);null!=o&&e.setItemVisual(n,"symbol",o),null!=l&&e.setItemVisual(n,"symbolSize",l),null!=u&&e.setItemVisual(n,"symbolKeepAspect",u)}}:null}}}}}),hb=du.map,db=jy.isDimensionStacked,fb=function(t){return{seriesType:t,plan:Mv(),reset:function(t){var e=t.getData(),n=t.coordinateSystem,i=t.pipelineContext.large;if(n){var r=hb(n.dimensions,function(t){return e.mapDimension(t)}).slice(0,2),a=r.length,o=e.getCalculationInfo("stackResultDimension");return db(e,r[0])&&(r[0]=o),db(e,r[1])&&(r[1]=o),a&&{progress:function(t,e){for(var o=t.end-t.start,s=i&&new Float32Array(o*a),l=t.start,u=0,c=[],h=[];l<t.end;l++){var d;if(1===a)f=e.get(r[0],l),d=!isNaN(f)&&n.dataToPoint(f,null,h);else{var f=c[0]=e.get(r[0],l),p=c[1]=e.get(r[1],l);d=!isNaN(f)&&!isNaN(p)&&n.dataToPoint(c,null,h)}i?(s[u++]=d?d[0]:NaN,s[u++]=d?d[1]:NaN):e.setItemLayout(l,d&&d.slice()||[NaN,NaN])}i&&e.setLayout("symbolPoints",s)}}}}}},pb={average:function(t){for(var e=0,n=0,i=0;i<t.length;i++)isNaN(t[i])||(e+=t[i],n++);return 0===n?NaN:e/n},sum:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]||0;return e},max:function(t){for(var e=-1/0,n=0;n<t.length;n++)t[n]>e&&(e=t[n]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,n=0;n<t.length;n++)t[n]<e&&(e=t[n]);return isFinite(e)?e:NaN},nearest:function(t){return t[0]}},gb=function(t,e){return Math.round(t.length/2)},mb=function(t){return{seriesType:t,modifyOutputEnd:!0,reset:function(t,e,n){var i=t.getData(),r=t.get("sampling"),a=t.coordinateSystem;if("cartesian2d"===a.type&&r){var o,s=a.getBaseAxis(),l=a.getOtherAxis(s),u=s.getExtent(),c=u[1]-u[0],h=Math.round(i.count()/c);if(h>1)"string"==typeof r?o=pb[r]:"function"==typeof r&&(o=r),o&&t.setData(i.downSample(i.mapDimension(l.dim),1/h,o,gb))}}}},vb=function(t){this._axes={},this._dimList=[],this.name=t||""};vb.prototype={constructor:vb,type:"cartesian",getAxis:function(t){return this._axes[t]},getAxes:function(){return du.map(this._dimList,function(t){return this._axes[t]},this)},getAxesByScale:function(t){return t=t.toLowerCase(),du.filter(this.getAxes(),function(e){return e.scale.type===t})},addAxis:function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},dataToCoord:function(t){return this._dataCoordConvert(t,"dataToCoord")},coordToData:function(t){return this._dataCoordConvert(t,"coordToData")},_dataCoordConvert:function(t,e){for(var n=this._dimList,i=t instanceof Array?[]:{},r=0;r<n.length;r++){var a=n[r],o=this._axes[a];i[a]=o[e](t[a])}return i}};var yb=vb;fi.prototype={constructor:fi,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(t){var e=this.getAxis("x"),n=this.getAxis("y");return e.contain(e.toLocalCoord(t[0]))&&n.contain(n.toLocalCoord(t[1]))},containData:function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},dataToPoint:function(t,e,n){var i=this.getAxis("x"),r=this.getAxis("y");return n=n||[],n[0]=i.toGlobalCoord(i.dataToCoord(t[0])),n[1]=r.toGlobalCoord(r.dataToCoord(t[1])),n},clampData:function(t,e){var n=this.getAxis("x").scale,i=this.getAxis("y").scale,r=n.getExtent(),a=i.getExtent(),o=n.parse(t[0]),s=i.parse(t[1]);return e=e||[],e[0]=Math.min(Math.max(Math.min(r[0],r[1]),o),Math.max(r[0],r[1])),e[1]=Math.min(Math.max(Math.min(a[0],a[1]),s),Math.max(a[0],a[1])),e},pointToData:function(t,e){var n=this.getAxis("x"),i=this.getAxis("y");return e=e||[],e[0]=n.coordToData(n.toLocalCoord(t[0])),e[1]=i.coordToData(i.toLocalCoord(t[1])),e},getOtherAxis:function(t){return this.getAxis("x"===t.dim?"y":"x")}},du.inherits(fi,yb);var xb=fi,_b=function(t,e,n,i,r){h_.call(this,t,e,n),this.type=i||"value",this.position=r||"bottom"};_b.prototype={constructor:_b,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var t=this.position;return"top"===t||"bottom"===t},getGlobalExtent:function(t){var e=this.getExtent();return e[0]=this.toGlobalCoord(e[0]),e[1]=this.toGlobalCoord(e[1]),t&&e[0]>e[1]&&e.reverse(),e},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(t,e){return this.coordToData(this.toLocalCoord(t["x"===this.dim?0:1]),e)},toLocalCoord:null,toGlobalCoord:null},du.inherits(_b,h_);var bb=_b,wb={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},Sb={};Sb.categoryAxis=du.merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},wb),Sb.valueAxis=du.merge({boundaryGap:[0,0],splitNumber:5},wb),Sb.timeAxis=du.defaults({scale:!0,min:"dataMin",max:"dataMax"},Sb.valueAxis),Sb.logAxis=du.defaults({scale:!0,logBase:10},Sb.valueAxis);var Mb=Sb,Ab=ig.getLayoutParams,Cb=ig.mergeLayoutParam,Ib=["value","category","time","log"],Pb=function(t,e,n,i){du.each(Ib,function(r){e.extend({type:t+"Axis."+r,mergeDefaultAndTheme:function(e,i){var a=this.layoutMode,o=a?Ab(e):{},s=i.getTheme();du.merge(e,s.get(r+"Axis")),du.merge(e,this.getDefaultOption()),e.type=n(t,e),a&&Cb(e,o,a)},optionUpdated:function(){"category"===this.option.type&&(this.__ordinalMeta=tx.createByAxisModel(this))},getCategories:function(t){var e=this.option;if("category"===e.type)return t?e.data:this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:du.mergeAll([{},Mb[r+"Axis"],i],!0)})}),ug.registerSubTypeDefaulter(t+"Axis",du.curry(n,t))},Tb=ug.extend({type:"cartesian2dAxis",axis:null,init:function(){Tb.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){Tb.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){Tb.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});du.merge(Tb.prototype,Ex);var Ob={offset:0};Pb("x",Tb,pi,Ob),Pb("y",Tb,pi,Ob),ug.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});var kb=du.isObject,Db=du.each,Eb=du.map,Lb=du.indexOf,Nb=(du.retrieve,ig.getLayoutRect),Rb=Dx.createScaleByModel,Bb=Dx.ifAxisCrossZero,zb=Dx.niceScaleExtent,Vb=Dx.estimateLabelUnionRect,Gb=jy.getStackedDimension,Fb=mi.prototype;Fb.type="grid",Fb.axisPointerEnabled=!0,Fb.getRect=function(){return this._rect},Fb.update=function(t,e){var n=this._axesMap;this._updateScale(t,this.model),Db(n.x,function(t){zb(t.scale,t.model)}),Db(n.y,function(t){zb(t.scale,t.model)}),Db(n.x,function(t){vi(n,"y",t)}),Db(n.y,function(t){vi(n,"x",t)}),this.resize(this.model,e)},Fb.resize=function(t,e,n){function i(){Db(a,function(t){var e=t.isHorizontal(),n=e?[0,r.width]:[0,r.height],i=t.inverse?1:0;t.setExtent(n[i],n[1-i]),function(t,e){var n=t.getExtent(),i=n[0]+n[1];t.toGlobalCoord="x"===t.dim?function(t){return t+e}:function(t){return i-t+e},t.toLocalCoord="x"===t.dim?function(t){return t-e}:function(t){return i-t+e}}(t,e?r.x:r.y)})}var r=Nb(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()});this._rect=r;var a=this._axesList;i(),!n&&t.get("containLabel")&&(Db(a,function(t){if(!t.model.get("axisLabel.inside")){var e=Vb(t);if(e){var n=t.isHorizontal()?"height":"width",i=t.model.get("axisLabel.margin");r[n]-=e[n]+i,"top"===t.position?r.y+=e.height+i:"left"===t.position&&(r.x+=e.width+i)}}}),i())},Fb.getAxis=function(t,e){var n=this._axesMap[t];if(null!=n){if(null==e)for(var i in n)if(n.hasOwnProperty(i))return n[i];return n[e]}},Fb.getAxes=function(){return this._axesList.slice()},Fb.getCartesian=function(t,e){if(null!=t&&null!=e){var n="x"+t+"y"+e;return this._coordsMap[n]}kb(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,r=this._coordsList;i<r.length;i++)if(r[i].getAxis("x").index===t||r[i].getAxis("y").index===e)return r[i]},Fb.getCartesians=function(){return this._coordsList.slice()},Fb.convertToPixel=function(t,e,n){var i=this._findConvertTarget(t,e);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},Fb.convertFromPixel=function(t,e,n){var i=this._findConvertTarget(t,e);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},Fb._findConvertTarget=function(t,e){var n,i,r=e.seriesModel,a=e.xAxisModel||r&&r.getReferringComponents("xAxis")[0],o=e.yAxisModel||r&&r.getReferringComponents("yAxis")[0],s=e.gridModel,l=this._coordsList;return r?(n=r.coordinateSystem,Lb(l,n)<0&&(n=null)):a&&o?n=this.getCartesian(a.componentIndex,o.componentIndex):a?i=this.getAxis("x",a.componentIndex):o?i=this.getAxis("y",o.componentIndex):s&&s.coordinateSystem===this&&(n=this._coordsList[0]),{cartesian:n,axis:i}},Fb.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},Fb._initCartesian=function(t,e,n){function i(e){return function(n,i){if(gi(n,t)){var s=n.get("position");"x"===e?"top"!==s&&"bottom"!==s&&r[s="bottom"]&&(s="top"===s?"bottom":"top"):"left"!==s&&"right"!==s&&r[s="left"]&&(s="left"===s?"right":"left"),r[s]=!0;var l=new bb(e,Rb(n),[0,0],n.get("type"),s),u="category"===l.type;l.onBand=u&&n.get("boundaryGap"),l.inverse=n.get("inverse"),n.axis=l,l.model=n,l.grid=this,l.index=i,this._axesList.push(l),a[e][i]=l,o[e]++}}}var r={left:!1,right:!1,top:!1,bottom:!1},a={x:{},y:{}},o={x:0,y:0};if(e.eachComponent("xAxis",i("x"),this),e.eachComponent("yAxis",i("y"),this),!o.x||!o.y)return this._axesMap={},void(this._axesList=[]);this._axesMap=a,Db(a.x,function(e,n){Db(a.y,function(i,r){var a="x"+n+"y"+r,o=new xb(a);o.grid=this,o.model=t,this._coordsMap[a]=o,this._coordsList.push(o),o.addAxis(e),o.addAxis(i)},this)},this)},Fb._updateScale=function(t,e){function n(t,e,n){Db(t.mapDimension(e.dim,!0),function(n){e.scale.unionExtentFromData(t,Gb(t,n))})}Db(this._axesList,function(t){t.scale.setExtent(1/0,-1/0)}),t.eachSeries(function(t){if(_i(t)){var i=xi(t),r=i[0],a=i[1];if(!gi(r,e)||!gi(a,e))return;var o=this.getCartesian(r.componentIndex,a.componentIndex),s=t.getData(),l=o.getAxis("x"),u=o.getAxis("y");"list"===s.type&&(n(s,l),n(s,u))}},this)},Fb.getTooltipAxes=function(t){var e=[],n=[];return Db(this.getCartesians(),function(i){var r=null!=t&&"auto"!==t?i.getAxis(t):i.getBaseAxis(),a=i.getOtherAxis(r);Lb(e,r)<0&&e.push(r),Lb(n,a)<0&&n.push(a)}),{baseAxes:e,otherAxes:n}};var jb=["xAxis","yAxis"];mi.create=function(t,e){var n=[];return t.eachComponent("grid",function(i,r){var a=new mi(i,t,e);a.name="grid_"+r,a.resize(i,e,!0),i.coordinateSystem=a,n.push(a)}),t.eachSeries(function(t){if(_i(t)){var e=xi(t),n=e[0],i=e[1],r=n.getCoordSysModel().coordinateSystem;t.coordinateSystem=r.getCartesian(n.componentIndex,i.componentIndex)}}),n},mi.dimensions=mi.prototype.dimensions=xb.prototype.dimensions,vm.register("cartesian2d",mi);var Hb=du.retrieve,Wb=du.defaults,Yb=du.extend,Xb=du.each,Ub=Wp.isRadianAroundZero,qb=Wp.remRadian,Zb=jx.createSymbol,Kb=pu.applyTransform,$b=Math.PI,Jb=function(t,e){this.opt=e,this.axisModel=t,Wb(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new Pp.Group;var n=new Pp.Group({position:e.position.slice(),rotation:e.rotation});n.updateTransform(),this._transform=n.transform,this._dumbGroup=n};Jb.prototype={constructor:Jb,hasBuilder:function(t){return!!Qb[t]},add:function(t){Qb[t].call(this)},getGroup:function(){return this.group}};var Qb={axisLine:function(){var t=this.opt,e=this.axisModel;if(e.get("axisLine.show")){var n=this.axisModel.axis.getExtent(),i=this._transform,r=[n[0],0],a=[n[1],0];i&&(Kb(r,r,i),Kb(a,a,i));var o=Yb({lineCap:"round"},e.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new Pp.Line(Pp.subPixelOptimizeLine({anid:"line",shape:{x1:r[0],y1:r[1],x2:a[0],y2:a[1]},style:o,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1})));var s=e.get("axisLine.symbol"),l=e.get("axisLine.symbolSize"),u=e.get("axisLine.symbolOffset")||0;if("number"==typeof u&&(u=[u,u]),null!=s){"string"==typeof s&&(s=[s,s]),"string"!=typeof l&&"number"!=typeof l||(l=[l,l]);var c=l[0],h=l[1];Xb([{rotate:t.rotation+Math.PI/2,offset:u[0],r:0},{rotate:t.rotation-Math.PI/2,offset:u[1],r:Math.sqrt((r[0]-a[0])*(r[0]-a[0])+(r[1]-a[1])*(r[1]-a[1]))}],function(e,n){if("none"!==s[n]&&null!=s[n]){var i=Zb(s[n],-c/2,-h/2,c,h,o.stroke,!0),a=e.r+e.offset,l=[r[0]+a*Math.cos(t.rotation),r[1]-a*Math.sin(t.rotation)];i.attr({rotation:e.rotate,position:l,silent:!0}),this.group.add(i)}},this)}}},axisTickLabel:function(){var t=this.axisModel,e=this.opt,n=function(t,e,n){var i=e.axis;if(e.get("axisTick.show")&&!i.scale.isBlank()){for(var r=e.getModel("axisTick"),a=r.getModel("lineStyle"),o=r.get("length"),s=i.getTicksCoords(),l=[],u=[],c=t._transform,h=[],d=0;d<s.length;d++){var f=s[d].coord;l[0]=f,l[1]=0,u[0]=f,u[1]=n.tickDirection*o,c&&(Kb(l,l,c),Kb(u,u,c));var p=new Pp.Line(Pp.subPixelOptimizeLine({anid:"tick_"+s[d].tickValue,shape:{x1:l[0],y1:l[1],x2:u[0],y2:u[1]},style:Wb(a.getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")}),z2:2,silent:!0}));t.group.add(p),h.push(p)}return h}}(this,t,e);!function(t,e,n){var i=t.get("axisLabel.showMinLabel"),r=t.get("axisLabel.showMaxLabel");e=e||[],n=n||[];var a=e[0],o=e[1],s=e[e.length-1],l=e[e.length-2],u=n[0],c=n[1],h=n[n.length-1],d=n[n.length-2];!1===i?(Si(a),Si(u)):Mi(a,o)&&(i?(Si(o),Si(c)):(Si(a),Si(u))),!1===r?(Si(s),Si(h)):Mi(l,s)&&(r?(Si(l),Si(d)):(Si(s),Si(h)))}(t,function(t,e,n){var i=e.axis;if(Hb(n.axisLabelShow,e.get("axisLabel.show"))&&!i.scale.isBlank()){var r=e.getModel("axisLabel"),a=r.get("margin"),o=i.getViewLabels(),s=(Hb(n.labelRotate,r.get("rotate"))||0)*$b/180,l=tw(n.rotation,s,n.labelDirection),u=e.getCategories(!0),c=[],h=wi(e),d=e.get("triggerEvent");return Xb(o,function(o,s){var f=o.tickValue,p=o.formattedLabel,g=o.rawLabel,m=r;u&&u[f]&&u[f].textStyle&&(m=new zp(u[f].textStyle,r,e.ecModel));var v=m.getTextColor()||e.get("axisLine.lineStyle.color"),y=[i.dataToCoord(f),n.labelOffset+n.labelDirection*a],x=new Pp.Text({anid:"label_"+f,position:y,rotation:l.rotation,silent:h,z2:10});Pp.setTextStyle(x.style,m,{text:p,textAlign:m.getShallow("align",!0)||l.textAlign,textVerticalAlign:m.getShallow("verticalAlign",!0)||m.getShallow("baseline",!0)||l.textVerticalAlign,textFill:"function"==typeof v?v("category"===i.type?g:"value"===i.type?f+"":f,s):v}),d&&(x.eventData=bi(e),x.eventData.targetType="axisLabel",x.eventData.value=g),t._dumbGroup.add(x),x.updateTransform(),c.push(x),t.group.add(x),x.decomposeTransform()}),c}}(this,t,e),n)},axisName:function(){var t=this.opt,e=this.axisModel,n=Hb(t.axisName,e.get("name"));if(n){var i,r,a=e.get("nameLocation"),o=t.nameDirection,s=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,u=this.axisModel.axis.getExtent(),c=u[0]>u[1]?-1:1,h=["start"===a?u[0]-c*l:"end"===a?u[1]+c*l:(u[0]+u[1])/2,Ai(a)?t.labelOffset+o*l:0],d=e.get("nameRotate");null!=d&&(d=d*$b/180),Ai(a)?i=tw(t.rotation,null!=d?d:t.rotation,o):(i=function(t,e,n,i){var r,a,o=qb(n-t.rotation),s=i[0]>i[1],l="start"===e&&!s||"start"!==e&&s;return Ub(o-$b/2)?(a=l?"bottom":"top",r="center"):Ub(o-1.5*$b)?(a=l?"top":"bottom",r="center"):(a="middle",r=o<1.5*$b&&o>$b/2?l?"left":"right":l?"right":"left"),{rotation:o,textAlign:r,textVerticalAlign:a}}(t,a,d||0,u),null!=(r=t.axisNameAvailableWidth)&&(r=Math.abs(r/Math.sin(i.rotation)),!isFinite(r)&&(r=null)));var f=s.getFont(),p=e.get("nameTruncate",!0)||{},g=p.ellipsis,m=Hb(t.nameTruncateMaxWidth,p.maxWidth,r),v=null!=g&&null!=m?Zp.truncateText(n,m,f,g,{minChar:2,placeholder:p.placeholder}):n,y=e.get("tooltip",!0),x=e.mainType,_={componentType:x,name:n,$vars:["name"]};_[x+"Index"]=e.componentIndex;var b=new Pp.Text({anid:"name",__fullText:n,__truncatedText:v,position:h,rotation:i.rotation,silent:wi(e),z2:1,tooltip:y&&y.show?Yb({content:n,formatter:function(){return n},formatterParams:_},y):null});Pp.setTextStyle(b.style,s,{text:v,textFont:f,textFill:s.getTextColor()||e.get("axisLine.lineStyle.color"),textAlign:i.textAlign,textVerticalAlign:i.textVerticalAlign}),e.get("triggerEvent")&&(b.eventData=bi(e),b.eventData.targetType="axisName",b.eventData.name=n),this._dumbGroup.add(b),b.updateTransform(),this.group.add(b),b.decomposeTransform()}}},tw=Jb.innerTextLayout=function(t,e,n){var i,r,a=qb(e-t);return Ub(a)?(r=n>0?"top":"bottom",i="center"):Ub(a-$b)?(r=n>0?"bottom":"top",i="center"):(r="middle",i=a>0&&a<$b?n>0?"right":"left":n>0?"left":"right"),{rotation:a,textAlign:i,textVerticalAlign:r}},ew=Jb,nw=du.each,iw=du.curry,rw={collect:function(t,e){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(t,e,n){var i=e.getComponent("tooltip"),r=e.getComponent("axisPointer"),a=r.get("link",!0)||[],o=[];nw(n.getCoordinateSystems(),function(n){function s(i,s,l){var h=l.model.getModel("axisPointer",r),d=h.get("show");if(d&&("auto"!==d||i||Pi(h))){null==s&&(s=h.get("triggerTooltip"));var f=(h=i?function(t,e,n,i,r,a){var o=e.getModel("axisPointer"),s={};nw(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(t){s[t]=du.clone(o.get(t))}),s.snap="category"!==t.type&&!!a,"cross"===o.get("type")&&(s.type="line");var l=s.label||(s.label={});if(null==l.show&&(l.show=!1),"cross"===r){var u=o.get("label.show");if(l.show=null==u||u,!a){var c=s.lineStyle=o.get("crossStyle");c&&du.defaults(l,c.textStyle)}}return t.model.getModel("axisPointer",new zp(s,n,i))}(l,c,r,e,i,s):h).get("snap"),p=Ti(l.model),g=s||f||"category"===l.type,m=t.axesInfo[p]={key:p,axis:l,coordSys:n,axisPointerModel:h,triggerTooltip:s,involveSeries:g,snap:f,useHandle:Pi(h),seriesModels:[]};u[p]=m,t.seriesInvolved|=g;var v=function(t,e){for(var n=e.model,i=e.dim,r=0;r<t.length;r++){var a=t[r]||{};if(Ci(a[i+"AxisId"],n.id)||Ci(a[i+"AxisIndex"],n.componentIndex)||Ci(a[i+"AxisName"],n.name))return r}}(a,l);if(null!=v){var y=o[v]||(o[v]={axesInfo:{}});y.axesInfo[p]=m,y.mapper=a[v].mapper,m.linkGroup=y}}}if(n.axisPointerEnabled){var l=Ti(n.model),u=t.coordSysAxesInfo[l]={};t.coordSysMap[l]=n;var c=n.model.getModel("tooltip",i);if(nw(n.getAxes(),iw(s,!1,null)),n.getTooltipAxes&&i&&c.get("show")){var h="axis"===c.get("trigger"),d="cross"===c.get("axisPointer.type"),f=n.getTooltipAxes(c.get("axisPointer.axis"));(h||d)&&nw(f.baseAxes,iw(s,!d||"cross",h)),d&&nw(f.otherAxes,iw(s,"cross",!1))}}})}(n,t,e),n.seriesInvolved&&function(t,e){e.eachSeries(function(e){var n=e.coordinateSystem,i=e.get("tooltip.trigger",!0),r=e.get("tooltip.show",!0);n&&"none"!==i&&!1!==i&&"item"!==i&&!1!==r&&!1!==e.get("axisPointer.show",!0)&&nw(t.coordSysAxesInfo[Ti(n.model)],function(t){var i=t.axis;n.getAxis(i.dim)===i&&(t.seriesModels.push(e),null==t.seriesDataCount&&(t.seriesDataCount=0),t.seriesDataCount+=e.getData().count())})},this)}(n,t),n},fixValue:function(t){var e=Ii(t);if(e){var n=e.axisPointerModel,i=e.axis.scale,r=n.option,a=n.get("status"),o=n.get("value");null!=o&&(o=i.parse(o));var s=Pi(n);null==a&&(r.status=s?"show":"hide");var l=i.getExtent().slice();l[0]>l[1]&&l.reverse(),(null==o||o>l[1])&&(o=l[1]),o<l[0]&&(o=l[0]),r.value=o,s&&(r.status=e.axis.scale.isBlank()?"hide":"show")}},getAxisInfo:Ii,getAxisPointerModel:function(t){var e=Ii(t);return e&&e.axisPointerModel},makeKey:Ti},aw=T_.extendComponentView({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(t,e,n,i){this.axisPointerClass&&rw.fixValue(t),aw.superApply(this,"render",arguments),Oi(this,t,0,n,0,!0)},updateAxisPointer:function(t,e,n,i,r){Oi(this,t,0,n,0,!1)},remove:function(t,e){var n=this._axisPointer;n&&n.remove(e),aw.superApply(this,"remove",arguments)},dispose:function(t,e){ki(this,e),aw.superApply(this,"dispose",arguments)}}),ow=[];aw.registerAxisPointerClass=function(t,e){ow[t]=e},aw.getAxisPointerClass=function(t){return t&&ow[t]};var sw=aw,lw={layout:function(t,e,n){n=n||{};var i=t.coordinateSystem,r=e.axis,a={},o=r.getAxesOnZeroOf()[0],s=r.position,l=o?"onZero":s,u=r.dim,c=i.getRect(),h=[c.x,c.x+c.width,c.y,c.y+c.height],d={left:0,right:1,top:0,bottom:1,onZero:2},f=e.get("offset")||0,p="x"===u?[h[2]-f,h[3]+f]:[h[0]-f,h[1]+f];if(o){var g=o.toGlobalCoord(o.dataToCoord(0));p[d.onZero]=Math.max(Math.min(g,p[1]),p[0])}a.position=["y"===u?p[d[l]]:h[0],"x"===u?p[d[l]]:h[3]],a.rotation=Math.PI/2*("x"===u?0:1),a.labelDirection=a.tickDirection=a.nameDirection={top:-1,bottom:1,left:-1,right:1}[s],a.labelOffset=o?p[d[s]]-p[d.onZero]:0,e.get("axisTick.inside")&&(a.tickDirection=-a.tickDirection),du.retrieve(n.labelInside,e.get("axisLabel.inside"))&&(a.labelDirection=-a.labelDirection);var m=e.get("axisLabel.rotate");return a.labelRotate="top"===l?-m:m,a.z2=1,a}},uw=["axisLine","axisTickLabel","axisName"],cw=["splitArea","splitLine"],hw=sw.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(t,e,n,i){this.group.removeAll();var r=this._axisGroup;if(this._axisGroup=new Pp.Group,this.group.add(this._axisGroup),t.get("show")){var a=t.getCoordSysModel(),o=lw.layout(a,t),s=new ew(t,o);du.each(uw,s.add,s),this._axisGroup.add(s.getGroup()),du.each(cw,function(e){t.get(e+".show")&&this["_"+e](t,a)},this),Pp.groupTransition(r,this._axisGroup,t),hw.superCall(this,"render",t,e,n,i)}},remove:function(){this._splitAreaColors=null},_splitLine:function(t,e){var n=t.axis;if(!n.scale.isBlank()){var i=t.getModel("splitLine"),r=i.getModel("lineStyle"),a=r.get("color");a=du.isArray(a)?a:[a];for(var o=e.coordinateSystem.getRect(),s=n.isHorizontal(),l=0,u=n.getTicksCoords({tickModel:i}),c=[],h=[],d=r.getLineStyle(),f=0;f<u.length;f++){var p=n.toGlobalCoord(u[f].coord);s?(c[0]=p,c[1]=o.y,h[0]=p,h[1]=o.y+o.height):(c[0]=o.x,c[1]=p,h[0]=o.x+o.width,h[1]=p);var g=l++%a.length,m=u[f].tickValue;this._axisGroup.add(new Pp.Line(Pp.subPixelOptimizeLine({anid:null!=m?"line_"+u[f].tickValue:null,shape:{x1:c[0],y1:c[1],x2:h[0],y2:h[1]},style:du.defaults({stroke:a[g]},d),silent:!0})))}}},_splitArea:function(t,e){var n=t.axis;if(!n.scale.isBlank()){var i=t.getModel("splitArea"),r=i.getModel("areaStyle"),a=r.get("color"),o=e.coordinateSystem.getRect(),s=n.getTicksCoords({tickModel:i,clamp:!0});if(s.length){var l=a.length,u=this._splitAreaColors,c=du.createHashMap(),h=0;if(u)for(g=0;g<s.length;g++){var d=u.get(s[g].tickValue);if(null!=d){h=(d+(l-1)*g)%l;break}}var f=n.toGlobalCoord(s[0].coord),p=r.getAreaStyle();a=du.isArray(a)?a:[a];for(var g=1;g<s.length;g++){var m,v,y,x,_=n.toGlobalCoord(s[g].coord);n.isHorizontal()?(m=f,v=o.y,y=_-m,x=o.height,f=m+y):(m=o.x,v=f,y=o.width,f=v+(x=_-v));var b=s[g-1].tickValue;null!=b&&c.set(b,h),this._axisGroup.add(new Pp.Rect({anid:null!=b?"area_"+b:null,shape:{x:m,y:v,width:y,height:x},style:du.defaults({fill:a[h]},p),silent:!0})),h=(h+1)%l}this._splitAreaColors=c}}}});hw.extend({type:"xAxis"}),hw.extend({type:"yAxis"}),T_.extendComponentView({type:"grid",render:function(t,e){this.group.removeAll(),t.get("show")&&this.group.add(new Pp.Rect({shape:t.coordinateSystem.getRect(),style:du.defaults({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))}}),T_.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})}),T_.registerVisual(cb("line","circle","line")),T_.registerLayout(fb("line")),T_.registerProcessor(T_.PRIORITY.PROCESSOR.STATISTIC,mb("line"));var dw=xv.extend({type:"series.__base_bar__",getInitialData:function(t,e){return qy(this.getSource(),this)},getMarkerPosition:function(t){var e=this.coordinateSystem;if(e){var n=e.dataToPoint(e.clampData(t)),i=this.getData(),r=i.getLayout("offset"),a=i.getLayout("size");return n[e.getBaseAxis().isHorizontal()?0:1]+=r+a/2,n}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:5e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}}),fw=(dw.extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return!!this.get("large")&&this.get("progressive")},getProgressiveThreshold:function(){var t=this.get("progressiveThreshold"),e=this.get("largeThreshold");return e>t&&(t=e),t}}),k_.getDefaultLabel),pw={setLabel:function(t,e,n,i,r,a,o){var s=n.getModel("label"),l=n.getModel("emphasis.label");Pp.setLabelStyle(t,e,s,l,{labelFetcher:r,labelDataIndex:a,defaultText:fw(r.getData(),a),isRectText:!0,autoColor:i}),Di(t),Di(e)}},gw=qh([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),mw={getBarItemStyle:function(t){var e=gw(this,t);if(this.getBorderLineDash){var n=this.getBorderLineDash();n&&(e.lineDash=n)}return e}},vw=pw.setLabel,yw=["itemStyle","barBorderWidth"];du.extend(zp.prototype,mw),T_.extendChartView({type:"bar",render:function(t,e,n){this._updateDrawMode(t);var i=t.get("coordinateSystem");return"cartesian2d"!==i&&"polar"!==i||(this._isLargeDraw?this._renderLarge(t,e,n):this._renderNormal(t,e,n)),this.group},incrementalPrepareRender:function(t,e,n){this._clear(),this._updateDrawMode(t)},incrementalRender:function(t,e,n,i){this._incrementalRenderLarge(t,e)},_updateDrawMode:function(t){var e=t.pipelineContext.large;(null==this._isLargeDraw||e^this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},_renderNormal:function(t,e,n){var i,r=this.group,a=t.getData(),o=this._data,s=t.coordinateSystem,l=s.getBaseAxis();"cartesian2d"===s.type?i=l.isHorizontal():"polar"===s.type&&(i="angle"===l.dim);var u=t.isAnimationEnabled()?t:null;a.diff(o).add(function(e){if(a.hasValue(e)){var n=a.getItemModel(e),o=_w[s.type](a,e,n),l=xw[s.type](a,e,n,o,i,u);a.setItemGraphicEl(e,l),r.add(l),Ni(l,a,e,n,o,t,i,"polar"===s.type)}}).update(function(e,n){var l=o.getItemGraphicEl(n);if(a.hasValue(e)){var c=a.getItemModel(e),h=_w[s.type](a,e,c);l?Pp.updateProps(l,{shape:h},u,e):l=xw[s.type](a,e,c,h,i,u,!0),a.setItemGraphicEl(e,l),r.add(l),Ni(l,a,e,c,h,t,i,"polar"===s.type)}else r.remove(l)}).remove(function(t){var e=o.getItemGraphicEl(t);"cartesian2d"===s.type?e&&Ei(t,u,e):e&&Li(t,u,e)}).execute(),this._data=a},_renderLarge:function(t,e,n){this._clear(),Ri(t,this.group)},_incrementalRenderLarge:function(t,e){Ri(e,this.group,!0)},dispose:du.noop,remove:function(t){this._clear(t)},_clear:function(t){var e=this.group,n=this._data;t&&t.get("animation")&&n&&!this._isLargeDraw?n.eachItemGraphicEl(function(e){"sector"===e.type?Li(e.dataIndex,t,e):Ei(e.dataIndex,t,e)}):e.removeAll(),this._data=null}});var xw={cartesian2d:function(t,e,n,i,r,a,o){var s=new Pp.Rect({shape:du.extend({},i)});if(a){var l=s.shape,u=r?"height":"width",c={};l[u]=0,c[u]=i[u],Pp[o?"updateProps":"initProps"](s,{shape:c},a,e)}return s},polar:function(t,e,n,i,r,a,o){var s=i.startAngle<i.endAngle,l=new Pp.Sector({shape:du.defaults({clockwise:s},i)});if(a){var u=l.shape,c=r?"r":"endAngle",h={};u[c]=r?0:i.startAngle,h[c]=i[c],Pp[o?"updateProps":"initProps"](l,{shape:h},a,e)}return l}},_w={cartesian2d:function(t,e,n){var i=t.getItemLayout(e),r=function(t,e){var n=t.get(yw)||0;return Math.min(n,Math.abs(e.width),Math.abs(e.height))}(n,i),a=i.width>0?1:-1,o=i.height>0?1:-1;return{x:i.x+a*r/2,y:i.y+o*r/2,width:i.width-a*r,height:i.height-o*r}},polar:function(t,e,n){var i=t.getItemLayout(e);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle}}},bw=rf.extend({type:"largeBar",shape:{points:[]},buildPath:function(t,e){for(var n=e.points,i=this.__startPoint,r=this.__valueIdx,a=0;a<n.length;a+=2)i[this.__valueIdx]=n[a+r],t.moveTo(i[0],i[1]),t.lineTo(n[a],n[a+1])}}),ww=fx.layout,Sw=fx.largeLayout;T_.registerLayout(du.curry(ww,"bar")),T_.registerLayout(Sw),T_.registerVisual({seriesType:"bar",reset:function(t){t.getData().setVisual("legendSymbol","roundRect")}});var Mw=du.extend,Aw=du.isArray,Cw=function(t,e,n){e=Aw(e)&&{coordDimensions:e}||Mw({},e);var i=t.getSource(),r=Vy(i,e),a=new Iy(r,t);return a.initData(i,n),a},Iw={updateSelectedMap:function(t){this._targetList=du.isArray(t)?t.slice():[],this._selectTargetMap=du.reduce(t||[],function(t,e){return t.set(e.name,e),t},du.createHashMap())},select:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);"single"===this.get("selectedMode")&&this._selectTargetMap.each(function(t){t.selected=!1}),n&&(n.selected=!0)},unSelect:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);n&&(n.selected=!1)},toggleSelected:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);if(null!=n)return this[n.selected?"unSelect":"select"](t,e),n.selected},isSelected:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);return n&&n.selected}},Pw=Wp.getPercentWithPrecision,Tw=$m.retrieveRawAttr,Ow=T_.extendSeriesModel({type:"series.pie",init:function(t){Ow.superApply(this,"init",arguments),this.legendDataProvider=function(){return this.getRawData()},this.updateSelectedMap(this._createSelectableList()),this._defaultLabelLine(t)},mergeOption:function(t){Ow.superCall(this,"mergeOption",t),this.updateSelectedMap(this._createSelectableList())},getInitialData:function(t,e){return Cw(this,["value"])},_createSelectableList:function(){for(var t=this.getRawData(),e=t.mapDimension("value"),n=[],i=0,r=t.count();i<r;i++)n.push({name:t.getName(i),value:t.get(e,i),selected:Tw(t,i,"selected")});return n},getDataParams:function(t){var e=this.getData(),n=Ow.superCall(this,"getDataParams",t),i=[];return e.each(e.mapDimension("value"),function(t){i.push(t)}),n.percent=Pw(i,t,e.hostModel.get("percentPrecision")),n.$vars.push("percent"),n},_defaultLabelLine:function(t){Hh.defaultEmphasis(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,label:{rotate:!1,show:!0,position:"outer"},labelLine:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},animationType:"expansion",animationEasing:"cubicOut"}});du.mixin(Ow,Iw);var kw=zi.prototype;kw.updateData=function(t,e,n){function i(){a.stopAnimation(!0),a.animateTo({shape:{r:l.r+o.get("hoverOffset")}},300,"elasticOut")}function r(){a.stopAnimation(!0),a.animateTo({shape:{r:l.r}},300,"elasticOut")}var a=this.childAt(0),o=t.hostModel,s=t.getItemModel(e),l=t.getItemLayout(e),u=du.extend({},l);u.label=null,n?(a.setShape(u),"scale"===o.getShallow("animationType")?(a.shape.r=l.r0,Pp.initProps(a,{shape:{r:l.r}},o,e)):(a.shape.endAngle=l.startAngle,Pp.updateProps(a,{shape:{endAngle:l.endAngle}},o,e))):Pp.updateProps(a,{shape:u},o,e);var c=t.getItemVisual(e,"color");a.useStyle(du.defaults({lineJoin:"bevel",fill:c},s.getModel("itemStyle").getItemStyle())),a.hoverStyle=s.getModel("emphasis.itemStyle").getItemStyle();var h=s.getShallow("cursor");h&&a.attr("cursor",h),Bi(this,t.getItemLayout(e),o.isSelected(null,e),o.get("selectedOffset"),o.get("animation")),a.off("mouseover").off("mouseout").off("emphasis").off("normal"),s.get("hoverAnimation")&&o.isAnimationEnabled()&&a.on("mouseover",i).on("mouseout",r).on("emphasis",i).on("normal",r),this._updateLabel(t,e),Pp.setHoverStyle(this)},kw._updateLabel=function(t,e){var n=this.childAt(1),i=this.childAt(2),r=t.hostModel,a=t.getItemModel(e),o=t.getItemLayout(e).label,s=t.getItemVisual(e,"color");Pp.updateProps(n,{shape:{points:o.linePoints||[[o.x,o.y],[o.x,o.y],[o.x,o.y]]}},r,e),Pp.updateProps(i,{style:{x:o.x,y:o.y}},r,e),i.attr({rotation:o.rotation,origin:[o.x,o.y],z2:10});var l=a.getModel("label"),u=a.getModel("emphasis.label"),c=a.getModel("labelLine"),h=a.getModel("emphasis.labelLine");s=t.getItemVisual(e,"color");Pp.setLabelStyle(i.style,i.hoverStyle={},l,u,{labelFetcher:t.hostModel,labelDataIndex:e,defaultText:t.getName(e),autoColor:s,useInsideStyle:!!o.inside},{textAlign:o.textAlign,textVerticalAlign:o.verticalAlign,opacity:t.getItemVisual(e,"opacity")}),i.ignore=i.normalIgnore=!l.get("show"),i.hoverIgnore=!u.get("show"),n.ignore=n.normalIgnore=!c.get("show"),n.hoverIgnore=!h.get("show"),n.setStyle({stroke:s,opacity:t.getItemVisual(e,"opacity")}),n.setStyle(c.getModel("lineStyle").getLineStyle()),n.hoverStyle=h.getModel("lineStyle").getLineStyle();var d=c.get("smooth");d&&!0===d&&(d=.4),n.setShape({smooth:d})},du.inherits(zi,Pp.Group),kv.extend({type:"pie",init:function(){var t=new Pp.Group;this._sectorGroup=t},render:function(t,e,n,i){if(!i||i.from!==this.uid){var r=t.getData(),a=this._data,o=this.group,s=e.get("animation"),l=!a,u=t.get("animationType"),c=du.curry(function(t,e,n,i){var r=e.getData(),a=this.dataIndex,o=r.getName(a),s=e.get("selectedOffset");i.dispatchAction({type:"pieToggleSelect",from:t,name:o,seriesId:e.id}),r.each(function(t){Bi(r.getItemGraphicEl(t),r.getItemLayout(t),e.isSelected(r.getName(t)),s,n)})},this.uid,t,s,n),h=t.get("selectedMode");if(r.diff(a).add(function(t){var e=new zi(r,t);l&&"scale"!==u&&e.eachChild(function(t){t.stopAnimation(!0)}),h&&e.on("click",c),r.setItemGraphicEl(t,e),o.add(e)}).update(function(t,e){var n=a.getItemGraphicEl(e);n.updateData(r,t),n.off("click"),h&&n.on("click",c),o.add(n),r.setItemGraphicEl(t,n)}).remove(function(t){var e=a.getItemGraphicEl(t);o.remove(e)}).execute(),s&&l&&r.count()>0&&"scale"!==u){var d=r.getItemLayout(0),f=Math.max(n.getWidth(),n.getHeight())/2,p=du.bind(o.removeClipPath,o);o.setClipPath(this._createClipPath(d.cx,d.cy,f,d.startAngle,d.clockwise,p,t))}this._data=r}},dispose:function(){},_createClipPath:function(t,e,n,i,r,a,o){var s=new Pp.Sector({shape:{cx:t,cy:e,r0:0,r:n,startAngle:i,endAngle:i,clockwise:r}});return Pp.initProps(s,{shape:{endAngle:i+(r?1:-1)*Math.PI*2}},o,a),s},containPoint:function(t,e){var n=e.getData().getItemLayout(0);if(n){var i=t[0]-n.cx,r=t[1]-n.cy,a=Math.sqrt(i*i+r*r);return a<=n.r&&a>=n.r0}}});var Dw=function(t,e){du.each(e,function(e){e.update="updateView",T_.registerAction(e,function(n,i){var r={};return i.eachComponent({mainType:"series",subType:t,query:n},function(t){t[e.method]&&t[e.method](n.name,n.dataIndex);var i=t.getData();i.each(function(e){var n=i.getName(e);r[n]=t.isSelected(n)||!1})}),{name:n.name,selected:r}})})},Ew=du.createHashMap,Lw=function(t){return{getTargetSeries:function(e){var n={},i=Ew();return e.eachSeriesByType(t,function(t){t.__paletteScope=n,i.set(t.uid,t)}),i},reset:function(t,e){var n=t.getRawData(),i={},r=t.getData();r.each(function(t){var e=r.getRawIndex(t);i[e]=t}),n.each(function(e){var a=i[e],o=null!=a&&r.getItemVisual(a,"color",!0);if(o)n.setItemVisual(e,"color",o);else{var s=n.getItemModel(e).get("itemStyle.color")||t.getColorFromPalette(n.getName(e)||e+"",t.__paletteScope,n.count());n.setItemVisual(e,"color",s),null!=a&&r.setItemVisual(a,"color",s)}})}}},Nw=function(t,e,n,i){var r,a,o=t.getData(),s=[],l=!1;o.each(function(n){var i,u,c,h,d=o.getItemLayout(n),f=o.getItemModel(n),p=f.getModel("label"),g=p.get("position")||f.get("emphasis.label.position"),m=f.getModel("labelLine"),v=m.get("length"),y=m.get("length2"),x=(d.startAngle+d.endAngle)/2,_=Math.cos(x),b=Math.sin(x);r=d.cx,a=d.cy;var w="inside"===g||"inner"===g;if("center"===g)i=d.cx,u=d.cy,h="center";else{var S=(w?(d.r+d.r0)/2*_:d.r*_)+r,M=(w?(d.r+d.r0)/2*b:d.r*b)+a;if(i=S+3*_,u=M+3*b,!w){var A=S+_*(v+e-d.r),C=M+b*(v+e-d.r),I=A+(_<0?-1:1)*y,P=C;i=I+(_<0?-5:5),u=P,c=[[S,M],[A,C],[I,P]]}h=w?"center":_>0?"left":"right"}var T=p.getFont(),O=p.get("rotate")?_<0?-x+Math.PI:-x:0,k=t.getFormattedLabel(n,"normal")||o.getName(n),D=Xc.getBoundingRect(k,T,h,"top");l=!!O,d.label={x:i,y:u,position:g,height:D.height,len:v,len2:y,linePoints:c,textAlign:h,verticalAlign:"middle",rotation:O,inside:w},w||s.push(d.label)}),!l&&t.get("avoidLabelOverlap")&&function(t,e,n,i,r,a){for(var o=[],s=[],l=0;l<t.length;l++)t[l].x<e?o.push(t[l]):s.push(t[l]);for(Vi(s,e,n,i,1,0,a),Vi(o,e,n,i,-1,0,a),l=0;l<t.length;l++){var u=t[l].linePoints;if(u){var c=u[1][0]-u[2][0];t[l].x<e?u[2][0]=t[l].x+3:u[2][0]=t[l].x-3,u[1][1]=u[2][1]=t[l].y,u[1][0]=u[2][0]+c}}}(s,r,a,e,0,i)},Rw=Wp.parsePercent,Bw=Wp.linearMap,zw=2*Math.PI,Vw=Math.PI/180,Gw=function(t,e,n,i){e.eachSeriesByType(t,function(t){var e=t.getData(),i=e.mapDimension("value"),r=t.get("center"),a=t.get("radius");du.isArray(a)||(a=[0,a]),du.isArray(r)||(r=[r,r]);var o=n.getWidth(),s=n.getHeight(),l=Math.min(o,s),u=Rw(r[0],o),c=Rw(r[1],s),h=Rw(a[0],l/2),d=Rw(a[1],l/2),f=-t.get("startAngle")*Vw,p=t.get("minAngle")*Vw,g=0;e.each(i,function(t){!isNaN(t)&&g++});var m=e.getSum(i),v=Math.PI/(m||g)*2,y=t.get("clockwise"),x=t.get("roseType"),_=t.get("stillShowZeroSum"),b=e.getDataExtent(i);b[0]=0;var w=zw,S=0,M=f,A=y?1:-1;if(e.each(i,function(t,n){var i;if(isNaN(t))e.setItemLayout(n,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:y,cx:u,cy:c,r0:h,r:x?NaN:d});else{(i="area"!==x?0===m&&_?v:t*v:zw/g)<p?(i=p,w-=p):S+=t;var r=M+A*i;e.setItemLayout(n,{angle:i,startAngle:M,endAngle:r,clockwise:y,cx:u,cy:c,r0:h,r:x?Bw(t,b,[h,d]):d}),M=r}}),w<zw&&g)if(w<=.001){var C=zw/g;e.each(i,function(t,n){if(!isNaN(t)){var i=e.getItemLayout(n);i.angle=C,i.startAngle=f+A*n*C,i.endAngle=f+A*(n+1)*C}})}else v=w/S,M=f,e.each(i,function(t,n){if(!isNaN(t)){var i=e.getItemLayout(n),r=i.angle===p?p:t*v;i.startAngle=M,i.endAngle=M+A*r,M+=A*r}});Nw(t,d,o,s)})},Fw=function(t){return{seriesType:t,reset:function(t,e){var n=e.findComponents({mainType:"legend"});if(n&&n.length){var i=t.getData();i.filterSelf(function(t){for(var e=i.getName(t),r=0;r<n.length;r++)if(!n[r].isSelected(e))return!1;return!0})}}}};Dw("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),T_.registerVisual(Lw("pie")),T_.registerLayout(du.curry(Gw,"pie")),T_.registerProcessor(Fw("pie")),xv.extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(t,e){return qy(this.getSource(),this)},brushSelector:"point",getProgressive:function(){var t=this.option.progressive;return null==t?this.option.large?5e3:this.get("progressive"):t},getProgressiveThreshold:function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?1e4:this.get("progressiveThreshold"):t},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8}}});var jw=jx.createSymbol,Hw=Pp.extendShape({shape:{points:null},symbolProxy:null,buildPath:function(t,e){var n=e.points,i=e.size,r=this.symbolProxy,a=r.shape;if(!((t.getContext?t.getContext():t)&&i[0]<4))for(var o=0;o<n.length;){var s=n[o++],l=n[o++];isNaN(s)||isNaN(l)||(a.x=s-i[0]/2,a.y=l-i[1]/2,a.width=i[0],a.height=i[1],r.buildPath(t,a,!0))}},afterBrush:function(t){var e=this.shape,n=e.points,i=e.size;if(i[0]<4){this.setTransform(t);for(var r=0;r<n.length;){var a=n[r++],o=n[r++];isNaN(a)||isNaN(o)||t.fillRect(a-i[0]/2,o-i[1]/2,i[0],i[1])}this.restoreTransform(t)}},findDataIndex:function(t,e){for(var n=this.shape,i=n.points,r=n.size,a=Math.max(r[0],4),o=Math.max(r[1],4),s=i.length/2-1;s>=0;s--){var l=2*s,u=i[l]-a/2,c=i[l+1]-o/2;if(t>=u&&e>=c&&t<=u+a&&e<=c+o)return s}return-1}}),Ww=Gi.prototype;Ww.isPersistent=function(){return!this._incremental},Ww.updateData=function(t){this.group.removeAll();var e=new Hw({rectHover:!0,cursor:"default"});e.setShape({points:t.getLayout("symbolPoints")}),this._setCommon(e,t),this.group.add(e),this._incremental=null},Ww.updateLayout=function(t){if(!this._incremental){var e=t.getLayout("symbolPoints");this.group.eachChild(function(t){if(null!=t.startIndex){var n=2*(t.endIndex-t.startIndex),i=4*t.startIndex*2;e=new Float32Array(e.buffer,i,n)}t.setShape("points",e)})}},Ww.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clearIncremental(),t.count()>2e6?(this._incremental||(this._incremental=new op({silent:!0})),this.group.add(this._incremental)):this._incremental=null},Ww.incrementalUpdate=function(t,e){var n;this._incremental?(n=new Hw,this._incremental.addDisplayable(n,!0)):((n=new Hw({rectHover:!0,cursor:"default",startIndex:t.start,endIndex:t.end})).incremental=!0,this.group.add(n)),n.setShape({points:e.getLayout("symbolPoints")}),this._setCommon(n,e,!!this._incremental)},Ww._setCommon=function(t,e,n){var i=e.hostModel,r=e.getVisual("symbolSize");t.setShape("size",r instanceof Array?r:[r,r]),t.symbolProxy=jw(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var a=t.shape.size[0]<4;t.useStyle(i.getModel("itemStyle").getItemStyle(a?["color","shadowBlur","shadowColor"]:["color"]));var o=e.getVisual("color");o&&t.setColor(o),n||(t.seriesIndex=i.seriesIndex,t.on("mousemove",function(e){t.dataIndex=null;var n=t.findDataIndex(e.offsetX,e.offsetY);n>=0&&(t.dataIndex=n+(t.startIndex||0))}))},Ww.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},Ww._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()};var Yw=Gi;T_.extendChartView({type:"scatter",render:function(t,e,n){var i=t.getData();this._updateSymbolDraw(i,t).updateData(i),this._finished=!0},incrementalPrepareRender:function(t,e,n){var i=t.getData();this._updateSymbolDraw(i,t).incrementalPrepareUpdate(i),this._finished=!1},incrementalRender:function(t,e,n){this._symbolDraw.incrementalUpdate(t,e.getData()),this._finished=t.end===e.getData().count()},updateTransform:function(t,e,n){var i=t.getData();if(this.group.dirty(),!this._finished||i.count()>1e4||!this._symbolDraw.isPersistent())return{update:!0};var r=fb().reset(t);r.progress&&r.progress({start:0,end:i.count()},i),this._symbolDraw.updateLayout(i)},_updateSymbolDraw:function(t,e){var n=this._symbolDraw,i=e.pipelineContext.large;return n&&i===this._isLargeDraw||(n&&n.remove(),n=this._symbolDraw=i?new Yw:new W_,this._isLargeDraw=i,this.group.removeAll()),this.group.add(n.group),n},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},dispose:function(){}}),T_.registerVisual(cb("scatter","circle")),T_.registerLayout(fb("scatter")),du.inherits(Fi,h_);var Xw=Fi,Uw=Dx.getScaleExtent,qw=Dx.niceScaleExtent;ji.prototype.getIndicatorAxes=function(){return this._indicatorAxes},ji.prototype.dataToPoint=function(t,e){var n=this._indicatorAxes[e];return this.coordToPoint(n.dataToCoord(t),e)},ji.prototype.coordToPoint=function(t,e){var n=this._indicatorAxes[e].angle;return[this.cx+t*Math.cos(n),this.cy-t*Math.sin(n)]},ji.prototype.pointToData=function(t){var e=t[0]-this.cx,n=t[1]-this.cy,i=Math.sqrt(e*e+n*n);e/=i,n/=i;for(var r,a=Math.atan2(-n,e),o=1/0,s=-1,l=0;l<this._indicatorAxes.length;l++){var u=this._indicatorAxes[l],c=Math.abs(a-u.angle);c<o&&(r=u,s=l,o=c)}return[s,+(r&&r.coodToData(i))]},ji.prototype.resize=function(t,e){var n=t.get("center"),i=e.getWidth(),r=e.getHeight(),a=Math.min(i,r)/2;this.cx=Wp.parsePercent(n[0],i),this.cy=Wp.parsePercent(n[1],r),this.startAngle=t.get("startAngle")*Math.PI/180,this.r=Wp.parsePercent(t.get("radius"),a),du.each(this._indicatorAxes,function(t,e){t.setExtent(0,this.r);var n=this.startAngle+e*Math.PI*2/this._indicatorAxes.length;n=Math.atan2(Math.sin(n),Math.cos(n)),t.angle=n},this)},ji.prototype.update=function(t,e){function n(t){var e=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),n=t/e;return 2===n?n=5:n*=2,n*e}var i=this._indicatorAxes,r=this._model;du.each(i,function(t){t.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(e,n){if("radar"===e.get("coordinateSystem")&&t.getComponent("radar",e.get("radarIndex"))===r){var a=e.getData();du.each(i,function(t){t.scale.unionExtentFromData(a,a.mapDimension(t.dim))})}},this);var a=r.get("splitNumber");du.each(i,function(t,e){var i=Uw(t.scale,t.model);qw(t.scale,t.model);var r=t.model,o=t.scale,s=r.getMin(),l=r.getMax(),u=o.getInterval();if(null!=s&&null!=l)o.setExtent(+s,+l),o.setInterval((l-s)/a);else if(null!=s){var c;do{c=s+u*a,o.setExtent(+s,c),o.setInterval(u),u=n(u)}while(c<i[1]&&isFinite(c)&&isFinite(i[1]))}else if(null!=l){var h;do{h=l-u*a,o.setExtent(h,+l),o.setInterval(u),u=n(u)}while(h>i[0]&&isFinite(h)&&isFinite(i[0]))}else{o.getTicks().length-1>a&&(u=n(u));var d=Math.round((i[0]+i[1])/2/u)*u,f=Math.round(a/2);o.setExtent(Wp.round(d-f*u),Wp.round(d+(a-f)*u)),o.setInterval(u)}})},ji.dimensions=[],ji.create=function(t,e){var n=[];return t.eachComponent("radar",function(i){var r=new ji(i,t,e);n.push(r),i.coordinateSystem=r}),t.eachSeriesByType("radar",function(t){"radar"===t.get("coordinateSystem")&&(t.coordinateSystem=n[t.get("radarIndex")||0])}),n},vm.register("radar",ji);var Zw=Mb.valueAxis,Kw=(T_.extendComponentModel({type:"radar",optionUpdated:function(){var t=this.get("boundaryGap"),e=this.get("splitNumber"),n=this.get("scale"),i=this.get("axisLine"),r=this.get("axisTick"),a=this.get("axisLabel"),o=this.get("name"),s=this.get("name.show"),l=this.get("name.formatter"),u=this.get("nameGap"),c=this.get("triggerEvent"),h=du.map(this.get("indicator")||[],function(h){null!=h.max&&h.max>0&&!h.min?h.min=0:null!=h.min&&h.min<0&&!h.max&&(h.max=0);var d=o;if(null!=h.color&&(d=du.defaults({color:h.color},o)),h=du.merge(du.clone(h),{boundaryGap:t,splitNumber:e,scale:n,axisLine:i,axisTick:r,axisLabel:a,name:h.text,nameLocation:"end",nameGap:u,nameTextStyle:d,triggerEvent:c},!1),s||(h.name=""),"string"==typeof l){var f=h.name;h.name=l.replace("{value}",null!=f?f:"")}else"function"==typeof l&&(h.name=l(h.name,h));var p=du.extend(new zp(h,null,this.ecModel),Ex);return p.mainType="radar",p.componentIndex=this.componentIndex,p},this);this.getIndicatorModels=function(){return h}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:!0},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:!1,shape:"polygon",axisLine:du.merge({lineStyle:{color:"#bbb"}},Zw.axisLine),axisLabel:Hi(Zw.axisLabel,!1),axisTick:Hi(Zw.axisTick,!1),splitLine:Hi(Zw.splitLine,!0),splitArea:Hi(Zw.splitArea,!0),indicator:[]}}),["axisLine","axisTickLabel","axisName"]),$w=(T_.extendComponentView({type:"radar",render:function(t,e,n){this.group.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},_buildAxes:function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes(),i=du.map(n,function(t){return new ew(t.model,{position:[e.cx,e.cy],rotation:t.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})});du.each(i,function(t){du.each(Kw,t.add,t),this.group.add(t.getGroup())},this)},_buildSplitLineAndArea:function(t){function e(t,e,n){var i=n%e.length;return t[i]=t[i]||[],i}var n=t.coordinateSystem,i=n.getIndicatorAxes();if(i.length){var r=t.get("shape"),a=t.getModel("splitLine"),o=t.getModel("splitArea"),s=a.getModel("lineStyle"),l=o.getModel("areaStyle"),u=a.get("show"),c=o.get("show"),h=s.get("color"),d=l.get("color");h=du.isArray(h)?h:[h],d=du.isArray(d)?d:[d];var f=[],p=[];if("circle"===r)for(var g=i[0].getTicksCoords(),m=n.cx,v=n.cy,y=0;y<g.length;y++)u&&f[M=e(f,h,y)].push(new Pp.Circle({shape:{cx:m,cy:v,r:g[y].coord}})),c&&y<g.length-1&&p[M=e(p,d,y)].push(new Pp.Ring({shape:{cx:m,cy:v,r0:g[y].coord,r:g[y+1].coord}}));else{var x,_=du.map(i,function(t,e){var i=t.getTicksCoords();return x=null==x?i.length-1:Math.min(i.length-1,x),du.map(i,function(t){return n.coordToPoint(t.coord,e)})}),b=[];for(y=0;y<=x;y++){for(var w=[],S=0;S<i.length;S++)w.push(_[S][y]);if(w[0]&&w.push(w[0].slice()),u&&f[M=e(f,h,y)].push(new Pp.Polyline({shape:{points:w}})),c&&b){var M=e(p,d,y-1);p[M].push(new Pp.Polygon({shape:{points:w.concat(b)}}))}b=w.slice().reverse()}}var A=s.getLineStyle(),C=l.getAreaStyle();du.each(p,function(t,e){this.group.add(Pp.mergePath(t,{style:du.defaults({stroke:"none",fill:d[e%d.length]},C),silent:!0}))},this),du.each(f,function(t,e){this.group.add(Pp.mergePath(t,{style:du.defaults({fill:"none",stroke:h[e%h.length]},A),silent:!0}))},this)}}}),Zp.encodeHTML),Jw=xv.extend({type:"series.radar",dependencies:["radar"],init:function(t){Jw.superApply(this,"init",arguments),this.legendDataProvider=function(){return this.getRawData()}},getInitialData:function(t,e){return Cw(this,{generateCoord:"indicator_",generateCoordCount:1/0})},formatTooltip:function(t){var e=this.getData(),n=this.coordinateSystem.getIndicatorAxes(),i=this.getData().getName(t);return $w(""===i?this.name:i)+"<br/>"+du.map(n,function(n,i){var r=e.get(e.mapDimension(n.dim),t);return $w(n.name+" : "+r)}).join("<br />")},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbol:"emptyCircle",symbolSize:4}}),Qw=(T_.extendChartView({type:"radar",render:function(t,e,n){function i(e,n,i,r,a,o){i.removeAll();for(var s=0;s<n.length-1;s++){var l=function(t,e){var n=t.getItemVisual(e,"symbol")||"circle",i=t.getItemVisual(e,"color");if("none"!==n){var r=function(t){return du.isArray(t)||(t=[+t,+t]),t}(t.getItemVisual(e,"symbolSize")),a=jx.createSymbol(n,-1,-1,2,2,i);return a.attr({style:{strokeNoScale:!0},z2:100,scale:[r[0]/2,r[1]/2]}),a}}(r,a);l&&(l.__dimIdx=s,e[s]?(l.attr("position",e[s]),Pp[o?"initProps":"updateProps"](l,{position:n[s]},t,a)):l.attr("position",n[s]),i.add(l))}}function r(t){return du.map(t,function(t){return[a.cx,a.cy]})}var a=t.coordinateSystem,o=this.group,s=t.getData(),l=this._data;s.diff(l).add(function(e){var n=s.getItemLayout(e);if(n){var a=new Pp.Polygon,o=new Pp.Polyline,l={shape:{points:n}};a.shape.points=r(n),o.shape.points=r(n),Pp.initProps(a,l,t,e),Pp.initProps(o,l,t,e);var u=new Pp.Group,c=new Pp.Group;u.add(o),u.add(a),u.add(c),i(o.shape.points,n,c,s,e,!0),s.setItemGraphicEl(e,u)}}).update(function(e,n){var r=l.getItemGraphicEl(n),a=r.childAt(0),o=r.childAt(1),u=r.childAt(2),c={shape:{points:s.getItemLayout(e)}};c.shape.points&&(i(a.shape.points,c.shape.points,u,s,e,!1),Pp.updateProps(a,c,t),Pp.updateProps(o,c,t),s.setItemGraphicEl(e,r))}).remove(function(t){o.remove(l.getItemGraphicEl(t))}).execute(),s.eachItemGraphicEl(function(t,e){function n(){l.attr("ignore",p)}function i(){l.attr("ignore",f)}var r=s.getItemModel(e),a=t.childAt(0),l=t.childAt(1),u=t.childAt(2),c=s.getItemVisual(e,"color");o.add(t),a.useStyle(du.defaults(r.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:c})),a.hoverStyle=r.getModel("emphasis.lineStyle").getLineStyle();var h=r.getModel("areaStyle"),d=r.getModel("emphasis.areaStyle"),f=h.isEmpty()&&h.parentModel.isEmpty(),p=d.isEmpty()&&d.parentModel.isEmpty();p=p&&f,l.ignore=f,l.useStyle(du.defaults(h.getAreaStyle(),{fill:c,opacity:.7})),l.hoverStyle=d.getAreaStyle();var g=r.getModel("itemStyle").getItemStyle(["color"]),m=r.getModel("emphasis.itemStyle").getItemStyle(),v=r.getModel("label"),y=r.getModel("emphasis.label");u.eachChild(function(t){t.setStyle(g),t.hoverStyle=du.clone(m),Pp.setLabelStyle(t.style,t.hoverStyle,v,y,{labelFetcher:s.hostModel,labelDataIndex:e,labelDimIndex:t.__dimIdx,defaultText:s.get(s.dimensions[t.__dimIdx],e),autoColor:c,isRectText:!0})}),t.off("mouseover").off("mouseout").off("normal").off("emphasis"),t.on("emphasis",n).on("mouseover",n).on("normal",i).on("mouseout",i),Pp.setHoverStyle(t)}),this._data=s},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),function(t){t.eachSeriesByType("radar",function(t){var e=t.getData(),n=[],i=t.coordinateSystem;if(i){for(var r=i.getIndicatorAxes(),a=0;a<r.length;a++)e.each(e.mapDimension(r[a].dim),function(t,e){n[e]=n[e]||[],n[e][a]=i.dataToPoint(t,a)});e.each(function(t){n[t][0]&&n[t].push(n[t][0].slice()),e.setItemLayout(t,n[t])})}})}),tS=function(t){var e=t.polar;if(e){du.isArray(e)||(e=[e]);var n=[];du.each(e,function(e,i){e.indicator?(e.type&&!e.shape&&(e.shape=e.type),t.radar=t.radar||[],du.isArray(t.radar)||(t.radar=[t.radar]),t.radar.push(e)):n.push(e)}),t.polar=n}du.each(t.series,function(t){t&&"radar"===t.type&&t.polarIndex&&(t.radarIndex=t.polarIndex)})};T_.registerVisual(Lw("radar")),T_.registerVisual(cb("radar","circle")),T_.registerLayout(Qw),T_.registerProcessor(Fw("radar")),T_.registerPreprocessor(tS);var eS=pu.applyTransform;du.mixin(Wi,Ou),Yi.prototype={constructor:Yi,type:"view",dimensions:["x","y"],setBoundingRect:function(t,e,n,i){return this._rect=new hc(t,e,n,i),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(t,e,n,i){this.transformTo(t,e,n,i),this._viewRect=new hc(t,e,n,i)},transformTo:function(t,e,n,i){var r=this.getBoundingRect(),a=this._rawTransformable;a.transform=r.calculateTransform(new hc(t,e,n,i)),a.decomposeTransform(),this._updateTransform()},setCenter:function(t){t&&(this._center=t,this._updateCenterAndZoom())},setZoom:function(t){t=t||1;var e=this.zoomLimit;e&&(null!=e.max&&(t=Math.min(e.max,t)),null!=e.min&&(t=Math.max(e.min,t))),this._zoom=t,this._updateCenterAndZoom()},getDefaultCenter:function(){var t=this.getBoundingRect();return[t.x+t.width/2,t.y+t.height/2]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var t=this._rawTransformable.getLocalTransform(),e=this._roamTransformable,n=this.getDefaultCenter(),i=this.getCenter(),r=this.getZoom();i=pu.applyTransform([],i,t),n=pu.applyTransform([],n,t),e.origin=i,e.position=[n[0]-i[0],n[1]-i[1]],e.scale=[r,r],this._updateTransform()},_updateTransform:function(){var t=this._roamTransformable,e=this._rawTransformable;e.parent=t,t.updateTransform(),e.updateTransform(),Mu.copy(this.transform||(this.transform=[]),e.transform||Mu.create()),this._rawTransform=e.getLocalTransform(),this.invTransform=this.invTransform||[],Mu.invert(this.invTransform,this.transform),this.decomposeTransform()},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},dataToPoint:function(t,e,n){var i=e?this._rawTransform:this.transform;return n=n||[],i?eS(n,t,i):pu.copy(n,t)},pointToData:function(t){var e=this.invTransform;return e?eS([],t,e):[t[0],t[1]]},convertToPixel:du.curry(Xi,"dataToPoint"),convertFromPixel:du.curry(Xi,"pointToData"),containPoint:function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])}},du.mixin(Yi,Ou);for(var nS=Yi,iS=[126,25],rS=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],aS=0;aS<rS.length;aS++)for(var oS=0;oS<rS[aS].length;oS++)rS[aS][oS][0]/=10.5,rS[aS][oS][1]/=-14,rS[aS][oS][0]+=iS[0],rS[aS][oS][1]+=iS[1];var sS={"南海诸岛":[32,80],"广东":[0,-10],"香港":[10,5],"澳门":[-10,10],"天津":[5,5]},lS={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]},uS=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],cS=[function(t){"china"===t.map&&t.regions.push(new Kx("南海诸岛",du.map(rS,function(t){return{type:"polygon",exterior:t}}),iS))},function(t){du.each(t.regions,function(t){var e=sS[t.name];if(e){var n=t.center;n[0]+=e[0]/10.5,n[1]+=-e[1]/14}})},function(t){du.each(t.regions,function(t){var e=lS[t.name];if(e){var n=t.center;n[0]=e[0],n[1]=e[1]}})},function(t){if("china"===t.map)for(var e=0,n=t.regions.length;e<n;++e)"台湾"===t.regions[e].name&&t.regions[e].geometries.push({type:"polygon",exterior:uS[0]})}];Ui.prototype={constructor:Ui,type:"geo",dimensions:["lng","lat"],containCoord:function(t){for(var e=this.regions,n=0;n<e.length;n++)if(e[n].contain(t))return!0;return!1},loadGeoJson:function(t,e,n){try{this.regions=t?$x(t):[]}catch(t){throw"Invalid geoJson format\n"+t.message}e=e||{},n=n||{};for(var i=this.regions,r=du.createHashMap(),a=0;a<i.length;a++){var o=i[a].name;o=n.hasOwnProperty(o)?n[o]:o,i[a].name=o,r.set(o,i[a]),this.addGeoCoord(o,i[a].center);var s=e[o];s&&i[a].transformTo(s.left,s.top,s.width,s.height)}this._regionsMap=r,this._rect=null,du.each(cS,function(t){t(this)},this)},transformTo:function(t,e,n,i){var r=this.getBoundingRect();(r=r.clone()).y=-r.y-r.height;var a=this._rawTransformable;a.transform=r.calculateTransform(new hc(t,e,n,i)),a.decomposeTransform();var o=a.scale;o[1]=-o[1],a.updateTransform(),this._updateTransform()},getRegion:function(t){return this._regionsMap.get(t)},getRegionByCoord:function(t){for(var e=this.regions,n=0;n<e.length;n++)if(e[n].contain(t))return e[n]},addGeoCoord:function(t,e){this._nameCoordMap.set(t,e)},getGeoCoord:function(t){return this._nameCoordMap.get(t)},getBoundingRect:function(){if(this._rect)return this._rect;for(var t,e=this.regions,n=0;n<e.length;n++){var i=e[n].getBoundingRect();(t=t||i.clone()).union(i)}return this._rect=t||new hc(0,0,0,0)},dataToPoint:function(t,e,n){if("string"==typeof t&&(t=this.getGeoCoord(t)),t)return nS.prototype.dataToPoint.call(this,t,e,n)},convertToPixel:du.curry(qi,"dataToPoint"),convertFromPixel:du.curry(qi,"pointToData")},du.mixin(Ui,nS);var hS=Ui,dS={dimensions:hS.prototype.dimensions,create:function(t,e){var n=[];t.eachComponent("geo",function(t,i){var r=t.get("map"),a=T_.getMap(r),o=new hS(r+i,r,a&&a.geoJson,a&&a.specialAreas,t.get("nameMap"));o.zoomLimit=t.get("scaleLimit"),n.push(o),Ki(o,t),t.coordinateSystem=o,o.model=t,o.resize=Zi,o.resize(t,e)}),t.eachSeries(function(t){if("geo"===t.get("coordinateSystem")){var e=t.get("geoIndex")||0;t.coordinateSystem=n[e]}});var i={};return t.eachSeriesByType("map",function(t){if(!t.getHostGeoModel()){var e=t.getMapType();i[e]=i[e]||[],i[e].push(t)}}),du.each(i,function(t,i){var r=T_.getMap(i),a=du.map(t,function(t){return t.get("nameMap")}),o=new hS(i,i,r&&r.geoJson,r&&r.specialAreas,du.mergeAll(a));o.zoomLimit=du.retrieve.apply(null,du.map(t,function(t){return t.get("scaleLimit")})),n.push(o),o.resize=Zi,o.resize(t[0],e),du.each(t,function(t){t.coordinateSystem=o,Ki(o,t)})}),n},getFilledRegions:function(t,e,n){var i=(t||[]).slice();n=n||{};var r=T_.getMap(e),a=r&&r.geoJson;if(!a)return t;for(var o=du.createHashMap(),s=a.features,l=0;l<i.length;l++)o.set(i[l].name,i[l]);for(l=0;l<s.length;l++){var u=s[l].properties.name;o.get(u)||(n.hasOwnProperty(u)&&(u=n[u]),i.push({name:u}))}return i}};T_.registerCoordinateSystem("geo",dS);var fS=dS,pS=Zp.encodeHTML,gS=Zp.addCommas,mS=$m.retrieveRawAttr,vS=xv.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:!1,seriesGroup:[],init:function(t){vS.superApply(this,"init",arguments),this.updateSelectedMap(this._createSelectableList())},getInitialData:function(t){return Cw(this,["value"])},mergeOption:function(t){vS.superApply(this,"mergeOption",arguments),this.updateSelectedMap(this._createSelectableList())},_createSelectableList:function(){for(var t=this.getRawData(),e=t.mapDimension("value"),n=[],i=0,r=t.count();i<r;i++)n.push({name:t.getName(i),value:t.get(e,i),selected:mS(t,i,"selected")});return fS.getFilledRegions(n,this.getMapType(),this.option.nameMap)},getHostGeoModel:function(){var t=this.option.geoIndex;return null!=t?this.dependentModels.geo[t]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},_fillOption:function(t,e){},getRawValue:function(t){var e=this.getData();return e.get(e.mapDimension("value"),t)},getRegionModel:function(t){var e=this.getData();return e.getItemModel(e.indexOfName(t))},formatTooltip:function(t){for(var e=this.getData(),n=gS(this.getRawValue(t)),i=e.getName(t),r=this.seriesGroup,a=[],o=0;o<r.length;o++){var s=r[o].originalData.indexOfName(i),l=e.mapDimension("value");isNaN(r[o].originalData.get(l,s))||a.push(pS(r[o].name))}return a.join(", ")+"<br />"+pS(i+" : "+n)},getTooltipPosition:function(t){if(null!=t){var e=this.getData().getName(t),n=this.coordinateSystem,i=n.getRegion(e);return i&&n.dataToPoint(i.center)}},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}}}});du.mixin(vS,Iw);var yS="\0_ec_interaction_mutex";T_.registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){});var xS={take:function(t,e,n){$i(t)[e]=n},release:function(t,e,n){var i=$i(t);i[e]===n&&(i[e]=null)},isTaken:function(t,e){return!!$i(t)[e]}};du.mixin(Ji,yu);var _S=Ji,bS={updateViewOnPan:function(t,e,n){var i=t.target,r=i.position;r[0]+=e,r[1]+=n,i.dirty()},updateViewOnZoom:function(t,e,n,i){var r=t.target,a=t.zoomLimit,o=r.position,s=r.scale,l=t.zoom=t.zoom||1;if(l*=e,a){var u=a.min||0,c=a.max||1/0;l=Math.max(Math.min(c,l),u)}var h=l/t.zoom;t.zoom=l,o[0]-=(n-o[0])*(h-1),o[1]-=(i-o[1])*(h-1),s[0]*=h,s[1]*=h,r.dirty()}},wS={axisPointer:1,tooltip:1,brush:1},SS={onIrrelevantElement:function(t,e,n){var i=e.getComponentByElement(t.topTarget),r=i&&i.coordinateSystem;return i&&i!==n&&!wS[i.mainType]&&r&&r.model!==n}},MS=SS.onIrrelevantElement;ir.prototype={constructor:ir,draw:function(t,e,n,i,r){var a="geo"===t.mainType,o=t.getData&&t.getData();a&&e.eachComponent({mainType:"series",subType:"map"},function(e){o||e.getHostGeoModel()!==t||(o=e.getData())});var s=t.coordinateSystem,l=this.group,u=s.scale,c={position:s.position,scale:u};!l.childAt(0)||r?l.attr(c):Pp.updateProps(l,c,t),l.removeAll();var h=["itemStyle"],d=["emphasis","itemStyle"],f=["label"],p=["emphasis","label"],g=du.createHashMap();du.each(s.regions,function(e){var n=g.get(e.name)||g.set(e.name,new Pp.Group),i=new Pp.CompoundPath({shape:{paths:[]}});n.add(i);var r,s=(P=t.getRegionModel(e.name)||t).getModel(h),c=P.getModel(d),m=er(s),v=er(c),y=P.getModel(f),x=P.getModel(p);if(o){r=o.indexOfName(e.name);var _=o.getItemVisual(r,"color",!0);_&&(m.fill=_)}du.each(e.geometries,function(t){if("polygon"===t.type){i.shape.paths.push(new Pp.Polygon({shape:{points:t.exterior}}));for(var e=0;e<(t.interiors?t.interiors.length:0);e++)i.shape.paths.push(new Pp.Polygon({shape:{points:t.interiors[e]}}))}}),i.setStyle(m),i.style.strokeNoScale=!0,i.culling=!0;var b=y.get("show"),w=x.get("show"),S=o&&isNaN(o.get(o.mapDimension("value"),r)),M=o&&o.getItemLayout(r);if(a||S&&(b||w)||M&&M.showLabel){var A,C=a?e.name:r;(!o||r>=0)&&(A=t);var I=new Pp.Text({position:e.center.slice(),scale:[1/u[0],1/u[1]],z2:10,silent:!0});Pp.setLabelStyle(I.style,I.hoverStyle={},y,x,{labelFetcher:A,labelDataIndex:C,defaultText:e.name,useInsideStyle:!1},{textAlign:"center",textVerticalAlign:"middle"}),n.add(I)}if(o)o.setItemGraphicEl(r,n);else{var P=t.getRegionModel(e.name);i.eventData={componentType:"geo",geoIndex:t.componentIndex,name:e.name,region:P&&P.option||{}}}(n.__regions||(n.__regions=[])).push(e),Pp.setHoverStyle(n,v,{hoverSilentOnTouch:!!t.get("selectedMode")}),l.add(n)}),this._updateController(t,e,n),function(t,e,n,i,r){n.off("click"),n.off("mousedown"),e.get("selectedMode")&&(n.on("mousedown",function(){t._mouseDownFlag=!0}),n.on("click",function(a){if(t._mouseDownFlag){t._mouseDownFlag=!1;for(var o=a.target;!o.__regions;)o=o.parent;if(o){var s={type:("geo"===e.mainType?"geo":"map")+"ToggleSelect",batch:du.map(o.__regions,function(t){return{name:t.name,from:r.uid}})};s[e.mainType+"Id"]=e.id,i.dispatchAction(s),nr(e,n)}}}))}(this,t,l,n,i),nr(t,l)},remove:function(){this.group.removeAll(),this._controller.dispose(),this._controllerHost={}},_updateController:function(t,e,n){function i(){var e={type:"geoRoam",componentType:s};return e[s+"Id"]=t.id,e}var r=t.coordinateSystem,a=this._controller,o=this._controllerHost;o.zoomLimit=t.get("scaleLimit"),o.zoom=r.getZoom(),a.enable(t.get("roam")||!1);var s=t.mainType;a.off("pan").on("pan",function(t,e){this._mouseDownFlag=!1,bS.updateViewOnPan(o,t,e),n.dispatchAction(du.extend(i(),{dx:t,dy:e}))},this),a.off("zoom").on("zoom",function(t,e,r){if(this._mouseDownFlag=!1,bS.updateViewOnZoom(o,t,e,r),n.dispatchAction(du.extend(i(),{zoom:t,originX:e,originY:r})),this._updateGroup){var a=this.group,s=a.scale;a.traverse(function(t){"text"===t.type&&t.attr("scale",[1/s[0],1/s[1]])})}},this),a.setPointerChecker(function(e,i,a){return r.getViewRectAfterRoam().contain(i,a)&&!MS(e,n,t)})}};var AS=ir,CS=(T_.extendChartView({type:"map",render:function(t,e,n,i){if(!i||"mapToggleSelect"!==i.type||i.from!==this.uid){var r=this.group;if(r.removeAll(),!t.getHostGeoModel()){if(i&&"geoRoam"===i.type&&"series"===i.componentType&&i.seriesId===t.id)(a=this._mapDraw)&&r.add(a.group);else if(t.needsDrawMap){var a=this._mapDraw||new AS(n,!0);r.add(a.group),a.draw(t,e,n,this,i),this._mapDraw=a}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&e.getComponent("legend")&&this._renderSymbols(t,e,n)}}},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},_renderSymbols:function(t,e,n){var i=t.originalData,r=this.group;i.each(i.mapDimension("value"),function(e,n){if(!isNaN(e)){var a=i.getItemLayout(n);if(a&&a.point){var o=a.point,s=a.offset,l=new Pp.Circle({style:{fill:t.getData().getVisual("color")},shape:{cx:o[0]+9*s,cy:o[1],r:3},silent:!0,z2:s?8:10});if(!s){var u=t.mainSeries.getData(),c=i.getName(n),h=u.indexOfName(c),d=i.getItemModel(n),f=d.getModel("label"),p=d.getModel("emphasis.label"),g=u.getItemGraphicEl(h),m=du.retrieve2(t.getFormattedLabel(n,"normal"),c),v=du.retrieve2(t.getFormattedLabel(n,"emphasis"),m),y=function(){var t=Pp.setTextStyle({},p,{text:p.get("show")?v:null},{isRectText:!0,useInsideStyle:!1},!0);l.style.extendFrom(t),l.__mapOriginalZ2=l.z2,l.z2+=1},x=function(){Pp.setTextStyle(l.style,f,{text:f.get("show")?m:null,textPosition:f.getShallow("position")||"bottom"},{isRectText:!0,useInsideStyle:!1}),null!=l.__mapOriginalZ2&&(l.z2=l.__mapOriginalZ2,l.__mapOriginalZ2=null)};g.on("mouseover",y).on("mouseout",x).on("emphasis",y).on("normal",x),x()}r.add(l)}}})}}),{updateCenterAndZoom:function(t,e,n){var i=t.getZoom(),r=t.getCenter(),a=e.zoom,o=t.dataToPoint(r);if(null!=e.dx&&null!=e.dy&&(o[0]-=e.dx,o[1]-=e.dy,r=t.pointToData(o),t.setCenter(r)),null!=a){if(n){var s=n.min||0,l=n.max||1/0;a=Math.max(Math.min(i*a,l),s)/i}t.scale[0]*=a,t.scale[1]*=a;var u=t.position,c=(e.originX-u[0])*(a-1),h=(e.originY-u[1])*(a-1);u[0]-=c,u[1]-=h,t.updateTransform(),r=t.pointToData(o),t.setCenter(r),t.setZoom(a*i)}return{center:t.getCenter(),zoom:t.getZoom()}}}),IS=CS.updateCenterAndZoom;T_.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(t,e){var n=t.componentType||"series";e.eachComponent({mainType:n,query:t},function(e){var i=e.coordinateSystem;if("geo"===i.type){var r=IS(i,t,e.get("scaleLimit"));e.setCenter&&e.setCenter(r.center),e.setZoom&&e.setZoom(r.zoom),"series"===n&&du.each(e.seriesGroup,function(t){t.setCenter(r.center),t.setZoom(r.zoom)})}})});var PS=function(t){var e={};t.eachSeriesByType("map",function(n){var i=n.getMapType();if(!n.getHostGeoModel()&&!e[i]){var r={};du.each(n.seriesGroup,function(e){var n=e.coordinateSystem,i=e.originalData;e.get("showLegendSymbol")&&t.getComponent("legend")&&i.each(i.mapDimension("value"),function(t,e){var a=i.getName(e),o=n.getRegion(a);if(o&&!isNaN(t)){var s=r[a]||0,l=n.dataToPoint(o.center);r[a]=s+1,i.setItemLayout(e,{point:l,offset:s})}})});var a=n.getData();a.each(function(t){var e=a.getName(t),n=a.getItemLayout(t)||{};n.showLabel=!r[e],a.setItemLayout(t,n)}),e[i]=!0}})},TS=function(t){t.eachSeriesByType("map",function(t){var e=t.get("color"),n=t.getModel("itemStyle"),i=n.get("areaColor"),r=n.get("color")||e[t.seriesIndex%e.length];t.getData().setVisual({areaColor:i,color:r})})},OS=function(t){var e={};t.eachSeriesByType("map",function(t){var n=t.getHostGeoModel(),i=n?"o"+n.id:"i"+t.getMapType();(e[i]=e[i]||[]).push(t)}),du.each(e,function(t,e){for(var n=function(t,e){var n={};return du.each(t,function(t){t.each(t.mapDimension("value"),function(e,i){var r="ec-"+t.getName(i);n[r]=n[r]||[],isNaN(e)||n[r].push(e)})}),t[0].map(t[0].mapDimension("value"),function(i,r){for(var a="ec-"+t[0].getName(r),o=0,s=1/0,l=-1/0,u=n[a].length,c=0;c<u;c++)s=Math.min(s,n[a][c]),l=Math.max(l,n[a][c]),o+=n[a][c];var h;return h="min"===e?s:"max"===e?l:"average"===e?o/u:o,0===u?NaN:h})}(du.map(t,function(t){return t.getData()}),t[0].get("mapValueCalculation")),i=0;i<t.length;i++)t[i].originalData=t[i].getData();for(i=0;i<t.length;i++)t[i].seriesGroup=t,t[i].needsDrawMap=0===i&&!t[i].getHostGeoModel(),t[i].setData(n.cloneShallow()),t[i].mainSeries=t[0]})},kS=function(t){var e=[];du.each(t.series,function(t){t&&"map"===t.type&&(e.push(t),t.map=t.map||t.mapType,du.defaults(t,t.mapLocation))})};T_.registerLayout(PS),T_.registerVisual(TS),T_.registerProcessor(T_.PRIORITY.PROCESSOR.STATISTIC,OS),T_.registerPreprocessor(kS),Dw("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}]);var DS=du.each,ES="\0__link_datas",LS="\0__link_mainData",NS=function(t){var e=t.mainData,n=t.datas;n||(n={main:e},t.datasAttr={main:"data"}),t.datas=t.mainData=null,rr(e,n,t),DS(n,function(n){DS(e.TRANSFERABLE_METHODS,function(e){n.wrapMethod(e,du.curry(function(t,e){if(function(t){return t[LS]===t}(this)){var n=du.extend({},this[ES]);n[this.dataType]=e,rr(e,n,t)}else ar(e,this.dataType,this[LS],t);return e},t))})}),e.wrapMethod("cloneShallow",du.curry(function(t,e){return DS(e[ES],function(n,i){n!==e&&ar(n.cloneShallow(),i,e,t)}),e},t)),DS(e.CHANGABLE_METHODS,function(n){e.wrapMethod(n,du.curry(function(t,e){return t.struct&&t.struct.update(this),e},t))}),du.assert(n[e.dataType]===e)},RS=function(t,e){this.name=t||"",this.depth=0,this.height=0,this.parentNode=null,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.hostTree=e};RS.prototype={constructor:RS,isRemoved:function(){return this.dataIndex<0},eachNode:function(t,e,n){"function"==typeof t&&(n=e,e=t,t=null),t=t||{},du.isString(t)&&(t={order:t});var i,r=t.order||"preorder",a=this[t.attr||"children"];"preorder"===r&&(i=e.call(n,this));for(var o=0;!i&&o<a.length;o++)a[o].eachNode(t,e,n);"postorder"===r&&e.call(n,this)},updateDepthAndHeight:function(t){var e=0;this.depth=t;for(var n=0;n<this.children.length;n++){var i=this.children[n];i.updateDepthAndHeight(t+1),i.height>e&&(e=i.height)}this.height=e+1},getNodeById:function(t){if(this.getId()===t)return this;for(var e=0,n=this.children,i=n.length;e<i;e++){var r=n[e].getNodeById(t);if(r)return r}},contains:function(t){if(t===this)return!0;for(var e=0,n=this.children,i=n.length;e<i;e++){var r=n[e].contains(t);if(r)return r}},getAncestors:function(t){for(var e=[],n=t?this:this.parentNode;n;)e.push(n),n=n.parentNode;return e.reverse(),e},getValue:function(t){var e=this.hostTree.data;return e.get(e.getDimension(t||"value"),this.dataIndex)},setLayout:function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(t){if(!(this.dataIndex<0)){var e,n=this.hostTree,i=n.data.getItemModel(this.dataIndex),r=this.getLevelModel();return r||0!==this.children.length&&(0===this.children.length||!1!==this.isExpand)||(e=this.getLeavesModel()),i.getModel(t,(r||e||n.hostModel).getModel(t))}},getLevelModel:function(){return(this.hostTree.levelModels||[])[this.depth]},getLeavesModel:function(){return this.hostTree.leavesModel},setVisual:function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},getVisual:function(t,e){return this.hostTree.data.getItemVisual(this.dataIndex,t,e)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOf:function(t){for(var e=t.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},isDescendantOf:function(t){return t!==this&&t.isAncestorOf(this)}},or.prototype={constructor:or,type:"tree",eachNode:function(t,e,n){this.root.eachNode(t,e,n)},getNodeByDataIndex:function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},getNodeByName:function(t){return this.root.getNodeByName(t)},update:function(){for(var t=this.data,e=this._nodes,n=0,i=e.length;n<i;n++)e[n].dataIndex=-1;for(n=0,i=t.count();n<i;n++)e[t.getRawIndex(n)].dataIndex=n},clearLayouts:function(){this.data.clearItemLayouts()}},or.createTree=function(t,e,n){function i(t,e){var n=t.value;o=Math.max(o,du.isArray(n)?n.length:1),a.push(t);var s=new RS(t.name,r);e?function(t,e){var n=e.children;t.parentNode!==e&&(n.push(t),t.parentNode=e)}(s,e):r.root=s,r._nodes.push(s);var l=t.children;if(l)for(var u=0;u<l.length;u++)i(l[u],s)}var r=new or(e,n.levels,n.leaves),a=[],o=1;i(t),r.root.updateDepthAndHeight(0);var s=Vy(a,{coordDimensions:["value"],dimensionsCount:o}),l=new Iy(s,e);return l.initData(a),NS({mainData:l,struct:r,structAttr:"tree"}),r.update(),r};var BS=or,zS=Zp.encodeHTML,VS=(xv.extend({type:"series.tree",layoutInfo:null,layoutMode:"box",getInitialData:function(t){var e={name:t.name,children:t.data},n=t.leaves||{},i={};i.leaves=n;var r=BS.createTree(e,this,i),a=0;r.eachNode("preorder",function(t){t.depth>a&&(a=t.depth)});var o=t.expandAndCollapse&&t.initialTreeDepth>=0?t.initialTreeDepth:a;return r.root.eachNode("preorder",function(t){var e=t.hostTree.data.getRawDataItem(t.dataIndex);t.isExpand=e&&null!=e.collapsed?!e.collapsed:t.depth<=o}),r.data},getOrient:function(){var t=this.get("orient");return"horizontal"===t?t="LR":"vertical"===t&&(t="TB"),t},formatTooltip:function(t){for(var e=this.getData().tree,n=e.root.children[0],i=e.getNodeByDataIndex(t),r=i.getValue(),a=i.name;i&&i!==n;)a=i.parentNode.name+"."+a,i=i.parentNode;return zS(a+(isNaN(r)||null==r?"":" : "+r))},defaultOption:{zlevel:0,z:2,left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:!0,color:"#555"},leaves:{label:{show:!0}},animationEasing:"linear",animationDuration:700,animationDurationUpdate:1e3}}),{init:function(t){t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var e,n,i=[t];e=i.pop();)if(n=e.children,e.isExpand&&n.length)for(var r=n.length-1;r>=0;r--){var a=n[r];a.hierNode={defaultAncestor:null,ancestor:a,prelim:0,modifier:0,change:0,shift:0,i:r,thread:null},i.push(a)}},firstWalk:function(t,e){var n=t.isExpand?t.children:[],i=t.parentNode.children,r=t.hierNode.i?i[t.hierNode.i-1]:null;if(n.length){!function(t){for(var e=t.children,n=e.length,i=0,r=0;--n>=0;){var a=e[n];a.hierNode.prelim+=i,a.hierNode.modifier+=i,r+=a.hierNode.change,i+=a.hierNode.shift+r}}(t);var a=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;r?(t.hierNode.prelim=r.hierNode.prelim+e(t,r),t.hierNode.modifier=t.hierNode.prelim-a):t.hierNode.prelim=a}else r&&(t.hierNode.prelim=r.hierNode.prelim+e(t,r));t.parentNode.hierNode.defaultAncestor=function(t,e,n,i){if(e){for(var r=t,a=t,o=a.parentNode.children[0],s=e,l=r.hierNode.modifier,u=a.hierNode.modifier,c=o.hierNode.modifier,h=s.hierNode.modifier;s=sr(s),a=lr(a),s&&a;){r=sr(r),o=lr(o),r.hierNode.ancestor=t;var d=s.hierNode.prelim+h-a.hierNode.prelim-u+i(s,a);d>0&&(function(t,e,n){var i=n/(e.hierNode.i-t.hierNode.i);e.hierNode.change-=i,e.hierNode.shift+=n,e.hierNode.modifier+=n,e.hierNode.prelim+=n,t.hierNode.change+=i}(function(t,e,n){return t.hierNode.ancestor.parentNode===e.parentNode?t.hierNode.ancestor:n}(s,t,n),t,d),u+=d,l+=d),h+=s.hierNode.modifier,u+=a.hierNode.modifier,l+=r.hierNode.modifier,c+=o.hierNode.modifier}s&&!sr(r)&&(r.hierNode.thread=s,r.hierNode.modifier+=h-l),a&&!lr(o)&&(o.hierNode.thread=a,o.hierNode.modifier+=u-c,n=t)}return n}(t,r,t.parentNode.hierNode.defaultAncestor||i[0],e)},secondWalk:function(t){var e=t.hierNode.prelim+t.parentNode.hierNode.modifier;t.setLayout({x:e},!0),t.hierNode.modifier+=t.parentNode.hierNode.modifier},separation:function(t){return arguments.length?t:function(t,e){return t.parentNode===e.parentNode?1:2}},radialCoordinate:function(t,e){var n={};return t-=Math.PI/2,n.x=e*Math.cos(t),n.y=e*Math.sin(t),n},getViewRect:function(t,e){return ig.getLayoutRect(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}}),GS=VS.radialCoordinate;T_.extendChartView({type:"tree",init:function(t,e){this._oldTree,this._mainGroup=new Pp.Group,this.group.add(this._mainGroup)},render:function(t,e,n,i){var r=t.getData(),a=t.layoutInfo,o=this._mainGroup,s=t.get("layout");"radial"===s?o.attr("position",[a.x+a.width/2,a.y+a.height/2]):o.attr("position",[a.x,a.y]);var l=this._data,u={expandAndCollapse:t.get("expandAndCollapse"),layout:s,orient:t.getOrient(),curvature:t.get("lineStyle.curveness"),symbolRotate:t.get("symbolRotate"),symbolOffset:t.get("symbolOffset"),hoverAnimation:t.get("hoverAnimation"),useNameLabel:!0,fadeIn:!0};r.diff(l).add(function(e){ur(r,e)&&hr(r,e,null,o,t,u)}).update(function(e,n){var i=l.getItemGraphicEl(n);ur(r,e)?hr(r,e,i,o,t,u):i&&dr(l,n,i,o,t,u)}).remove(function(e){var n=l.getItemGraphicEl(e);n&&dr(l,e,n,o,t,u)}).execute(),!0===u.expandAndCollapse&&r.eachItemGraphicEl(function(e,i){e.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:i})})}),this._data=r},dispose:function(){},remove:function(){this._mainGroup.removeAll(),this._data=null}}),T_.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},function(e){var n=t.dataIndex,i=e.getData().tree.getNodeByDataIndex(n);i.isExpand=!i.isExpand})});var FS={eachAfter:function(t,e,n){for(var i,r=[t],a=[];i=r.pop();)if(a.push(i),i.isExpand){var o=i.children;if(o.length)for(var s=0;s<o.length;s++)r.push(o[s])}for(;i=a.pop();)e(i,n)},eachBefore:function(t,e){for(var n,i=[t];n=i.pop();)if(e(n),n.isExpand){var r=n.children;if(r.length)for(var a=r.length-1;a>=0;a--)i.push(r[a])}}},jS=FS.eachAfter,HS=FS.eachBefore,WS=VS.init,YS=VS.firstWalk,XS=VS.secondWalk,US=VS.separation,qS=VS.radialCoordinate,ZS=VS.getViewRect,KS=function(t,e){t.eachSeriesByType("tree",function(t){!function(t,e){var n=ZS(t,e);t.layoutInfo=n;var i=t.get("layout"),r=0,a=0,o=null;"radial"===i?(r=2*Math.PI,a=Math.min(n.height,n.width)/2,o=US(function(t,e){return(t.parentNode===e.parentNode?1:2)/t.depth})):(r=n.width,a=n.height,o=US());var s=t.getData().tree.root,l=s.children[0];if(l){WS(s),jS(l,YS,o),s.hierNode.modifier=-l.hierNode.prelim,HS(l,XS);var u=l,c=l,h=l;HS(l,function(t){var e=t.getLayout().x;e<u.getLayout().x&&(u=t),e>c.getLayout().x&&(c=t),t.depth>h.depth&&(h=t)});var d=u===c?1:o(u,c)/2,f=d-u.getLayout().x,p=0,g=0,m=0,v=0;if("radial"===i)p=r/(c.getLayout().x+d+f),g=a/(h.depth-1||1),HS(l,function(t){m=(t.getLayout().x+f)*p,v=(t.depth-1)*g;var e=qS(m,v);t.setLayout({x:e.x,y:e.y,rawX:m,rawY:v},!0)});else{var y=t.getOrient();"RL"===y||"LR"===y?(g=a/(c.getLayout().x+d+f),p=r/(h.depth-1||1),HS(l,function(t){v=(t.getLayout().x+f)*g,m="LR"===y?(t.depth-1)*p:r-(t.depth-1)*p,t.setLayout({x:m,y:v},!0)})):"TB"!==y&&"BT"!==y||(p=r/(c.getLayout().x+d+f),g=a/(h.depth-1||1),HS(l,function(t){m=(t.getLayout().x+f)*p,v="TB"===y?(t.depth-1)*g:a-(t.depth-1)*g,t.setLayout({x:m,y:v},!0)}))}}}(t,e)})};T_.registerVisual(cb("tree","circle")),T_.registerLayout(KS);var $S={retrieveTargetInfo:function(t,e,n){if(t&&du.indexOf(e,t.type)>=0){var i=n.getData().tree.root,r=t.targetNode;if(r&&i.contains(r))return{node:r};var a=t.targetNodeId;if(null!=a&&(r=i.getNodeById(a)))return{node:r}}},getPathToRoot:pr,aboveViewRoot:function(t,e){var n=pr(t);return du.indexOf(n,e)>=0},wrapTreePathInfo:function(t,e){for(var n=[];t;){var i=t.dataIndex;n.push({name:t.name,dataIndex:i,value:e.getRawValue(i)}),t=t.parentNode}return n.reverse(),n}},JS=Zp.encodeHTML,QS=Zp.addCommas,tM=$S.wrapTreePathInfo,eM=(xv.extend({type:"series.treemap",layoutMode:"box",dependencies:["grid","polar"],_viewRoot:null,defaultOption:{progressive:0,hoverLayerThreshold:1/0,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",ellipsis:!0},upperLabel:{show:!1,position:[0,"50%"],height:20,color:"#fff",ellipsis:!0,verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],color:"#fff",ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(t,e){var n={name:t.name,children:t.data};gr(n);var i=t.levels||[];i=t.levels=function(t,e){var n,i=e.get("color");if(i)return t=t||[],du.each(t,function(t){var e=new zp(t),i=e.get("color");(e.get("itemStyle.color")||i&&"none"!==i)&&(n=!0)}),n||((t[0]||(t[0]={})).color=i.slice()),t}(i,e);var r={};return r.levels=i,BS.createTree(n,this,r).data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(t){var e=this.getData(),n=this.getRawValue(t),i=QS(du.isArray(n)?n[0]:n),r=e.getName(t);return JS(r+": "+i)},getDataParams:function(t){var e=xv.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return e.treePathInfo=tM(n,this),e},setLayoutInfo:function(t){this.layoutInfo=this.layoutInfo||{},du.extend(this.layoutInfo,t)},mapIdToIndex:function(t){var e=this._idIndexMap;e||(e=this._idIndexMap=du.createHashMap(),this._idIndexMapCount=0);var n=e.get(t);return null==n&&e.set(t,n=this._idIndexMapCount++),n},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)}}),$S.wrapTreePathInfo),nM=5;mr.prototype={constructor:mr,render:function(t,e,n,i){var r=t.getModel("breadcrumb"),a=this.group;if(a.removeAll(),r.get("show")&&n){var o=r.getModel("itemStyle"),s=o.getModel("textStyle"),l={pos:{left:r.get("left"),right:r.get("right"),top:r.get("top"),bottom:r.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:r.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,l,s),this._renderContent(t,l,o,s,i),ig.positionElement(a,l.pos,l.box)}},_prepare:function(t,e,n){for(var i=t;i;i=i.parentNode){var r=i.getModel().get("name"),a=n.getTextRect(r),o=Math.max(a.width+16,e.emptyItemWidth);e.totalWidth+=o+8,e.renderList.push({node:i,text:r,width:o})}},_renderContent:function(t,e,n,i,r){for(var a=0,o=e.emptyItemWidth,s=t.get("breadcrumb.height"),l=ig.getAvailableSize(e.pos,e.box),u=e.totalWidth,c=e.renderList,h=c.length-1;h>=0;h--){var d=c[h],f=d.node,p=d.width,g=d.text;u>l.width&&(u-=p-o,p=o,g=null);var m=new Pp.Polygon({shape:{points:function(t,e,n,i,r,a){var o=[[r?t:t-nM,e],[t+n,e],[t+n,e+i],[r?t:t-nM,e+i]];return!a&&o.splice(2,0,[t+n+nM,e+i/2]),!r&&o.push([t,e+i/2]),o}(a,0,p,s,h===c.length-1,0===h)},style:du.defaults(n.getItemStyle(),{lineJoin:"bevel",text:g,textFill:i.getTextColor(),textFont:i.getFont()}),z:10,onclick:du.curry(r,f)});this.group.add(m),function(t,e,n){t.eventData={componentType:"series",componentSubType:"treemap",seriesIndex:e.componentIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:n&&n.dataIndex,name:n&&n.name},treePathInfo:n&&eM(n,e)}}(m,t,f),a+=p+8}},remove:function(){this.group.removeAll()}};for(var iM=mr,rM={createWrap:function(){var t,e=[],n={};return{add:function(t,i,r,a,o){return du.isString(a)&&(o=a,a=0),!n[t.id]&&(n[t.id]=1,e.push({el:t,target:i,time:r,delay:a,easing:o}),!0)},done:function(e){return t=e,this},start:function(){for(var i=e.length,r=0,a=e.length;r<a;r++){var o=e[r];o.el.animateTo(o.target,o.time,o.delay,o.easing,function(){--i||(e.length=0,n={},t&&t())})}return this}}}},aM=du.bind,oM=Pp.Group,sM=Pp.Rect,lM=du.each,uM=["label"],cM=["emphasis","label"],hM=["upperLabel"],dM=["emphasis","upperLabel"],fM=10,pM=1,gM=2,mM=qh([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),vM=function(t){var e=mM(t);return e.stroke=e.fill=e.lineWidth=null,e},yM=(T_.extendChartView({type:"treemap",init:function(t,e){this._containerGroup,this._storage={nodeGroup:[],background:[],content:[]},this._oldTree,this._breadcrumb,this._controller,this._state="ready"},render:function(t,e,n,i){var r=e.findComponents({mainType:"series",subType:"treemap",query:i});if(!(du.indexOf(r,t)<0)){this.seriesModel=t,this.api=n,this.ecModel=e;var a=$S.retrieveTargetInfo(i,["treemapZoomToNode","treemapRootToNode"],t),o=i&&i.type,s=t.layoutInfo,l=!this._oldTree,u=this._storage,c="treemapRootToNode"===o&&a&&u?{rootNodeGroup:u.nodeGroup[a.node.getRawIndex()],direction:i.direction}:null,h=this._giveContainerGroup(s),d=this._doRender(h,t,c);l||o&&"treemapZoomToNode"!==o&&"treemapRootToNode"!==o?d.renderFinally():this._doAnimation(h,d,t,c),this._resetController(n),this._renderBreadcrumb(t,n,a)}},_giveContainerGroup:function(t){var e=this._containerGroup;return e||(e=this._containerGroup=new oM,this._initEvents(e),this.group.add(e)),e.attr("position",[t.x,t.y]),e},_doRender:function(t,e,n){function i(t,e,n,r,a){function o(t){return t.getId()}function s(o,s){var l=null!=o?t[o]:null,u=null!=s?e[s]:null,h=c(l,u,n,a);h&&i(l&&l.viewChildren||[],u&&u.viewChildren||[],h,r,a+1)}r?(e=t,lM(t,function(t,e){!t.isRemoved()&&s(e,e)})):new cy(e,t,o,o).add(s).update(s).remove(du.curry(s,null)).execute()}var r=e.getData().tree,a=this._oldTree,o={nodeGroup:[],background:[],content:[]},s={nodeGroup:[],background:[],content:[]},l=this._storage,u=[],c=du.curry(function(t,e,n,i,r,a,o,s,l,u){function c(t,e){v?!t.invisible&&a.push(t):(e(),t.__tmWillVisible||(t.invisible=!1))}function h(e,n,i,r,a,s){var l=o.getModel(),u=du.retrieve(t.getFormattedLabel(o.dataIndex,"normal",null,null,s?"upperLabel":"label"),l.get("name"));if(!s&&f.isLeafRoot){var c=t.get("drillDownIcon",!0);u=c?c+" "+u:u}var h=l.getModel(s?hM:uM),d=l.getModel(s?dM:cM),p=h.getShallow("show");Pp.setLabelStyle(e,n,h,d,{defaultText:p?u:null,autoColor:i,isRectText:!0}),s&&(e.textRect=du.clone(s)),e.truncate=p&&h.get("ellipsis")?{outerWidth:r,outerHeight:a,minChar:2}:null}function d(t,a,s,l){var u=null!=x&&n[t][x],c=r[t];return u?(n[t][x]=null,function(t,e,n){(t[y]={}).old="nodeGroup"===n?e.position.slice():du.extend({},e.shape)}(c,u,t)):v||((u=new a({z:function(t,e){var n=t*fM+l;return(n-1)/n}(s)})).__tmDepth=s,u.__tmStorageName=t,function(t,e,n){var a=t[y]={},s=o.parentNode;if(s&&(!i||"drillDown"===i.direction)){var l=0,u=0,c=r.background[s.getRawIndex()];!i&&c&&c.old&&(l=c.old.width,u=c.old.height),a.old="nodeGroup"===n?[0,u]:{x:l,y:u,width:0,height:0}}a.fadein="nodeGroup"!==n}(c,0,t)),e[t][y]=u}if(o){var f=o.getLayout();if(f&&f.isInView){var p=f.width,g=f.height,m=f.borderWidth,v=f.invisible,y=o.getRawIndex(),x=s&&s.getRawIndex(),_=o.viewChildren,b=f.upperHeight,w=_&&_.length,S=o.getModel("itemStyle"),M=o.getModel("emphasis.itemStyle"),A=d("nodeGroup",oM);if(A){if(l.add(A),A.attr("position",[f.x||0,f.y||0]),A.__tmNodeWidth=p,A.__tmNodeHeight=g,f.isAboveViewRoot)return A;var C=d("background",sM,u,pM);if(C&&function(e,n,i){n.dataIndex=o.dataIndex,n.seriesIndex=t.seriesIndex,n.setShape({x:0,y:0,width:p,height:g});var r=o.getVisual("borderColor",!0),a=M.get("borderColor");c(n,function(){var t=vM(S);t.fill=r;var e=mM(M);if(e.fill=a,i){var o=p-2*m;h(t,e,r,o,b,{x:m,y:0,width:o,height:b})}else t.text=e.text=null;n.setStyle(t),Pp.setHoverStyle(n,e)}),e.add(n)}(A,C,w&&f.upperHeight),!w){var I=d("content",sM,u,gM);I&&function(e,n){n.dataIndex=o.dataIndex,n.seriesIndex=t.seriesIndex;var i=Math.max(p-2*m,0),r=Math.max(g-2*m,0);n.culling=!0,n.setShape({x:m,y:m,width:i,height:r});var a=o.getVisual("color",!0);c(n,function(){var t=vM(S);t.fill=a;var e=mM(M);h(t,e,a,i,r),n.setStyle(t),Pp.setHoverStyle(n,e)}),e.add(n)}(A,I)}return A}}}},e,s,l,n,o,u);i(r.root?[r.root]:[],a&&a.root?[a.root]:[],t,r===a||!a,0);var h=function(t){var e={nodeGroup:[],background:[],content:[]};return t&&lM(t,function(t,n){var i=e[n];lM(t,function(t){t&&(i.push(t),t.__tmWillDelete=1)})}),e}(l);return this._oldTree=r,this._storage=s,{lastsForAnimation:o,willDeleteEls:h,renderFinally:function(){lM(h,function(t){lM(t,function(t){t.parent&&t.parent.remove(t)})}),lM(u,function(t){t.invisible=!0,t.dirty()})}}},_doAnimation:function(t,e,n,i){if(n.get("animation")){var r=n.get("animationDurationUpdate"),a=n.get("animationEasing"),o=rM.createWrap();lM(e.willDeleteEls,function(t,e){lM(t,function(t,n){if(!t.invisible){var s,l=t.parent;if(i&&"drillDown"===i.direction)s=l===i.rootNodeGroup?{shape:{x:0,y:0,width:l.__tmNodeWidth,height:l.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var u=0,c=0;l.__tmWillDelete||(u=l.__tmNodeWidth/2,c=l.__tmNodeHeight/2),s="nodeGroup"===e?{position:[u,c],style:{opacity:0}}:{shape:{x:u,y:c,width:0,height:0},style:{opacity:0}}}s&&o.add(t,s,r,a)}})}),lM(this._storage,function(t,n){lM(t,function(t,i){var s=e.lastsForAnimation[n][i],l={};s&&("nodeGroup"===n?s.old&&(l.position=t.position.slice(),t.attr("position",s.old)):(s.old&&(l.shape=du.extend({},t.shape),t.setShape(s.old)),s.fadein?(t.setStyle("opacity",0),l.style={opacity:1}):1!==t.style.opacity&&(l.style={opacity:1})),o.add(t,l,r,a))})},this),this._state="animating",o.done(aM(function(){this._state="ready",e.renderFinally()},this)).start()}},_resetController:function(t){var e=this._controller;e||((e=this._controller=new _S(t.getZr())).enable(this.seriesModel.get("roam")),e.on("pan",aM(this._onPan,this)),e.on("zoom",aM(this._onZoom,this)));var n=new hc(0,0,t.getWidth(),t.getHeight());e.setPointerChecker(function(t,e,i){return n.contain(e,i)})},_clearController:function(){var t=this._controller;t&&(t.dispose(),t=null)},_onPan:function(t,e){if("animating"!==this._state&&(Math.abs(t)>3||Math.abs(e)>3)){var n=this.seriesModel.getData().tree.root;if(!n)return;var i=n.getLayout();if(!i)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:i.x+t,y:i.y+e,width:i.width,height:i.height}})}},_onZoom:function(t,e,n){if("animating"!==this._state){var i=this.seriesModel.getData().tree.root;if(!i)return;var r=i.getLayout();if(!r)return;var a=new hc(r.x,r.y,r.width,r.height),o=this.seriesModel.layoutInfo;e-=o.x,n-=o.y;var s=Mu.create();Mu.translate(s,s,[-e,-n]),Mu.scale(s,s,[t,t]),Mu.translate(s,s,[e,n]),a.applyTransform(s),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:a.x,y:a.y,width:a.width,height:a.height}})}},_initEvents:function(t){t.on("click",function(t){if("ready"===this._state){var e=this.seriesModel.get("nodeClick",!0);if(e){var n=this.findTarget(t.offsetX,t.offsetY);if(n){var i=n.node;if(i.getLayout().isLeafRoot)this._rootToNode(n);else if("zoomToNode"===e)this._zoomToNode(n);else if("link"===e){var r=i.hostTree.data.getItemModel(i.dataIndex),a=r.get("link",!0),o=r.get("target",!0)||"blank";a&&window.open(a,o)}}}}},this)},_renderBreadcrumb:function(t,e,n){n||(n=null!=t.get("leafDepth",!0)?{node:t.getViewRoot()}:this.findTarget(e.getWidth()/2,e.getHeight()/2))||(n={node:t.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new iM(this.group))).render(t,e,n.node,aM(function(e){"animating"!==this._state&&($S.aboveViewRoot(t.getViewRoot(),e)?this._rootToNode({node:e}):this._zoomToNode({node:e}))},this))},remove:function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},_rootToNode:function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},findTarget:function(t,e){var n;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(i){var r=this._storage.background[i.getRawIndex()];if(r){var a=r.transformCoordToLocal(t,e),o=r.shape;if(!(o.x<=a[0]&&a[0]<=o.x+o.width&&o.y<=a[1]&&a[1]<=o.y+o.height))return!1;n={node:i,offsetX:a[0],offsetY:a[1]}}},this),n}}),["treemapZoomToNode","treemapRender","treemapMove"]),xM=0;xM<yM.length;xM++)T_.registerAction({type:yM[xM],update:"updateView"},function(){});T_.registerAction({type:"treemapRootToNode",update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"treemap",query:t},function(e,n){var i=$S.retrieveTargetInfo(t,["treemapZoomToNode","treemapRootToNode"],e);if(i){var r=e.getViewRoot();r&&(t.direction=$S.aboveViewRoot(r,i.node)?"rollUp":"drillDown"),e.resetViewRoot(i.node)}})});var _M=Wp.linearMap,bM=du.each,wM=du.isObject,SM=-1,MM=function(t){var e=t.mappingMethod,n=t.type,i=this.option=du.clone(t);this.type=n,this.mappingMethod=e,this._normalizeData=CM[e];var r=AM[n];this.applyVisual=r.applyVisual,this.getColorMapper=r.getColorMapper,this._doMap=r._doMap[e],"piecewise"===e?(vr(i),function(t){var e=t.pieceList;t.hasSpecialVisual=!1,du.each(e,function(e,n){e.originIndex=n,null!=e.visual&&(t.hasSpecialVisual=!0)})}(i)):"category"===e?i.categories?function(t){var e=t.categories,n=t.visual,i=t.categoryMap={};if(bM(e,function(t,e){i[t]=e}),!du.isArray(n)){var r=[];du.isObject(n)?bM(n,function(t,e){var n=i[e];r[null!=n?n:SM]=t}):r[SM]=n,n=Ar(t,r)}for(var a=e.length-1;a>=0;a--)null==n[a]&&(delete i[e[a]],e.pop())}(i):vr(i,!0):(du.assert("linear"!==e||i.dataExtent),vr(i))};MM.prototype={constructor:MM,mapValueToVisual:function(t){var e=this._normalizeData(t);return this._doMap(e,t)},getNormalizer:function(){return du.bind(this._normalizeData,this)}};var AM=MM.visualHandlers={color:{applyVisual:_r("color"),getColorMapper:function(){var t=this.option;return du.bind("category"===t.mappingMethod?function(t,e){return!e&&(t=this._normalizeData(t)),br.call(this,t)}:function(e,n,i){var r=!!i;return!n&&(e=this._normalizeData(e)),i=Hu.fastLerp(e,t.parsedVisual,i),r?i:Hu.stringify(i,"rgba")},this)},_doMap:{linear:function(t){return Hu.stringify(Hu.fastLerp(t,this.option.parsedVisual),"rgba")},category:br,piecewise:function(t,e){var n=Mr.call(this,e);return null==n&&(n=Hu.stringify(Hu.fastLerp(t,this.option.parsedVisual),"rgba")),n},fixed:wr}},colorHue:yr(function(t,e){return Hu.modifyHSL(t,e)}),colorSaturation:yr(function(t,e){return Hu.modifyHSL(t,null,e)}),colorLightness:yr(function(t,e){return Hu.modifyHSL(t,null,null,e)}),colorAlpha:yr(function(t,e){return Hu.modifyAlpha(t,e)}),opacity:{applyVisual:_r("opacity"),_doMap:Sr([0,1])},liftZ:{applyVisual:_r("liftZ"),_doMap:{linear:wr,category:wr,piecewise:wr,fixed:wr}},symbol:{applyVisual:function(t,e,n){var i=this.mapValueToVisual(t);if(du.isString(i))n("symbol",i);else if(wM(i))for(var r in i)i.hasOwnProperty(r)&&n(r,i[r])},_doMap:{linear:xr,category:br,piecewise:function(t,e){var n=Mr.call(this,e);return null==n&&(n=xr.call(this,t)),n},fixed:wr}},symbolSize:{applyVisual:_r("symbolSize"),_doMap:Sr([0,1])}},CM={linear:function(t){return _M(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,n=MM.findPieceIndex(t,e,!0);if(null!=n)return _M(n,[0,e.length-1],[0,1],!0)},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return null==e?SM:e},fixed:du.noop};MM.listVisualTypes=function(){var t=[];return du.each(AM,function(e,n){t.push(n)}),t},MM.addVisualHandler=function(t,e){AM[t]=e},MM.isValidType=function(t){return AM.hasOwnProperty(t)},MM.eachVisual=function(t,e,n){du.isObject(t)?du.each(t,e,n):e.call(n,t)},MM.mapVisual=function(t,e,n){var i,r=du.isArray(t)?[]:du.isObject(t)?{}:(i=!0,null);return MM.eachVisual(t,function(t,a){var o=e.call(n,t,a);i?r=o:r[a]=o}),r},MM.retrieveVisuals=function(t){var e,n={};return t&&bM(AM,function(i,r){t.hasOwnProperty(r)&&(n[r]=t[r],e=!0)}),e?n:null},MM.prepareVisualTypes=function(t){if(wM(t)){var e=[];bM(t,function(t,n){e.push(n)}),t=e}else{if(!du.isArray(t))return[];t=t.slice()}return t.sort(function(t,e){return"color"===e&&"color"!==t&&0===t.indexOf("color")?1:-1}),t},MM.dependsOn=function(t,e){return"color"===e?!(!t||0!==t.indexOf(e)):t===e},MM.findPieceIndex=function(t,e,n){function i(e,n){var i=Math.abs(e-t);i<a&&(a=i,r=n)}for(var r,a=1/0,o=0,s=e.length;o<s;o++){var l=e[o].value;if(null!=l){if(l===t||"string"==typeof l&&l===t+"")return o;n&&i(l,o)}}for(o=0,s=e.length;o<s;o++){var u=e[o],c=u.interval,h=u.close;if(c){if(c[0]===-1/0){if(Cr(h[1],t,c[1]))return o}else if(c[1]===1/0){if(Cr(h[0],c[0],t))return o}else if(Cr(h[0],c[0],t)&&Cr(h[1],t,c[1]))return o;n&&i(c[0],o),n&&i(c[1],o)}}if(n)return t===1/0?e.length-1:t===-1/0?0:r};var IM=MM,PM=du.isArray,TM="itemStyle",OM={seriesType:"treemap",reset:function(t,e,n,i){var r=t.getData().tree,a=r.root,o=t.getModel(TM);a.isRemoved()||Ir(a,{},du.map(r.levelModels,function(t){return t?t.get(TM):null}),o,t.getViewRoot().getAncestors(),t)}},kM=Wp.parsePercent,DM=Wp.MAX_SAFE_INTEGER,EM=Math.max,LM=Math.min,NM=du.retrieve,RM=du.each,BM=["itemStyle","borderWidth"],zM=["itemStyle","gapWidth"],VM=["upperLabel","show"],GM=["upperLabel","height"],FM={seriesType:"treemap",reset:function(t,e,n,i){var r=n.getWidth(),a=n.getHeight(),o=t.option,s=ig.getLayoutRect(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),l=o.size||[],u=kM(NM(s.width,l[0]),r),c=kM(NM(s.height,l[1]),a),h=i&&i.type,d=$S.retrieveTargetInfo(i,["treemapZoomToNode","treemapRootToNode"],t),f="treemapRender"===h||"treemapMove"===h?i.rootRect:null,p=t.getViewRoot(),g=$S.getPathToRoot(p);if("treemapMove"!==h){var m="treemapZoomToNode"===h?function(t,e,n,i,r){var a=(e||{}).node,o=[i,r];if(!a||a===n)return o;for(var s,l=i*r,u=l*t.option.zoomToNodeRatio;s=a.parentNode;){for(var c=0,h=s.children,d=0,f=h.length;d<f;d++)c+=h[d].getValue();var p=a.getValue();if(0===p)return o;u*=c/p;var g=s.getModel(),m=g.get(BM);(u+=4*m*m+(3*m+Math.max(m,Lr(g)))*Math.pow(u,.5))>DM&&(u=DM),a=s}u<l&&(u=l);var v=Math.pow(u/l,.5);return[i*v,r*v]}(t,d,p,u,c):f?[f.width,f.height]:[u,c],v=o.sort;v&&"asc"!==v&&"desc"!==v&&(v="desc");var y={squareRatio:o.squareRatio,sort:v,leafDepth:o.leafDepth};p.hostTree.clearLayouts(),x={x:0,y:0,width:m[0],height:m[1],area:m[0]*m[1]},p.setLayout(x),kr(p,y,!1,0);var x=p.getLayout();RM(g,function(t,e){var n=(g[e+1]||p).getValue();t.setLayout(du.extend({dataExtent:[n,n],borderWidth:0,upperHeight:0},x))})}var _=t.getData().tree.root;_.setLayout(function(t,e,n){if(e)return{x:e.x,y:e.y};var i={x:0,y:0};if(!n)return i;var r=n.node,a=r.getLayout();if(!a)return i;for(var o=[a.width/2,a.height/2],s=r;s;){var l=s.getLayout();o[0]+=l.x,o[1]+=l.y,s=s.parentNode}return{x:t.width/2-o[0],y:t.height/2-o[1]}}(s,f,d),!0),t.setLayoutInfo(s),Er(_,new hc(-s.x,-s.y,r,a),g,p,0)}};T_.registerVisual(OM),T_.registerLayout(FM);var jM=Uh.enableClassCheck,HM=function(t){this._directed=t||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this.data,this.edgeData},WM=HM.prototype;WM.type="graph",WM.isDirected=function(){return this._directed},WM.addNode=function(t,e){t=t||""+e;var n=this._nodesMap;if(!n[Nr(t)]){var i=new Rr(t,e);return i.hostGraph=this,this.nodes.push(i),n[Nr(t)]=i,i}},WM.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},WM.getNodeById=function(t){return this._nodesMap[Nr(t)]},WM.addEdge=function(t,e,n){var i=this._nodesMap,r=this._edgesMap;if("number"==typeof t&&(t=this.nodes[t]),"number"==typeof e&&(e=this.nodes[e]),Rr.isInstance(t)||(t=i[Nr(t)]),Rr.isInstance(e)||(e=i[Nr(e)]),t&&e){var a=t.id+"-"+e.id;if(!r[a]){var o=new Br(t,e,n);return o.hostGraph=this,this._directed&&(t.outEdges.push(o),e.inEdges.push(o)),t.edges.push(o),t!==e&&e.edges.push(o),this.edges.push(o),r[a]=o,o}}},WM.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},WM.getEdge=function(t,e){Rr.isInstance(t)&&(t=t.id),Rr.isInstance(e)&&(e=e.id);var n=this._edgesMap;return this._directed?n[t+"-"+e]:n[t+"-"+e]||n[e+"-"+t]},WM.eachNode=function(t,e){for(var n=this.nodes,i=n.length,r=0;r<i;r++)n[r].dataIndex>=0&&t.call(e,n[r],r)},WM.eachEdge=function(t,e){for(var n=this.edges,i=n.length,r=0;r<i;r++)n[r].dataIndex>=0&&n[r].node1.dataIndex>=0&&n[r].node2.dataIndex>=0&&t.call(e,n[r],r)},WM.breadthFirstTraverse=function(t,e,n,i){if(Rr.isInstance(e)||(e=this._nodesMap[Nr(e)]),e){for(var r="out"===n?"outEdges":"in"===n?"inEdges":"edges",a=0;a<this.nodes.length;a++)this.nodes[a].__visited=!1;if(!t.call(i,e,null))for(var o=[e];o.length;){var s=o.shift(),l=s[r];for(a=0;a<l.length;a++){var u=l[a],c=u.node1===s?u.node2:u.node1;if(!c.__visited){if(t.call(i,c,s))return;o.push(c),c.__visited=!0}}}}},WM.update=function(){for(var t=this.data,e=this.edgeData,n=this.nodes,i=this.edges,r=0,a=n.length;r<a;r++)n[r].dataIndex=-1;for(r=0,a=t.count();r<a;r++)n[t.getRawIndex(r)].dataIndex=r;e.filterSelf(function(t){var n=i[e.getRawIndex(t)];return n.node1.dataIndex>=0&&n.node2.dataIndex>=0});for(r=0,a=i.length;r<a;r++)i[r].dataIndex=-1;for(r=0,a=e.count();r<a;r++)i[e.getRawIndex(r)].dataIndex=r},WM.clone=function(){for(var t=new HM(this._directed),e=this.nodes,n=this.edges,i=0;i<e.length;i++)t.addNode(e[i].id,e[i].dataIndex);for(i=0;i<n.length;i++){var r=n[i];t.addEdge(r.node1.id,r.node2.id,r.dataIndex)}return t},Rr.prototype={constructor:Rr,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(t){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(t)}},Br.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(t)};var YM=function(t,e){return{getValue:function(n){var i=this[t][e];return i.get(i.getDimension(n||"value"),this.dataIndex)},setVisual:function(n,i){this.dataIndex>=0&&this[t][e].setItemVisual(this.dataIndex,n,i)},getVisual:function(n,i){return this[t][e].getItemVisual(this.dataIndex,n,i)},setLayout:function(n,i){this.dataIndex>=0&&this[t][e].setItemLayout(this.dataIndex,n,i)},getLayout:function(){return this[t][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][e].getRawIndex(this.dataIndex)}}};du.mixin(Rr,YM("hostGraph","data")),du.mixin(Br,YM("hostGraph","edgeData")),HM.Node=Rr,HM.Edge=Br,jM(Rr),jM(Br);var XM=HM,UM=function(t,e,n,i,r){for(var a=new XM(i),o=0;o<t.length;o++)a.addNode(du.retrieve(t[o].id,t[o].name,o),o);var s=[],l=[],u=0;for(o=0;o<e.length;o++){var c=e[o],h=c.source,d=c.target;a.addEdge(h,d,u)&&(l.push(c),s.push(du.retrieve(c.id,h+" > "+d)),u++)}var f,p=n.get("coordinateSystem");if("cartesian2d"===p||"polar"===p)f=qy(t,n);else{var g=vm.get(p),m=g&&"view"!==g.type&&g.dimensions||[];du.indexOf(m,"value")<0&&m.concat(["value"]);var v=Vy(t,{coordDimensions:m});(f=new Iy(v,n)).initData(t)}var y=new Iy(["value"],n);return y.initData(l,s),r&&r(f,y),NS({mainData:f,struct:a,structAttr:"graph",datas:{node:f,edge:y},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a},qM=Hh.defaultEmphasis,ZM=Zp.encodeHTML,KM=T_.extendSeriesModel({type:"series.graph",init:function(t){KM.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._categoriesData},this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},mergeOption:function(t){KM.superApply(this,"mergeOption",arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},mergeDefaultAndTheme:function(t){KM.superApply(this,"mergeDefaultAndTheme",arguments),qM(t,["edgeLabel"],["show"])},getInitialData:function(t,e){var n=t.edges||t.links||[],i=t.data||t.nodes||[],r=this;if(i&&n)return UM(i,n,this,!0,function(t,n){t.wrapMethod("getItemModel",function(t){var e=r._categoriesModels[t.getShallow("category")];return e&&(e.parentModel=t.parentModel,t.parentModel=e),t});var i=r.getModel("edgeLabel"),a=new zp({label:i.option},i.parentModel,e),o=r.getModel("emphasis.edgeLabel"),s=new zp({emphasis:{label:o.option}},o.parentModel,e);n.wrapMethod("getItemModel",function(t){return t.customizeGetParent(function(t){return(t=this.parsePath(t))&&"label"===t[0]?a:t&&"emphasis"===t[0]&&"label"===t[1]?s:this.parentModel}),t})}).data},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(t,e,n){if("edge"===n){var i=this.getData(),r=this.getDataParams(t,n),a=i.graph.getEdgeByIndex(t),o=i.getName(a.node1.dataIndex),s=i.getName(a.node2.dataIndex),l=[];return null!=o&&l.push(o),null!=s&&l.push(s),l=ZM(l.join(" > ")),r.value&&(l+=" : "+ZM(r.value)),l}return KM.superApply(this,"formatTooltip",arguments)},_updateCategoriesData:function(){var t=du.map(this.option.categories||[],function(t){return null!=t.value?t:du.extend({value:0},t)}),e=new Iy(["value"],this);e.initData(t),this._categoriesData=e,this._categoriesModels=e.mapArray(function(t){return e.getItemModel(t,!0)})},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},isAnimationEnabled:function(){return KM.superCall(this,"isAnimationEnabled")&&!("force"===this.get("layout")&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle"},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,curveness:0,opacity:.5},emphasis:{label:{show:!0}}}}),$M=Pp.Line.prototype,JM=Pp.BezierCurve.prototype,QM=Pp.extendShape({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(t,e){(zr(e)?$M:JM).buildPath(t,e)},pointAt:function(t){return zr(this.shape)?$M.pointAt.call(this,t):JM.pointAt.call(this,t)},tangentAt:function(t){var e=this.shape,n=zr(e)?[e.x2-e.x1,e.y2-e.y1]:JM.tangentAt.call(this,t);return pu.normalize(n,n)}}),tA=Wp.round,eA=["fromSymbol","toSymbol"],nA=jr.prototype;nA.beforeUpdate=function(){var t=this.childOfName("fromSymbol"),e=this.childOfName("toSymbol"),n=this.childOfName("label");if(t||e||!n.ignore){for(var i=1,r=this.parent;r;)r.scale&&(i/=r.scale[0]),r=r.parent;var a=this.childOfName("line");if(this.__dirty||a.__dirty){var o=a.shape.percent,s=a.pointAt(0),l=a.pointAt(o),u=pu.sub([],l,s);if(pu.normalize(u,u),t&&(t.attr("position",s),p=a.tangentAt(0),t.attr("rotation",Math.PI/2-Math.atan2(p[1],p[0])),t.attr("scale",[i*o,i*o])),e&&(e.attr("position",l),p=a.tangentAt(1),e.attr("rotation",-Math.PI/2-Math.atan2(p[1],p[0])),e.attr("scale",[i*o,i*o])),!n.ignore){n.attr("position",l);var c,h,d,f=5*i;if("end"===n.__position)c=[u[0]*f+l[0],u[1]*f+l[1]],h=u[0]>.8?"left":u[0]<-.8?"right":"center",d=u[1]>.8?"top":u[1]<-.8?"bottom":"middle";else if("middle"===n.__position){var p,g=o/2,m=[(p=a.tangentAt(g))[1],-p[0]],v=a.pointAt(g);m[1]>0&&(m[0]=-m[0],m[1]=-m[1]),c=[v[0]+m[0]*f,v[1]+m[1]*f],h="center",d="bottom";var y=-Math.atan2(p[1],p[0]);l[0]<s[0]&&(y=Math.PI+y),n.attr("rotation",y)}else c=[-u[0]*f+s[0],-u[1]*f+s[1]],h=u[0]>.8?"right":u[0]<-.8?"left":"center",d=u[1]>.8?"bottom":u[1]<-.8?"top":"middle";n.attr({style:{textVerticalAlign:n.__verticalAlign||d,textAlign:n.__textAlign||h},position:c,scale:[i,i]})}}}},nA._createLine=function(t,e,n){var i=t.hostModel,r=function(t){var e=new QM({name:"line"});return Fr(e.shape,t),e}(t.getItemLayout(e));r.shape.percent=0,Pp.initProps(r,{shape:{percent:1}},i,e),this.add(r);var a=new Pp.Text({name:"label"});this.add(a),du.each(eA,function(n){var i=Gr(n,t,e);this.add(i),this[Vr(n)]=t.getItemVisual(e,n)},this),this._updateCommonStl(t,e,n)},nA.updateData=function(t,e,n){var i=t.hostModel,r=this.childOfName("line"),a=t.getItemLayout(e),o={shape:{}};Fr(o.shape,a),Pp.updateProps(r,o,i,e),du.each(eA,function(n){var i=t.getItemVisual(e,n),r=Vr(n);if(this[r]!==i){this.remove(this.childOfName(n));var a=Gr(n,t,e);this.add(a)}this[r]=i},this),this._updateCommonStl(t,e,n)},nA._updateCommonStl=function(t,e,n){var i=t.hostModel,r=this.childOfName("line"),a=n&&n.lineStyle,o=n&&n.hoverLineStyle,s=n&&n.labelModel,l=n&&n.hoverLabelModel;if(!n||t.hasItemOption){var u=t.getItemModel(e);a=u.getModel("lineStyle").getLineStyle(),o=u.getModel("emphasis.lineStyle").getLineStyle(),s=u.getModel("label"),l=u.getModel("emphasis.label")}var c=t.getItemVisual(e,"color"),h=du.retrieve3(t.getItemVisual(e,"opacity"),a.opacity,1);r.useStyle(du.defaults({strokeNoScale:!0,fill:"none",stroke:c,opacity:h},a)),r.hoverStyle=o,du.each(eA,function(t){var e=this.childOfName(t);e&&(e.setColor(c),e.setStyle({opacity:h}))},this);var d,f,p=s.getShallow("show"),g=l.getShallow("show"),m=this.childOfName("label");if((p||g)&&(d=c||"#000",null==(f=i.getFormattedLabel(e,"normal",t.dataType)))){var v=i.getRawValue(e);f=null==v?t.getName(e):isFinite(v)?tA(v):v}var y=p?f:null,x=g?du.retrieve2(i.getFormattedLabel(e,"emphasis",t.dataType),f):null,_=m.style;null==y&&null==x||(Pp.setTextStyle(m.style,s,{text:y},{autoColor:d}),m.__textAlign=_.textAlign,m.__verticalAlign=_.textVerticalAlign,m.__position=s.get("position")||"middle"),m.hoverStyle=null!=x?{text:x,textFill:l.getTextColor(!0),fontStyle:l.getShallow("fontStyle"),fontWeight:l.getShallow("fontWeight"),fontSize:l.getShallow("fontSize"),fontFamily:l.getShallow("fontFamily")}:{text:null},m.ignore=!p&&!g,Pp.setHoverStyle(this)},nA.highlight=function(){this.trigger("emphasis")},nA.downplay=function(){this.trigger("normal")},nA.updateLayout=function(t,e){this.setLinePoints(t.getItemLayout(e))},nA.setLinePoints=function(t){var e=this.childOfName("line");Fr(e.shape,t),e.dirty()},du.inherits(jr,Pp.Group);var iA=jr,rA=Hr.prototype;rA.isPersistent=function(){return!0},rA.updateData=function(t){var e=this,n=e.group,i=e._lineData;e._lineData=t,i||n.removeAll();var r=Wr(t);t.diff(i).add(function(n){!function(t,e,n,i){if(Xr(e.getItemLayout(n))){var r=new t._ctor(e,n,i);e.setItemGraphicEl(n,r),t.group.add(r)}}(e,t,n,r)}).update(function(n,a){!function(t,e,n,i,r,a){var o=e.getItemGraphicEl(i);Xr(n.getItemLayout(r))?(o?o.updateData(n,r,a):o=new t._ctor(n,r,a),n.setItemGraphicEl(r,o),t.group.add(o)):t.group.remove(o)}(e,i,t,a,n,r)}).remove(function(t){n.remove(i.getItemGraphicEl(t))}).execute()},rA.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(e,n){e.updateLayout(t,n)},this)},rA.incrementalPrepareUpdate=function(t){this._seriesScope=Wr(t),this._lineData=null,this.group.removeAll()},rA.incrementalUpdate=function(t,e){for(var n=t.start;n<t.end;n++)if(Xr(e.getItemLayout(n))){var i=new this._ctor(e,n,this._seriesScope);i.traverse(function(t){t.isGroup||(t.incremental=t.useHoverLayer=!0)}),this.group.add(i),e.setItemGraphicEl(n,i)}},rA.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},rA._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()};var aA=Hr,oA=[],sA=[],lA=[],uA=cd.quadraticAt,cA=pu.distSquare,hA=Math.abs,dA=function(t,e){function n(t){var e=t.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),e}var i=[],r=cd.quadraticSubdivide,a=[[],[],[]],o=[[],[]],s=[];e/=2,t.eachEdge(function(t,l){var u=t.getLayout(),c=t.getVisual("fromSymbol"),h=t.getVisual("toSymbol");u.__original||(u.__original=[pu.clone(u[0]),pu.clone(u[1])],u[2]&&u.__original.push(pu.clone(u[2])));var d=u.__original;if(null!=u[2]){if(pu.copy(a[0],d[0]),pu.copy(a[1],d[2]),pu.copy(a[2],d[1]),c&&"none"!=c){var f=n(t.node1),p=Ur(a,d[0],f*e);r(a[0][0],a[1][0],a[2][0],p,i),a[0][0]=i[3],a[1][0]=i[4],r(a[0][1],a[1][1],a[2][1],p,i),a[0][1]=i[3],a[1][1]=i[4]}if(h&&"none"!=h){f=n(t.node2),p=Ur(a,d[1],f*e);r(a[0][0],a[1][0],a[2][0],p,i),a[1][0]=i[1],a[2][0]=i[2],r(a[0][1],a[1][1],a[2][1],p,i),a[1][1]=i[1],a[2][1]=i[2]}pu.copy(u[0],a[0]),pu.copy(u[1],a[2]),pu.copy(u[2],a[1])}else pu.copy(o[0],d[0]),pu.copy(o[1],d[1]),pu.sub(s,o[1],o[0]),pu.normalize(s,s),c&&"none"!=c&&(f=n(t.node1),pu.scaleAndAdd(o[0],o[0],s,f*e)),h&&"none"!=h&&(f=n(t.node2),pu.scaleAndAdd(o[1],o[1],s,-f*e)),pu.copy(u[0],o[0]),pu.copy(u[1],o[1])})},fA=SS.onIrrelevantElement,pA=["itemStyle","opacity"],gA=["lineStyle","opacity"],mA=(T_.extendChartView({type:"graph",init:function(t,e){var n=new W_,i=new aA,r=this.group;this._controller=new _S(e.getZr()),this._controllerHost={target:r},r.add(n.group),r.add(i.group),this._symbolDraw=n,this._lineDraw=i,this._firstRender=!0},render:function(t,e,n){var i=t.coordinateSystem;this._model=t,this._nodeScaleRatio=t.get("nodeScaleRatio");var r=this._symbolDraw,a=this._lineDraw,o=this.group;if("view"===i.type){var s={position:i.position,scale:i.scale};this._firstRender?o.attr(s):Pp.updateProps(o,s,t)}dA(t.getGraph(),this._getNodeGlobalScale(t));var l=t.getData();r.updateData(l);var u=t.getEdgeData();a.updateData(u),this._updateNodeAndLinkScale(),this._updateController(t,e,n),clearTimeout(this._layoutTimeout);var c=t.forceLayout,h=t.get("force.layoutAnimation");c&&this._startForceLayoutIteration(c,h),l.eachItemGraphicEl(function(e,i){var r=l.getItemModel(i);e.off("drag").off("dragend");var a=l.getItemModel(i).get("draggable");a&&e.on("drag",function(){c&&(c.warmUp(),!this._layouting&&this._startForceLayoutIteration(c,h),c.setFixed(i),l.setItemLayout(i,e.position))},this).on("dragend",function(){c&&c.setUnfixed(i)},this),e.setDraggable(a&&c),e.off("mouseover",e.__focusNodeAdjacency),e.off("mouseout",e.__unfocusNodeAdjacency),r.get("focusNodeAdjacency")&&(e.on("mouseover",e.__focusNodeAdjacency=function(){n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,dataIndex:e.dataIndex})}),e.on("mouseout",e.__unfocusNodeAdjacency=function(){n.dispatchAction({type:"unfocusNodeAdjacency",seriesId:t.id})}))},this),l.graph.eachEdge(function(e){var i=e.getGraphicEl();i.off("mouseover",i.__focusNodeAdjacency),i.off("mouseout",i.__unfocusNodeAdjacency),e.getModel().get("focusNodeAdjacency")&&(i.on("mouseover",i.__focusNodeAdjacency=function(){n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,edgeDataIndex:e.dataIndex})}),i.on("mouseout",i.__unfocusNodeAdjacency=function(){n.dispatchAction({type:"unfocusNodeAdjacency",seriesId:t.id})}))});var d="circular"===t.get("layout")&&t.get("circular.rotateLabel"),f=l.getLayout("cx"),p=l.getLayout("cy");l.eachItemGraphicEl(function(t,e){var n=t.getSymbolPath();if(d){var i=l.getItemLayout(e),r=Math.atan2(i[1]-p,i[0]-f);r<0&&(r=2*Math.PI+r);var a=i[0]<f;a&&(r-=Math.PI);var o=a?"left":"right";n.setStyle({textRotation:-r,textPosition:o,textOrigin:"center"}),n.hoverStyle&&(n.hoverStyle.textPosition=o)}else n.setStyle({textRotation:0})}),this._firstRender=!1},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={}},focusNodeAdjacency:function(t,e,n,i){var r=this._model.getData().graph,a=i.dataIndex,o=i.edgeDataIndex,s=r.getNodeByIndex(a),l=r.getEdgeByIndex(o);(s||l)&&(r.eachNode(function(t){Zr(t,pA,.1)}),r.eachEdge(function(t){Zr(t,gA,.1)}),s&&(Kr(s,pA),du.each(s.edges,function(t){t.dataIndex<0||(Kr(t,gA),Kr(t.node1,pA),Kr(t.node2,pA))})),l&&(Kr(l,gA),Kr(l.node1,pA),Kr(l.node2,pA)))},unfocusNodeAdjacency:function(t,e,n,i){var r=this._model.getData().graph;r.eachNode(function(t){Zr(t,pA)}),r.eachEdge(function(t){Zr(t,gA)})},_startForceLayoutIteration:function(t,e){var n=this;!function i(){t.step(function(t){n.updateLayout(n._model),(n._layouting=!t)&&(e?n._layoutTimeout=setTimeout(i,16):i())})}()},_updateController:function(t,e,n){var i=this._controller,r=this._controllerHost,a=this.group;i.setPointerChecker(function(e,i,r){var o=a.getBoundingRect();return o.applyTransform(a.transform),o.contain(i,r)&&!fA(e,n,t)}),"view"===t.coordinateSystem.type?(i.enable(t.get("roam")),r.zoomLimit=t.get("scaleLimit"),r.zoom=t.coordinateSystem.getZoom(),i.off("pan").off("zoom").on("pan",function(e,i){bS.updateViewOnPan(r,e,i),n.dispatchAction({seriesId:t.id,type:"graphRoam",dx:e,dy:i})}).on("zoom",function(e,i,a){bS.updateViewOnZoom(r,e,i,a),n.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:e,originX:i,originY:a}),this._updateNodeAndLinkScale(),dA(t.getGraph(),this._getNodeGlobalScale(t)),this._lineDraw.updateLayout()},this)):i.disable()},_updateNodeAndLinkScale:function(){var t=this._model,e=t.getData(),n=this._getNodeGlobalScale(t),i=[n,n];e.eachItemGraphicEl(function(t,e){t.attr("scale",i)})},_getNodeGlobalScale:function(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var n=this._nodeScaleRatio,i=e.scale,r=i&&i[0]||1;return((e.getZoom()-1)*n+1)/r},updateLayout:function(t){dA(t.getGraph(),this._getNodeGlobalScale(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()}}),CS.updateCenterAndZoom);T_.registerAction({type:"graphRoam",event:"graphRoam",update:"none"},function(t,e){e.eachComponent({mainType:"series",query:t},function(e){var n=e.coordinateSystem,i=mA(n,t);e.setCenter&&e.setCenter(i.center),e.setZoom&&e.setZoom(i.zoom)})}),T_.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series.graph:focusNodeAdjacency"},function(){}),T_.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series.graph:unfocusNodeAdjacency"},function(){});var vA=function(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.eachSeriesByType("graph",function(t){var n=t.getCategoriesData(),i=t.getGraph().data,r=n.mapArray(n.getName);i.filterSelf(function(t){var n=i.getItemModel(t).getShallow("category");if(null!=n){"number"==typeof n&&(n=r[n]);for(var a=0;a<e.length;a++)if(!e[a].isSelected(n))return!1}return!0})},this)},yA=function(t){var e={};t.eachSeriesByType("graph",function(t){var n=t.getCategoriesData(),i=t.getData(),r={};n.each(function(i){var a=n.getName(i);r["ec-"+a]=i;var o=n.getItemModel(i).get("itemStyle.color")||t.getColorFromPalette(a,e);n.setItemVisual(i,"color",o)}),n.count()&&i.each(function(t){var e=i.getItemModel(t).getShallow("category");null!=e&&("string"==typeof e&&(e=r["ec-"+e]),i.getItemVisual(t,"color",!0)||i.setItemVisual(t,"color",n.getItemVisual(e,"color")))})})},xA=function(t){t.eachSeriesByType("graph",function(t){var e=t.getGraph(),n=t.getEdgeData(),i=$r(t.get("edgeSymbol")),r=$r(t.get("edgeSymbolSize")),a="lineStyle.color".split("."),o="lineStyle.opacity".split(".");n.setVisual("fromSymbol",i&&i[0]),n.setVisual("toSymbol",i&&i[1]),n.setVisual("fromSymbolSize",r&&r[0]),n.setVisual("toSymbolSize",r&&r[1]),n.setVisual("color",t.get(a)),n.setVisual("opacity",t.get(o)),n.each(function(t){var i=n.getItemModel(t),r=e.getEdgeByIndex(t),s=$r(i.getShallow("symbol",!0)),l=$r(i.getShallow("symbolSize",!0)),u=i.get(a),c=i.get(o);switch(u){case"source":u=r.node1.getVisual("color");break;case"target":u=r.node2.getVisual("color")}s[0]&&r.setVisual("fromSymbol",s[0]),s[1]&&r.setVisual("toSymbol",s[1]),l[0]&&r.setVisual("fromSymbolSize",l[0]),l[1]&&r.setVisual("toSymbolSize",l[1]),r.setVisual("color",u),r.setVisual("opacity",c)})})},_A={simpleLayout:function(t){var e=t.coordinateSystem;if(!e||"view"===e.type){var n=t.getGraph();n.eachNode(function(t){var e=t.getModel();t.setLayout([+e.get("x"),+e.get("y")])}),Jr(n)}},simpleLayoutEdge:Jr},bA=du.each,wA=_A.simpleLayout,SA=_A.simpleLayoutEdge,MA=function(t,e){t.eachSeriesByType("graph",function(t){var e=t.get("layout"),n=t.coordinateSystem;if(n&&"view"!==n.type){var i=t.getData(),r=[];bA(n.dimensions,function(t){r=r.concat(i.mapDimension(t,!0))});for(var a=0;a<i.count();a++){for(var o=[],s=!1,l=0;l<r.length;l++){var u=i.get(r[l],a);isNaN(u)||(s=!0),o.push(u)}s?i.setItemLayout(a,n.dataToPoint(o)):i.setItemLayout(a,[NaN,NaN])}SA(i.graph)}else e&&"none"!==e||wA(t)})},AA={circularLayout:function(t){var e=t.coordinateSystem;if(!e||"view"===e.type){var n=e.getBoundingRect(),i=t.getData(),r=i.graph,a=0,o=i.getSum("value"),s=2*Math.PI/(o||i.count()),l=n.width/2+n.x,u=n.height/2+n.y,c=Math.min(n.width,n.height)/2;r.eachNode(function(t){var e=t.getValue("value");a+=s*(o?e:1)/2,t.setLayout([c*Math.cos(a)+l,c*Math.sin(a)+u]),a+=s*(o?e:1)/2}),i.setLayout({cx:l,cy:u}),r.eachEdge(function(t){var e,n=t.getModel().get("lineStyle.curveness")||0,i=pu.clone(t.node1.getLayout()),r=pu.clone(t.node2.getLayout()),a=(i[0]+r[0])/2,o=(i[1]+r[1])/2;+n&&(e=[l*(n*=3)+a*(1-n),u*n+o*(1-n)]),t.setLayout([i,r,e])})}}},CA=AA.circularLayout,IA=function(t){t.eachSeriesByType("graph",function(t){"circular"===t.get("layout")&&CA(t)})},PA=pu.scaleAndAdd,TA={forceLayout:function(t,e,n){for(var i=n.rect,r=i.width,a=i.height,o=[i.x+r/2,i.y+a/2],s=null==n.gravity?.1:n.gravity,l=0;l<t.length;l++){var u=t[l];u.p||(u.p=pu.create(r*(Math.random()-.5)+o[0],a*(Math.random()-.5)+o[1])),u.pp=pu.clone(u.p),u.edges=null}var c=.6;return{warmUp:function(){c=.5},setFixed:function(e){t[e].fixed=!0},setUnfixed:function(e){t[e].fixed=!1},step:function(n){for(var i=[],r=t.length,a=0;a<e.length;a++){var l=e[a],u=l.n1,h=l.n2;pu.sub(i,h.p,u.p);var d=pu.len(i)-l.d,f=h.w/(u.w+h.w);isNaN(f)&&(f=0),pu.normalize(i,i),!u.fixed&&PA(u.p,u.p,i,f*d*c),!h.fixed&&PA(h.p,h.p,i,-(1-f)*d*c)}for(a=0;a<r;a++)(v=t[a]).fixed||(pu.sub(i,o,v.p),PA(v.p,v.p,i,s*c));for(a=0;a<r;a++){u=t[a];for(var p=a+1;p<r;p++){h=t[p],pu.sub(i,h.p,u.p),0===(d=pu.len(i))&&(pu.set(i,Math.random()-.5,Math.random()-.5),d=1);var g=(u.rep+h.rep)/d/d;!u.fixed&&PA(u.pp,u.pp,i,g),!h.fixed&&PA(h.pp,h.pp,i,-g)}}var m=[];for(a=0;a<r;a++){var v=t[a];v.fixed||(pu.sub(m,v.p,v.pp),PA(v.p,v.p,m,c),pu.copy(v.pp,v.p))}c*=.992,n&&n(t,e,c<.01)}}}}.forceLayout,OA=_A.simpleLayout,kA=AA.circularLayout,DA=Wp.linearMap,EA=function(t){t.eachSeriesByType("graph",function(t){if(!(h=t.coordinateSystem)||"view"===h.type)if("force"===t.get("layout")){var e=t.preservedPoints||{},n=t.getGraph(),i=n.data,r=n.edgeData,a=t.getModel("force"),o=a.get("initLayout");t.preservedPoints?i.each(function(t){var n=i.getId(t);i.setItemLayout(t,e[n]||[NaN,NaN])}):o&&"none"!==o?"circular"===o&&kA(t):OA(t);var s=i.getDataExtent("value"),l=r.getDataExtent("value"),u=a.get("repulsion"),c=a.get("edgeLength");du.isArray(u)||(u=[u,u]),du.isArray(c)||(c=[c,c]),c=[c[1],c[0]];var h,d=i.mapArray("value",function(t,e){var n=i.getItemLayout(e),r=DA(t,s,u);return isNaN(r)&&(r=(u[0]+u[1])/2),{w:r,rep:r,fixed:i.getItemModel(e).get("fixed"),p:!n||isNaN(n[0])||isNaN(n[1])?null:n}}),f=r.mapArray("value",function(t,e){var i=n.getEdgeByIndex(e),r=DA(t,l,c);return isNaN(r)&&(r=(c[0]+c[1])/2),{n1:d[i.node1.dataIndex],n2:d[i.node2.dataIndex],d:r,curveness:i.getModel().get("lineStyle.curveness")||0}}),p=(h=t.coordinateSystem).getBoundingRect(),g=TA(d,f,{rect:p,gravity:a.get("gravity")}),m=g.step;g.step=function(t){for(var r=0,a=d.length;r<a;r++)d[r].fixed&&pu.copy(d[r].p,n.getNodeByIndex(r).getLayout());m(function(r,a,o){for(var s=0,l=r.length;s<l;s++)r[s].fixed||n.getNodeByIndex(s).setLayout(r[s].p),e[i.getId(s)]=r[s].p;for(s=0,l=a.length;s<l;s++){var u=a[s],c=n.getEdgeByIndex(s),h=u.n1.p,d=u.n2.p,f=c.getLayout();(f=f?f.slice():[])[0]=f[0]||[],f[1]=f[1]||[],pu.copy(f[0],h),pu.copy(f[1],d),+u.curveness&&(f[2]=[(h[0]+d[0])/2-(h[1]-d[1])*u.curveness,(h[1]+d[1])/2-(d[0]-h[0])*u.curveness]),c.setLayout(f)}t&&t(o)})},t.forceLayout=g,t.preservedPoints=e,g.step()}else t.forceLayout=null})},LA=ig.getLayoutRect,NA=function(t,e){var n=[];return t.eachSeriesByType("graph",function(t){var i=t.get("coordinateSystem");if(!i||"view"===i){var r=t.getData(),a=r.mapArray(function(t){var e=r.getItemModel(t);return[+e.get("x"),+e.get("y")]}),o=[],s=[];bd.fromPoints(a,o,s),s[0]-o[0]==0&&(s[0]+=1,o[0]-=1),s[1]-o[1]==0&&(s[1]+=1,o[1]-=1);var l=(s[0]-o[0])/(s[1]-o[1]),u=function(t,e,n){var i=t.getBoxLayoutParams();return i.aspect=n,LA(i,{width:e.getWidth(),height:e.getHeight()})}(t,e,l);isNaN(l)&&(o=[u.x,u.y],s=[u.x+u.width,u.y+u.height]);var c=s[0]-o[0],h=s[1]-o[1],d=u.width,f=u.height,p=t.coordinateSystem=new nS;p.zoomLimit=t.get("scaleLimit"),p.setBoundingRect(o[0],o[1],c,h),p.setViewRect(u.x,u.y,d,f),p.setCenter(t.get("center")),p.setZoom(t.get("zoom")),n.push(p)}}),n};T_.registerProcessor(vA),T_.registerVisual(cb("graph","circle",null)),T_.registerVisual(yA),T_.registerVisual(xA),T_.registerLayout(MA),T_.registerLayout(IA),T_.registerLayout(EA),T_.registerCoordinateSystem("graphView",{create:NA}),xv.extend({type:"series.gauge",getInitialData:function(t,e){var n=t.data||[];return du.isArray(n)||(n=[n]),t.data=n,Cw(this,["value"])},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,distance:5,color:"auto"},pointer:{show:!0,length:"80%",width:8},itemStyle:{color:"auto"},title:{show:!0,offsetCenter:[0,"-40%"],color:"#333",fontSize:15},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"auto",fontSize:30}}});var RA=rf.extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(t,e){var n=Math.cos,i=Math.sin,r=e.r,a=e.width,o=e.angle,s=e.x-n(o)*a*(a>=r/3?1:2),l=e.y-i(o)*a*(a>=r/3?1:2);o=e.angle-Math.PI/2,t.moveTo(s,l),t.lineTo(e.x+n(o)*a,e.y+i(o)*a),t.lineTo(e.x+n(e.angle)*r,e.y+i(e.angle)*r),t.lineTo(e.x-n(o)*a,e.y-i(o)*a),t.lineTo(s,l)}}),BA=Wp.parsePercent,zA=Wp.round,VA=Wp.linearMap,GA=2*Math.PI,FA=(kv.extend({type:"gauge",render:function(t,e,n){this.group.removeAll();var i=t.get("axisLine.lineStyle.color"),r=function(t,e){var n=t.get("center"),i=e.getWidth(),r=e.getHeight(),a=Math.min(i,r);return{cx:BA(n[0],e.getWidth()),cy:BA(n[1],e.getHeight()),r:BA(t.get("radius"),a/2)}}(t,n);this._renderMain(t,e,n,i,r)},dispose:function(){},_renderMain:function(t,e,n,i,r){for(var a=this.group,o=t.getModel("axisLine").getModel("lineStyle"),s=t.get("clockwise"),l=-t.get("startAngle")/180*Math.PI,u=((f=-t.get("endAngle")/180*Math.PI)-l)%GA,c=l,h=o.get("width"),d=0;d<i.length;d++){var f=l+u*Math.min(Math.max(i[d][0],0),1),p=new Pp.Sector({shape:{startAngle:c,endAngle:f,cx:r.cx,cy:r.cy,clockwise:s,r0:r.r-h,r:r.r},silent:!0});p.setStyle({fill:i[d][1]}),p.setStyle(o.getLineStyle(["color","borderWidth","borderColor"])),a.add(p),c=f}var g=function(t){if(t<=0)return i[0][1];for(var e=0;e<i.length;e++)if(i[e][0]>=t&&(0===e?0:i[e-1][0])<t)return i[e][1];return i[e-1][1]};if(!s){var m=l;l=f,f=m}this._renderTicks(t,e,n,g,r,l,f,s),this._renderPointer(t,e,n,g,r,l,f,s),this._renderTitle(t,e,n,g,r),this._renderDetail(t,e,n,g,r)},_renderTicks:function(t,e,n,i,r,a,o,s){for(var l=this.group,u=r.cx,c=r.cy,h=r.r,d=+t.get("min"),f=+t.get("max"),p=t.getModel("splitLine"),g=t.getModel("axisTick"),m=t.getModel("axisLabel"),v=t.get("splitNumber"),y=g.get("splitNumber"),x=BA(p.get("length"),h),_=BA(g.get("length"),h),b=a,w=(o-a)/v,S=w/y,M=p.getModel("lineStyle").getLineStyle(),A=g.getModel("lineStyle").getLineStyle(),C=0;C<=v;C++){var I=Math.cos(b),P=Math.sin(b);if(p.get("show")){var T=new Pp.Line({shape:{x1:I*h+u,y1:P*h+c,x2:I*(h-x)+u,y2:P*(h-x)+c},style:M,silent:!0});"auto"===M.stroke&&T.setStyle({stroke:i(C/v)}),l.add(T)}if(m.get("show")){var O=Qr(zA(C/v*(f-d)+d),m.get("formatter")),k=m.get("distance"),D=i(C/v);l.add(new Pp.Text({style:Pp.setTextStyle({},m,{text:O,x:I*(h-x-k)+u,y:P*(h-x-k)+c,textVerticalAlign:P<-.4?"top":P>.4?"bottom":"middle",textAlign:I<-.4?"left":I>.4?"right":"center"},{autoColor:D}),silent:!0}))}if(g.get("show")&&C!==v){for(var E=0;E<=y;E++){I=Math.cos(b),P=Math.sin(b);var L=new Pp.Line({shape:{x1:I*h+u,y1:P*h+c,x2:I*(h-_)+u,y2:P*(h-_)+c},silent:!0,style:A});"auto"===A.stroke&&L.setStyle({stroke:i((C+E/y)/v)}),l.add(L),b+=S}b-=S}else b+=w}},_renderPointer:function(t,e,n,i,r,a,o,s){var l=this.group,u=this._data;if(t.get("pointer.show")){var c=[+t.get("min"),+t.get("max")],h=[a,o],d=t.getData(),f=d.mapDimension("value");d.diff(u).add(function(e){var n=new RA({shape:{angle:a}});Pp.initProps(n,{shape:{angle:VA(d.get(f,e),c,h,!0)}},t),l.add(n),d.setItemGraphicEl(e,n)}).update(function(e,n){var i=u.getItemGraphicEl(n);Pp.updateProps(i,{shape:{angle:VA(d.get(f,e),c,h,!0)}},t),l.add(i),d.setItemGraphicEl(e,i)}).remove(function(t){var e=u.getItemGraphicEl(t);l.remove(e)}).execute(),d.eachItemGraphicEl(function(t,e){var n=d.getItemModel(e),a=n.getModel("pointer");t.setShape({x:r.cx,y:r.cy,width:BA(a.get("width"),r.r),r:BA(a.get("length"),r.r)}),t.useStyle(n.getModel("itemStyle").getItemStyle()),"auto"===t.style.fill&&t.setStyle("fill",i(VA(d.get(f,e),c,[0,1],!0))),Pp.setHoverStyle(t,n.getModel("emphasis.itemStyle").getItemStyle())}),this._data=d}else u&&u.eachItemGraphicEl(function(t){l.remove(t)})},_renderTitle:function(t,e,n,i,r){var a=t.getData(),o=a.mapDimension("value"),s=t.getModel("title");if(s.get("show")){var l=s.get("offsetCenter"),u=r.cx+BA(l[0],r.r),c=r.cy+BA(l[1],r.r),h=+t.get("min"),d=+t.get("max"),f=t.getData().get(o,0),p=i(VA(f,[h,d],[0,1],!0));this.group.add(new Pp.Text({silent:!0,style:Pp.setTextStyle({},s,{x:u,y:c,text:a.getName(0),textAlign:"center",textVerticalAlign:"middle"},{autoColor:p,forceRich:!0})}))}},_renderDetail:function(t,e,n,i,r){var a=t.getModel("detail"),o=+t.get("min"),s=+t.get("max");if(a.get("show")){var l=a.get("offsetCenter"),u=r.cx+BA(l[0],r.r),c=r.cy+BA(l[1],r.r),h=BA(a.get("width"),r.r),d=BA(a.get("height"),r.r),f=t.getData(),p=f.get(f.mapDimension("value"),0),g=i(VA(p,[o,s],[0,1],!0));this.group.add(new Pp.Text({silent:!0,style:Pp.setTextStyle({},a,{x:u,y:c,text:Qr(p,a.get("formatter")),textWidth:isNaN(h)?null:h,textHeight:isNaN(d)?null:d,textAlign:"center",textVerticalAlign:"middle"},{autoColor:g,forceRich:!0})}))}}}),Hh.defaultEmphasis),jA=T_.extendSeriesModel({type:"series.funnel",init:function(t){jA.superApply(this,"init",arguments),this.legendDataProvider=function(){return this.getRawData()},this._defaultLabelLine(t)},getInitialData:function(t,e){return Cw(this,["value"])},_defaultLabelLine:function(t){FA(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},getDataParams:function(t){var e=this.getData(),n=jA.superCall(this,"getDataParams",t),i=e.mapDimension("value"),r=e.getSum(i);return n.percent=r?+(e.get(i,t)/r*100).toFixed(2):0,n.$vars.push("percent"),n},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}}}}),HA=ta.prototype,WA=["itemStyle","opacity"];HA.updateData=function(t,e,n){var i=this.childAt(0),r=t.hostModel,a=t.getItemModel(e),o=t.getItemLayout(e),s=t.getItemModel(e).get(WA);s=null==s?1:s,i.useStyle({}),n?(i.setShape({points:o.points}),i.setStyle({opacity:0}),Pp.initProps(i,{style:{opacity:s}},r,e)):Pp.updateProps(i,{style:{opacity:s},shape:{points:o.points}},r,e);var l=a.getModel("itemStyle"),u=t.getItemVisual(e,"color");i.setStyle(du.defaults({lineJoin:"round",fill:u},l.getItemStyle(["opacity"]))),i.hoverStyle=l.getModel("emphasis").getItemStyle(),this._updateLabel(t,e),Pp.setHoverStyle(this)},HA._updateLabel=function(t,e){var n=this.childAt(1),i=this.childAt(2),r=t.hostModel,a=t.getItemModel(e),o=t.getItemLayout(e).label,s=t.getItemVisual(e,"color");Pp.updateProps(n,{shape:{points:o.linePoints||o.linePoints}},r,e),Pp.updateProps(i,{style:{x:o.x,y:o.y}},r,e),i.attr({rotation:o.rotation,origin:[o.x,o.y],z2:10});var l=a.getModel("label"),u=a.getModel("emphasis.label"),c=a.getModel("labelLine"),h=a.getModel("emphasis.labelLine");s=t.getItemVisual(e,"color");Pp.setLabelStyle(i.style,i.hoverStyle={},l,u,{labelFetcher:t.hostModel,labelDataIndex:e,defaultText:t.getName(e),autoColor:s,useInsideStyle:!!o.inside},{textAlign:o.textAlign,textVerticalAlign:o.verticalAlign}),i.ignore=i.normalIgnore=!l.get("show"),i.hoverIgnore=!u.get("show"),n.ignore=n.normalIgnore=!c.get("show"),n.hoverIgnore=!h.get("show"),n.setStyle({stroke:s}),n.setStyle(c.getModel("lineStyle").getLineStyle()),n.hoverStyle=h.getModel("lineStyle").getLineStyle()},du.inherits(ta,Pp.Group),kv.extend({type:"funnel",render:function(t,e,n){var i=t.getData(),r=this._data,a=this.group;i.diff(r).add(function(t){var e=new ta(i,t);i.setItemGraphicEl(t,e),a.add(e)}).update(function(t,e){var n=r.getItemGraphicEl(e);n.updateData(i,t),a.add(n),i.setItemGraphicEl(t,n)}).remove(function(t){var e=r.getItemGraphicEl(t);a.remove(e)}).execute(),this._data=i},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}});var YA=Wp.parsePercent,XA=Wp.linearMap,UA=function(t,e,n){t.eachSeriesByType("funnel",function(t){var n=t.getData(),i=n.mapDimension("value"),r=t.get("sort"),a=function(t,e){return ig.getLayoutRect(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}(t,e),o=function(t,e){for(var n=t.mapDimension("value"),i=t.mapArray(n,function(t){return t}),r=[],a="ascending"===e,o=0,s=t.count();o<s;o++)r[o]=o;return"function"==typeof e?r.sort(e):"none"!==e&&r.sort(function(t,e){return a?i[t]-i[e]:i[e]-i[t]}),r}(n,r),s=[YA(t.get("minSize"),a.width),YA(t.get("maxSize"),a.width)],l=n.getDataExtent(i),u=t.get("min"),c=t.get("max");null==u&&(u=Math.min(l[0],0)),null==c&&(c=l[1]);var h=t.get("funnelAlign"),d=t.get("gap"),f=(a.height-d*(n.count()-1))/n.count(),p=a.y,g=function(t,e){var r,o=n.get(i,t)||0,l=XA(o,[u,c],s,!0);switch(h){case"left":r=a.x;break;case"center":r=a.x+(a.width-l)/2;break;case"right":r=a.x+a.width-l}return[[r,e],[r+l,e]]};"ascending"===r&&(f=-f,d=-d,p+=a.height,o=o.reverse());for(var m=0;m<o.length;m++){var v=o[m],y=o[m+1],x=n.getItemModel(v).get("itemStyle.height");null==x?x=f:(x=YA(x,a.height),"ascending"===r&&(x=-x));var _=g(v,p),b=g(y,p+x);p+=x+d,n.setItemLayout(v,{points:_.concat(b.slice().reverse())})}!function(t){t.each(function(e){var n,i,r,a,o=t.getItemModel(e),s=o.getModel("label").get("position"),l=o.getModel("labelLine"),u=t.getItemLayout(e),c=u.points,h="inner"===s||"inside"===s||"center"===s;if(h)n="center",a=[[i=(c[0][0]+c[1][0]+c[2][0]+c[3][0])/4,r=(c[0][1]+c[1][1]+c[2][1]+c[3][1])/4],[i,r]];else{var d,f,p,g=l.get("length");"left"===s?(d=(c[3][0]+c[0][0])/2,f=(c[3][1]+c[0][1])/2,i=(p=d-g)-5,n="right"):(d=(c[1][0]+c[2][0])/2,f=(c[1][1]+c[2][1])/2,i=(p=d+g)+5,n="left");var m=f;a=[[d,f],[p,m]],r=m}u.label={linePoints:a,x:i,y:r,verticalAlign:"middle",textAlign:n,inside:h}})}(n)})};T_.registerVisual(Lw("funnel")),T_.registerLayout(UA),T_.registerProcessor(Fw("funnel"));var qA=function(t){!function(t){if(!t.parallel){var e=!1;du.each(t.series,function(t){t&&"parallel"===t.type&&(e=!0)}),e&&(t.parallel=[{}])}}(t),function(t){var e=Hh.normalizeToArray(t.parallelAxis);du.each(e,function(e){if(du.isObject(e)){var n=e.parallelIndex||0,i=Hh.normalizeToArray(t.parallel)[n];i&&i.parallelAxisDefault&&du.merge(e,i.parallelAxisDefault,!1)}})}(t)},ZA=function(t,e,n,i,r){h_.call(this,t,e,n),this.type=i||"value",this.axisIndex=r};ZA.prototype={constructor:ZA,model:null,isHorizontal:function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")}},du.inherits(ZA,h_);var KA=ZA,$A=function(t,e,n,i,r,a){e[0]=na(e[0],n),e[1]=na(e[1],n),t=t||0;var o=n[1]-n[0];null!=r&&(r=na(r,[0,o])),null!=a&&(a=Math.max(a,null!=r?r:0)),"all"===i&&(r=a=Math.abs(e[1]-e[0]),i=0);var s=ea(e,i);e[i]+=t;var l=r||0,u=n.slice();s.sign<0?u[0]+=l:u[1]-=l,e[i]=na(e[i],u),c=ea(e,i),null!=r&&(c.sign!==s.sign||c.span<r)&&(e[1-i]=e[i]+s.sign*r);var c=ea(e,i);return null!=a&&c.span>a&&(e[1-i]=e[i]+c.sign*a),e},JA=du.each,QA=Math.min,tC=Math.max,eC=Math.floor,nC=Math.ceil,iC=Wp.round,rC=Math.PI;ia.prototype={type:"parallel",constructor:ia,_init:function(t,e,n){var i=t.dimensions,r=t.parallelAxisIndex;JA(i,function(t,n){var i=r[n],a=e.getComponent("parallelAxis",i),o=this._axesMap.set(t,new KA(t,Dx.createScaleByModel(a),[0,0],a.get("type"),i)),s="category"===o.type;o.onBand=s&&a.get("boundaryGap"),o.inverse=a.get("inverse"),a.axis=o,o.model=a,o.coordinateSystem=a.coordinateSystem=this},this)},update:function(t,e){this._updateAxesFromSeries(this._model,t)},containPoint:function(t){var e=this._makeLayoutInfo(),n=e.axisBase,i=e.layoutBase,r=e.pixelDimIndex,a=t[1-r],o=t[r];return a>=n&&a<=n+e.axisLength&&o>=i&&o<=i+e.layoutLength},getModel:function(){return this._model},_updateAxesFromSeries:function(t,e){e.eachSeries(function(n){if(t.contains(n,e)){var i=n.getData();JA(this.dimensions,function(t){var e=this._axesMap.get(t);e.scale.unionExtentFromData(i,i.mapDimension(t)),Dx.niceScaleExtent(e.scale,e.model)},this)}},this)},resize:function(t,e){this._rect=ig.getLayoutRect(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var t,e=this._model,n=this._rect,i=["x","y"],r=["width","height"],a=e.get("layout"),o="horizontal"===a?0:1,s=n[r[o]],l=[0,s],u=this.dimensions.length,c=ra(e.get("axisExpandWidth"),l),h=ra(e.get("axisExpandCount")||0,[0,u]),d=e.get("axisExpandable")&&u>3&&u>h&&h>1&&c>0&&s>0,f=e.get("axisExpandWindow");f?(t=ra(f[1]-f[0],l),f[1]=f[0]+t):(t=ra(c*(h-1),l),(f=[c*(e.get("axisExpandCenter")||eC(u/2))-t/2])[1]=f[0]+t);var p=(s-t)/(u-h);p<3&&(p=0);var g=[eC(iC(f[0]/c,1))+1,nC(iC(f[1]/c,1))-1],m=p/c*f[0];return{layout:a,pixelDimIndex:o,layoutBase:n[i[o]],layoutLength:s,axisBase:n[i[1-o]],axisLength:n[r[1-o]],axisExpandable:d,axisExpandWidth:c,axisCollapseWidth:p,axisExpandWindow:f,axisCount:u,winInnerIndices:g,axisExpandWindow0Pos:m}},_layoutAxes:function(){var t=this._rect,e=this._axesMap,n=this.dimensions,i=this._makeLayoutInfo(),r=i.layout;e.each(function(t){var e=[0,i.axisLength],n=t.inverse?1:0;t.setExtent(e[n],e[1-n])}),JA(n,function(e,n){var a=(i.axisExpandable?function(t,e){var n,i,r=e.layoutLength,a=e.axisExpandWidth,o=e.axisCount,s=e.axisCollapseWidth,l=e.winInnerIndices,u=s,c=!1;return t<l[0]?(n=t*s,i=s):t<=l[1]?(n=e.axisExpandWindow0Pos+t*a-e.axisExpandWindow[0],u=a,c=!0):(n=r-(o-1-t)*s,i=s),{position:n,axisNameAvailableWidth:u,axisLabelShow:c,nameTruncateMaxWidth:i}}:function(t,e){var n=e.layoutLength/(e.axisCount-1);return{position:n*t,axisNameAvailableWidth:n,axisLabelShow:!0}})(n,i),o={horizontal:{x:a.position,y:i.axisLength},vertical:{x:0,y:a.position}},s={horizontal:rC/2,vertical:0},l=[o[r].x+t.x,o[r].y+t.y],u=s[r],c=Mu.create();Mu.rotate(c,c,u),Mu.translate(c,c,l),this._axesLayout[e]={position:l,rotation:u,transform:c,axisNameAvailableWidth:a.axisNameAvailableWidth,axisLabelShow:a.axisLabelShow,nameTruncateMaxWidth:a.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},getAxis:function(t){return this._axesMap.get(t)},dataToPoint:function(t,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(t),e)},eachActiveState:function(t,e,n,i){null==n&&(n=0),null==i&&(i=t.count());var r=this._axesMap,a=this.dimensions,o=[],s=[];du.each(a,function(e){o.push(t.mapDimension(e)),s.push(r.get(e).model)});for(var l=this.hasAxisBrushed(),u=n;u<i;u++){var c;if(l){c="active";for(var h=t.getValues(o,u),d=0,f=a.length;d<f;d++)if("inactive"===s[d].getActiveState(h[d])){c="inactive";break}}else c="normal";e(c,u)}},hasAxisBrushed:function(){for(var t=this.dimensions,e=this._axesMap,n=!1,i=0,r=t.length;i<r;i++)"normal"!==e.get(t[i]).model.getActiveState()&&(n=!0);return n},axisCoordToPoint:function(t,e){var n=this._axesLayout[e];return Pp.applyTransform([t,0],n.transform)},getAxisLayout:function(t){return du.clone(this._axesLayout[t])},getSlidedAxisExpandWindow:function(t){var e=this._makeLayoutInfo(),n=e.pixelDimIndex,i=e.axisExpandWindow.slice(),r=i[1]-i[0],a=[0,e.axisExpandWidth*(e.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:i};var o,s=t[n]-e.layoutBase-e.axisExpandWindow0Pos,l="slide",u=e.axisCollapseWidth,c=this._model.get("axisExpandSlideTriggerArea"),h=null!=c[0];return u?(h&&u&&s<r*c[0]?(l="jump",o=s-r*c[2]):h&&u&&s>r*(1-c[0])?(l="jump",o=s-r*(1-c[2])):(o=s-r*c[1])>=0&&(o=s-r*(1-c[1]))<=0&&(o=0),(o*=e.axisExpandWidth/u)?$A(o,i,a,"all"):l="none"):(r=i[1]-i[0],(i=[tC(0,a[1]*s/r-r/2)])[1]=QA(a[1],i[0]+r),i[0]=i[1]-r),{axisExpandWindow:i,behavior:l}}};var aC=ia;vm.register("parallel",{create:function(t,e){var n=[];return t.eachComponent("parallel",function(i,r){var a=new aC(i,t,e);a.name="parallel_"+r,a.resize(i,e),i.coordinateSystem=a,a.model=i,n.push(a)}),t.eachSeries(function(e){if("parallel"===e.get("coordinateSystem")){var n=t.queryComponents({mainType:"parallel",index:e.get("parallelIndex"),id:e.get("parallelId")})[0];e.coordinateSystem=n.coordinateSystem}}),n}});var oC=ug.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return qh([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},setActiveIntervals:function(t){var e=this.activeIntervals=du.clone(t);if(e)for(var n=e.length-1;n>=0;n--)Wp.asc(e[n])},getActiveState:function(t){var e=this.activeIntervals;if(!e.length)return"normal";if(null==t||isNaN(t))return"inactive";if(1===e.length){var n=e[0];if(n[0]<=t&&t<=n[1])return"active"}else for(var i=0,r=e.length;i<r;i++)if(e[i][0]<=t&&t<=e[i][1])return"active";return"inactive"}});du.merge(oC.prototype,Ex),Pb("parallel",oC,function(t,e){return e.type||(e.data?"category":"value")},{type:"value",dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10}),ug.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},init:function(){ug.prototype.init.apply(this,arguments),this.mergeOption({})},mergeOption:function(t){var e=this.option;t&&du.merge(e,t,!0),this._initDimensions()},contains:function(t,e){var n=t.get("parallelIndex");return null!=n&&e.getComponent("parallel",n)===this},setAxisExpand:function(t){du.each(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(e){t.hasOwnProperty(e)&&(this.option[e]=t[e])},this)},_initDimensions:function(){var t=this.dimensions=[],e=this.parallelAxisIndex=[],n=du.filter(this.dependentModels.parallelAxis,function(t){return(t.get("parallelIndex")||0)===this.componentIndex},this);du.each(n,function(n){t.push("dim"+n.get("dim")),e.push(n.componentIndex)})}}),T_.registerAction({type:"axisAreaSelect",event:"axisAreaSelected"},function(t,e){e.eachComponent({mainType:"parallelAxis",query:t},function(e){e.axis.model.setActiveIntervals(t.intervals)})}),T_.registerAction("parallelAxisExpand",function(t,e){e.eachComponent({mainType:"parallel",query:t},function(e){e.setAxisExpand(t)})});var sC=du.curry,lC=du.each,uC=du.map,cC=Math.min,hC=Math.max,dC=Math.pow,fC=1e4,pC=6,gC=6,mC="globalPan",vC={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},yC={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},xC={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:!0,brushMode:"single",removeOnClick:!1},_C=0;aa.prototype={constructor:aa,enableBrush:function(t){return this._brushType&&function(t){var e=t._zr;xS.release(e,mC,t._uid),lC(t._handlers,function(t,n){e.off(n,t)}),t._brushType=t._brushOption=null}(this),t.brushType&&function(t,e){var n=t._zr;t._enableGlobalPan||xS.take(n,mC,t._uid),lC(t._handlers,function(t,e){n.on(e,t)}),t._brushType=e.brushType,t._brushOption=du.merge(du.clone(xC),e,!0)}(this,t),this},setPanels:function(t){if(t&&t.length){var e=this._panels={};du.each(t,function(t){e[t.panelId]=du.clone(t)})}else this._panels=null;return this},mount:function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var e=this.group;return this._zr.add(e),e.attr({position:t.position||[0,0],rotation:t.rotation||0,scale:t.scale||[1,1]}),this._transform=e.getLocalTransform(),this},eachCover:function(t,e){lC(this._covers,t,e)},updateCovers:function(t){function e(t,e){return(null!=t.id?t.id:i+e)+"-"+t.brushType}function n(e,n){var i=t[e];if(null!=n&&r[n]===s)a[e]=r[n];else{var l=a[e]=null!=n?(r[n].__brushOption=i,r[n]):sa(o,oa(o,i));ca(o,l)}}t=du.map(t,function(t){return du.merge(du.clone(xC),t,!0)});var i="\0-brush-index-",r=this._covers,a=this._covers=[],o=this,s=this._creatingCover;return new cy(r,t,function(t,n){return e(t.__brushOption,n)},e).add(n).update(n).remove(function(t){r[t]!==s&&o.group.remove(r[t])}).execute(),this},unmount:function(){return this.enableBrush(!1),pa(this),this._zr.remove(this.group),this},dispose:function(){this.unmount(),this.off()}},du.mixin(aa,yu);var bC={mousedown:function(t){if(this._dragging)ka.call(this,t);else if(!t.target||!t.target.draggable){Ia(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null,(this._creatingPanel=da(this,t,e))&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(t){var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);if(function(t,e,n){if(t._brushType){var i=t._zr,r=t._covers,a=da(t,e,n);if(!t._dragging)for(var o=0;o<r.length;o++){var s=r[o].__brushOption;if(a&&(!0===a||s.panelId===a.panelId)&&wC[s.brushType].contain(r[o],n[0],n[1]))return}a&&i.setCursorStyle("crosshair")}}(this,t,e),this._dragging){Ia(t);var n=Ta(this,t,e,!1);n&&ga(this,n)}},mouseup:ka},wC={lineX:Da(0),lineY:Da(1),rect:{createCover:function(t,e){return va(sC(Ma,function(t){return t},function(t){return t}),t,e,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(t){var e=ma(t);return wa(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,n,i){ya(t,e,n,i)},updateCommon:xa,contain:Pa},polygon:{createCover:function(t,e){var n=new Pp.Group;return n.add(new Pp.Polyline({name:"main",style:ba(e),silent:!0})),n},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new Pp.Polygon({name:"main",draggable:!0,drift:sC(function(t,e,n,i,r){var a=e.__brushOption.range,o=Aa(t,n,i);lC(a,function(t){t[0]+=o[0],t[1]+=o[1]}),ca(t,e),ga(t,{isEnd:!1})},t,e),ondragend:sC(ga,t,{isEnd:!0})}))},updateCoverShape:function(t,e,n,i){e.childAt(0).setShape({points:Ca(t,e,n)})},updateCommon:xa,contain:Pa}},SC=aa,MC=SS.onIrrelevantElement,AC={makeRectPanelClipPath:function(t){return t=Ea(t),function(e,n){return Pp.clipPointsByRect(e,t)}},makeLinearBrushOtherExtent:function(t,e){return t=Ea(t),function(n){var i=null!=e?e:n,r=i?t.width:t.height,a=i?t.x:t.y;return[a,a+(r||0)]}},makeRectIsTargetByCursor:function(t,e,n){return t=Ea(t),function(i,r,a){return t.contain(r[0],r[1])&&!MC(i,e,n)}}},CC=["axisLine","axisTickLabel","axisName"],IC=T_.extendComponentView({type:"parallelAxis",init:function(t,e){IC.superApply(this,"init",arguments),(this._brushController=new SC(e.getZr())).on("brush",du.bind(this._onBrush,this))},render:function(t,e,n,i){if(!function(t,e,n){return n&&"axisAreaSelect"===n.type&&e.findComponents({mainType:"parallelAxis",query:n})[0]===t}(t,e,i)){this.axisModel=t,this.api=n,this.group.removeAll();var r=this._axisGroup;if(this._axisGroup=new Pp.Group,this.group.add(this._axisGroup),t.get("show")){var a=function(t,e){return e.getComponent("parallel",t.get("parallelIndex"))}(t,e),o=a.coordinateSystem,s=t.getAreaSelectStyle(),l=s.width,u=t.axis.dim,c=o.getAxisLayout(u),h=du.extend({strokeContainThreshold:l},c),d=new ew(t,h);du.each(CC,d.add,d),this._axisGroup.add(d.getGroup()),this._refreshBrushController(h,s,t,a,l,n);var f=i&&!1===i.animation?null:t;Pp.groupTransition(r,this._axisGroup,f)}}},_refreshBrushController:function(t,e,n,i,r,a){var o=n.axis.getExtent(),s=o[1]-o[0],l=Math.min(30,.1*Math.abs(s)),u=Pp.BoundingRect.create({x:o[0],y:-r/2,width:s,height:r});u.x-=l,u.width+=2*l,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,position:t.position}).setPanels([{panelId:"pl",clipPath:AC.makeRectPanelClipPath(u),isTargetByCursor:AC.makeRectIsTargetByCursor(u,a,i),getLinearBrushOtherExtent:AC.makeLinearBrushOtherExtent(u,0)}]).enableBrush({brushType:"lineX",brushStyle:e,removeOnClick:!0}).updateCovers(function(t){var e=t.axis;return du.map(t.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(t[0],!0),e.dataToCoord(t[1],!0)]}})}(n))},_onBrush:function(t,e){var n=this.axisModel,i=n.axis,r=du.map(t,function(t){return[i.coordToData(t.range[0],!0),i.coordToData(t.range[1],!0)]});(!n.option.realtime===e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:r})},dispose:function(){this._brushController.dispose()}});T_.extendComponentView({type:"parallel",render:function(t,e,n){this._model=t,this._api=n,this._handlers||(this._handlers={},du.each(PC,function(t,e){n.getZr().on(e,this._handlers[e]=du.bind(t,this))},this)),Nv.createOrUpdate(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},dispose:function(t,e){du.each(this._handlers,function(t,n){e.getZr().off(n,t)}),this._handlers=null},_throttledDispatchExpand:function(t){this._dispatchExpand(t)},_dispatchExpand:function(t){t&&this._api.dispatchAction(du.extend({type:"parallelAxisExpand"},t))}});var PC={mousedown:function(t){La(this,"click")&&(this._mouseDownPoint=[t.offsetX,t.offsetY])},mouseup:function(t){var e=this._mouseDownPoint;if(La(this,"click")&&e){var n=[t.offsetX,t.offsetY];if(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2)>5)return;var i=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);"none"!==i.behavior&&this._dispatchExpand({axisExpandWindow:i.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(!this._mouseDownPoint&&La(this,"mousemove")){var e=this._model,n=e.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]),i=n.behavior;"jump"===i&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===i?null:{axisExpandWindow:n.axisExpandWindow,animation:"jump"===i&&null})}}};T_.registerPreprocessor(qA);var TC=du.each,OC=du.createHashMap,kC=(xv.extend({type:"series.parallel",dependencies:["parallel"],visualColorAccessPath:"lineStyle.color",getInitialData:function(t,e){var n=this.getSource();return function(t,e){if(!t.encodeDefine){var n=e.ecModel.getComponent("parallel",e.get("parallelIndex"));if(n){var i=t.encodeDefine=OC();TC(n.dimensions,function(t){var e=+t.replace("dim","");i.set(t,e)})}}}(n,this),qy(n,this)},getRawIndicesByActiveState:function(t){var e=this.coordinateSystem,n=this.getData(),i=[];return e.eachActiveState(n,function(e,r){t===e&&i.push(n.getRawIndex(r))}),i},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"}}),.3),DC=(kv.extend({type:"parallel",init:function(){this._dataGroup=new Pp.Group,this.group.add(this._dataGroup),this._data,this._initialized},render:function(t,e,n,i){var r=this._dataGroup,a=t.getData(),o=this._data,s=t.coordinateSystem,l=s.dimensions,u=Ba(t);if(a.diff(o).add(function(t){za(Ra(a,r,t,l,s),a,t,u)}).update(function(e,n){var r=o.getItemGraphicEl(n),c=Na(a,e,l,s);a.setItemGraphicEl(e,r);var h=i&&!1===i.animation?null:t;Pp.updateProps(r,{shape:{points:c}},h,e),za(r,a,e,u)}).remove(function(t){var e=o.getItemGraphicEl(t);r.remove(e)}).execute(),!this._initialized){this._initialized=!0;var c=function(t,e,n){var i=t.model,r=t.getRect(),a=new Pp.Rect({shape:{x:r.x,y:r.y,width:r.width,height:r.height}}),o="horizontal"===i.get("layout")?"width":"height";return a.setShape(o,0),Pp.initProps(a,{shape:{width:r.width,height:r.height}},e,n),a}(s,t,function(){setTimeout(function(){r.removeClipPath()})});r.setClipPath(c)}this._data=a},incrementalPrepareRender:function(t,e,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},incrementalRender:function(t,e,n){for(var i=e.getData(),r=e.coordinateSystem,a=r.dimensions,o=Ba(e),s=t.start;s<t.end;s++){var l=Ra(i,this._dataGroup,s,a,r);l.incremental=!0,za(l,i,s,o)}},dispose:function(){},remove:function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null}}),["lineStyle","normal","opacity"]),EC={seriesType:"parallel",reset:function(t,e,n){var i=t.getModel("itemStyle"),r=t.getModel("lineStyle"),a=e.get("color"),o=r.get("color")||i.get("color")||a[t.seriesIndex%a.length],s=t.get("inactiveOpacity"),l=t.get("activeOpacity"),u=t.getModel("lineStyle").getLineStyle(),c=t.coordinateSystem,h=t.getData(),d={normal:u.opacity,active:l,inactive:s};return h.setVisual("color",o),{progress:function(t,e){c.eachActiveState(e,function(t,n){var i=d[t];if("normal"===t&&e.hasItemOption){var r=e.getItemModel(n).get(DC,!0);null!=r&&(i=r)}e.setItemVisual(n,"opacity",i)},t.start,t.end)}}}};T_.registerVisual(EC);var LC=Zp.encodeHTML,NC=xv.extend({type:"series.sankey",layoutInfo:null,getInitialData:function(t){var e=t.edges||t.links,n=t.data||t.nodes;if(n&&e)return UM(n,e,this,!0).data},setNodePosition:function(t,e){var n=this.option.data[t];n.localX=e[0],n.localY=e[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(t,e,n){if("edge"===n){var i=this.getDataParams(t,n),r=i.data,a=r.source+" -- "+r.target;return i.value&&(a+=" : "+i.value),LC(a)}return NC.superCall(this,"formatTooltip",t,e)},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",color:"#000",fontSize:12},itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.6}},animationEasing:"linear",animationDuration:1e3}}),RC=Pp.extendShape({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0},buildPath:function(t,e){var n=e.extent/2;t.moveTo(e.x1,e.y1-n),t.bezierCurveTo(e.cpx1,e.cpy1-n,e.cpx2,e.cpy2-n,e.x2,e.y2-n),t.lineTo(e.x2,e.y2+n),t.bezierCurveTo(e.cpx2,e.cpy2+n,e.cpx1,e.cpy1+n,e.x1,e.y1+n),t.closePath()}});T_.extendChartView({type:"sankey",_model:null,render:function(t,e,n){var i=t.getGraph(),r=this.group,a=t.layoutInfo,o=a.width,s=a.height,l=t.getData(),u=t.getData("edge");this._model=t,r.removeAll(),r.attr("position",[a.x,a.y]),i.eachEdge(function(e){var n=new RC;n.dataIndex=e.dataIndex,n.seriesIndex=t.seriesIndex,n.dataType="edge";var i=e.getModel("lineStyle"),a=i.get("curveness"),l=e.node1.getLayout(),c=e.node1.getModel(),h=c.get("localX"),d=c.get("localY"),f=e.node2.getLayout(),p=e.node2.getModel(),g=p.get("localX"),m=p.get("localY"),v=e.getLayout();n.shape.extent=Math.max(1,v.dy);var y=(null!=h?h*o:l.x)+l.dx,x=(null!=d?d*s:l.y)+v.sy+v.dy/2,_=null!=g?g*o:f.x,b=(null!=m?m*s:f.y)+v.ty+v.dy/2,w=y*(1-a)+_*a,S=x,M=y*a+_*(1-a),A=b;switch(n.setShape({x1:y,y1:x,x2:_,y2:b,cpx1:w,cpy1:S,cpx2:M,cpy2:A}),n.setStyle(i.getItemStyle()),n.style.fill){case"source":n.style.fill=e.node1.getVisual("color");break;case"target":n.style.fill=e.node2.getVisual("color")}Pp.setHoverStyle(n,e.getModel("emphasis.lineStyle").getItemStyle()),r.add(n),u.setItemGraphicEl(e.dataIndex,n)}),i.eachNode(function(e){var n=e.getLayout(),i=e.getModel(),a=i.get("localX"),u=i.get("localY"),c=i.getModel("label"),h=i.getModel("emphasis.label"),d=new Pp.Rect({shape:{x:null!=a?a*o:n.x,y:null!=u?u*s:n.y,width:n.dx,height:n.dy},style:i.getModel("itemStyle").getItemStyle()}),f=e.getModel("emphasis.itemStyle").getItemStyle();Pp.setLabelStyle(d.style,f,c,h,{labelFetcher:t,labelDataIndex:e.dataIndex,defaultText:e.id,isRectText:!0}),d.setStyle("fill",e.getVisual("color")),Pp.setHoverStyle(d,f),r.add(d),l.setItemGraphicEl(e.dataIndex,d),d.dataType="node"}),t.get("draggable")&&l.eachItemGraphicEl(function(e,i){e.drift=function(e,r){this.shape.x+=e,this.shape.y+=r,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:l.getRawIndex(i),localX:this.shape.x/o,localY:this.shape.y/s})},e.draggable=!0,e.cursor="move"}),!this._data&&t.get("animation")&&r.setClipPath(function(t,e,n){var i=new Pp.Rect({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return Pp.initProps(i,{shape:{width:t.width+20,height:t.height+20}},e,n),i}(r.getBoundingRect(),t,function(){r.removeClipPath()})),this._data=t.getData()},dispose:function(){}}),T_.registerAction({type:"dragNode",event:"dragNode",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(e){e.setNodePosition(t.dataIndex,[t.localX,t.localY])})});var BC=function(){function t(e,i){if(i>=n.length)return e;for(var r=-1,a=e.length,o=n[i++],s={},l={};++r<a;){var u=o(e[r]),c=l[u];c?c.push(e[r]):l[u]=[e[r]]}return du.each(l,function(e,n){s[n]=t(e,i)}),s}function e(t,r){if(r>=n.length)return t;var a=[],o=i[r++];return du.each(t,function(t,n){a.push({key:n,values:e(t,r)})}),o?a.sort(function(t,e){return o(t.key,e.key)}):a}var n=[],i=[];return{key:function(t){return n.push(t),this},sortKeys:function(t){return i[n.length-1]=t,this},entries:function(n){return e(t(n,0),0)}}},zC=function(t,e,n){t.eachSeriesByType("sankey",function(t){var n=t.get("nodeWidth"),i=t.get("nodeGap"),r=function(t,e){return ig.getLayoutRect(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}(t,e);t.layoutInfo=r;var a=r.width,o=r.height,s=t.getGraph(),l=s.nodes,u=s.edges;!function(t){du.each(t,function(t){var e=Ga(t.outEdges,ja),n=Ga(t.inEdges,ja),i=Math.max(e,n);t.setLayout({value:i},!0)})}(l),function(t,e,n,i,r,a,o){(function(t,e,n,i){for(var r=[],a=[],o=[],s=[],l=0,u=0;u<e.length;u++)r[u]=1;for(u=0;u<t.length;u++)a[u]=t[u].inEdges.length,0===a[u]&&o.push(t[u]);for(;o.length;)du.each(o,function(i){i.setLayout({x:l},!0),i.setLayout({dx:n},!0),du.each(i.outEdges,function(n){var i=e.indexOf(n);r[i]=0;var o=n.node2,l=t.indexOf(o);0==--a[l]&&s.push(o)})}),++l,o=s,s=[];for(u=0;u<r.length;u++);(function(t,e){du.each(t,function(t){t.outEdges.length||t.setLayout({x:e-1},!0)})})(t,l),function(t,e){du.each(t,function(t){var n=t.getLayout().x*e;t.setLayout({x:n},!0)})}(t,(i-n)/(l-1))})(t,e,n,r),function(t,e,n,i,r){var a=BC().key(function(t){return t.getLayout().x}).sortKeys(function(t,e){return t-e}).entries(t).map(function(t){return t.values});(function(t,e,n,i,r){var a=[];du.each(e,function(t){var e=t.length,n=0;du.each(t,function(t){n+=t.getLayout().value});var o=(i-(e-1)*r)/n;a.push(o)}),a.sort(function(t,e){return t-e});var o=a[0];du.each(e,function(t){du.each(t,function(t,e){t.setLayout({y:e},!0);var n=t.getLayout().value*o;t.setLayout({dy:n},!0)})}),du.each(n,function(t){var e=+t.getValue()*o;t.setLayout({dy:e},!0)})})(0,a,e,n,i),Va(a,i,n);for(var o=1;r>0;r--)(function(t,e){du.each(t.slice().reverse(),function(t){du.each(t,function(t){if(t.outEdges.length){var n=Ga(t.outEdges,function(t){return Fa(t.node2)*t.getValue()})/Ga(t.outEdges,ja),i=t.getLayout().y+(n-Fa(t))*e;t.setLayout({y:i},!0)}})})})(a,o*=.99),Va(a,i,n),function(t,e){du.each(t,function(t){du.each(t,function(t){if(t.inEdges.length){var n=Ga(t.inEdges,function(t){return Fa(t.node1)*t.getValue()})/Ga(t.inEdges,ja),i=t.getLayout().y+(n-Fa(t))*e;t.setLayout({y:i},!0)}})})}(a,o),Va(a,i,n)}(t,e,a,i,o),function(t){du.each(t,function(t){t.outEdges.sort(function(t,e){return t.node2.getLayout().y-e.node2.getLayout().y}),t.inEdges.sort(function(t,e){return t.node1.getLayout().y-e.node1.getLayout().y})}),du.each(t,function(t){var e=0,n=0;du.each(t.outEdges,function(t){t.setLayout({sy:e},!0),e+=t.getLayout().dy}),du.each(t.inEdges,function(t){t.setLayout({ty:n},!0),n+=t.getLayout().dy})})}(t)}(l,u,n,i,a,o,0!==du.filter(l,function(t){return 0===t.getLayout().value}).length?0:t.get("layoutIterations"))})},VC=function(t,e){t.eachSeriesByType("sankey",function(t){var e=t.getGraph().nodes;if(e.length){var n=1/0,i=-1/0;du.each(e,function(t){var e=t.getLayout().value;e<n&&(n=e),e>i&&(i=e)}),du.each(e,function(e){var r=new IM({type:"color",mappingMethod:"linear",dataExtent:[n,i],visual:t.get("color")}).mapValueToVisual(e.getLayout().value);e.setVisual("color",r);var a=e.getModel().get("itemStyle.color");null!=a&&e.setVisual("color",a)})}})};T_.registerLayout(zC),T_.registerVisual(VC);var GC=py.getDimensionTypeByAxis,FC={seriesModelMixin:{_baseAxisDim:null,getInitialData:function(t,e){var n,i,r=e.getComponent("xAxis",this.get("xAxisIndex")),a=e.getComponent("yAxis",this.get("yAxisIndex")),o=r.get("type"),s=a.get("type");"category"===o?(t.layout="horizontal",n=r.getOrdinalMeta(),i=!0):"category"===s?(t.layout="vertical",n=a.getOrdinalMeta(),i=!0):t.layout=t.layout||"horizontal";var l=["x","y"],u="horizontal"===t.layout?0:1,c=this._baseAxisDim=l[u],h=l[1-u],d=[r,a],f=d[u].get("type"),p=d[1-u].get("type"),g=t.data;if(g&&i){var m=[];du.each(g,function(t,e){var n;t.value&&du.isArray(t.value)?(n=t.value.slice(),t.value.unshift(e)):du.isArray(t)?(n=t.slice(),t.unshift(e)):n=t,m.push(n)}),t.data=m}var v=this.defaultValueDimensions;return Cw(this,{coordDimensions:[{name:c,type:GC(f),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:h,type:GC(p),dimsDef:v.slice()}],dimensionsCount:v.length+1})},getBaseAxis:function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis}}},jC=FC.seriesModelMixin,HC=xv.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}});du.mixin(HC,jC,!0);var WC=["itemStyle"],YC=["emphasis","itemStyle"],XC=(kv.extend({type:"boxplot",render:function(t,e,n){var i=t.getData(),r=this.group,a=this._data;this._data||r.removeAll();var o="horizontal"===t.get("layout")?1:0;i.diff(a).add(function(t){if(i.hasValue(t)){var e=Ha(i.getItemLayout(t),i,t,o,!0);i.setItemGraphicEl(t,e),r.add(e)}}).update(function(t,e){var n=a.getItemGraphicEl(e);if(i.hasValue(t)){var s=i.getItemLayout(t);n?Wa(s,n,i,t):n=Ha(s,i,t,o),r.add(n),i.setItemGraphicEl(t,n)}else r.remove(n)}).remove(function(t){var e=a.getItemGraphicEl(t);e&&r.remove(e)}).execute(),this._data=i},remove:function(t){var e=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(t){t&&e.remove(t)})},dispose:du.noop}),rf.extend({type:"boxplotBoxPath",shape:{},buildPath:function(t,e){var n=e.points,i=0;for(t.moveTo(n[i][0],n[i][1]),i++;i<4;i++)t.lineTo(n[i][0],n[i][1]);for(t.closePath();i<n.length;i++)t.moveTo(n[i][0],n[i][1]),i++,t.lineTo(n[i][0],n[i][1])}})),UC=["itemStyle","borderColor"],qC=function(t,e){var n=t.get("color");t.eachRawSeriesByType("boxplot",function(e){var i=n[e.seriesIndex%n.length],r=e.getData();r.setVisual({legendSymbol:"roundRect",color:e.get(UC)||i}),t.isSeriesFiltered(e)||r.each(function(t){var e=r.getItemModel(t);r.setItemVisual(t,{color:e.get(UC,!0)})})})},ZC=Wp.parsePercent,KC=du.each,$C=function(t){var e=function(t){var e=[],n=[];return t.eachSeriesByType("boxplot",function(t){var i=t.getBaseAxis(),r=du.indexOf(n,i);r<0&&(r=n.length,n[r]=i,e[r]={axis:i,seriesModels:[]}),e[r].seriesModels.push(t)}),e}(t);KC(e,function(t){var e=t.seriesModels;e.length&&(function(t){var e,n,i=t.axis,r=t.seriesModels,a=r.length,o=t.boxWidthList=[],s=t.boxOffsetList=[],l=[];if("category"===i.type)n=i.getBandWidth();else{var u=0;KC(r,function(t){u=Math.max(u,t.getData().count())}),e=i.getExtent(),Math.abs(e[1]-e[0])}KC(r,function(t){var e=t.get("boxWidth");du.isArray(e)||(e=[e,e]),l.push([ZC(e[0],n)||0,ZC(e[1],n)||0])});var c=.8*n-2,h=c/a*.3,d=(c-h*(a-1))/a,f=d/2-c/2;KC(r,function(t,e){s.push(f),f+=h+d,o.push(Math.min(Math.max(d,l[e][0]),l[e][1]))})}(t),KC(e,function(e,n){!function(t,e,n){function i(t,n,i){var r,a=s.get(n,i),l=[];return l[u]=t,l[c]=a,isNaN(t)||isNaN(a)?r=[NaN,NaN]:(r=o.dataToPoint(l))[u]+=e,r}function r(t,e,n){var i=e.slice(),r=e.slice();i[u]+=l,r[u]-=l,n?t.push(i,r):t.push(r,i)}function a(t,e){var n=e.slice(),i=e.slice();n[u]-=l,i[u]+=l,t.push(n,i)}var o=t.coordinateSystem,s=t.getData(),l=n/2,u="horizontal"===t.get("layout")?0:1,c=1-u,h=["x","y"],d=s.mapDimension(h[u]),f=s.mapDimension(h[c],!0);if(!(null==d||f.length<5))for(var p=0;p<s.count();p++){var g=s.get(d,p),m=i(g,f[2],p),v=i(g,f[0],p),y=i(g,f[1],p),x=i(g,f[3],p),_=i(g,f[4],p),b=[];r(b,y,0),r(b,x,1),b.push(v,y,_,x),a(b,v),a(b,_),a(b,m),s.setItemLayout(p,{initBaseline:m[c],ends:b})}}(e,t.boxOffsetList[n],t.boxWidthList[n])}))})};T_.registerVisual(qC),T_.registerLayout($C);var JC=FC.seriesModelMixin,QC=xv.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,itemStyle:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:5e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationUpdate:!1,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},brushSelector:function(t,e,n){var i=e.getItemLayout(t);return i&&n.rect(i.brushRect)}});du.mixin(QC,JC,!0);var tI=["itemStyle"],eI=["emphasis","itemStyle"],nI=["color","color0","borderColor","borderColor0"],iI=(kv.extend({type:"candlestick",render:function(t,e,n){this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},incrementalPrepareRender:function(t,e,n){this._clear(),this._updateDrawMode(t)},incrementalRender:function(t,e,n,i){this._isLargeDraw?this._incrementalRenderLarge(t,e):this._incrementalRenderNormal(t,e)},_updateDrawMode:function(t){var e=t.pipelineContext.large;(null==this._isLargeDraw||e^this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},_renderNormal:function(t){var e=t.getData(),n=this._data,i=this.group,r=e.getLayout("isSimpleBox");this._data||i.removeAll(),e.diff(n).add(function(n){if(e.hasValue(n)){var a,o=e.getItemLayout(n);a=Ya(o,0,!0),Pp.initProps(a,{shape:{points:o.ends}},t,n),Xa(a,e,n,r),i.add(a),e.setItemGraphicEl(n,a)}}).update(function(a,o){var s=n.getItemGraphicEl(o);if(e.hasValue(a)){var l=e.getItemLayout(a);s?Pp.updateProps(s,{shape:{points:l.ends}},t,a):s=Ya(l),Xa(s,e,a,r),i.add(s),e.setItemGraphicEl(a,s)}else i.remove(s)}).remove(function(t){var e=n.getItemGraphicEl(t);e&&i.remove(e)}).execute(),this._data=e},_renderLarge:function(t){this._clear(),Ua(t,this.group)},_incrementalRenderNormal:function(t,e){for(var n,i=e.getData(),r=i.getLayout("isSimpleBox");null!=(n=t.next());){var a;Xa(a=Ya(i.getItemLayout(n)),i,n,r),a.incremental=!0,this.group.add(a)}},_incrementalRenderLarge:function(t,e){Ua(e,this.group,!0)},remove:function(t){this._clear()},_clear:function(){this.group.removeAll(),this._data=null},dispose:du.noop}),rf.extend({type:"normalCandlestickBox",shape:{},buildPath:function(t,e){var n=e.points;this.__simpleBox?(t.moveTo(n[4][0],n[4][1]),t.lineTo(n[6][0],n[6][1])):(t.moveTo(n[0][0],n[0][1]),t.lineTo(n[1][0],n[1][1]),t.lineTo(n[2][0],n[2][1]),t.lineTo(n[3][0],n[3][1]),t.closePath(),t.moveTo(n[4][0],n[4][1]),t.lineTo(n[5][0],n[5][1]),t.moveTo(n[6][0],n[6][1]),t.lineTo(n[7][0],n[7][1]))}})),rI=rf.extend({type:"largeCandlestickBox",shape:{},buildPath:function(t,e){for(var n=e.points,i=0;i<n.length;)if(this.__sign===n[i++]){var r=n[i++];t.moveTo(r,n[i++]),t.lineTo(r,n[i++])}else i+=3}}),aI=function(t){t&&du.isArray(t.series)&&du.each(t.series,function(t){du.isObject(t)&&"k"===t.type&&(t.type="candlestick")})},oI=["itemStyle","borderColor"],sI=["itemStyle","borderColor0"],lI=["itemStyle","color"],uI=["itemStyle","color0"],cI={seriesType:"candlestick",plan:Mv(),performRawSeries:!0,reset:function(t,e){function n(t,e){return e.get(t>0?lI:uI)}function i(t,e){return e.get(t>0?oI:sI)}var r=t.getData(),a=t.pipelineContext.large;if(r.setVisual({legendSymbol:"roundRect",colorP:n(1,t),colorN:n(-1,t),borderColorP:i(1,t),borderColorN:i(-1,t)}),!e.isSeriesFiltered(t))return!a&&{progress:function(t,e){for(var r;null!=(r=t.next());){var a=e.getItemModel(r),o=e.getItemLayout(r).sign;e.setItemVisual(r,{color:n(o,a),borderColor:i(o,a)})}}}}},hI=Pp.subPixelOptimize,dI=Wp.parsePercent,fI=du.retrieve2,pI="undefined"!=typeof Float32Array?Float32Array:Array,gI={seriesType:"candlestick",plan:Mv(),reset:function(t){var e=t.coordinateSystem,n=t.getData(),i=function(t,e){var n,i=t.getBaseAxis(),r="category"===i.type?i.getBandWidth():(n=i.getExtent(),Math.abs(n[1]-n[0])/e.count()),a=dI(fI(t.get("barMaxWidth"),r),r),o=dI(fI(t.get("barMinWidth"),1),r),s=t.get("barWidth");return null!=s?dI(s,r):Math.max(Math.min(r/2,a),o)}(t,n),r=0,a=1,o=["x","y"],s=n.mapDimension(o[r]),l=n.mapDimension(o[a],!0),u=l[0],c=l[1],h=l[2],d=l[3];if(n.setLayout({candleWidth:i,isSimpleBox:i<=1.3}),!(null==s||l.length<4))return{progress:t.pipelineContext.large?function(t,n){for(var i,o,l=new pI(5*t.count),f=0,p=[],g=[];null!=(o=t.next());){var m=n.get(s,o),v=n.get(u,o),y=n.get(c,o),x=n.get(h,o),_=n.get(d,o);isNaN(m)||isNaN(x)||isNaN(_)?(l[f++]=NaN,f+=4):(l[f++]=Za(n,o,v,y,c),p[r]=m,p[a]=x,i=e.dataToPoint(p,null,g),l[f++]=i?i[0]:NaN,l[f++]=i?i[1]:NaN,p[a]=_,i=e.dataToPoint(p,null,g),l[f++]=i?i[1]:NaN)}n.setLayout("largePoints",l)}:function(t,n){function o(t,n){var i=[];return i[r]=n,i[a]=t,isNaN(n)||isNaN(t)?[NaN,NaN]:e.dataToPoint(i)}function l(t,e,n){var a=e.slice(),o=e.slice();a[r]=hI(a[r]+i/2,1,!1),o[r]=hI(o[r]-i/2,1,!0),n?t.push(a,o):t.push(o,a)}function f(t){return t[r]=hI(t[r],1),t}for(var p;null!=(p=t.next());){var g=n.get(s,p),m=n.get(u,p),v=n.get(c,p),y=n.get(h,p),x=n.get(d,p),_=Math.min(m,v),b=Math.max(m,v),w=o(_,g),S=o(b,g),M=o(y,g),A=o(x,g),C=[];l(C,S,0),l(C,w,1),C.push(f(A),f(S),f(M),f(w)),n.setItemLayout(p,{sign:Za(n,p,m,v,c),initBaseline:m>v?S[a]:w[a],ends:C,brushRect:function(t,e,n){var s=o(t,n),l=o(e,n);return s[r]-=i/2,l[r]-=i/2,{x:s[0],y:s[1],width:a?i:l[0]-s[0],height:a?l[1]-s[1]:i}}(y,x,g)})}}}}};T_.registerPreprocessor(aI),T_.registerVisual(cI),T_.registerLayout(gI),xv.extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(t,e){return qy(this.getSource(),this)},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}});var mI=jx.createSymbol,vI=Pp.Group,yI=Wp.parsePercent,xI=$a.prototype;xI.stopEffectAnimation=function(){this.childAt(1).removeAll()},xI.startEffectAnimation=function(t){for(var e=t.symbolType,n=t.color,i=this.childAt(1),r=0;r<3;r++){var a=mI(e,-1,-1,2,2,n);a.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[.5,.5]});var o=-r/3*t.period+t.effectOffset;a.animate("",!0).when(t.period,{scale:[t.rippleScale/2,t.rippleScale/2]}).delay(o).start(),a.animateStyle(!0).when(t.period,{opacity:0}).delay(o).start(),i.add(a)}Ka(i,t)},xI.updateEffectAnimation=function(t){for(var e=this._effectCfg,n=this.childAt(1),i=["symbolType","period","rippleScale"],r=0;r<i.length;r++){var a=i[r];if(e[a]!==t[a])return this.stopEffectAnimation(),void this.startEffectAnimation(t)}Ka(n,t)},xI.highlight=function(){this.trigger("emphasis")},xI.downplay=function(){this.trigger("normal")},xI.updateData=function(t,e){var n=t.hostModel;this.childAt(0).updateData(t,e);var i=this.childAt(1),r=t.getItemModel(e),a=t.getItemVisual(e,"symbol"),o=function(t){return du.isArray(t)||(t=[+t,+t]),t}(t.getItemVisual(e,"symbolSize")),s=t.getItemVisual(e,"color");i.attr("scale",o),i.traverse(function(t){t.attr({fill:s})});var l=r.getShallow("symbolOffset");if(l){var u=i.position;u[0]=yI(l[0],o[0]),u[1]=yI(l[1],o[1])}i.rotation=(r.getShallow("symbolRotate")||0)*Math.PI/180||0;var c={};if(c.showEffectOn=n.get("showEffectOn"),c.rippleScale=r.get("rippleEffect.scale"),c.brushType=r.get("rippleEffect.brushType"),c.period=1e3*r.get("rippleEffect.period"),c.effectOffset=e/t.count(),c.z=r.getShallow("z")||0,c.zlevel=r.getShallow("zlevel")||0,c.symbolType=a,c.color=s,this.off("mouseover").off("mouseout").off("emphasis").off("normal"),"render"===c.showEffectOn)this._effectCfg?this.updateEffectAnimation(c):this.startEffectAnimation(c),this._effectCfg=c;else{this._effectCfg=null,this.stopEffectAnimation();var h=this.childAt(0),d=function(){h.highlight(),"render"!==c.showEffectOn&&this.startEffectAnimation(c)},f=function(){h.downplay(),"render"!==c.showEffectOn&&this.stopEffectAnimation()};this.on("mouseover",d,this).on("mouseout",f,this).on("emphasis",d,this).on("normal",f,this)}this._effectCfg=c},xI.fadeOut=function(t){this.off("mouseover").off("mouseout").off("emphasis").off("normal"),t&&t()},du.inherits($a,vI);var _I=$a;T_.extendChartView({type:"effectScatter",init:function(){this._symbolDraw=new W_(_I)},render:function(t,e,n){var i=t.getData(),r=this._symbolDraw;r.updateData(i),this.group.add(r.group)},updateTransform:function(t,e,n){var i=t.getData();this.group.dirty();var r=fb().reset(t);r.progress&&r.progress({start:0,end:i.count()},i),this._symbolDraw.updateLayout(i)},_updateGroupTransform:function(t){var e=t.coordinateSystem;e&&e.getRoamTransform&&(this.group.transform=Mu.clone(e.getRoamTransform()),this.group.decomposeTransform())},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(e)},dispose:function(){}}),T_.registerVisual(cb("effectScatter","circle")),T_.registerLayout(fb("effectScatter"));var bI=du.concatArray,wI=du.mergeAll,SI=du.map,MI=Zp.encodeHTML,AI="undefined"==typeof Uint32Array?Array:Uint32Array,CI="undefined"==typeof Float64Array?Array:Float64Array,II=xv.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(t){t.data=t.data||[],Ja(t);var e=this._processFlatCoordsArray(t.data);this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset,e.flatCoords&&(t.data=new Float32Array(e.count)),II.superApply(this,"init",arguments)},mergeOption:function(t){if(t.data=t.data||[],Ja(t),t.data){var e=this._processFlatCoordsArray(t.data);this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset,e.flatCoords&&(t.data=new Float32Array(e.count))}II.superApply(this,"mergeOption",arguments)},appendData:function(t){var e=this._processFlatCoordsArray(t.data);e.flatCoords&&(this._flatCoords?(this._flatCoords=bI(this._flatCoords,e.flatCoords),this._flatCoordsOffset=bI(this._flatCoordsOffset,e.flatCoordsOffset)):(this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset),t.data=new Float32Array(e.count)),this.getRawData().appendData(t.data)},_getCoordsFromItemModel:function(t){var e=this.getData().getItemModel(t);return e.option instanceof Array?e.option:e.getShallow("coords")},getLineCoordsCount:function(t){return this._flatCoordsOffset?this._flatCoordsOffset[2*t+1]:this._getCoordsFromItemModel(t).length},getLineCoords:function(t,e){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[2*t],i=this._flatCoordsOffset[2*t+1],r=0;r<i;r++)e[r]=e[r]||[],e[r][0]=this._flatCoords[n+2*r],e[r][1]=this._flatCoords[n+2*r+1];return i}var a=this._getCoordsFromItemModel(t);for(r=0;r<a.length;r++)e[r]=e[r]||[],e[r][0]=a[r][0],e[r][1]=a[r][1];return a.length},_processFlatCoordsArray:function(t){var e=0;if(this._flatCoords&&(e=this._flatCoords.length),"number"==typeof t[0]){for(var n=t.length,i=new AI(n),r=new CI(n),a=0,o=0,s=0,l=0;l<n;){s++;var u=t[l++];i[o++]=a+e,i[o++]=u;for(var c=0;c<u;c++){var h=t[l++],d=t[l++];r[a++]=h,r[a++]=d}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,o),flatCoords:r,count:s}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},getInitialData:function(t,e){var n=new Iy(["value"],this);return n.hasItemOption=!1,n.initData(t.data,[],function(t,e,i,r){if(t instanceof Array)return NaN;n.hasItemOption=!0;var a=t.value;return null!=a?a instanceof Array?a[r]:a:void 0}),n},formatTooltip:function(t){var e=this.getData().getItemModel(t),n=e.get("name");if(n)return n;var i=e.get("fromName"),r=e.get("toName"),a=[];return null!=i&&a.push(i),null!=r&&a.push(r),MI(a.join(" > "))},preventIncremental:function(){return!!this.get("effect.show")},getProgressive:function(){var t=this.option.progressive;return null==t?this.option.large?1e4:this.get("progressive"):t},getProgressiveThreshold:function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?2e4:this.get("progressiveThreshold"):t},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,label:{show:!1,position:"end"},lineStyle:{opacity:.5}}}),PI=jx.createSymbol,TI=Qa.prototype;TI.createLine=function(t,e,n){return new iA(t,e,n)},TI._updateEffectSymbol=function(t,e){var n=t.getItemModel(e).getModel("effect"),i=n.get("symbolSize"),r=n.get("symbol");du.isArray(i)||(i=[i,i]);var a=n.get("color")||t.getItemVisual(e,"color"),o=this.childAt(1);this._symbolType!==r&&(this.remove(o),(o=PI(r,-.5,-.5,1,1,a)).z2=100,o.culling=!0,this.add(o)),o&&(o.setStyle("shadowColor",a),o.setStyle(n.getItemStyle(["color"])),o.attr("scale",i),o.setColor(a),o.attr("scale",i),this._symbolType=r,this._updateEffectAnimation(t,n,e))},TI._updateEffectAnimation=function(t,e,n){var i=this.childAt(1);if(i){var r=this,a=t.getItemLayout(n),o=1e3*e.get("period"),s=e.get("loop"),l=e.get("constantSpeed"),u=du.retrieve(e.get("delay"),function(e){return e/t.count()*o/3}),c="function"==typeof u;if(i.ignore=!0,this.updateAnimationPoints(i,a),l>0&&(o=this.getLineLength(i)/l*1e3),o!==this._period||s!==this._loop){i.stopAnimation();var h=u;c&&(h=u(n)),i.__t>0&&(h=-o*i.__t),i.__t=0;var d=i.animate("",s).when(o,{__t:1}).delay(h).during(function(){r.updateSymbolPosition(i)});s||d.done(function(){r.remove(i)}),d.start()}this._period=o,this._loop=s}},TI.getLineLength=function(t){return pu.dist(t.__p1,t.__cp1)+pu.dist(t.__cp1,t.__p2)},TI.updateAnimationPoints=function(t,e){t.__p1=e[0],t.__p2=e[1],t.__cp1=e[2]||[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]},TI.updateData=function(t,e,n){this.childAt(0).updateData(t,e,n),this._updateEffectSymbol(t,e)},TI.updateSymbolPosition=function(t){var e=t.__p1,n=t.__p2,i=t.__cp1,r=t.__t,a=t.position,o=cd.quadraticAt,s=cd.quadraticDerivativeAt;a[0]=o(e[0],i[0],n[0],r),a[1]=o(e[1],i[1],n[1],r);var l=s(e[0],i[0],n[0],r),u=s(e[1],i[1],n[1],r);t.rotation=-Math.atan2(u,l)-Math.PI/2,t.ignore=!1},TI.updateLayout=function(t,e){this.childAt(0).updateLayout(t,e);var n=t.getItemModel(e).getModel("effect");this._updateEffectAnimation(t,n,e)},du.inherits(Qa,Pp.Group);var OI=Qa,kI=to.prototype;kI._createPolyline=function(t,e,n){var i=t.getItemLayout(e),r=new Pp.Polyline({shape:{points:i}});this.add(r),this._updateCommonStl(t,e,n)},kI.updateData=function(t,e,n){var i=t.hostModel,r=this.childAt(0),a={shape:{points:t.getItemLayout(e)}};Pp.updateProps(r,a,i,e),this._updateCommonStl(t,e,n)},kI._updateCommonStl=function(t,e,n){var i=this.childAt(0),r=t.getItemModel(e),a=t.getItemVisual(e,"color"),o=n&&n.lineStyle,s=n&&n.hoverLineStyle;n&&!t.hasItemOption||(o=r.getModel("lineStyle").getLineStyle(),s=r.getModel("emphasis.lineStyle").getLineStyle()),i.useStyle(du.defaults({strokeNoScale:!0,fill:"none",stroke:a},o)),i.hoverStyle=s,Pp.setHoverStyle(this)},kI.updateLayout=function(t,e){this.childAt(0).setShape("points",t.getItemLayout(e))},du.inherits(to,Pp.Group);var DI=to,EI=eo.prototype;EI.createLine=function(t,e,n){return new DI(t,e,n)},EI.updateAnimationPoints=function(t,e){this._points=e;for(var n=[0],i=0,r=1;r<e.length;r++){var a=e[r-1],o=e[r];i+=pu.dist(a,o),n.push(i)}if(0!==i){for(r=0;r<n.length;r++)n[r]/=i;this._offsets=n,this._length=i}},EI.getLineLength=function(t){return this._length},EI.updateSymbolPosition=function(t){var e=t.__t,n=this._points,i=this._offsets,r=n.length;if(i){var a=this._lastFrame;if(e<this._lastFramePercent){for(o=Math.min(a+1,r-1);o>=0&&!(i[o]<=e);o--);o=Math.min(o,r-2)}else{for(var o=a;o<r&&!(i[o]>e);o++);o=Math.min(o-1,r-2)}pu.lerp(t.position,n[o],n[o+1],(e-i[o])/(i[o+1]-i[o]));var s=n[o+1][0]-n[o][0],l=n[o+1][1]-n[o][1];t.rotation=-Math.atan2(l,s)-Math.PI/2,this._lastFrame=o,this._lastFramePercent=e,t.ignore=!1}},du.inherits(eo,OI);var LI=eo,NI=Pp.extendShape({shape:{polyline:!1,curveness:0,segs:[]},buildPath:function(t,e){var n=e.segs,i=e.curveness;if(e.polyline)for(o=0;o<n.length;){var r=n[o++];if(r>0){t.moveTo(n[o++],n[o++]);for(var a=1;a<r;a++)t.lineTo(n[o++],n[o++])}}else for(var o=0;o<n.length;){var s=n[o++],l=n[o++],u=n[o++],c=n[o++];if(t.moveTo(s,l),i>0){var h=(s+u)/2-(l-c)*i,d=(l+c)/2-(u-s)*i;t.quadraticCurveTo(h,d,u,c)}else t.lineTo(u,c)}},findDataIndex:function(t,e){var n=this.shape,i=n.segs,r=n.curveness;if(n.polyline)for(var a=0,o=0;o<i.length;){var s=i[o++];if(s>0)for(var l=i[o++],u=i[o++],c=1;c<s;c++){var h=i[o++],d=i[o++];if(Bd.containStroke(l,u,h,d))return a}a++}else for(a=0,o=0;o<i.length;){l=i[o++],u=i[o++],h=i[o++],d=i[o++];if(r>0){var f=(l+h)/2-(u-d)*r,p=(u+d)/2-(h-l)*r;if(Gd.containStroke(l,u,f,p,h,d))return a}else if(Bd.containStroke(l,u,h,d))return a;a++}return-1}}),RI=no.prototype;RI.isPersistent=function(){return!this._incremental},RI.updateData=function(t){this.group.removeAll();var e=new NI({rectHover:!0,cursor:"default"});e.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(e,t),this.group.add(e),this._incremental=null},RI.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clearIncremental(),t.count()>5e5?(this._incremental||(this._incremental=new op({silent:!0})),this.group.add(this._incremental)):this._incremental=null},RI.incrementalUpdate=function(t,e){var n=new NI;n.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(n,e,!!this._incremental),this._incremental?this._incremental.addDisplayable(n,!0):(n.rectHover=!0,n.cursor="default",n.__startIndex=t.start,this.group.add(n))},RI.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},RI._setCommon=function(t,e,n){var i=e.hostModel;t.setShape({polyline:i.get("polyline"),curveness:i.get("lineStyle.curveness")}),t.useStyle(i.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var r=e.getVisual("color");r&&t.setStyle("stroke",r),t.setStyle("fill"),n||(t.seriesIndex=i.seriesIndex,t.on("mousemove",function(e){t.dataIndex=null;var n=t.findDataIndex(e.offsetX,e.offsetY);n>0&&(t.dataIndex=n+t.__startIndex)}))},RI._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()};var BI=no,zI={seriesType:"lines",plan:Mv(),reset:function(t){var e=t.coordinateSystem,n=t.get("polyline"),i=t.pipelineContext.large;return{progress:function(r,a){var o=[];if(i){var s,l=r.end-r.start;if(n){for(var u=0,c=r.start;c<r.end;c++)u+=t.getLineCoordsCount(c);s=new Float32Array(l+2*u)}else s=new Float32Array(4*l);var h=0,d=[];for(c=r.start;c<r.end;c++){g=t.getLineCoords(c,o),n&&(s[h++]=g);for(var f=0;f<g;f++)d=e.dataToPoint(o[f],!1,d),s[h++]=d[0],s[h++]=d[1]}a.setLayout("linesPoints",s)}else for(c=r.start;c<r.end;c++){var p=a.getItemModel(c),g=t.getLineCoords(c,o),m=[];if(n)for(var v=0;v<g;v++)m.push(e.dataToPoint(o[v]));else{m[0]=e.dataToPoint(o[0]),m[1]=e.dataToPoint(o[1]);var y=p.get("lineStyle.curveness");+y&&(m[2]=[(m[0][0]+m[1][0])/2-(m[0][1]-m[1][1])*y,(m[0][1]+m[1][1])/2-(m[1][0]-m[0][0])*y])}a.setItemLayout(c,m)}}}}},VI=(T_.extendChartView({type:"lines",init:function(){},render:function(t,e,n){var i=t.getData(),r=this._updateLineDraw(i,t),a=t.get("zlevel"),o=t.get("effect.trailLength"),s=n.getZr(),l="svg"===s.painter.getType();l||s.painter.getLayer(a).clear(!0),null==this._lastZlevel||l||s.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&o&&(l||s.configLayer(a,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(o/10+.9,1),0)})),r.updateData(i),this._lastZlevel=a,this._finished=!0},incrementalPrepareRender:function(t,e,n){var i=t.getData();this._updateLineDraw(i,t).incrementalPrepareUpdate(i),this._clearLayer(n),this._finished=!1},incrementalRender:function(t,e,n){this._lineDraw.incrementalUpdate(t,e.getData()),this._finished=t.end===e.getData().count()},updateTransform:function(t,e,n){var i=t.getData(),r=t.pipelineContext;if(!this._finished||r.large||r.progressiveRender)return{update:!0};var a=zI.reset(t);a.progress&&a.progress({start:0,end:i.count()},i),this._lineDraw.updateLayout(),this._clearLayer(n)},_updateLineDraw:function(t,e){var n=this._lineDraw,i=this._showEffect(e),r=!!e.get("polyline"),a=e.pipelineContext.large;return n&&i===this._hasEffet&&r===this._isPolyline&&a===this._isLargeDraw||(n&&n.remove(),n=this._lineDraw=a?new BI:new aA(r?i?LI:DI:i?OI:iA),this._hasEffet=i,this._isPolyline=r,this._isLargeDraw=a,this.group.removeAll()),this.group.add(n.group),n},_showEffect:function(t){return!!t.get("effect.show")},_clearLayer:function(t){var e=t.getZr();"svg"===e.painter.getType()||null==this._lastZlevel||e.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(t,e){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(e)},dispose:function(){}}),"lineStyle.opacity".split(".")),GI={seriesType:"lines",reset:function(t,e,n){var i=io(t.get("symbol")),r=io(t.get("symbolSize")),a=t.getData();return a.setVisual("fromSymbol",i&&i[0]),a.setVisual("toSymbol",i&&i[1]),a.setVisual("fromSymbolSize",r&&r[0]),a.setVisual("toSymbolSize",r&&r[1]),a.setVisual("opacity",t.get(VI)),{dataEach:a.hasItemOption?function(t,e){var n=t.getItemModel(e),i=io(n.getShallow("symbol",!0)),r=io(n.getShallow("symbolSize",!0)),a=n.get(VI);i[0]&&t.setItemVisual(e,"fromSymbol",i[0]),i[1]&&t.setItemVisual(e,"toSymbol",i[1]),r[0]&&t.setItemVisual(e,"fromSymbolSize",r[0]),r[1]&&t.setItemVisual(e,"toSymbolSize",r[1]),t.setItemVisual(e,"opacity",a)}:null}}};T_.registerLayout(zI),T_.registerVisual(GI),xv.extend({type:"series.heatmap",getInitialData:function(t,e){return qy(this.getSource(),this,{generateCoord:"value"})},preventIncremental:function(){var t=vm.get(this.get("coordinateSystem"));if(t&&t.dimensions)return"lng"===t.dimensions[0]&&"lat"===t.dimensions[1]},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}}),ro.prototype={update:function(t,e,n,i,r,a){var o=this._getBrush(),s=this._getGradient(t,r,"inRange"),l=this._getGradient(t,r,"outOfRange"),u=this.pointSize+this.blurSize,c=this.canvas,h=c.getContext("2d"),d=t.length;c.width=e,c.height=n;for(var f=0;f<d;++f){var p=t[f],g=p[0],m=p[1],v=i(p[2]);h.globalAlpha=v,h.drawImage(o,g-u,m-u)}if(!c.width||!c.height)return c;for(var y=h.getImageData(0,0,c.width,c.height),x=y.data,_=0,b=x.length,w=this.minOpacity,S=this.maxOpacity-w;_<b;){v=x[_+3]/256;var M=4*Math.floor(255*v);if(v>0){var A=a(v)?s:l;v>0&&(v=v*S+w),x[_++]=A[M],x[_++]=A[M+1],x[_++]=A[M+2],x[_++]=A[M+3]*v*256}else _+=4}return h.putImageData(y,0,0),c},_getBrush:function(){var t=this._brushCanvas||(this._brushCanvas=du.createCanvas()),e=this.pointSize+this.blurSize,n=2*e;t.width=n,t.height=n;var i=t.getContext("2d");return i.clearRect(0,0,n,n),i.shadowOffsetX=n,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-e,e,this.pointSize,0,2*Math.PI,!0),i.closePath(),i.fill(),t},_getGradient:function(t,e,n){for(var i=this._gradientPixels,r=i[n]||(i[n]=new Uint8ClampedArray(1024)),a=[0,0,0,0],o=0,s=0;s<256;s++)e[n](s/255,!0,a),r[o++]=a[0],r[o++]=a[1],r[o++]=a[2],r[o++]=a[3];return r}};var FI=ro,jI=(T_.extendChartView({type:"heatmap",render:function(t,e,n){var i;e.eachComponent("visualMap",function(e){e.eachTargetSeries(function(n){n===t&&(i=e)})}),this.group.removeAll(),this._incrementalDisplayable=null;var r=t.coordinateSystem;"cartesian2d"===r.type||"calendar"===r.type?this._renderOnCartesianAndCalendar(t,n,0,t.getData().count()):function(t){var e=t.dimensions;return"lng"===e[0]&&"lat"===e[1]}(r)&&this._renderOnGeo(r,t,i,n)},incrementalPrepareRender:function(t,e,n){this.group.removeAll()},incrementalRender:function(t,e,n,i){e.coordinateSystem&&this._renderOnCartesianAndCalendar(e,i,t.start,t.end,!0)},_renderOnCartesianAndCalendar:function(t,e,n,i,r){var a,o,s=t.coordinateSystem;if("cartesian2d"===s.type){var l=s.getAxis("x"),u=s.getAxis("y");a=l.getBandWidth(),o=u.getBandWidth()}for(var c=this.group,h=t.getData(),d=t.getModel("itemStyle").getItemStyle(["color"]),f=t.getModel("emphasis.itemStyle").getItemStyle(),p=t.getModel("label"),g=t.getModel("emphasis.label"),m=s.type,v="cartesian2d"===m?[h.mapDimension("x"),h.mapDimension("y"),h.mapDimension("value")]:[h.mapDimension("time"),h.mapDimension("value")],y=n;y<i;y++){var x;if("cartesian2d"===m){if(isNaN(h.get(v[2],y)))continue;var _=s.dataToPoint([h.get(v[0],y),h.get(v[1],y)]);x=new Pp.Rect({shape:{x:_[0]-a/2,y:_[1]-o/2,width:a,height:o},style:{fill:h.getItemVisual(y,"color"),opacity:h.getItemVisual(y,"opacity")}})}else{if(isNaN(h.get(v[1],y)))continue;x=new Pp.Rect({z2:1,shape:s.dataToRect([h.get(v[0],y)]).contentShape,style:{fill:h.getItemVisual(y,"color"),opacity:h.getItemVisual(y,"opacity")}})}var b=h.getItemModel(y);h.hasItemOption&&(d=b.getModel("itemStyle").getItemStyle(["color"]),f=b.getModel("emphasis.itemStyle").getItemStyle(),p=b.getModel("label"),g=b.getModel("emphasis.label"));var w=t.getRawValue(y),S="-";w&&null!=w[2]&&(S=w[2]),Pp.setLabelStyle(d,f,p,g,{labelFetcher:t,labelDataIndex:y,defaultText:S,isRectText:!0}),x.setStyle(d),Pp.setHoverStyle(x,h.hasItemOption?f:du.extend({},f)),x.incremental=r,r&&(x.useHoverLayer=!0),c.add(x),h.setItemGraphicEl(y,x)}},_renderOnGeo:function(t,e,n,i){var r=n.targetVisuals.inRange,a=n.targetVisuals.outOfRange,o=e.getData(),s=this._hmLayer||this._hmLayer||new FI;s.blurSize=e.get("blurSize"),s.pointSize=e.get("pointSize"),s.minOpacity=e.get("minOpacity"),s.maxOpacity=e.get("maxOpacity");var l=t.getViewRect().clone(),u=t.getRoamTransform();l.applyTransform(u);var c=Math.max(l.x,0),h=Math.max(l.y,0),d=Math.min(l.width+l.x,i.getWidth()),f=Math.min(l.height+l.y,i.getHeight()),p=d-c,g=f-h,m=[o.mapDimension("lng"),o.mapDimension("lat"),o.mapDimension("value")],v=o.mapArray(m,function(e,n,i){var r=t.dataToPoint([e,n]);return r[0]-=c,r[1]-=h,r.push(i),r}),y=n.getExtent(),x="visualMap.continuous"===n.type?function(t,e){var n=t[1]-t[0];return e=[(e[0]-t[0])/n,(e[1]-t[0])/n],function(t){return t>=e[0]&&t<=e[1]}}(y,n.option.range):function(t,e,n){var i=t[1]-t[0],r=(e=du.map(e,function(e){return{interval:[(e.interval[0]-t[0])/i,(e.interval[1]-t[0])/i]}})).length,a=0;return function(t){for(i=a;i<r;i++)if((o=e[i].interval)[0]<=t&&t<=o[1]){a=i;break}if(i===r)for(var i=a-1;i>=0;i--){var o=e[i].interval;if(o[0]<=t&&t<=o[1]){a=i;break}}return i>=0&&i<r&&n[i]}}(y,n.getPieceList(),n.option.selected);s.update(v,p,g,r.color.getNormalizer(),{inRange:r.color.getColorMapper(),outOfRange:a.color.getColorMapper()},x);var _=new Pp.Image({style:{width:p,height:g,x:c,y:h,image:s.canvas},silent:!0});this.group.add(_)},dispose:function(){}}),dw.extend({type:"series.pictorialBar",dependencies:["grid"],defaultOption:{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,hoverAnimation:!1},getInitialData:function(t){return t.stack=null,jI.superApply(this,"getInitialData",arguments)}})),HI=jx.createSymbol,WI=Wp.parsePercent,YI=Wp.isNumeric,XI=pw.setLabel,UI=["itemStyle","borderWidth"],qI=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],ZI=new Pp.Circle,KI=(T_.extendChartView({type:"pictorialBar",render:function(t,e,n){var i=this.group,r=t.getData(),a=this._data,o=t.coordinateSystem,s=!!o.getBaseAxis().isHorizontal(),l=o.grid.getRect(),u={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:t,coordSys:o,coordSysExtent:[[l.x,l.x+l.width],[l.y,l.y+l.height]],isHorizontal:s,valueDim:qI[+s],categoryDim:qI[1-s]};return r.diff(a).add(function(t){if(r.hasValue(t)){var e=fo(r,t),n=ao(r,t,e,u),a=go(r,u,n);r.setItemGraphicEl(t,a),i.add(a),_o(a,u,n)}}).update(function(t,e){var n=a.getItemGraphicEl(e);if(r.hasValue(t)){var o=fo(r,t),s=ao(r,t,o,u),l=vo(r,s);n&&l!==n.__pictorialShapeStr&&(i.remove(n),r.setItemGraphicEl(t,null),n=null),n?function(t,e,n){var i=n.animationModel,r=n.dataIndex,a=t.__pictorialBundle;Pp.updateProps(a,{position:n.bundlePosition.slice()},i,r),n.symbolRepeat?lo(t,e,n,!0):uo(t,0,n,!0),co(t,n,!0),ho(t,e,n,!0)}(n,u,s):n=go(r,u,s,!0),r.setItemGraphicEl(t,n),n.__pictorialSymbolMeta=s,i.add(n),_o(n,u,s)}else i.remove(n)}).remove(function(t){var e=a.getItemGraphicEl(t);e&&mo(a,t,e.__pictorialSymbolMeta.animationModel,e)}).execute(),this._data=r,this.group},dispose:du.noop,remove:function(t,e){var n=this.group,i=this._data;t.get("animation")?i&&i.eachItemGraphicEl(function(e){mo(i,e.dataIndex,t,e)}):n.removeAll()}}),fx.layout);T_.registerLayout(du.curry(KI,"pictorialBar")),T_.registerVisual(cb("pictorialBar","roundRect"));var $I=function(t,e,n,i,r){h_.call(this,t,e,n),this.type=i||"value",this.position=r||"bottom",this.orient=null};$I.prototype={constructor:$I,model:null,isHorizontal:function(){var t=this.position;return"top"===t||"bottom"===t},pointToData:function(t,e){return this.coordinateSystem.pointToData(t,e)[0]},toGlobalCoord:null,toLocalCoord:null},du.inherits($I,h_);var JI=$I,QI=ig.getLayoutRect,tP=du.each;wo.prototype={type:"singleAxis",axisPointerEnabled:!0,constructor:wo,_init:function(t,e,n){var i=this.dimension,r=new JI(i,Dx.createScaleByModel(t),[0,0],t.get("type"),t.get("position")),a="category"===r.type;r.onBand=a&&t.get("boundaryGap"),r.inverse=t.get("inverse"),r.orient=t.get("orient"),t.axis=r,r.model=t,r.coordinateSystem=this,this._axis=r},update:function(t,e){t.eachSeries(function(t){if(t.coordinateSystem===this){var e=t.getData();tP(e.mapDimension(this.dimension,!0),function(t){this._axis.scale.unionExtentFromData(e,t)},this),Dx.niceScaleExtent(this._axis.scale,this._axis.model)}},this)},resize:function(t,e){this._rect=QI({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var t=this._rect,e=this._axis,n=e.isHorizontal(),i=n?[0,t.width]:[0,t.height],r=e.reverse?1:0;e.setExtent(i[r],i[1-r]),this._updateAxisTransform(e,n?t.x:t.y)},_updateAxisTransform:function(t,e){var n=t.getExtent(),i=n[0]+n[1],r=t.isHorizontal();t.toGlobalCoord=r?function(t){return t+e}:function(t){return i-t+e},t.toLocalCoord=r?function(t){return t-e}:function(t){return i-t+e}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return[this._axis]},getTooltipAxes:function(){return{baseAxes:[this.getAxis()]}},containPoint:function(t){var e=this.getRect(),n=this.getAxis();return"horizontal"===n.orient?n.contain(n.toLocalCoord(t[0]))&&t[1]>=e.y&&t[1]<=e.y+e.height:n.contain(n.toLocalCoord(t[1]))&&t[0]>=e.y&&t[0]<=e.y+e.height},pointToData:function(t){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(t["horizontal"===e.orient?0:1]))]},dataToPoint:function(t){var e=this.getAxis(),n=this.getRect(),i=[],r="horizontal"===e.orient?0:1;return t instanceof Array&&(t=t[0]),i[r]=e.toGlobalCoord(e.dataToCoord(+t)),i[1-r]=0===r?n.y+n.height/2:n.x+n.width/2,i}};var eP=wo;vm.register("single",{create:function(t,e){var n=[];return t.eachComponent("singleAxis",function(i,r){var a=new eP(i,t,e);a.name="single_"+r,a.resize(i,e),i.coordinateSystem=a,n.push(a)}),t.eachSeries(function(e){if("singleAxis"===e.get("coordinateSystem")){var n=t.queryComponents({mainType:"singleAxis",index:e.get("singleAxisIndex"),id:e.get("singleAxisId")})[0];e.coordinateSystem=n&&n.coordinateSystem}}),n},dimensions:eP.prototype.dimensions});var nP={layout:function(t,e){e=e||{};var n=t.coordinateSystem,i=t.axis,r={},a=i.position,o=i.orient,s=n.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],u={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};r.position=["vertical"===o?u.vertical[a]:l[0],"horizontal"===o?u.horizontal[a]:l[3]],r.rotation=Math.PI/2*{horizontal:0,vertical:1}[o],r.labelDirection=r.tickDirection=r.nameDirection={top:-1,bottom:1,right:1,left:-1}[a],t.get("axisTick.inside")&&(r.tickDirection=-r.tickDirection),du.retrieve(e.labelInside,t.get("axisLabel.inside"))&&(r.labelDirection=-r.labelDirection);var c=e.rotate;return null==c&&(c=t.get("axisLabel.rotate")),r.labelRotation="top"===a?-c:c,r.z2=1,r}},iP=["axisLine","axisTickLabel","axisName"],rP=sw.extend({type:"singleAxis",axisPointerClass:"SingleAxisPointer",render:function(t,e,n,i){var r=this.group;r.removeAll();var a=nP.layout(t),o=new ew(t,a);du.each(iP,o.add,o),r.add(o.getGroup()),t.get("splitLine.show")&&this._splitLine(t),rP.superCall(this,"render",t,e,n,i)},_splitLine:function(t){var e=t.axis;if(!e.scale.isBlank()){var n=t.getModel("splitLine"),i=n.getModel("lineStyle"),r=i.get("width"),a=i.get("color");a=a instanceof Array?a:[a];for(var o=t.coordinateSystem.getRect(),s=e.isHorizontal(),l=[],u=0,c=e.getTicksCoords({tickModel:n}),h=[],d=[],f=0;f<c.length;++f){var p=e.toGlobalCoord(c[f].coord);s?(h[0]=p,h[1]=o.y,d[0]=p,d[1]=o.y+o.height):(h[0]=o.x,h[1]=p,d[0]=o.x+o.width,d[1]=p);var g=u++%a.length;l[g]=l[g]||[],l[g].push(new Pp.Line(Pp.subPixelOptimizeLine({shape:{x1:h[0],y1:h[1],x2:d[0],y2:d[1]},style:{lineWidth:r},silent:!0})))}for(f=0;f<l.length;++f)this.group.add(Pp.mergePath(l[f],{style:{stroke:a[f%a.length],lineDash:i.getLineDash(r),lineWidth:r},silent:!0}))}}}),aP=ug.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}});du.merge(aP.prototype,Ex),Pb("single",aP,function(t,e){return e.type||(e.data?"category":"value")},{left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:2,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:2}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}});var oP=function(t,e){var n,i=[],r=t.seriesIndex;if(null==r||!(n=e.getSeriesByIndex(r)))return{point:[]};var a=n.getData(),o=Hh.queryDataIndex(a,t);if(null==o||o<0||du.isArray(o))return{point:[]};var s=a.getItemGraphicEl(o),l=n.coordinateSystem;if(n.getTooltipPosition)i=n.getTooltipPosition(o)||[];else if(l&&l.dataToPoint)i=l.dataToPoint(a.getValues(du.map(l.dimensions,function(t){return a.mapDimension(t)}),o,!0))||[];else if(s){var u=s.getBoundingRect().clone();u.applyTransform(s.transform),i=[u.x+u.width/2,u.y+u.height/2]}return{point:i,el:s}},sP=Hh.makeInner,lP=du.each,uP=du.curry,cP=sP(),hP=function(t,e,n){var i=t.currTrigger,r=[t.x,t.y],a=t,o=t.dispatchAction||du.bind(n.dispatchAction,n),s=e.getComponent("axisPointer").coordSysAxesInfo;if(s){Ao(r)&&(r=oP({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},e).point);var l=Ao(r),u=a.axesInfo,c=s.axesInfo,h="leave"===i||Ao(r),d={},f={},p={list:[],map:{}},g={showPointer:uP(function(t,e,n,i){t[e.key]={value:n,payloadBatch:i}},f),showTooltip:uP(function(t,e,n,i){var r=n.payloadBatch,a=e.axis,o=a.model,s=e.axisPointerModel;if(e.triggerTooltip&&r.length){var l=e.coordSys.model,u=rw.makeKey(l),c=t.map[u];c||(c=t.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},t.list.push(c)),c.dataByAxis.push({axisDim:a.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:i,valueLabelOpt:{precision:s.get("label.precision"),formatter:s.get("label.formatter")},seriesDataIndices:r.slice()})}},p)};lP(s.coordSysMap,function(t,e){var n=l||t.containPoint(r);lP(s.coordSysAxesInfo[e],function(t,e){var i=t.axis,a=function(t,e){for(var n=0;n<(t||[]).length;n++){var i=t[n];if(e.axis.dim===i.axisDim&&e.axis.model.componentIndex===i.axisIndex)return i}}(u,t);if(!h&&n&&(!u||a)){var o=a&&a.value;null!=o||l||(o=i.pointToData(r)),null!=o&&So(t,o,g,!1,d)}})});var m={};return lP(c,function(t,e){var n=t.linkGroup;n&&!f[e]&&lP(n.axesInfo,function(e,i){var r=f[i];if(e!==t&&r){var a=r.value;n.mapper&&(a=t.axis.scale.parse(n.mapper(a,Mo(e),Mo(t)))),m[t.key]=a}})}),lP(m,function(t,e){So(c[e],t,g,!0,d)}),function(t,e,n){var i=n.axesInfo=[];lP(e,function(e,n){var r=e.axisPointerModel.option,a=t[n];a?(!e.useHandle&&(r.status="show"),r.value=a.value,r.seriesDataIndices=(a.payloadBatch||[]).slice()):!e.useHandle&&(r.status="hide"),"show"===r.status&&i.push({axisDim:e.axis.dim,axisIndex:e.axis.model.componentIndex,value:r.value})})}(f,c,d),function(t,e,n,i){if(!Ao(e)&&t.list.length){var r=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:r.dataIndexInside,dataIndex:r.dataIndex,seriesIndex:r.seriesIndex,dataByCoordSys:t.list})}else i({type:"hideTip"})}(p,r,t,o),function(t,e,n){var i=n.getZr(),r=cP(i).axisPointerLastHighlights||{},a=cP(i).axisPointerLastHighlights={};lP(t,function(t,e){var n=t.axisPointerModel.option;"show"===n.status&&lP(n.seriesDataIndices,function(t){var e=t.seriesIndex+" | "+t.dataIndex;a[e]=t})});var o=[],s=[];du.each(r,function(t,e){!a[e]&&s.push(t)}),du.each(a,function(t,e){!r[e]&&o.push(t)}),s.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,batch:s}),o.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,batch:o})}(c,0,n),d}},dP=(T_.extendComponentModel({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}}),(0,Hh.makeInner)()),fP=du.each,pP={register:function(t,e,n){if(!Jl.node){var i=e.getZr();dP(i).records||(dP(i).records={}),function(t,e){function n(n,i){t.on(n,function(n){var r=function(t){var e={showTip:[],hideTip:[]},n=function(i){var r=e[i.type];r?r.push(i):(i.dispatchAction=n,t.dispatchAction(i))};return{dispatchAction:n,pendings:e}}(e);fP(dP(t).records,function(t){t&&i(t,n,r.dispatchAction)}),function(t,e){var n,i=t.showTip.length,r=t.hideTip.length;i?n=t.showTip[i-1]:r&&(n=t.hideTip[r-1]),n&&(n.dispatchAction=null,e.dispatchAction(n))}(r.pendings,e)})}dP(t).initialized||(dP(t).initialized=!0,n("click",du.curry(Co,"click")),n("mousemove",du.curry(Co,"mousemove")),n("globalout",function(t,e,n){t.handler("leave",null,n)}))}(i,e),(dP(i).records[t]||(dP(i).records[t]={})).handler=n}},unregister:function(t,e){if(!Jl.node){var n=e.getZr();(dP(n).records||{})[t]&&(dP(n).records[t]=null)}}},gP=T_.extendComponentView({type:"axisPointer",render:function(t,e,n){var i=e.getComponent("tooltip"),r=t.get("triggerOn")||i&&i.get("triggerOn")||"mousemove|click";pP.register("axisPointer",n,function(t,e,n){"none"!==r&&("leave"===t||r.indexOf(t)>=0)&&n({type:"updateAxisPointer",currTrigger:t,x:e&&e.offsetX,y:e&&e.offsetY})})},remove:function(t,e){pP.unregister(e.getZr(),"axisPointer"),gP.superApply(this._model,"remove",arguments)},dispose:function(t,e){pP.unregister("axisPointer",e),gP.superApply(this._model,"dispose",arguments)}}),mP=(0,Hh.makeInner)(),vP=du.clone,yP=du.bind;(Io.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(t,e,n,i){var r=e.get("value"),a=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=n,i||this._lastValue!==r||this._lastStatus!==a){this._lastValue=r,this._lastStatus=a;var o=this._group,s=this._handle;if(!a||"hide"===a)return o&&o.hide(),void(s&&s.hide());o&&o.show(),s&&s.show();var l={};this.makeElOption(l,r,t,e,n);var u=l.graphicKey;u!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=u;var c=this._moveAnimation=this.determineAnimation(t,e);if(o){var h=du.curry(Po,e,c);this.updatePointerEl(o,l,h,e),this.updateLabelEl(o,l,h,e)}else o=this._group=new Pp.Group,this.createPointerEl(o,l,t,e),this.createLabelEl(o,l,t,e),n.getZr().add(o);Do(o,e,!0),this._renderHandle(r)}},remove:function(t){this.clear(t)},dispose:function(t){this.clear(t)},determineAnimation:function(t,e){var n=e.get("animation"),i=t.axis,r="category"===i.type,a=e.get("snap");if(!a&&!r)return!1;if("auto"===n||null==n){var o=this.animationThreshold;if(r&&i.getBandWidth()>o)return!0;if(a){var s=rw.getAxisInfo(t).seriesDataCount,l=i.getExtent();return Math.abs(l[0]-l[1])/s>o}return!1}return!0===n},makeElOption:function(t,e,n,i,r){},createPointerEl:function(t,e,n,i){var r=e.pointer;if(r){var a=mP(t).pointerEl=new Pp[r.type](vP(e.pointer));t.add(a)}},createLabelEl:function(t,e,n,i){if(e.label){var r=mP(t).labelEl=new Pp.Rect(vP(e.label));t.add(r),Oo(r,i)}},updatePointerEl:function(t,e,n){var i=mP(t).pointerEl;i&&(i.setStyle(e.pointer.style),n(i,{shape:e.pointer.shape}))},updateLabelEl:function(t,e,n,i){var r=mP(t).labelEl;r&&(r.setStyle(e.label.style),n(r,{shape:e.label.shape,position:e.label.position}),Oo(r,i))},_renderHandle:function(t){if(!this._dragging&&this.updateHandleTransform){var e,n=this._axisPointerModel,i=this._api.getZr(),r=this._handle,a=n.getModel("handle"),o=n.get("status");if(!a.get("show")||!o||"hide"===o)return r&&i.remove(r),void(this._handle=null);this._handle||(e=!0,r=this._handle=Pp.createIcon(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(t){mh.stop(t.event)},onmousedown:yP(this._onHandleDragMove,this,0,0),drift:yP(this._onHandleDragMove,this),ondragend:yP(this._onHandleDragEnd,this)}),i.add(r)),Do(r,n,!1),r.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var s=a.get("size");du.isArray(s)||(s=[s,s]),r.attr("scale",[s[0]/2,s[1]/2]),Nv.createOrUpdate(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,e)}},_moveHandleToValue:function(t,e){Po(this._axisPointerModel,!e&&this._moveAnimation,this._handle,ko(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(t,e){var n=this._handle;if(n){this._dragging=!0;var i=this.updateHandleTransform(ko(n),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(ko(i)),mP(n).lastProp=null,this._doDispatchAxisPointer()}},_doDispatchAxisPointer:function(){if(this._handle){var t=this._payloadInfo,e=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:e.axis.dim,axisIndex:e.componentIndex}]})}},_onHandleDragEnd:function(t){if(this._dragging=!1,this._handle){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},getHandleTransform:null,updateHandleTransform:null,clear:function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),n=this._group,i=this._handle;e&&n&&(this._lastGraphicKey=null,n&&e.remove(n),i&&e.remove(i),this._group=null,this._handle=null,this._payloadInfo=null)},doClear:function(){},buildLabel:function(t,e,n){return n=n||0,{x:t[n],y:t[1-n],width:e[n],height:e[1-n]}}}).constructor=Io,Uh.enableClassExtend(Io);var xP=Io,_P={buildElStyle:function(t){var e,n=t.get("type"),i=t.getModel(n+"Style");return"line"===n?(e=i.getLineStyle()).fill=null:"shadow"===n&&((e=i.getAreaStyle()).stroke=null),e},buildLabelElOption:Eo,getValueLabel:Lo,getTransformedPosition:No,buildCartesianSingleLabelElOption:function(t,e,n,i,r,a){var o=ew.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=r.get("label.margin"),Eo(e,i,r,a,{position:No(i.axis,t,n),align:o.textAlign,verticalAlign:o.textVerticalAlign})},makeLineShape:function(t,e,n){return n=n||0,{x1:t[n],y1:t[1-n],x2:e[n],y2:e[1-n]}},makeRectShape:function(t,e,n){return n=n||0,{x:t[n],y:t[1-n],width:e[n],height:e[1-n]}},makeSectorShape:function(t,e,n,i,r,a){return{cx:t,cy:e,r0:n,r:i,startAngle:r,endAngle:a,clockwise:!0}}},bP=xP.extend({makeElOption:function(t,e,n,i,r){var a=n.axis,o=a.grid,s=i.get("type"),l=Ro(o,a).getOtherAxis(a).getGlobalExtent(),u=a.toGlobalCoord(a.dataToCoord(e,!0));if(s&&"none"!==s){var c=_P.buildElStyle(i),h=wP[s](a,u,l,c);h.style=c,t.graphicKey=h.type,t.pointer=h}var d=lw.layout(o.model,n);_P.buildCartesianSingleLabelElOption(e,t,d,n,i,r)},getHandleTransform:function(t,e,n){var i=lw.layout(e.axis.grid.model,e,{labelInside:!1});return i.labelMargin=n.get("handle.margin"),{position:_P.getTransformedPosition(e.axis,t,i),rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(t,e,n,i){var r=n.axis,a=r.grid,o=r.getGlobalExtent(!0),s=Ro(a,r).getOtherAxis(r).getGlobalExtent(),l="x"===r.dim?0:1,u=t.position;u[l]+=e[l],u[l]=Math.min(o[1],u[l]),u[l]=Math.max(o[0],u[l]);var c=(s[1]+s[0])/2,h=[c,c];return h[l]=u[l],{position:u,rotation:t.rotation,cursorPoint:h,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][l]}}}),wP={line:function(t,e,n,i){var r=_P.makeLineShape([e,n[0]],[e,n[1]],Bo(t));return Pp.subPixelOptimizeLine({shape:r,style:i}),{type:"Line",shape:r}},shadow:function(t,e,n,i){var r=Math.max(1,t.getBandWidth()),a=n[1]-n[0];return{type:"Rect",shape:_P.makeRectShape([e-r/2,n[0]],[r,a],Bo(t))}}};sw.registerAxisPointerClass("CartesianAxisPointer",bP),T_.registerPreprocessor(function(t){if(t){(!t.axisPointer||0===t.axisPointer.length)&&(t.axisPointer={});var e=t.axisPointer.link;e&&!du.isArray(e)&&(t.axisPointer.link=[e])}}),T_.registerProcessor(T_.PRIORITY.PROCESSOR.STATISTIC,function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=rw.collect(t,e)}),T_.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},hP);var SP=["x","y"],MP=["width","height"],AP=xP.extend({makeElOption:function(t,e,n,i,r){var a=n.axis,o=a.coordinateSystem,s=Vo(o,1-zo(a)),l=o.dataToPoint(e)[0],u=i.get("type");if(u&&"none"!==u){var c=_P.buildElStyle(i),h=CP[u](a,l,s,c);h.style=c,t.graphicKey=h.type,t.pointer=h}var d=nP.layout(n);_P.buildCartesianSingleLabelElOption(e,t,d,n,i,r)},getHandleTransform:function(t,e,n){var i=nP.layout(e,{labelInside:!1});return i.labelMargin=n.get("handle.margin"),{position:_P.getTransformedPosition(e.axis,t,i),rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(t,e,n,i){var r=n.axis,a=r.coordinateSystem,o=zo(r),s=Vo(a,o),l=t.position;l[o]+=e[o],l[o]=Math.min(s[1],l[o]),l[o]=Math.max(s[0],l[o]);var u=Vo(a,1-o),c=(u[1]+u[0])/2,h=[c,c];return h[o]=l[o],{position:l,rotation:t.rotation,cursorPoint:h,tooltipOption:{verticalAlign:"middle"}}}}),CP={line:function(t,e,n,i){var r=_P.makeLineShape([e,n[0]],[e,n[1]],zo(t));return Pp.subPixelOptimizeLine({shape:r,style:i}),{type:"Line",shape:r}},shadow:function(t,e,n,i){var r=t.getBandWidth(),a=n[1]-n[0];return{type:"Rect",shape:_P.makeRectShape([e-r/2,n[0]],[r,a],zo(t))}}};sw.registerAxisPointerClass("SingleAxisPointer",AP),T_.extendComponentView({type:"single"});var IP=py.getDimensionTypeByAxis,PP=Zp.encodeHTML,TP=xv.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(t){TP.superApply(this,"init",arguments),this.legendDataProvider=function(){return this.getRawData()}},fixData:function(t){for(var e=t.length,n=BC().key(function(t){return t[2]}).entries(t),i=du.map(n,function(t){return{name:t.key,dataList:t.values}}),r=i.length,a=-1,o=-1,s=0;s<r;++s){var l=i[s].dataList.length;l>a&&(a=l,o=s)}for(var u=0;u<r;++u)if(u!==o)for(var c=i[u].name,h=0;h<a;++h){for(var d=i[o].dataList[h][0],f=i[u].dataList.length,p=-1,g=0;g<f;++g)if(i[u].dataList[g][0]===d){p=g;break}-1===p&&(t[e]=[],t[e][0]=d,t[e][1]=0,t[e][2]=c,e++)}return t},getInitialData:function(t,e){for(var n=e.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0].get("type"),i=du.filter(t.data,function(t){return void 0!==t[2]}),r=this.fixData(i||[]),a=[],o=this.nameMap=du.createHashMap(),s=0,l=0;l<r.length;++l)a.push(r[l][2]),o.get(r[l][2])||(o.set(r[l][2],s),s++);var u=Vy(r,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:IP(n)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),c=new Iy(u,this);return c.initData(r),c},getLayerSeries:function(){for(var t=this.getData(),e=t.count(),n=[],i=0;i<e;++i)n[i]=i;for(var r=BC().key(function(e){return t.get("name",e)}).entries(n),a=du.map(r,function(t){return{name:t.key,indices:t.values}}),o=t.mapDimension("single"),s=0;s<a.length;++s)a[s].indices.sort(function(e,n){return t.get(o,e)-t.get(o,n)});return a},getAxisTooltipData:function(t,e,n){du.isArray(t)||(t=t?[t]:[]);for(var i,r=this.getData(),a=this.getLayerSeries(),o=[],s=a.length,l=0;l<s;++l){for(var u=Number.MAX_VALUE,c=-1,h=a[l].indices.length,d=0;d<h;++d){var f=r.get(t[0],a[l].indices[d]),p=Math.abs(f-e);p<=u&&(i=f,u=p,c=a[l].indices[d])}o.push(c)}return{dataIndices:o,nestestValue:i}},formatTooltip:function(t){var e=this.getData(),n=e.getName(t),i=e.get(e.mapDimension("value"),t);return(isNaN(i)||null==i)&&(i="-"),PP(n+" : "+i)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:!0}}}}),OP=rb.Polygon,kP=du.bind,DP=du.extend,EP=(T_.extendChartView({type:"themeRiver",init:function(){this._layers=[]},render:function(t,e,n){function i(t){return t.name}function r(e,n,i){var r=this._layers;if("remove"!==e){for(var l,u=[],c=[],d=s[n].indices,f=0;f<d.length;f++){var p=a.getItemLayout(d[f]),g=p.x,m=p.y0,v=p.y;u.push([g,m]),c.push([g,m+v]),l=a.getItemVisual(d[f],"color")}var y,x,_=a.getItemLayout(d[0]),b=a.getItemModel(d[f-1]),w=b.getModel("label"),S=w.get("margin");if("add"===e)M=h[n]=new Pp.Group,y=new OP({shape:{points:u,stackedOnPoints:c,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),x=new Pp.Text({style:{x:_.x-S,y:_.y0+_.y/2}}),M.add(y),M.add(x),o.add(M),y.setClipPath(function(t,e,n){var i=new Pp.Rect({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return Pp.initProps(i,{shape:{width:t.width+20,height:t.height+20}},e,n),i}(y.getBoundingRect(),t,function(){y.removeClipPath()}));else{var M=r[i];y=M.childAt(0),x=M.childAt(1),o.add(M),h[n]=M,Pp.updateProps(y,{shape:{points:u,stackedOnPoints:c}},t),Pp.updateProps(x,{style:{x:_.x-S,y:_.y0+_.y/2}},t)}var A=b.getModel("emphasis.itemStyle"),C=b.getModel("itemStyle");Pp.setTextStyle(x.style,w,{text:w.get("show")?t.getFormattedLabel(d[f-1],"normal")||a.getName(d[f-1]):null,textVerticalAlign:"middle"}),y.setStyle(DP({fill:l},C.getItemStyle(["color"]))),Pp.setHoverStyle(y,A.getItemStyle())}else o.remove(r[n])}var a=t.getData(),o=this.group,s=t.getLayerSeries(),l=a.getLayout("layoutInfo"),u=l.rect,c=l.boundaryGap;o.attr("position",[0,u.y+c[0]]);var h={};new cy(this._layersSeries||[],s,i,i).add(kP(r,this,"add")).update(kP(r,this,"update")).remove(kP(r,this,"remove")).execute(),this._layersSeries=s,this._layers=h},dispose:function(){}}),function(t,e){t.eachSeriesByType("themeRiver",function(t){var e=t.getData(),n=t.coordinateSystem,i={},r=n.getRect();i.rect=r;var a=t.get("boundaryGap"),o=n.getAxis();i.boundaryGap=a,"horizontal"===o.orient?(a[0]=Wp.parsePercent(a[0],r.height),a[1]=Wp.parsePercent(a[1],r.height),Go(e,t,r.height-a[0]-a[1])):(a[0]=Wp.parsePercent(a[0],r.width),a[1]=Wp.parsePercent(a[1],r.width),Go(e,t,r.width-a[0]-a[1])),e.setLayout("layoutInfo",i)})}),LP=du.createHashMap,NP=function(t){t.eachSeriesByType("themeRiver",function(t){var e=t.getData(),n=t.getRawData(),i=t.get("color"),r=LP();e.each(function(t){r.set(e.getRawIndex(t),t)}),n.each(function(a){var o=n.getName(a),s=i[(t.nameMap.get(o)-1)%i.length];n.setItemVisual(a,"color",s);var l=r.get(a);null!=l&&e.setItemVisual(l,"color",s)})})};T_.registerLayout(EP),T_.registerVisual(NP),T_.registerProcessor(Fw("themeRiver"));var RP=$S.wrapTreePathInfo,BP=(xv.extend({type:"series.sunburst",_viewRoot:null,getInitialData:function(t,e){var n={name:t.name,children:t.data};Fo(n);var i=t.levels||[],r={};return r.levels=i,BS.createTree(n,this,r).data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(t){var e=xv.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return e.treePathInfo=RP(n,this),e},defaultOption:{zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:!0,highlightPolicy:"descendant",nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0,emphasis:{}},itemStyle:{borderWidth:1,borderColor:"white",opacity:1,emphasis:{},highlight:{opacity:1},downplay:{opacity:.9}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicOut",data:[],levels:[],sort:"desc"},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)}}),{NONE:"none",DESCENDANT:"descendant",ANCESTOR:"ancestor",SELF:"self"}),zP=2,VP=4,GP=jo.prototype;GP.updateData=function(t,e,n,i,r){this.node=e,e.piece=this,i=i||this._seriesModel,r=r||this._ecModel;var a=this.childAt(0);a.dataIndex=e.dataIndex;var o=e.getModel(),s=e.getLayout();s||console.log(e.getLayout());var l=du.extend({},s);l.label=null;var u,c=function(t,e,n){var i=t.getVisual("color"),r=t.getVisual("visualMeta");r&&0!==r.length||(i=null);var a=t.getModel("itemStyle").get("color");if(a)return a;if(i)return i;if(0===t.depth)return n.option.color[0];var o=n.option.color.length;return n.option.color[function(t){for(var e=t;e.depth>1;)e=e.parentNode;var n=t.getAncestors()[0];return du.indexOf(n.children,e)}(t)%o]}(e,0,r),h=o.getModel("itemStyle").getItemStyle();if("normal"===n)u=h;else{var d=o.getModel(n+".itemStyle").getItemStyle();u=du.merge(d,h)}u=du.defaults({lineJoin:"bevel",fill:u.fill||c},u),t?(a.setShape(l),a.shape.r=s.r0,Pp.updateProps(a,{shape:{r:s.r}},i,e.dataIndex),a.useStyle(u)):"object"==typeof u.fill&&u.fill.type||"object"==typeof a.style.fill&&a.style.fill.type?(Pp.updateProps(a,{shape:l},i),a.useStyle(u)):Pp.updateProps(a,{shape:l,style:u},i),this._updateLabel(i,c,n);var f=o.getShallow("cursor");if(f&&a.attr("cursor",f),t){var p=i.getShallow("highlightPolicy");this._initEvents(a,e,i,p)}this._seriesModel=i||this._seriesModel,this._ecModel=r||this._ecModel},GP.onEmphasis=function(t){var e=this;this.node.hostTree.root.eachNode(function(n){n.piece&&(e.node===n?n.piece.updateData(!1,n,"emphasis"):function(t,e,n){return n!==BP.NONE&&(n===BP.SELF?t===e:n===BP.ANCESTOR?t===e||t.isAncestorOf(e):t===e||t.isDescendantOf(e))}(n,e.node,t)?n.piece.childAt(0).trigger("highlight"):t!==BP.NONE&&n.piece.childAt(0).trigger("downplay"))})},GP.onNormal=function(){this.node.hostTree.root.eachNode(function(t){t.piece&&t.piece.updateData(!1,t,"normal")})},GP.onHighlight=function(){this.updateData(!1,this.node,"highlight")},GP.onDownplay=function(){this.updateData(!1,this.node,"downplay")},GP._updateLabel=function(t,e,n){function i(t){var e=o.get(t);return null==e?a.get(t):e}var r=this.node.getModel(),a=r.getModel("label"),o="normal"===n||"emphasis"===n?a:r.getModel(n+".label"),s=r.getModel("emphasis.label"),l=du.retrieve(t.getFormattedLabel(this.node.dataIndex,"normal",null,null,"label"),this.node.name);!1===i("show")&&(l="");var u=this.node.getLayout(),c=o.get("minAngle");null==c&&(c=a.get("minAngle")),c=c/180*Math.PI;var h=u.endAngle-u.startAngle;null!=c&&Math.abs(h)<c&&(l="");var d=this.childAt(1);Pp.setLabelStyle(d.style,d.hoverStyle||{},a,s,{defaultText:o.getShallow("show")?l:null,autoColor:e,useInsideStyle:!0});var f,p=(u.startAngle+u.endAngle)/2,g=Math.cos(p),m=Math.sin(p),v=i("position"),y=i("distance")||0,x=i("align");"outside"===v?(f=u.r+y,x=p>Math.PI/2?"right":"left"):x&&"center"!==x?"left"===x?(f=u.r0+y,p>Math.PI/2&&(x="right")):"right"===x&&(f=u.r-y,p>Math.PI/2&&(x="left")):(f=(u.r+u.r0)/2,x="center"),d.attr("style",{text:l,textAlign:x,textVerticalAlign:i("verticalAlign")||"middle",opacity:i("opacity")});var _=f*g+u.cx,b=f*m+u.cy;d.attr("position",[_,b]);var w=i("rotate"),S=0;"radial"===w?(S=-p)<-Math.PI/2&&(S+=Math.PI):"tangential"===w?(S=Math.PI/2-p)>Math.PI/2?S-=Math.PI:S<-Math.PI/2&&(S+=Math.PI):"number"==typeof w&&(S=w*Math.PI/180),d.attr("rotation",S)},GP._initEvents=function(t,e,n,i){t.off("mouseover").off("mouseout").off("emphasis").off("normal");var r=this,a=function(){r.onEmphasis(i)},o=function(){r.onNormal()};n.isAnimationEnabled()&&t.on("mouseover",a).on("mouseout",o).on("emphasis",a).on("normal",o).on("downplay",function(){r.onDownplay()}).on("highlight",function(){r.onHighlight()})},du.inherits(jo,Pp.Group);var FP=jo,jP=(kv.extend({type:"sunburst",init:function(){},render:function(t,e,n,i){var r=this;this.seriesModel=t,this.api=n,this.ecModel=e;var a=t.getData(),o=a.tree.root,s=t.getViewRoot(),l=this.group,u=t.get("renderLabelForZeroData"),c=[];s.eachNode(function(t){c.push(t)});var h=this._oldChildren||[];if(function(n,i){function r(t){return t.getId()}function s(r,s){!function(n,i){if(u||!n||n.getValue()||(n=null),n!==o&&i!==o)if(i&&i.piece)n?(i.piece.updateData(!1,n,"normal",t,e),a.setItemGraphicEl(n.dataIndex,i.piece)):function(t){t&&t.piece&&(l.remove(t.piece),t.piece=null)}(i);else if(n){var r=new FP(n,t,e);l.add(r),a.setItemGraphicEl(n.dataIndex,r)}}(null==r?null:n[r],null==s?null:i[s])}0===n.length&&0===i.length||new cy(i,n,r,r).add(s).update(s).remove(du.curry(s,null)).execute()}(c,h),function(n,i){if(i.depth>0){r.virtualPiece?r.virtualPiece.updateData(!1,n,"normal",t,e):(r.virtualPiece=new FP(n,t,e),l.add(r.virtualPiece)),i.piece._onclickEvent&&i.piece.off("click",i.piece._onclickEvent);var a=function(t){r._rootToNode(i.parentNode)};i.piece._onclickEvent=a,r.virtualPiece.on("click",a)}else r.virtualPiece&&(l.remove(r.virtualPiece),r.virtualPiece=null)}(o,s),i&&i.highlight&&i.highlight.piece){var d=t.getShallow("highlightPolicy");i.highlight.piece.onEmphasis(d)}else if(i&&i.unhighlight){var f=this.virtualPiece;!f&&o.children.length&&(f=o.children[0].piece),f&&f.onNormal()}this._initEvents(),this._oldChildren=c},dispose:function(){},_initEvents:function(){var t=this,e=function(e){var n=!1;t.seriesModel.getViewRoot().eachNode(function(i){if(!n&&i.piece&&i.piece.childAt(0)===e.target){var r=i.getModel().get("nodeClick");if("rootToNode"===r)t._rootToNode(i);else if("link"===r){var a=i.getModel(),o=a.get("link");if(o){var s=a.get("target",!0)||"_blank";window.open(o,s)}}n=!0}})};this.group._onclickEvent&&this.group.off("click",this.group._onclickEvent),this.group.on("click",e),this.group._onclickEvent=e},_rootToNode:function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:"sunburstRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},containPoint:function(t,e){var n=e.getData().getItemLayout(0);if(n){var i=t[0]-n.cx,r=t[1]-n.cy,a=Math.sqrt(i*i+r*r);return a<=n.r&&a>=n.r0}}}),"sunburstRootToNode");T_.registerAction({type:jP,update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},function(e,n){var i=$S.retrieveTargetInfo(t,[jP],e);if(i){var r=e.getViewRoot();r&&(t.direction=$S.aboveViewRoot(r,i.node)?"rollUp":"drillDown"),e.resetViewRoot(i.node)}})});var HP="sunburstHighlight";T_.registerAction({type:HP,update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},function(e,n){var i=$S.retrieveTargetInfo(t,[HP],e);i&&(t.highlight=i.node)})}),T_.registerAction({type:"sunburstUnhighlight",update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},function(e,n){t.unhighlight=!0})});var WP=Wp.parsePercent,YP=(Math.PI,Math.PI/180),XP=function(t,e,n,i){e.eachSeriesByType(t,function(t){var e=t.get("center"),i=t.get("radius");du.isArray(i)||(i=[0,i]),du.isArray(e)||(e=[e,e]);var r=n.getWidth(),a=n.getHeight(),o=Math.min(r,a),s=WP(e[0],r),l=WP(e[1],a),u=WP(i[0],o/2),c=WP(i[1],o/2),h=-t.get("startAngle")*YP,d=t.get("minAngle")*YP,f=t.getData().tree.root,p=t.getViewRoot(),g=p.depth,m=t.get("sort");null!=m&&Ho(p,m);var v=0;du.each(p.children,function(t){!isNaN(t.getValue())&&v++});var y=p.getValue(),x=Math.PI/(y||v)*2,_=p.depth>0,b=p.height-(_?-1:1),w=(c-u)/(b||1),S=t.get("clockwise"),M=t.get("stillShowZeroSum"),A=S?1:-1,C=function(t,e){if(t){var n=e;if(t!==f){var i=t.getValue(),r=0===y&&M?x:i*x;r<d?(r=d,d):i,n=e+A*r;var a=t.depth-g-(_?-1:1),c=u+w*a,h=u+w*(a+1),p=t.getModel();null!=p.get("r0")&&(c=WP(p.get("r0"),o/2)),null!=p.get("r")&&(h=WP(p.get("r"),o/2)),t.setLayout({angle:r,startAngle:e,endAngle:n,clockwise:S,cx:s,cy:l,r0:c,r:h})}if(t.children&&t.children.length){var m=0;du.each(t.children,function(t){m+=C(t,e+m)})}return n-e}};if(_){var I=u,P=u+w,T=2*Math.PI;f.setLayout({angle:T,startAngle:h,endAngle:h+T,clockwise:S,cx:s,cy:l,r0:I,r:P})}C(p,h)})};T_.registerVisual(du.curry(Lw,"sunburst")),T_.registerLayout(du.curry(XP,"sunburst")),T_.registerProcessor(du.curry(Fw,"sunburst"));var UP=k_.getDefaultLabel,qP=fx.getLayoutOnAxis,ZP=["itemStyle"],KP=["emphasis","itemStyle"],$P=["label"],JP=["emphasis","label"],QP="e\0\0",tT={cartesian2d:function(t){var e=t.grid.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:du.bind(function(t,e){return e=e||[0,0],du.map(["x","y"],function(n,i){var r=this.getAxis(n),a=e[i],o=t[i]/2;return"category"===r.type?r.getBandWidth():Math.abs(r.dataToCoord(a-o)-r.dataToCoord(a+o))},this)},t)}}},geo:function(t){var e=t.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:du.bind(function(t,e){return e=e||[0,0],du.map([0,1],function(n){var i=e[n],r=t[n]/2,a=[],o=[];return a[n]=i-r,o[n]=i+r,a[1-n]=o[1-n]=e[1-n],Math.abs(this.dataToPoint(a)[n]-this.dataToPoint(o)[n])},this)},t)}}},singleAxis:function(t){var e=t.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:du.bind(function(t,e){var n=this.getAxis(),i=e instanceof Array?e[0]:e,r=(t instanceof Array?t[0]:t)/2;return"category"===n.type?n.getBandWidth():Math.abs(n.dataToCoord(i-r)-n.dataToCoord(i+r))},t)}}},polar:function(t){var e=t.getRadiusAxis(),n=t.getAngleAxis(),i=e.getExtent();return i[0]>i[1]&&i.reverse(),{coordSys:{type:"polar",cx:t.cx,cy:t.cy,r:i[1],r0:i[0]},api:{coord:du.bind(function(i){var r=e.dataToRadius(i[0]),a=n.dataToAngle(i[1]),o=t.coordToPoint([r,a]);return o.push(r,a*Math.PI/180),o}),size:du.bind(function(t,e){return du.map(["Radius","Angle"],function(n,i){var r=this["get"+n+"Axis"](),a=e[i],o=t[i]/2,s="dataTo"+n,l="category"===r.type?r.getBandWidth():Math.abs(r[s](a-o)-r[s](a+o));return"Angle"===n&&(l=l*Math.PI/180),l},this)},t)}}},calendar:function(t){var e=t.getRect(),n=t.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:t.getCellWidth(),cellHeight:t.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(e,n){return t.dataToPoint(e,n)}}}}};T_.extendSeriesModel({type:"series.custom",dependencies:["grid","polar","geo","singleAxis","calendar"],defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0},getInitialData:function(t,e){return qy(this.getSource(),this)}}),T_.extendChartView({type:"custom",_data:null,render:function(t,e,n){var i=this._data,r=t.getData(),a=this.group,o=Yo(t,r,e,n);this.group.removeAll(),r.diff(i).add(function(e){Xo(null,e,o(e),t,a,r)}).update(function(e,n){Xo(i.getItemGraphicEl(n),e,o(e),t,a,r)}).remove(function(t){var e=i.getItemGraphicEl(t);e&&a.remove(e)}).execute(),this._data=r},incrementalPrepareRender:function(t,e,n){this.group.removeAll(),this._data=null},incrementalRender:function(t,e,n,i){for(var r=e.getData(),a=Yo(e,r,n,i),o=t.start;o<t.end;o++)Xo(null,o,a(o),e,this.group,r).traverse(function(t){t.isGroup||(t.incremental=!0,t.useHoverLayer=!0)})},dispose:du.noop}),T_.registerPreprocessor(function(t){var e=t.graphic;du.isArray(e)?e[0]&&e[0].elements?t.graphic=[t.graphic[0]]:t.graphic=[{elements:e}]:e&&!e.elements&&(t.graphic=[{elements:[e]}])});var eT=T_.extendComponentModel({type:"graphic",defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(t){var e=this.option.elements;this.option.elements=null,eT.superApply(this,"mergeOption",arguments),this.option.elements=e},optionUpdated:function(t,e){var n=this.option,i=(e?n:t).elements,r=n.elements=e?[]:n.elements,a=[];this._flatten(i,a);var o=Hh.mappingToExists(r,a);Hh.makeIdAndName(o);var s=this._elOptionsToUpdate=[];du.each(o,function(t,e){var n=t.option;n&&(s.push(n),function(t,e){var n=t.exist;if(e.id=t.keyInfo.id,!e.type&&n&&(e.type=n.type),null==e.parentId){var i=e.parentOption;i?e.parentId=i.id:n&&(e.parentId=n.parentId)}e.parentOption=null}(t,n),function(t,e,n){var i=du.extend({},n),r=t[e],a=n.$action||"merge";"merge"===a?r?(du.merge(r,i,!0),ig.mergeLayoutParam(r,i,{ignoreSize:!0}),ig.copyLayoutParams(n,r)):t[e]=i:"replace"===a?t[e]=i:"remove"===a&&r&&(t[e]=null)}(r,e,n),function(t,e){t&&(t.hv=e.hv=[Jo(e,["left","right"]),Jo(e,["top","bottom"])],"group"===t.type&&(null==t.width&&(t.width=e.width=0),null==t.height&&(t.height=e.height=0)))}(r[e],n))},this);for(var l=r.length-1;l>=0;l--)null==r[l]?r.splice(l,1):delete r[l].$action},_flatten:function(t,e,n){du.each(t,function(t){if(t){n&&(t.parentOption=n),e.push(t);var i=t.children;"group"===t.type&&i&&this._flatten(i,e,t),delete t.children}},this)},useElOptionsToUpdate:function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t}});T_.extendComponentView({type:"graphic",init:function(t,e){this._elMap=du.createHashMap(),this._lastGraphicModel},render:function(t,e,n){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t,n),this._relocate(t,n)},_updateElements:function(t,e){var n=t.useElOptionsToUpdate();if(n){var i=this._elMap,r=this.group;du.each(n,function(t){var e=t.$action,n=t.id,a=i.get(n),o=t.parentId,s=null!=o?i.get(o):r;if("text"===t.type){var l=t.style;t.hv&&t.hv[1]&&(l.textVerticalAlign=l.textBaseline=null),!l.hasOwnProperty("textFill")&&l.fill&&(l.textFill=l.fill),!l.hasOwnProperty("textStroke")&&l.stroke&&(l.textStroke=l.stroke)}var u=function(t){return t=du.extend({},t),du.each(["id","parentId","$action","hv","bounding"].concat(ig.LOCATION_PARAMS),function(e){delete t[e]}),t}(t);e&&"merge"!==e?"replace"===e?($o(a,i),Ko(n,s,u,i)):"remove"===e&&$o(a,i):a?a.attr(u):Ko(n,s,u,i);var c=i.get(n);c&&(c.__ecGraphicWidth=t.width,c.__ecGraphicHeight=t.height)})}},_relocate:function(t,e){for(var n=t.option.elements,i=this.group,r=this._elMap,a=n.length-1;a>=0;a--){var o=n[a],s=r.get(o.id);if(s){var l=s.parent,u=l===i?{width:e.getWidth(),height:e.getHeight()}:{width:l.__ecGraphicWidth||0,height:l.__ecGraphicHeight||0};ig.positionElement(s,o,u,null,{hv:o.hv,boundingMode:o.bounding})}}},_clear:function(){var t=this._elMap;t.each(function(e){$o(e,t)}),this._elMap=du.createHashMap()},dispose:function(){this._clear()}});var nT=Hh.isNameSpecified,iT=T_.extendComponentModel({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(t,e,n){this.mergeDefaultAndTheme(t,n),t.selected=t.selected||{}},mergeOption:function(t){iT.superCall(this,"mergeOption",t)},optionUpdated:function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&"single"===this.get("selectedMode")){for(var e=!1,n=0;n<t.length;n++){var i=t[n].get("name");if(this.isSelected(i)){this.select(i),e=!0;break}}!e&&this.select(t[0].get("name"))}},_updateData:function(t){var e=[],n=[];t.eachRawSeries(function(i){var r,a=i.name;if(n.push(a),i.legendDataProvider){var o=i.legendDataProvider(),s=o.mapArray(o.getName);t.isSeriesFiltered(i)||(n=n.concat(s)),s.length?e=e.concat(s):r=!0}else r=!0;r&&nT(i)&&e.push(i.name)}),this._availableNames=n;var i=this.get("data")||e,r=du.map(i,function(t){return"string"!=typeof t&&"number"!=typeof t||(t={name:t}),new zp(t,this,this.ecModel)},this);this._data=r},getData:function(){return this._data},select:function(t){var e=this.option.selected;if("single"===this.get("selectedMode")){var n=this._data;du.each(n,function(t){e[t.get("name")]=!1})}e[t]=!0},unSelect:function(t){"single"!==this.get("selectedMode")&&(this.option.selected[t]=!1)},toggleSelected:function(t){var e=this.option.selected;e.hasOwnProperty(t)||(e[t]=!0),this[e[t]?"unSelect":"select"](t)},isSelected:function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&du.indexOf(this._availableNames,t)>=0},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",textStyle:{color:"#333"},selectedMode:!0,tooltip:{show:!1}}}),rT=iT;T_.registerAction("legendToggleSelect","legendselectchanged",du.curry(Qo,"toggleSelected")),T_.registerAction("legendSelect","legendselected",du.curry(Qo,"select")),T_.registerAction("legendUnSelect","legendunselected",du.curry(Qo,"unSelect"));var aT=ig.getLayoutRect,oT=ig.box,sT=ig.positionElement,lT={layout:function(t,e,n){var i=e.getBoxLayoutParams(),r=e.get("padding"),a={width:n.getWidth(),height:n.getHeight()},o=aT(i,a,r);oT(e.get("orient"),t,e.get("itemGap"),o.width,o.height),sT(t,i,a,r)},makeBackground:function(t,e){var n=Zp.normalizeCssArray(e.get("padding")),i=e.getItemStyle(["color","opacity"]);return i.fill=e.get("backgroundColor"),new Pp.Rect({shape:{x:t.x-n[3],y:t.y-n[0],width:t.width+n[1]+n[3],height:t.height+n[0]+n[2],r:e.get("borderRadius")},style:i,silent:!0,z2:-1})}},uT=jx.createSymbol,cT=lT.makeBackground,hT=du.curry,dT=du.each,fT=Pp.Group,pT=T_.extendComponentView({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new fT),this._backgroundEl},getContentGroup:function(){return this._contentGroup},render:function(t,e,n){if(this.resetInner(),t.get("show",!0)){var i=t.get("align");i&&"auto"!==i||(i="right"===t.get("left")&&"vertical"===t.get("orient")?"right":"left"),this.renderInner(i,t,e,n);var r=t.getBoxLayoutParams(),a={width:n.getWidth(),height:n.getHeight()},o=t.get("padding"),s=ig.getLayoutRect(r,a,o),l=this.layoutInner(t,i,s),u=ig.getLayoutRect(du.defaults({width:l.width,height:l.height},r),a,o);this.group.attr("position",[u.x-l.x,u.y-l.y]),this.group.add(this._backgroundEl=cT(l,t))}},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl)},renderInner:function(t,e,n,i){var r=this.getContentGroup(),a=du.createHashMap(),o=e.get("selectedMode"),s=[];n.eachRawSeries(function(t){!t.get("legendHoverLink")&&s.push(t.id)}),dT(e.getData(),function(l,u){var c=l.get("name");if(this.newlineDisabled||""!==c&&"\n"!==c){var h=n.getSeriesByName(c)[0];if(!a.get(c))if(h){var d=h.getData(),f=d.getVisual("color");"function"==typeof f&&(f=f(h.getDataParams(0)));var p=d.getVisual("legendSymbol")||"roundRect",g=d.getVisual("symbol");this._createItem(c,u,l,e,p,g,t,f,o).on("click",hT(ts,c,i)).on("mouseover",hT(es,h,null,i,s)).on("mouseout",hT(ns,h,null,i,s)),a.set(c,!0)}else n.eachRawSeries(function(n){if(!a.get(c)&&n.legendDataProvider){var r=n.legendDataProvider(),h=r.indexOfName(c);if(h<0)return;var d=r.getItemVisual(h,"color");this._createItem(c,u,l,e,"roundRect",null,t,d,o).on("click",hT(ts,c,i)).on("mouseover",hT(es,n,c,i,s)).on("mouseout",hT(ns,n,c,i,s)),a.set(c,!0)}},this)}else r.add(new fT({newline:!0}))},this)},_createItem:function(t,e,n,i,r,a,o,s,l){var u=i.get("itemWidth"),c=i.get("itemHeight"),h=i.get("inactiveColor"),d=i.get("symbolKeepAspect"),f=i.isSelected(t),p=new fT,g=n.getModel("textStyle"),m=n.get("icon"),v=n.getModel("tooltip"),y=v.parentModel;if(r=m||r,p.add(uT(r,0,0,u,c,f?s:h,null==d||d)),!m&&a&&(a!==r||"none"==a)){var x=.8*c;"none"===a&&(a="circle"),p.add(uT(a,(u-x)/2,(c-x)/2,x,x,f?s:h,null==d||d))}var _="left"===o?u+5:-5,b=o,w=i.get("formatter"),S=t;"string"==typeof w&&w?S=w.replace("{name}",null!=t?t:""):"function"==typeof w&&(S=w(t)),p.add(new Pp.Text({style:Pp.setTextStyle({},g,{text:S,x:_,y:c/2,textFill:f?g.getTextColor():h,textAlign:b,textVerticalAlign:"middle"})}));var M=new Pp.Rect({shape:p.getBoundingRect(),invisible:!0,tooltip:v.get("show")?du.extend({content:t,formatter:y.get("formatter",!0)||function(){return t},formatterParams:{componentType:"legend",legendIndex:i.componentIndex,name:t,$vars:["name"]}},v.option):null});return p.add(M),p.eachChild(function(t){t.silent=!0}),M.silent=!l,this.getContentGroup().add(p),Pp.setHoverStyle(p),p.__legendDataIndex=e,p},layoutInner:function(t,e,n){var i=this.getContentGroup();ig.box(t.get("orient"),i,t.get("itemGap"),n.width,n.height);var r=i.getBoundingRect();return i.attr("position",[-r.x,-r.y]),this.group.getBoundingRect()}}),gT=function(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries(function(t){for(var n=0;n<e.length;n++)if(!e[n].isSelected(t.name))return!1;return!0})};T_.registerProcessor(gT),ug.registerSubTypeDefaulter("legend",function(){return"plain"});var mT=ig.mergeLayoutParam,vT=ig.getLayoutParams,yT=rT.extend({type:"legend.scroll",setScrollDataIndex:function(t){this.option.scrollDataIndex=t},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(t,e,n,i){var r=vT(t);yT.superCall(this,"init",t,e,n,i),is(this,t,r)},mergeOption:function(t,e){yT.superCall(this,"mergeOption",t,e),is(this,this.option,t)},getOrient:function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}}}),xT=Pp.Group,_T=["width","height"],bT=["x","y"],wT=pT.extend({type:"legend.scroll",newlineDisabled:!0,init:function(){wT.superCall(this,"init"),this._currentIndex=0,this.group.add(this._containerGroup=new xT),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new xT),this._showController},resetInner:function(){wT.superCall(this,"resetInner"),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},renderInner:function(t,e,n,i){function r(t,n){var r=t+"DataIndex",l=Pp.createIcon(e.get("pageIcons",!0)[e.getOrient().name][n],{onclick:du.bind(a._pageGo,a,r,e,i)},{x:-s[0]/2,y:-s[1]/2,width:s[0],height:s[1]});l.name=t,o.add(l)}var a=this;wT.superCall(this,"renderInner",t,e,n,i);var o=this._controllerGroup,s=e.get("pageIconSize",!0);du.isArray(s)||(s=[s,s]),r("pagePrev",0);var l=e.getModel("pageTextStyle");o.add(new Pp.Text({name:"pageText",style:{textFill:l.getTextColor(),font:l.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:!0})),r("pageNext",1)},layoutInner:function(t,e,n){var i=this.getContentGroup(),r=this._containerGroup,a=this._controllerGroup,o=t.getOrient().index,s=_T[o],l=_T[1-o],u=bT[1-o];ig.box(t.get("orient"),i,t.get("itemGap"),o?n.width:null,o?null:n.height),ig.box("horizontal",a,t.get("pageButtonItemGap",!0));var c=i.getBoundingRect(),h=a.getBoundingRect(),d=this._showController=c[s]>n[s],f=[-c.x,-c.y];f[o]=i.position[o];var p=[0,0],g=[-h.x,-h.y],m=du.retrieve2(t.get("pageButtonGap",!0),t.get("itemGap",!0));d&&("end"===t.get("pageButtonPosition",!0)?g[o]+=n[s]-h[s]:p[o]+=h[s]+m),g[1-o]+=c[l]/2-h[l]/2,i.attr("position",f),r.attr("position",p),a.attr("position",g);var v=this.group.getBoundingRect();if((v={x:0,y:0})[s]=d?n[s]:c[s],v[l]=Math.max(c[l],h[l]),v[u]=Math.min(0,h[u]+g[1-o]),r.__rectSize=n[s],d){var y={x:0,y:0};y[s]=Math.max(n[s]-h[s]-m,0),y[l]=v[l],r.setClipPath(new Pp.Rect({shape:y})),r.__rectSize=y[s]}else a.eachChild(function(t){t.attr({invisible:!0,silent:!0})});var x=this._getPageInfo(t);return null!=x.pageIndex&&Pp.updateProps(i,{position:x.contentPosition},!!d&&t),this._updatePageInfoView(t,x),v},_pageGo:function(t,e,n){var i=this._getPageInfo(e)[t];null!=i&&n.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:e.id})},_updatePageInfoView:function(t,e){var n=this._controllerGroup;du.each(["pagePrev","pageNext"],function(i){var r=null!=e[i+"DataIndex"],a=n.childOfName(i);a&&(a.setStyle("fill",r?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),a.cursor=r?"pointer":"default")});var i=n.childOfName("pageText"),r=t.get("pageFormatter"),a=e.pageIndex,o=null!=a?a+1:0,s=e.pageCount;i&&r&&i.setStyle("text",du.isString(r)?r.replace("{current}",o).replace("{total}",s):r({current:o,total:s}))},_getPageInfo:function(t){function e(t){var e=t.getBoundingRect().clone();return e[f]+=t.position[c],e}var n,i,r,a,o=t.get("scrollDataIndex",!0),s=this.getContentGroup(),l=s.getBoundingRect(),u=this._containerGroup.__rectSize,c=t.getOrient().index,h=_T[c],d=_T[1-c],f=bT[c],p=s.position.slice();this._showController?s.eachChild(function(t){t.__legendDataIndex===o&&(a=t)}):a=s.childAt(0);var g=u?Math.ceil(l[h]/u):0;if(a){var m=a.getBoundingRect(),v=a.position[c]+m[f];p[c]=-v-l[f],n=Math.floor(g*(v+m[f]+u/2)/l[h]),n=l[h]&&g?Math.max(0,Math.min(g-1,n)):-1;var y={x:0,y:0};y[h]=u,y[d]=l[d],y[f]=-p[c]-l[f];var x,_=s.children();if(s.eachChild(function(t,n){var i=e(t);i.intersect(y)&&(null==x&&(x=n),r=t.__legendDataIndex),n===_.length-1&&i[f]+i[h]<=y[f]+y[h]&&(r=null)}),null!=x){var b=e(_[x]);if(y[f]=b[f]+b[h]-y[h],x<=0&&b[f]>=y[f])i=null;else{for(;x>0&&e(_[x-1]).intersect(y);)x--;i=_[x].__legendDataIndex}}}return{contentPosition:p,pageIndex:n,pageCount:g,pagePrevDataIndex:i,pageNextDataIndex:r}}});T_.registerAction("legendScroll","legendscroll",function(t,e){var n=t.scrollDataIndex;null!=n&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},function(t){t.setScrollDataIndex(n)})}),T_.extendComponentModel({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:8,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",confine:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});var ST=du.each,MT=Zp.toCamelCase,AT=["","-webkit-","-moz-","-o-"];rs.prototype={constructor:rs,_enterable:!0,update:function(){var t=this._container,e=t.currentStyle||document.defaultView.getComputedStyle(t),n=t.style;"absolute"!==n.position&&"absolute"!==e.position&&(n.position="relative")},show:function(t){clearTimeout(this._hideTimeout);var e=this.el;e.style.cssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+function(t){var e=[],n=t.get("transitionDuration"),i=t.get("backgroundColor"),r=t.getModel("textStyle"),a=t.get("padding");return n&&e.push(function(t){var e="left "+t+"s cubic-bezier(0.23, 1, 0.32, 1),top "+t+"s cubic-bezier(0.23, 1, 0.32, 1)";return du.map(AT,function(t){return t+"transition:"+e}).join(";")}(n)),i&&(Jl.canvasSupported?e.push("background-Color:"+i):(e.push("background-Color:#"+Hu.toHex(i)),e.push("filter:alpha(opacity=70)"))),ST(["width","color","radius"],function(n){var i="border-"+n,r=MT(i),a=t.get(r);null!=a&&e.push(i+":"+a+("color"===n?"":"px"))}),e.push(function(t){var e=[],n=t.get("fontSize"),i=t.getTextColor();return i&&e.push("color:"+i),e.push("font:"+t.getFont()),n&&e.push("line-height:"+Math.round(3*n/2)+"px"),ST(["decoration","align"],function(n){var i=t.get(n);i&&e.push("text-"+n+":"+i)}),e.join(";")}(r)),null!=a&&e.push("padding:"+Zp.normalizeCssArray(a).join("px ")+"px"),e.join(";")+";"}(t)+";left:"+this._x+"px;top:"+this._y+"px;"+(t.get("extraCssText")||""),e.style.display=e.innerHTML?"block":"none",this._show=!0},setContent:function(t){this.el.innerHTML=null==t?"":t},setEnterable:function(t){this._enterable=t},getSize:function(){var t=this.el;return[t.clientWidth,t.clientHeight]},moveTo:function(t,e){var n,i=this._zr;i&&i.painter&&(n=i.painter.getViewportRootOffset())&&(t+=n.offsetLeft,e+=n.offsetTop);var r=this.el.style;r.left=t+"px",r.top=e+"px",this._x=t,this._y=e},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(du.bind(this.hide,this),t)):this.hide())},isShow:function(){return this._show}};var CT=rs,IT=du.bind,PT=du.each,TT=Wp.parsePercent,OT=new Pp.Rect({shape:{x:-1,y:-1,width:2,height:2}});T_.extendComponentView({type:"tooltip",init:function(t,e){if(!Jl.node){var n=new CT(e.getDom(),e);this._tooltipContent=n}},render:function(t,e,n){if(!Jl.node&&!Jl.wxa){this.group.removeAll(),this._tooltipModel=t,this._ecModel=e,this._api=n,this._lastDataByCoordSys=null,this._alwaysShowContent=t.get("alwaysShowContent");var i=this._tooltipContent;i.update(),i.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow()}},_initGlobalListener:function(){var t=this._tooltipModel.get("triggerOn");pP.register("itemTooltip",this._api,IT(function(e,n,i){"none"!==t&&(t.indexOf(e)>=0?this._tryShow(n,i):"leave"===e&&this._hide(i))},this))},_keepShow:function(){var t=this._tooltipModel,e=this._ecModel,n=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==t.get("triggerOn")){var i=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){i.manuallyShowTip(t,e,n,{x:i._lastX,y:i._lastY})})}},manuallyShowTip:function(t,e,n,i){if(i.from!==this.uid&&!Jl.node){var r=os(i,n);this._ticket="";var a=i.dataByCoordSys;if(i.tooltip&&null!=i.x&&null!=i.y){var o=OT;o.position=[i.x,i.y],o.update(),o.tooltip=i.tooltip,this._tryShow({offsetX:i.x,offsetY:i.y,target:o},r)}else if(a)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,event:{},dataByCoordSys:i.dataByCoordSys,tooltipOption:i.tooltipOption},r);else if(null!=i.seriesIndex){if(this._manuallyAxisShowTip(t,e,n,i))return;var s=oP(i,e),l=s.point[0],u=s.point[1];null!=l&&null!=u&&this._tryShow({offsetX:l,offsetY:u,position:i.position,target:s.el,event:{}},r)}else null!=i.x&&null!=i.y&&(n.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:n.getZr().findHover(i.x,i.y).target,event:{}},r))}},manuallyHideTip:function(t,e,n,i){var r=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&r.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=null,i.from!==this.uid&&this._hide(os(i,n))},_manuallyAxisShowTip:function(t,e,n,i){var r=i.seriesIndex,a=i.dataIndex,o=e.getComponent("axisPointer").coordSysAxesInfo;if(null!=r&&null!=a&&null!=o){var s=e.getSeriesByIndex(r);if(s&&"axis"===(t=as([s.getData().getItemModel(a),s,(s.coordinateSystem||{}).model,t])).get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:r,dataIndex:a,position:i.position}),!0}},_tryShow:function(t,e){var n=t.target;if(this._tooltipModel){this._lastX=t.offsetX,this._lastY=t.offsetY;var i=t.dataByCoordSys;i&&i.length?this._showAxisTooltip(i,t):n&&null!=n.dataIndex?(this._lastDataByCoordSys=null,this._showSeriesItemTooltip(t,n,e)):n&&n.tooltip?(this._lastDataByCoordSys=null,this._showComponentItemTooltip(t,n,e)):(this._lastDataByCoordSys=null,this._hide(e))}},_showOrMove:function(t,e){var n=t.get("showDelay");e=du.bind(e,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(e,n):e()},_showAxisTooltip:function(t,e){var n=this._ecModel,i=this._tooltipModel,r=[e.offsetX,e.offsetY],a=[],o=[],s=as([e.tooltipOption,i]);PT(t,function(t){PT(t.dataByAxis,function(t){var e=n.getComponent(t.axisDim+"Axis",t.axisIndex),i=t.value,r=[];if(e&&null!=i){var s=_P.getValueLabel(i,e.axis,n,t.seriesDataIndices,t.valueLabelOpt);du.each(t.seriesDataIndices,function(a){var l=n.getSeriesByIndex(a.seriesIndex),u=a.dataIndexInside,c=l&&l.getDataParams(u);c.axisDim=t.axisDim,c.axisIndex=t.axisIndex,c.axisType=t.axisType,c.axisId=t.axisId,c.axisValue=Dx.getAxisRawValue(e.axis,i),c.axisValueLabel=s,c&&(o.push(c),r.push(l.formatTooltip(u,!0)))});var l=s;a.push((l?Zp.encodeHTML(l)+"<br />":"")+r.join("<br />"))}})},this),a.reverse(),a=a.join("<br /><br />");var l=e.position;this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(t)?this._updatePosition(s,l,r[0],r[1],this._tooltipContent,o):this._showTooltipContent(s,a,o,Math.random(),r[0],r[1],l)})},_showSeriesItemTooltip:function(t,e,n){var i=this._ecModel,r=e.seriesIndex,a=i.getSeriesByIndex(r),o=e.dataModel||a,s=e.dataIndex,l=e.dataType,u=o.getData(),c=as([u.getItemModel(s),o,a&&(a.coordinateSystem||{}).model,this._tooltipModel]),h=c.get("trigger");if(null==h||"item"===h){var d=o.getDataParams(s,l),f=o.formatTooltip(s,!1,l),p="item_"+o.name+"_"+s;this._showOrMove(c,function(){this._showTooltipContent(c,f,d,p,t.offsetX,t.offsetY,t.position,t.target)}),n({type:"showTip",dataIndexInside:s,dataIndex:u.getRawIndex(s),seriesIndex:r,from:this.uid})}},_showComponentItemTooltip:function(t,e,n){var i=e.tooltip;if("string"==typeof i){var r=i;i={content:r,formatter:r}}var a=new zp(i,this._tooltipModel,this._ecModel),o=a.get("content"),s=Math.random();this._showOrMove(a,function(){this._showTooltipContent(a,o,a.get("formatterParams")||{},s,t.offsetX,t.offsetY,t.position,e)}),n({type:"showTip",from:this.uid})},_showTooltipContent:function(t,e,n,i,r,a,o,s){if(this._ticket="",t.get("showContent")&&t.get("show")){var l=this._tooltipContent,u=t.get("formatter");o=o||t.get("position");var c=e;if(u&&"string"==typeof u)c=Zp.formatTpl(u,n,!0);else if("function"==typeof u){var h=IT(function(e,i){e===this._ticket&&(l.setContent(i),this._updatePosition(t,o,r,a,l,n,s))},this);this._ticket=i,c=u(n,i,h)}l.setContent(c),l.show(t),this._updatePosition(t,o,r,a,l,n,s)}},_updatePosition:function(t,e,n,i,r,a,o){var s=this._api.getWidth(),l=this._api.getHeight();e=e||t.get("position");var u=r.getSize(),c=t.get("align"),h=t.get("verticalAlign"),d=o&&o.getBoundingRect().clone();if(o&&d.applyTransform(o.transform),"function"==typeof e&&(e=e([n,i],a,r.el,d,{viewSize:[s,l],contentSize:u.slice()})),du.isArray(e))n=TT(e[0],s),i=TT(e[1],l);else if(du.isObject(e)){e.width=u[0],e.height=u[1];var f=ig.getLayoutRect(e,{width:s,height:l});n=f.x,i=f.y,c=null,h=null}else"string"==typeof e&&o?(p=function(t,e,n){var i=n[0],r=n[1],a=0,o=0,s=e.width,l=e.height;switch(t){case"inside":a=e.x+s/2-i/2,o=e.y+l/2-r/2;break;case"top":a=e.x+s/2-i/2,o=e.y-r-5;break;case"bottom":a=e.x+s/2-i/2,o=e.y+l+5;break;case"left":a=e.x-i-5,o=e.y+l/2-r/2;break;case"right":a=e.x+s+5,o=e.y+l/2-r/2}return[a,o]}(e,d,u),n=p[0],i=p[1]):(p=function(t,e,n,i,r,a,o){var s=ss(n),l=s.width,u=s.height;return null!=a&&(t+l+a>i?t-=l+a:t+=a),null!=o&&(e+u+o>r?e-=u+o:e+=o),[t,e]}(n,i,r.el,s,l,c?null:20,h?null:20),n=p[0],i=p[1]);if(c&&(n-=ls(c)?u[0]/2:"right"===c?u[0]:0),h&&(i-=ls(h)?u[1]/2:"bottom"===h?u[1]:0),t.get("confine")){var p=function(t,e,n,i,r){var a=ss(n),o=a.width,s=a.height;return t=Math.min(t+o,i)-o,e=Math.min(e+s,r)-s,t=Math.max(t,0),e=Math.max(e,0),[t,e]}(n,i,r.el,s,l);n=p[0],i=p[1]}r.moveTo(n,i)},_updateContentNotChangedOnAxis:function(t){var e=this._lastDataByCoordSys,n=!!e&&e.length===t.length;return n&&PT(e,function(e,i){var r=e.dataByAxis||{},a=(t[i]||{}).dataByAxis||[];(n&=r.length===a.length)&&PT(r,function(t,e){var i=a[e]||{},r=t.seriesDataIndices||[],o=i.seriesDataIndices||[];(n&=t.value===i.value&&t.axisType===i.axisType&&t.axisId===i.axisId&&r.length===o.length)&&PT(r,function(t,e){var i=o[e];n&=t.seriesIndex===i.seriesIndex&&t.dataIndex===i.dataIndex})})}),this._lastDataByCoordSys=t,!!n},_hide:function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},dispose:function(t,e){Jl.node||Jl.wxa||(this._tooltipContent.hide(),pP.unregister("itemTooltip",e))}}),T_.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){}),T_.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){});var kT=Wp.parsePercent,DT=jy.isDimensionStacked,ET=function(t,e,n){var i=n.getWidth(),r=n.getHeight(),a={},o=function(t,e){var n={};du.each(t,function(t,e){var i=t.getData(),r=t.coordinateSystem.getBaseAxis(),a=r.getExtent(),o="category"===r.type?r.getBandWidth():Math.abs(a[1]-a[0])/i.count(),s=n[cs(r)]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},l=s.stacks;n[cs(r)]=s;var u=us(t);l[u]||s.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var c=kT(t.get("barWidth"),o),h=kT(t.get("barMaxWidth"),o),d=t.get("barGap"),f=t.get("barCategoryGap");c&&!l[u].width&&(c=Math.min(s.remainedWidth,c),l[u].width=c,s.remainedWidth-=c),h&&(l[u].maxWidth=h),null!=d&&(s.gap=d),null!=f&&(s.categoryGap=f)});var i={};return du.each(n,function(t,e){i[e]={};var n=t.stacks,r=t.bandWidth,a=kT(t.categoryGap,r),o=kT(t.gap,1),s=t.remainedWidth,l=t.autoWidthCount,u=(s-a)/(l+(l-1)*o);u=Math.max(u,0),du.each(n,function(t,e){var n=t.maxWidth;n&&n<u&&(n=Math.min(n,s),t.width&&(n=Math.min(n,t.width)),s-=n,t.width=n,l--)}),u=(s-a)/(l+(l-1)*o),u=Math.max(u,0);var c,h=0;du.each(n,function(t,e){t.width||(t.width=u),c=t,h+=t.width*(1+o)}),c&&(h-=c.width*o);var d=-h/2;du.each(n,function(t,n){i[e][n]=i[e][n]||{offset:d,width:t.width},d+=t.width*(1+o)})}),i}(du.filter(e.getSeriesByType(t),function(t){return!e.isSeriesFiltered(t)&&t.coordinateSystem&&"polar"===t.coordinateSystem.type}));e.eachSeriesByType(t,function(t){if("polar"===t.coordinateSystem.type){var e=t.getData(),n=t.coordinateSystem,s=n.getBaseAxis(),l=us(t),u=o[cs(s)][l],c=u.offset,h=u.width,d=n.getOtherAxis(s),f=t.get("center")||["50%","50%"],p=kT(f[0],i),g=kT(f[1],r),m=t.get("barMinHeight")||0,v=t.get("barMinAngle")||0;a[l]=a[l]||[];for(var y=e.mapDimension(d.dim),x=e.mapDimension(s.dim),_=DT(e,y),b=d.getExtent()[0],w=0,S=e.count();w<S;w++){var M=e.get(y,w),A=e.get(x,w);if(!isNaN(M)){var C,I,P,T,O=M>=0?"p":"n",k=b;if(_&&(a[l][A]||(a[l][A]={p:b,n:b}),k=a[l][A][O]),"radius"===d.dim){var D=d.dataToRadius(M)-b,E=s.dataToAngle(A);Math.abs(D)<m&&(D=(D<0?-1:1)*m),C=k,I=k+D,T=(P=E-c)-h,_&&(a[l][A][O]=I)}else{var L=d.dataToAngle(M,!0)-b,N=s.dataToRadius(A);Math.abs(L)<v&&(L=(L<0?-1:1)*v),I=(C=N+c)+h,P=k,T=k+L,_&&(a[l][A][O]=T)}e.setItemLayout(w,{cx:p,cy:g,r0:C,r:I,startAngle:-P*Math.PI/180,endAngle:-T*Math.PI/180})}}}},this)};hs.prototype={constructor:hs,pointToData:function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},dataToRadius:h_.prototype.dataToCoord,radiusToData:h_.prototype.coordToData},du.inherits(hs,h_);var LT=hs;ds.prototype={constructor:ds,pointToData:function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},dataToAngle:h_.prototype.dataToCoord,angleToData:h_.prototype.coordToData},du.inherits(ds,h_);var NT=ds,RT=function(t){this.name=t||"",this.cx=0,this.cy=0,this._radiusAxis=new LT,this._angleAxis=new NT,this._radiusAxis.polar=this._angleAxis.polar=this};RT.prototype={type:"polar",axisPointerEnabled:!0,constructor:RT,dimensions:["radius","angle"],model:null,containPoint:function(t){var e=this.pointToCoord(t);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},containData:function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},getAxis:function(t){return this["_"+t+"Axis"]},getAxes:function(){return[this._radiusAxis,this._angleAxis]},getAxesByScale:function(t){var e=[],n=this._angleAxis,i=this._radiusAxis;return n.scale.type===t&&e.push(n),i.scale.type===t&&e.push(i),e},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(t){var e=this._angleAxis;return t===e?this._radiusAxis:e},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},getTooltipAxes:function(t){var e=null!=t&&"auto"!==t?this.getAxis(t):this.getBaseAxis();return{baseAxes:[e],otherAxes:[this.getOtherAxis(e)]}},dataToPoint:function(t,e){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],e),this._angleAxis.dataToAngle(t[1],e)])},pointToData:function(t,e){var n=this.pointToCoord(t);return[this._radiusAxis.radiusToData(n[0],e),this._angleAxis.angleToData(n[1],e)]},pointToCoord:function(t){var e=t[0]-this.cx,n=t[1]-this.cy,i=this.getAngleAxis(),r=i.getExtent(),a=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);i.inverse?a=o-360:o=a+360;var s=Math.sqrt(e*e+n*n);e/=s,n/=s;for(var l=Math.atan2(-n,e)/Math.PI*180,u=l<a?1:-1;l<a||l>o;)l+=360*u;return[s,l]},coordToPoint:function(t){var e=t[0],n=t[1]/180*Math.PI;return[Math.cos(n)*e+this.cx,-Math.sin(n)*e+this.cy]}};var BT=RT,zT=ug.extend({type:"polarAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"polar",index:this.option.polarIndex,id:this.option.polarId})[0]}});du.merge(zT.prototype,Ex);var VT={angle:{startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:!1}},radius:{splitNumber:5}};Pb("angle",zT,fs,VT.angle),Pb("radius",zT,fs,VT.radius),T_.extendComponentModel({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(t){var e;return this.ecModel.eachComponent(t,function(t){t.getCoordSysModel()===this&&(e=t)},this),e},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}});var GT=Wp.parsePercent,FT=Dx.createScaleByModel,jT=Dx.niceScaleExtent,HT=jy.getStackedDimension,WT={dimensions:BT.prototype.dimensions,create:function(t,e){var n=[];return t.eachComponent("polar",function(t,i){var r=new BT(i);r.update=function(t,e){var n=this,i=n.getAngleAxis(),r=n.getRadiusAxis();if(i.scale.setExtent(1/0,-1/0),r.scale.setExtent(1/0,-1/0),t.eachSeries(function(t){if(t.coordinateSystem===n){var e=t.getData();du.each(e.mapDimension("radius",!0),function(t){r.scale.unionExtentFromData(e,HT(e,t))}),du.each(e.mapDimension("angle",!0),function(t){i.scale.unionExtentFromData(e,HT(e,t))})}}),jT(i.scale,i.model),jT(r.scale,r.model),"category"===i.type&&!i.onBand){var a=i.getExtent(),o=360/i.scale.count();i.inverse?a[1]+=o:a[1]-=o,i.setExtent(a[0],a[1])}};var a=r.getRadiusAxis(),o=r.getAngleAxis(),s=t.findAxisModel("radiusAxis"),l=t.findAxisModel("angleAxis");ps(a,s),ps(o,l),function(t,e,n){var i=e.get("center"),r=n.getWidth(),a=n.getHeight();t.cx=GT(i[0],r),t.cy=GT(i[1],a);var o=t.getRadiusAxis(),s=Math.min(r,a)/2,l=GT(e.get("radius"),s);o.inverse?o.setExtent(l,0):o.setExtent(0,l)}(r,t,e),n.push(r),t.coordinateSystem=r,r.model=t}),t.eachSeries(function(e){if("polar"===e.get("coordinateSystem")){var n=t.queryComponents({mainType:"polar",index:e.get("polarIndex"),id:e.get("polarId")})[0];e.coordinateSystem=n.coordinateSystem}}),n}};vm.register("polar",WT);var YT=["axisLine","axisLabel","axisTick","splitLine","splitArea"],XT=(sw.extend({type:"angleAxis",axisPointerClass:"PolarAxisPointer",render:function(t,e){if(this.group.removeAll(),t.get("show")){var n=t.axis,i=n.polar,r=i.getRadiusAxis().getExtent(),a=n.getTicksCoords(),o=du.map(n.getViewLabels(),function(t){return(t=du.clone(t)).coord=n.dataToCoord(t.tickValue),t});vs(o),vs(a),du.each(YT,function(e){!t.get(e+".show")||n.scale.isBlank()&&"axisLine"!==e||this["_"+e](t,i,a,r,o)},this)}},_axisLine:function(t,e,n,i){var r=t.getModel("axisLine.lineStyle"),a=new Pp.Circle({shape:{cx:e.cx,cy:e.cy,r:i[ms(e)]},style:r.getLineStyle(),z2:1,silent:!0});a.style.fill=null,this.group.add(a)},_axisTick:function(t,e,n,i){var r=t.getModel("axisTick"),a=(r.get("inside")?-1:1)*r.get("length"),o=i[ms(e)],s=du.map(n,function(t){return new Pp.Line({shape:gs(e,[o,o+a],t.coord)})});this.group.add(Pp.mergePath(s,{style:du.defaults(r.getModel("lineStyle").getLineStyle(),{stroke:t.get("axisLine.lineStyle.color")})}))},_axisLabel:function(t,e,n,i,r){var a=t.getCategories(!0),o=t.getModel("axisLabel"),s=o.get("margin");du.each(r,function(n,r){var l=o,u=n.tickValue,c=i[ms(e)],h=e.coordToPoint([c+s,n.coord]),d=e.cx,f=e.cy,p=Math.abs(h[0]-d)/c<.3?"center":h[0]>d?"left":"right",g=Math.abs(h[1]-f)/c<.3?"middle":h[1]>f?"top":"bottom";a&&a[u]&&a[u].textStyle&&(l=new zp(a[u].textStyle,o,o.ecModel));var m=new Pp.Text({silent:!0});this.group.add(m),Pp.setTextStyle(m.style,l,{x:h[0],y:h[1],textFill:l.getTextColor()||t.get("axisLine.lineStyle.color"),text:n.formattedLabel,textAlign:p,textVerticalAlign:g})},this)},_splitLine:function(t,e,n,i){var r=t.getModel("splitLine").getModel("lineStyle"),a=r.get("color"),o=0;a=a instanceof Array?a:[a];for(var s=[],l=0;l<n.length;l++){var u=o++%a.length;s[u]=s[u]||[],s[u].push(new Pp.Line({shape:gs(e,i,n[l].coord)}))}for(l=0;l<s.length;l++)this.group.add(Pp.mergePath(s[l],{style:du.defaults({stroke:a[l%a.length]},r.getLineStyle()),silent:!0,z:t.get("z")}))},_splitArea:function(t,e,n,i){if(n.length){var r=t.getModel("splitArea").getModel("areaStyle"),a=r.get("color"),o=0;a=a instanceof Array?a:[a];for(var s=[],l=Math.PI/180,u=-n[0].coord*l,c=Math.min(i[0],i[1]),h=Math.max(i[0],i[1]),d=t.get("clockwise"),f=1;f<n.length;f++){var p=o++%a.length;s[p]=s[p]||[],s[p].push(new Pp.Sector({shape:{cx:e.cx,cy:e.cy,r0:c,r:h,startAngle:u,endAngle:-n[f].coord*l,clockwise:d},silent:!0})),u=-n[f].coord*l}for(f=0;f<s.length;f++)this.group.add(Pp.mergePath(s[f],{style:du.defaults({fill:a[f%a.length]},r.getAreaStyle()),silent:!0}))}}}),["axisLine","axisTickLabel","axisName"]),UT=["splitLine","splitArea"],qT=(sw.extend({type:"radiusAxis",axisPointerClass:"PolarAxisPointer",render:function(t,e){if(this.group.removeAll(),t.get("show")){var n=t.axis,i=n.polar,r=i.getAngleAxis(),a=n.getTicksCoords(),o=r.getExtent()[0],s=n.getExtent(),l=function(t,e,n){return{position:[t.cx,t.cy],rotation:n/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}(i,t,o),u=new ew(t,l);du.each(XT,u.add,u),this.group.add(u.getGroup()),du.each(UT,function(e){t.get(e+".show")&&!n.scale.isBlank()&&this["_"+e](t,i,o,s,a)},this)}},_splitLine:function(t,e,n,i,r){var a=t.getModel("splitLine").getModel("lineStyle"),o=a.get("color"),s=0;o=o instanceof Array?o:[o];for(var l=[],u=0;u<r.length;u++){var c=s++%o.length;l[c]=l[c]||[],l[c].push(new Pp.Circle({shape:{cx:e.cx,cy:e.cy,r:r[u].coord},silent:!0}))}for(u=0;u<l.length;u++)this.group.add(Pp.mergePath(l[u],{style:du.defaults({stroke:o[u%o.length],fill:null},a.getLineStyle()),silent:!0}))},_splitArea:function(t,e,n,i,r){if(r.length){var a=t.getModel("splitArea").getModel("areaStyle"),o=a.get("color"),s=0;o=o instanceof Array?o:[o];for(var l=[],u=r[0].coord,c=1;c<r.length;c++){var h=s++%o.length;l[h]=l[h]||[],l[h].push(new Pp.Sector({shape:{cx:e.cx,cy:e.cy,r0:u,r:r[c].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),u=r[c].coord}for(c=0;c<l.length;c++)this.group.add(Pp.mergePath(l[c],{style:du.defaults({fill:o[c%o.length]},a.getAreaStyle()),silent:!0}))}}}),xP.extend({makeElOption:function(t,e,n,i,r){var a=n.axis;"angle"===a.dim&&(this.animationThreshold=Math.PI/18);var o,s=a.polar,l=s.getOtherAxis(a).getExtent();o=a["dataTo"+Zp.capitalFirst(a.dim)](e);var u=i.get("type");if(u&&"none"!==u){var c=_P.buildElStyle(i),h=ZT[u](a,s,o,l,c);h.style=c,t.graphicKey=h.type,t.pointer=h}var d=function(t,e,n,i,r){var a=e.axis,o=a.dataToCoord(t),s=i.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l,u,c,h=i.getRadiusAxis().getExtent();if("radius"===a.dim){var d=Mu.create();Mu.rotate(d,d,s),Mu.translate(d,d,[i.cx,i.cy]),l=Pp.applyTransform([o,-r],d);var f=e.getModel("axisLabel").get("rotate")||0,p=ew.innerTextLayout(s,f*Math.PI/180,-1);u=p.textAlign,c=p.textVerticalAlign}else{var g=h[1];l=i.coordToPoint([g+r,o]);var m=i.cx,v=i.cy;u=Math.abs(l[0]-m)/g<.3?"center":l[0]>m?"left":"right",c=Math.abs(l[1]-v)/g<.3?"middle":l[1]>v?"top":"bottom"}return{position:l,align:u,verticalAlign:c}}(e,n,0,s,i.get("label.margin"));_P.buildLabelElOption(t,n,i,r,d)}})),ZT={line:function(t,e,n,i,r){return"angle"===t.dim?{type:"Line",shape:_P.makeLineShape(e.coordToPoint([i[0],n]),e.coordToPoint([i[1],n]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:n}}},shadow:function(t,e,n,i,r){var a=Math.max(1,t.getBandWidth()),o=Math.PI/180;return"angle"===t.dim?{type:"Sector",shape:_P.makeSectorShape(e.cx,e.cy,i[0],i[1],(-n-a/2)*o,(a/2-n)*o)}:{type:"Sector",shape:_P.makeSectorShape(e.cx,e.cy,n-a/2,n+a/2,0,2*Math.PI)}}};sw.registerAxisPointerClass("PolarAxisPointer",qT),T_.registerLayout(du.curry(ET,"bar")),T_.extendComponentView({type:"polar"});var KT=ug.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(t){ug.prototype.init.apply(this,arguments),Hh.defaultEmphasis(t,"label",["show"])},optionUpdated:function(){var t=this.option,e=this;t.regions=fS.getFilledRegions(t.regions,t.map,t.nameMap),this._optionModelMap=du.reduce(t.regions||[],function(t,n){return n.name&&t.set(n.name,new zp(n,e)),t},du.createHashMap()),this.updateSelectedMap(t.regions)},defaultOption:{zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:.75,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",color:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(t){return this._optionModelMap.get(t)||new zp(null,this,this.ecModel)},getFormattedLabel:function(t,e){var n=this.getRegionModel(t).get("label."+e+".formatter"),i={name:t};return"function"==typeof n?(i.status=e,n(i)):"string"==typeof n?n.replace("{a}",null!=t?t:""):void 0},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t}});du.mixin(KT,Iw),T_.extendComponentView({type:"geo",init:function(t,e){var n=new AS(e,!0);this._mapDraw=n,this.group.add(n.group)},render:function(t,e,n,i){if(!i||"geoToggleSelect"!==i.type||i.from!==this.uid){var r=this._mapDraw;t.get("show")?r.draw(t,e,n,this,i):this._mapDraw.group.removeAll(),this.group.silent=t.get("silent")}},dispose:function(){this._mapDraw&&this._mapDraw.remove()}}),ys("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),ys("select",{type:"geoSelect",event:"geoselected"}),ys("unSelect",{type:"geoUnSelect",event:"geounselected"});var $T=["rect","polygon","keep","clear"],JT=function(t,e){var n=t&&t.brush;if(du.isArray(n)||(n=n?[n]:[]),n.length){var i=[];du.each(n,function(t){var e=t.hasOwnProperty("toolbox")?t.toolbox:[];e instanceof Array&&(i=i.concat(e))});var r=t&&t.toolbox;du.isArray(r)&&(r=r[0]),r||(r={feature:{}},t.toolbox=[r]);var a=r.feature||(r.feature={}),o=a.brush||(a.brush={}),s=o.type||(o.type=[]);s.push.apply(s,i),function(t){var e={};du.each(t,function(t){e[t]=1}),t.length=0,du.each(e,function(e,n){t.push(n)})}(s),e&&!s.length&&s.push.apply(s,$T)}},QT=du.each,tO={createVisualMappings:function(t,e,n){var i={};return QT(e,function(e){var r=i[e]=function(){var t=function(){};return t.prototype.__hidden=t.prototype,new t}();QT(t[e],function(t,i){if(IM.isValidType(i)){var a={type:i,visual:t};n&&n(a,e),r[i]=new IM(a),"opacity"===i&&((a=du.clone(a)).type="colorAlpha",r.__hidden.__alphaForOpacity=new IM(a))}})}),i},replaceVisualOption:function(t,e,n){var i;du.each(n,function(t){e.hasOwnProperty(t)&&xs(e[t])&&(i=!0)}),i&&du.each(n,function(n){e.hasOwnProperty(n)&&xs(e[n])?t[n]=du.clone(e[n]):delete t[n]})},applyVisual:function(t,e,n,i,r,a){function o(t,o){s=null==a?t:o;var u=n.getRawDataItem(s);if(!u||!1!==u.visualMap)for(var c=i.call(r,t),h=e[c],d=l[c],f=0,p=d.length;f<p;f++){var g=d[f];h[g]&&h[g].applyVisual(t,function(t){return n.getItemVisual(s,t)},function(t,e){n.setItemVisual(s,t,e)})}}var s,l={};du.each(t,function(t){var n=IM.prepareVisualTypes(e[t]);l[t]=n}),null==a?n.each(o):n.each([a],o)},incrementalApplyVisual:function(t,e,n,i){var r={};return du.each(t,function(t){var n=IM.prepareVisualTypes(e[t]);r[t]=n}),{progress:function(t,a){null!=i&&(i=a.getDimension(i));for(var o;null!=(o=t.next());){var s=a.getRawDataItem(o);if(s&&!1===s.visualMap)return;for(var l=null!=i?a.get(i,o,!0):o,u=n(l),c=e[u],h=r[u],d=0,f=h.length;d<f;d++){var p=h[d];c[p]&&c[p].applyVisual(l,function(t){return a.getItemVisual(o,t)},function(t,e){a.setItemVisual(o,t,e)})}}}}}},eO={lineX:_s(0),lineY:_s(1),rect:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])},rect:function(t,e,n){return t&&n.boundingRect.intersect(t)}},polygon:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])&&Zx.contain(n.range,t[0],t[1])},rect:function(t,e,n){var i=n.range;if(!t||i.length<=1)return!1;var r=t.x,a=t.y,o=t.width,s=t.height,l=i[0];return!!(Zx.contain(i,r,a)||Zx.contain(i,r+o,a)||Zx.contain(i,r,a+s)||Zx.contain(i,r+o,a+s)||hc.create(t).contain(l[0],l[1])||ws(r,a,r+o,a,i)||ws(r,a,r,a+s,i)||ws(r+o,a,r+o,a+s,i)||ws(r,a+s,r+o,a+s,i))||void 0}}},nO=du.each,iO=du.indexOf,rO=du.curry,aO=["dataToPoint","pointToData"],oO=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],sO=Ms.prototype;sO.setOutputRanges=function(t,e){this.matchOutputRanges(t,e,function(t,e,n){if((t.coordRanges||(t.coordRanges=[])).push(e),!t.coordRange){t.coordRange=e;var i=hO[t.brushType](0,n,e);t.__rangeOffset={offset:dO[t.brushType](i.values,t.range,[1,1]),xyMinMax:i.xyMinMax}}})},sO.matchOutputRanges=function(t,e,n){nO(t,function(t){var i=this.findTargetInfo(t,e);i&&!0!==i&&du.each(i.coordSyses,function(i){var r=hO[t.brushType](1,i,t.range);n(t,r.values,i,e)})},this)},sO.setInputRanges=function(t,e){nO(t,function(t){var n=this.findTargetInfo(t,e);if(t.range=t.range||[],n&&!0!==n){t.panelId=n.panelId;var i=hO[t.brushType](0,n.coordSys,t.coordRange),r=t.__rangeOffset;t.range=r?dO[t.brushType](i.values,r.offset,function(t,e){var n=Ts(t),i=Ts(e),r=[n[0]/i[0],n[1]/i[1]];return isNaN(r[0])&&(r[0]=1),isNaN(r[1])&&(r[1]=1),r}(i.xyMinMax,r.xyMinMax)):i.values}},this)},sO.makePanelOpts=function(t,e){return du.map(this._targetInfoList,function(n){var i=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:e&&e(n),clipPath:AC.makeRectPanelClipPath(i),isTargetByCursor:AC.makeRectIsTargetByCursor(i,t,n.coordSysModel),getLinearBrushOtherExtent:AC.makeLinearBrushOtherExtent(i)}})},sO.controlSeries=function(t,e,n){var i=this.findTargetInfo(t,n);return!0===i||i&&iO(i.coordSyses,e.coordinateSystem)>=0},sO.findTargetInfo=function(t,e){for(var n=this._targetInfoList,i=Cs(e,t),r=0;r<n.length;r++){var a=n[r],o=t.panelId;if(o){if(a.panelId===o)return a}else for(r=0;r<uO.length;r++)if(uO[r](i,a))return a}return!0};var lO={grid:function(t,e){var n=t.xAxisModels,i=t.yAxisModels,r=t.gridModels,a=du.createHashMap(),o={},s={};(n||i||r)&&(nO(n,function(t){var e=t.axis.grid.model;a.set(e.id,e),o[e.id]=!0}),nO(i,function(t){var e=t.axis.grid.model;a.set(e.id,e),s[e.id]=!0}),nO(r,function(t){a.set(t.id,t),o[t.id]=!0,s[t.id]=!0}),a.each(function(t){var r=t.coordinateSystem,a=[];nO(r.getCartesians(),function(t,e){(iO(n,t.getAxis("x").model)>=0||iO(i,t.getAxis("y").model)>=0)&&a.push(t)}),e.push({panelId:"grid--"+t.id,gridModel:t,coordSysModel:t,coordSys:a[0],coordSyses:a,getPanelRect:cO.grid,xAxisDeclared:o[t.id],yAxisDeclared:s[t.id]})}))},geo:function(t,e){nO(t.geoModels,function(t){var n=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:n,coordSyses:[n],getPanelRect:cO.geo})})}},uO=[function(t,e){var n=t.xAxisModel,i=t.yAxisModel,r=t.gridModel;return!r&&n&&(r=n.axis.grid.model),!r&&i&&(r=i.axis.grid.model),r&&r===e.gridModel},function(t,e){var n=t.geoModel;return n&&n===e.geoModel}],cO={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(Pp.getTransform(t)),e}},hO={lineX:rO(Is,0),lineY:rO(Is,1),rect:function(t,e,n){var i=e[aO[t]]([n[0][0],n[1][0]]),r=e[aO[t]]([n[0][1],n[1][1]]),a=[As([i[0],r[0]]),As([i[1],r[1]])];return{values:a,xyMinMax:a}},polygon:function(t,e,n){var i=[[1/0,-1/0],[1/0,-1/0]];return{values:du.map(n,function(n){var r=e[aO[t]](n);return i[0][0]=Math.min(i[0][0],r[0]),i[1][0]=Math.min(i[1][0],r[1]),i[0][1]=Math.max(i[0][1],r[0]),i[1][1]=Math.max(i[1][1],r[1]),r}),xyMinMax:i}}},dO={lineX:rO(Ps,0),lineY:rO(Ps,1),rect:function(t,e,n){return[[t[0][0]-n[0]*e[0][0],t[0][1]-n[0]*e[0][1]],[t[1][0]-n[1]*e[1][0],t[1][1]-n[1]*e[1][1]]]},polygon:function(t,e,n){return du.map(t,function(t,i){return[t[0]-n[0]*e[i][0],t[1]-n[1]*e[i][1]]})}},fO=Ms,pO=["inBrush","outOfBrush"],gO="__ecBrushSelect",mO="__ecInBrushSelectEvent",vO=T_.PRIORITY.VISUAL.BRUSH;T_.registerLayout(vO,function(t,e,n){t.eachComponent({mainType:"brush"},function(e){n&&"takeGlobalCursor"===n.type&&e.setBrushOption("brush"===n.key?n.brushOption:{brushType:!1}),(e.brushTargetManager=new fO(e.option,t)).setInputRanges(e.areas,t)})}),T_.registerVisual(vO,function(t,e,n){var i,r,a=[];t.eachComponent({mainType:"brush"},function(e,n){function o(t){return"all"===c||h[t]}function s(t){return!!t.length}var l={brushId:e.id,brushIndex:n,brushName:e.name,areas:du.clone(e.areas),selected:[]};a.push(l);var u=e.option,c=u.brushLink,h=[],d=[],f=[],p=0;n||(i=u.throttleType,r=u.throttleDelay);var g=du.map(e.areas,function(t){return function(t){var e=t.selectors={};return du.each(eO[t.brushType],function(n,i){e[i]=function(i){return n(i,e,t)}}),t}(du.defaults({boundingRect:yO[t.brushType](t)},t))}),m=tO.createVisualMappings(e.option,pO,function(t){t.mappingMethod="fixed"});du.isArray(c)&&du.each(c,function(t){h[t]=1}),t.eachSeries(function(n,i){var r=f[i]=[];"parallel"===n.subType?function(t,e){var n=t.coordinateSystem;p|=n.hasAxisBrushed(),o(e)&&n.eachActiveState(t.getData(),function(t,e){"active"===t&&(d[e]=1)})}(n,i):function(n,i,r){var a=ks(n);if(a&&!function(t,e){var n=t.option.seriesIndex;return null!=n&&"all"!==n&&(du.isArray(n)?du.indexOf(n,e)<0:e!==n)}(e,i)&&(du.each(g,function(i){a[i.brushType]&&e.brushTargetManager.controlSeries(i,n,t)&&r.push(i),p|=s(r)}),o(i)&&s(r))){var l=n.getData();l.each(function(t){Os(a,r,l,t)&&(d[t]=1)})}}(n,i,r)}),t.eachSeries(function(t,e){var n={seriesId:t.id,seriesIndex:e,seriesName:t.name,dataIndex:[]};l.selected.push(n);var i=ks(t),r=f[e],a=t.getData(),u=o(e)?function(t){return d[t]?(n.dataIndex.push(a.getRawIndex(t)),"inBrush"):"outOfBrush"}:function(t){return Os(i,r,a,t)?(n.dataIndex.push(a.getRawIndex(t)),"inBrush"):"outOfBrush"};(o(e)?p:s(r))&&tO.applyVisual(pO,m,a,u)})}),function(t,e,n,i,r){if(r){var a=t.getZr();a[mO]||(a[gO]||(a[gO]=function(t,e){if(!t.isDisposed()){var n=t.getZr();n[mO]=!0,t.dispatchAction({type:"brushSelect",batch:e}),n[mO]=!1}}),Nv.createOrUpdate(a,gO,n,e)(t,i))}}(e,i,r,a,n)});var yO={lineX:du.noop,lineY:du.noop,rect:function(t){return Ds(t.range)},polygon:function(t){for(var e,n=t.range,i=0,r=n.length;i<r;i++){e=e||[[1/0,-1/0],[1/0,-1/0]];var a=n[i];a[0]<e[0][0]&&(e[0][0]=a[0]),a[0]>e[0][1]&&(e[0][1]=a[0]),a[1]<e[1][0]&&(e[1][0]=a[1]),a[1]>e[1][1]&&(e[1][1]=a[1])}return e&&Ds(e)}},xO=["#ddd"];T_.extendComponentModel({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(t,e){var n=this.option;!e&&tO.replaceVisualOption(n,t,["inBrush","outOfBrush"]);var i=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:xO},i.hasOwnProperty("liftZ")||(i.liftZ=5)},setAreas:function(t){t&&(this.areas=du.map(t,function(t){return Es(this.option,t)},this))},setBrushOption:function(t){this.brushOption=Es(this.option,t),this.brushType=this.brushOption.brushType}}),T_.extendComponentView({type:"brush",init:function(t,e){this.ecModel=t,this.api=e,this.model,(this._brushController=new SC(e.getZr())).on("brush",du.bind(this._onBrush,this)).mount()},render:function(t){return this.model=t,Ls.apply(this,arguments)},updateTransform:Ls,updateView:Ls,dispose:function(){this._brushController.dispose()},_onBrush:function(t,e){var n=this.model.id;this.model.brushTargetManager.setOutputRanges(t,this.ecModel),(!e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:n,areas:du.clone(t),$from:n})}}),T_.registerAction({type:"brush",event:"brush"},function(t,e){e.eachComponent({mainType:"brush",query:t},function(e){e.setAreas(t.areas)})}),T_.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},function(){});var _O={},bO={register:function(t,e){_O[t]=e},get:function(t){return _O[t]}},wO=Bv.toolbox.brush;Ns.defaultOption={show:!0,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:du.clone(wO.title)};var SO=Ns.prototype;SO.render=SO.updateView=function(t,e,n){var i,r,a;e.eachComponent({mainType:"brush"},function(t){i=t.brushType,r=t.brushOption.brushMode||"single",a|=t.areas.length}),this._brushType=i,this._brushMode=r,du.each(t.get("type",!0),function(e){t.setIconStatus(e,("keep"===e?"multiple"===r:"clear"===e?a:e===i)?"emphasis":"normal")})},SO.getIcons=function(){var t=this.model,e=t.get("icon",!0),n={};return du.each(t.get("type",!0),function(t){e[t]&&(n[t]=e[t])}),n},SO.onclick=function(t,e,n){var i=this._brushType,r=this._brushMode;"clear"===n?(e.dispatchAction({type:"axisAreaSelect",intervals:[]}),e.dispatchAction({type:"brush",command:"clear",areas:[]})):e.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===n?i:i!==n&&n,brushMode:"keep"===n?"multiple"===r?"single":"multiple":r}})},bO.register("brush",Ns),T_.registerPreprocessor(JT),Rs.prototype={constructor:Rs,type:"calendar",dimensions:["time","value"],getDimensionsInfo:function(){return[{name:"time",type:"time"},"value"]},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(t){var e=(t=Wp.parseDate(t)).getFullYear(),n=t.getMonth()+1;n=n<10?"0"+n:n;var i=t.getDate();i=i<10?"0"+i:i;var r=t.getDay();return r=Math.abs((r+7-this.getFirstDayOfWeek())%7),{y:e,m:n,d:i,day:r,time:t.getTime(),formatedDate:e+"-"+n+"-"+i,date:t}},getNextNDay:function(t,e){return 0===(e=e||0)?this.getDateInfo(t):((t=new Date(this.getDateInfo(t).time)).setDate(t.getDate()+e),this.getDateInfo(t))},update:function(t,e){function n(t,e){return null!=t[e]&&"auto"!==t[e]}this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var i=this._rangeInfo.weeks||1,r=["width","height"],a=this._model.get("cellSize").slice(),o=this._model.getBoxLayoutParams(),s="horizontal"===this._orient?[i,7]:[7,i];du.each([0,1],function(t){n(a,t)&&(o[r[t]]=a[t]*s[t])});var l={width:e.getWidth(),height:e.getHeight()},u=this._rect=ig.getLayoutRect(o,l);du.each([0,1],function(t){n(a,t)||(a[t]=u[r[t]]/s[t])}),this._sw=a[0],this._sh=a[1]},dataToPoint:function(t,e){du.isArray(t)&&(t=t[0]),null==e&&(e=!0);var n=this.getDateInfo(t),i=this._rangeInfo,r=n.formatedDate;if(e&&!(n.time>=i.start.time&&n.time<i.end.time+864e5))return[NaN,NaN];var a=n.day,o=this._getRangeInfo([i.start.time,r]).nthWeek;return"vertical"===this._orient?[this._rect.x+a*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]:[this._rect.x+o*this._sw+this._sw/2,this._rect.y+a*this._sh+this._sh/2]},pointToData:function(t){var e=this.pointToDate(t);return e&&e.time},dataToRect:function(t,e){var n=this.dataToPoint(t,e);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},pointToDate:function(t){var e=Math.floor((t[0]-this._rect.x)/this._sw)+1,n=Math.floor((t[1]-this._rect.y)/this._sh)+1,i=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(n,e-1,i):this._getDateByWeeksAndDay(e,n-1,i)},convertToPixel:du.curry(Bs,"dataToPoint"),convertFromPixel:du.curry(Bs,"pointToData"),_initRangeOption:function(){var t=this._model.get("range"),e=t;if(du.isArray(e)&&1===e.length&&(e=e[0]),/^\d{4}$/.test(e)&&(t=[e+"-01-01",e+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(e)){var n=this.getDateInfo(e),i=n.date;i.setMonth(i.getMonth()+1);var r=this.getNextNDay(i,-1);t=[n.formatedDate,r.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(e)&&(t=[e,e]);var a=this._getRangeInfo(t);return a.start.time>a.end.time&&t.reverse(),t},_getRangeInfo:function(t){var e;(t=[this.getDateInfo(t[0]),this.getDateInfo(t[1])])[0].time>t[1].time&&(e=!0,t.reverse());var n=Math.floor(t[1].time/864e5)-Math.floor(t[0].time/864e5)+1,i=new Date(t[0].time),r=i.getDate(),a=t[1].date.getDate();if(i.setDate(r+n-1),i.getDate()!==a)for(var o=i.getTime()-t[1].time>0?1:-1;i.getDate()!==a&&(i.getTime()-t[1].time)*o>0;)n-=o,i.setDate(r+n-1);var s=Math.floor((n+t[0].day+6)/7),l=e?1-s:s-1;return e&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:n,weeks:s,nthWeek:l,fweek:t[0].day,lweek:t[1].day}},_getDateByWeeksAndDay:function(t,e,n){var i=this._getRangeInfo(n);if(t>i.weeks||0===t&&e<i.fweek||t===i.weeks&&e>i.lweek)return!1;var r=7*(t-1)-i.fweek+e,a=new Date(i.start.time);return a.setDate(i.start.d+r),this.getDateInfo(a)}},Rs.dimensions=Rs.prototype.dimensions,Rs.getDimensionsInfo=Rs.prototype.getDimensionsInfo,Rs.create=function(t,e){var n=[];return t.eachComponent("calendar",function(i){var r=new Rs(i,t,e);n.push(r),i.coordinateSystem=r}),t.eachSeries(function(t){"calendar"===t.get("coordinateSystem")&&(t.coordinateSystem=n[t.get("calendarIndex")||0])}),n},vm.register("calendar",Rs);var MO=ig.getLayoutParams,AO=ig.sizeCalculable,CO=ig.mergeLayoutParam,IO=ug.extend({type:"calendar",coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},init:function(t,e,n,i){var r=MO(t);IO.superApply(this,"init",arguments),zs(t,r)},mergeOption:function(t,e){IO.superApply(this,"mergeOption",arguments),zs(this.option,t)}}),PO={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},TO={EN:["S","M","T","W","T","F","S"],CN:["日","一","二","三","四","五","六"]},OO=(T_.extendComponentView({type:"calendar",_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(t,e,n){var i=this.group;i.removeAll();var r=t.coordinateSystem,a=r.getRangeInfo(),o=r.getOrient();this._renderDayRect(t,a,i),this._renderLines(t,a,o,i),this._renderYearText(t,a,o,i),this._renderMonthText(t,o,i),this._renderWeekText(t,a,o,i)},_renderDayRect:function(t,e,n){for(var i=t.coordinateSystem,r=t.getModel("itemStyle").getItemStyle(),a=i.getCellWidth(),o=i.getCellHeight(),s=e.start.time;s<=e.end.time;s=i.getNextNDay(s,1).time){var l=i.dataToRect([s],!1).tl,u=new Pp.Rect({shape:{x:l[0],y:l[1],width:a,height:o},cursor:"default",style:r});n.add(u)}},_renderLines:function(t,e,n,i){function r(e){a._firstDayOfMonth.push(o.getDateInfo(e)),a._firstDayPoints.push(o.dataToRect([e],!1).tl);var r=a._getLinePointsOfOneWeek(t,e,n);a._tlpoints.push(r[0]),a._blpoints.push(r[r.length-1]),l&&a._drawSplitline(r,s,i)}var a=this,o=t.coordinateSystem,s=t.getModel("splitLine.lineStyle").getLineStyle(),l=t.get("splitLine.show"),u=s.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var c=e.start,h=0;c.time<=e.end.time;h++){r(c.formatedDate),0===h&&(c=o.getDateInfo(e.start.y+"-"+e.start.m));var d=c.date;d.setMonth(d.getMonth()+1),c=o.getDateInfo(d)}r(o.getNextNDay(e.end.time,1).formatedDate),l&&this._drawSplitline(a._getEdgesPoints(a._tlpoints,u,n),s,i),l&&this._drawSplitline(a._getEdgesPoints(a._blpoints,u,n),s,i)},_getEdgesPoints:function(t,e,n){var i=[t[0].slice(),t[t.length-1].slice()],r="horizontal"===n?0:1;return i[0][r]=i[0][r]-e/2,i[1][r]=i[1][r]+e/2,i},_drawSplitline:function(t,e,n){var i=new Pp.Polyline({z2:20,shape:{points:t},style:e});n.add(i)},_getLinePointsOfOneWeek:function(t,e,n){var i=t.coordinateSystem;e=i.getDateInfo(e);for(var r=[],a=0;a<7;a++){var o=i.getNextNDay(e.time,a),s=i.dataToRect([o.time],!1);r[2*o.day]=s.tl,r[2*o.day+1]=s["horizontal"===n?"bl":"tr"]}return r},_formatterLabel:function(t,e){return"string"==typeof t&&t?Zp.formatTplSimple(t,e):"function"==typeof t?t(e):e.nameMap},_yearTextPositionControl:function(t,e,n,i,r){e=e.slice();var a=["center","bottom"];"bottom"===i?(e[1]+=r,a=["center","top"]):"left"===i?e[0]-=r:"right"===i?(e[0]+=r,a=["center","top"]):e[1]-=r;var o=0;return"left"!==i&&"right"!==i||(o=Math.PI/2),{rotation:o,position:e,style:{textAlign:a[0],textVerticalAlign:a[1]}}},_renderYearText:function(t,e,n,i){var r=t.getModel("yearLabel");if(r.get("show")){var a=r.get("margin"),o=r.get("position");o||(o="horizontal"!==n?"top":"left");var s=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],l=(s[0][0]+s[1][0])/2,u=(s[0][1]+s[1][1])/2,c="horizontal"===n?0:1,h={top:[l,s[c][1]],bottom:[l,s[1-c][1]],left:[s[1-c][0],u],right:[s[c][0],u]},d=e.start.y;+e.end.y>+e.start.y&&(d=d+"-"+e.end.y);var f=r.get("formatter"),p={start:e.start.y,end:e.end.y,nameMap:d},g=this._formatterLabel(f,p),m=new Pp.Text({z2:30});Pp.setTextStyle(m.style,r,{text:g}),m.attr(this._yearTextPositionControl(m,h[o],n,o,a)),i.add(m)}},_monthTextPositionControl:function(t,e,n,i,r){var a="left",o="top",s=t[0],l=t[1];return"horizontal"===n?(l+=r,e&&(a="center"),"start"===i&&(o="bottom")):(s+=r,e&&(o="middle"),"start"===i&&(a="right")),{x:s,y:l,textAlign:a,textVerticalAlign:o}},_renderMonthText:function(t,e,n){var i=t.getModel("monthLabel");if(i.get("show")){var r=i.get("nameMap"),a=i.get("margin"),o=i.get("position"),s=i.get("align"),l=[this._tlpoints,this._blpoints];du.isString(r)&&(r=PO[r.toUpperCase()]||[]);var u="start"===o?0:1,c="horizontal"===e?0:1;a="start"===o?-a:a;for(var h="center"===s,d=0;d<l[u].length-1;d++){var f=l[u][d].slice(),p=this._firstDayOfMonth[d];if(h){var g=this._firstDayPoints[d];f[c]=(g[c]+l[0][d+1][c])/2}var m=i.get("formatter"),v=r[+p.m-1],y={yyyy:p.y,yy:(p.y+"").slice(2),MM:p.m,M:+p.m,nameMap:v},x=this._formatterLabel(m,y),_=new Pp.Text({z2:30});du.extend(Pp.setTextStyle(_.style,i,{text:x}),this._monthTextPositionControl(f,h,e,o,a)),n.add(_)}}},_weekTextPositionControl:function(t,e,n,i,r){var a="center",o="middle",s=t[0],l=t[1],u="start"===n;return"horizontal"===e?(s=s+i+(u?1:-1)*r[0]/2,a=u?"right":"left"):(l=l+i+(u?1:-1)*r[1]/2,o=u?"bottom":"top"),{x:s,y:l,textAlign:a,textVerticalAlign:o}},_renderWeekText:function(t,e,n,i){var r=t.getModel("dayLabel");if(r.get("show")){var a=t.coordinateSystem,o=r.get("position"),s=r.get("nameMap"),l=r.get("margin"),u=a.getFirstDayOfWeek();du.isString(s)&&(s=TO[s.toUpperCase()]||[]);var c=a.getNextNDay(e.end.time,7-e.lweek).time,h=[a.getCellWidth(),a.getCellHeight()];l=Wp.parsePercent(l,h["horizontal"===n?0:1]),"start"===o&&(c=a.getNextNDay(e.start.time,-(7+e.fweek)).time,l=-l);for(var d=0;d<7;d++){var f=a.getNextNDay(c,d),p=a.dataToRect([f.time],!1).center,g=d;g=Math.abs((d+u)%7);var m=new Pp.Text({z2:30});du.extend(Pp.setTextStyle(m.style,r,{text:s[g]}),this._weekTextPositionControl(p,n,o,l,h)),i.add(m)}}}}),ig.getLayoutRect);T_.extendComponentModel({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),T_.extendComponentView({type:"title",render:function(t,e,n){if(this.group.removeAll(),t.get("show")){var i=this.group,r=t.getModel("textStyle"),a=t.getModel("subtextStyle"),o=t.get("textAlign"),s=t.get("textBaseline"),l=new Pp.Text({style:Pp.setTextStyle({},r,{text:t.get("text"),textFill:r.getTextColor()},{disableBox:!0}),z2:10}),u=l.getBoundingRect(),c=t.get("subtext"),h=new Pp.Text({style:Pp.setTextStyle({},a,{text:c,textFill:a.getTextColor(),y:u.height+t.get("itemGap"),textVerticalAlign:"top"},{disableBox:!0}),z2:10}),d=t.get("link"),f=t.get("sublink");l.silent=!d,h.silent=!f,d&&l.on("click",function(){window.open(d,"_"+t.get("target"))}),f&&h.on("click",function(){window.open(f,"_"+t.get("subtarget"))}),i.add(l),c&&i.add(h);var p=i.getBoundingRect(),g=t.getBoxLayoutParams();g.width=p.width,g.height=p.height;var m=OO(g,{width:n.getWidth(),height:n.getHeight()},t.get("padding"));o||("middle"===(o=t.get("left")||t.get("right"))&&(o="center"),"right"===o?m.x+=m.width:"center"===o&&(m.x+=m.width/2)),s||("center"===(s=t.get("top")||t.get("bottom"))&&(s="middle"),"bottom"===s?m.y+=m.height:"middle"===s&&(m.y+=m.height/2),s=s||"top"),i.attr("position",[m.x,m.y]);var v={textAlign:o,textVerticalAlign:s};l.setStyle(v),h.setStyle(v),p=i.getBoundingRect();var y=m.margin,x=t.getItemStyle(["color","opacity"]);x.fill=t.get("backgroundColor");var _=new Pp.Rect({shape:{x:p.x-y[3],y:p.y-y[0],width:p.width+y[1]+y[3],height:p.height+y[0]+y[2],r:t.get("borderRadius")},style:x,silent:!0});Pp.subPixelOptimizeRect(_),i.add(_)}}}),ug.registerSubTypeDefaulter("dataZoom",function(){return"slider"});var kO=["cartesian2d","polar","singleAxis"],DO={isCoordSupported:function(t){return du.indexOf(kO,t)>=0},createNameEach:Vs,eachAxisDim:Vs(["x","y","z","radius","angle","single"],["axisIndex","axis","index","id"]),createLinkedNodesFinder:function(t,e,n){function i(t,i){i.nodes.push(t),e(function(e){du.each(n(t,e)||[],function(t){i.records[e.name][t]=!0})})}return function(r){var a,o={nodes:[],records:{}};if(e(function(t){o.records[t.name]={}}),!r)return o;i(r,o);do{a=!1,t(function(t){!function(t,e){return du.indexOf(e.nodes,t)>=0}(t,o)&&function(t,i){var r=!1;return e(function(e){du.each(n(t,e)||[],function(t){i.records[e.name][t]&&(r=!0)})}),r}(t,o)&&(i(t,o),a=!0)})}while(a);return o}}},EO=du.each,LO=Wp.asc,NO=function(t,e,n,i){this._dimName=t,this._axisIndex=e,this._valueWindow,this._percentWindow,this._dataExtent,this._minMaxSpan,this.ecModel=i,this._dataZoomModel=n};NO.prototype={constructor:NO,hostedBy:function(t){return this._dataZoomModel===t},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var t=[],e=this.ecModel;return e.eachSeries(function(n){if(DO.isCoordSupported(n.get("coordinateSystem"))){var i=this._dimName,r=e.queryComponents({mainType:i+"Axis",index:n.get(i+"AxisIndex"),id:n.get(i+"AxisId")})[0];this._axisIndex===(r&&r.componentIndex)&&t.push(n)}},this),t},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var t,e,n,i=this._dimName,r=this.ecModel,a=this.getAxisModel();return"x"===i||"y"===i?(e="gridIndex",t="x"===i?"y":"x"):(e="polarIndex",t="angle"===i?"radius":"angle"),r.eachComponent(t+"Axis",function(t){(t.get(e)||0)===(a.get(e)||0)&&(n=t)}),n},getMinMaxSpan:function(){return du.clone(this._minMaxSpan)},calculateDataWindow:function(t){var e=this._dataExtent,n=this.getAxisModel().axis.scale,i=this._dataZoomModel.getRangePropMode(),r=[0,100],a=[t.start,t.end],o=[];return EO(["startValue","endValue"],function(e){o.push(null!=t[e]?n.parse(t[e]):null)}),EO([0,1],function(t){var s=o[t],l=a[t];"percent"===i[t]?(null==l&&(l=r[t]),s=n.parse(Wp.linearMap(l,r,e,!0))):l=Wp.linearMap(s,e,r,!0),o[t]=s,a[t]=l}),{valueWindow:LO(o),percentWindow:LO(a)}},reset:function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=function(t,e,n){var i=[1/0,-1/0];return EO(n,function(t){var n=t.getData();n&&EO(n.mapDimension(e,!0),function(t){var e=n.getApproximateExtent(t);e[0]<i[0]&&(i[0]=e[0]),e[1]>i[1]&&(i[1]=e[1])})}),i[1]<i[0]&&(i=[NaN,NaN]),function(t,e){var n=t.getAxisModel(),i=n.getMin(!0),r="category"===n.get("type"),a=r&&n.getCategories().length;null!=i&&"dataMin"!==i&&"function"!=typeof i?e[0]=i:r&&(e[0]=a>0?0:NaN);var o=n.getMax(!0);null!=o&&"dataMax"!==o&&"function"!=typeof o?e[1]=o:r&&(e[1]=a>0?a-1:NaN),n.get("scale",!0)||(e[0]>0&&(e[0]=0),e[1]<0&&(e[1]=0))}(t,i),i}(this,this._dimName,e);var n=this.calculateDataWindow(t.option);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,function(t){var e=t._minMaxSpan={},n=t._dataZoomModel;EO(["min","max"],function(i){e[i+"Span"]=n.get(i+"Span");var r=n.get(i+"ValueSpan");if(null!=r&&(e[i+"ValueSpan"]=r,null!=(r=t.getAxisModel().axis.scale.parse(r)))){var a=t._dataExtent;e[i+"Span"]=Wp.linearMap(a[0]+r,a,[0,100],!0)}})}(this),Gs(this)}},restore:function(t){t===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,Gs(this,!0))},filterData:function(t,e){if(t===this._dataZoomModel){var n=this._dimName,i=this.getTargetSeriesModels(),r=t.get("filterMode"),a=this._valueWindow;"none"!==r&&EO(i,function(t){var e=t.getData(),i=e.mapDimension(n,!0);"weakFilter"===r?e.filterSelf(function(t){for(var n,r,o,s=0;s<i.length;s++){var l=e.get(i[s],t),u=!isNaN(l),c=l<a[0],h=l>a[1];if(u&&!c&&!h)return!0;u&&(o=!0),c&&(n=!0),h&&(r=!0)}return o&&n&&r}):EO(i,function(n){if("empty"===r)t.setData(e.map(n,function(t){return function(t){return t>=a[0]&&t<=a[1]}(t)?t:NaN}));else{var i={};i[n]=a,e.selectRange(i)}}),EO(i,function(t){e.setApproximateExtent(a,t)})})}}};var RO=NO,BO=du.each,zO=DO.eachAxisDim,VO=T_.extendComponentModel({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(t,e,n){this._dataIntervalByAxis={},this._dataInfo={},this._axisProxies={},this.textStyleModel,this._autoThrottle=!0,this._rangePropMode=["percent","percent"];var i=Fs(t);this.mergeDefaultAndTheme(t,n),this.doInit(i)},mergeOption:function(t){var e=Fs(t);du.merge(this.option,t,!0),this.doInit(e)},doInit:function(t){var e=this.option;Jl.canvasSupported||(e.realtime=!1),this._setDefaultThrottle(t),js(this,t),BO([["start","startValue"],["end","endValue"]],function(t,n){"value"===this._rangePropMode[n]&&(e[t[0]]=null)},this),this.textStyleModel=this.getModel("textStyle"),this._resetTarget(),this._giveAxisProxies()},_giveAxisProxies:function(){var t=this._axisProxies;this.eachTargetAxis(function(e,n,i,r){var a=this.dependentModels[e.axis][n],o=a.__dzAxisProxy||(a.__dzAxisProxy=new RO(e.name,n,this,r));t[e.name+"_"+n]=o},this)},_resetTarget:function(){var t=this.option,e=this._judgeAutoMode();zO(function(e){var n=e.axisIndex;t[n]=Hh.normalizeToArray(t[n])},this),"axisIndex"===e?this._autoSetAxisIndex():"orient"===e&&this._autoSetOrient()},_judgeAutoMode:function(){var t=this.option,e=!1;zO(function(n){null!=t[n.axisIndex]&&(e=!0)},this);var n=t.orient;return null==n&&e?"orient":e?void 0:(null==n&&(t.orient="horizontal"),"axisIndex")},_autoSetAxisIndex:function(){var t=!0,e=this.get("orient",!0),n=this.option,i=this.dependentModels;if(t){var r="vertical"===e?"y":"x";i[r+"Axis"].length?(n[r+"AxisIndex"]=[0],t=!1):BO(i.singleAxis,function(i){t&&i.get("orient",!0)===e&&(n.singleAxisIndex=[i.componentIndex],t=!1)})}t&&zO(function(e){if(t){var i=[],r=this.dependentModels[e.axis];if(r.length&&!i.length)for(var a=0,o=r.length;a<o;a++)"category"===r[a].get("type")&&i.push(a);n[e.axisIndex]=i,i.length&&(t=!1)}},this),t&&this.ecModel.eachSeries(function(t){this._isSeriesHasAllAxesTypeOf(t,"value")&&zO(function(e){var i=n[e.axisIndex],r=t.get(e.axisIndex),a=t.get(e.axisId);r=t.ecModel.queryComponents({mainType:e.axis,index:r,id:a})[0].componentIndex,du.indexOf(i,r)<0&&i.push(r)})},this)},_autoSetOrient:function(){var t;this.eachTargetAxis(function(e){!t&&(t=e.name)},this),this.option.orient="y"===t?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(t,e){var n=!0;return zO(function(i){var r=t.get(i.axisIndex),a=this.dependentModels[i.axis][r];a&&a.get("type")===e||(n=!1)},this),n},_setDefaultThrottle:function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&e.animationDurationUpdate>0?100:20}},getFirstTargetAxisModel:function(){var t;return zO(function(e){if(null==t){var n=this.get(e.axisIndex);n.length&&(t=this.dependentModels[e.axis][n[0]])}},this),t},eachTargetAxis:function(t,e){var n=this.ecModel;zO(function(i){BO(this.get(i.axisIndex),function(r){t.call(e,i,r,this,n)},this)},this)},getAxisProxy:function(t,e){return this._axisProxies[t+"_"+e]},getAxisModel:function(t,e){var n=this.getAxisProxy(t,e);return n&&n.getAxisModel()},setRawRange:function(t,e){var n=this.option;BO([["start","startValue"],["end","endValue"]],function(e){null==t[e[0]]&&null==t[e[1]]||(n[e[0]]=t[e[0]],n[e[1]]=t[e[1]])},this),!e&&js(this,t)},getPercentRange:function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},getValueRange:function(t,e){if(null!=t||null!=e)return this.getAxisProxy(t,e).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},findRepresentativeAxisProxy:function(t){if(t)return t.__dzAxisProxy;var e=this._axisProxies;for(var n in e)if(e.hasOwnProperty(n)&&e[n].hostedBy(this))return e[n];for(var n in e)if(e.hasOwnProperty(n)&&!e[n].hostedBy(this))return e[n]},getRangePropMode:function(){return this._rangePropMode.slice()}}),GO=wv.extend({type:"dataZoom",render:function(t,e,n,i){this.dataZoomModel=t,this.ecModel=e,this.api=n},getTargetCoordInfo:function(){var t=this.dataZoomModel,e=this.ecModel,n={};return t.eachTargetAxis(function(t,i){var r=e.getComponent(t.axis,i);if(r){var a=r.getCoordSysModel();a&&function(t,e,n,i){for(var r,a=0;a<n.length;a++)if(n[a].model===t){r=n[a];break}r||n.push(r={model:t,axisModels:[],coordIndex:i}),r.axisModels.push(e)}(a,r,n[a.mainType]||(n[a.mainType]=[]),a.componentIndex)}},this),n}}),FO=(VO.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#333"}}}),Pp.Rect),jO=Wp.linearMap,HO=Wp.asc,WO=du.bind,YO=du.each,XO="horizontal",UO=5,qO=["line","bar","candlestick","scatter"],ZO=GO.extend({type:"dataZoom.slider",init:function(t,e){this._displayables={},this._orient,this._range,this._handleEnds,this._size,this._handleWidth,this._handleHeight,this._location,this._dragging,this._dataShadowInfo,this.api=e},render:function(t,e,n,i){ZO.superApply(this,"render",arguments),Nv.createOrUpdate(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),this._orient=t.get("orient"),!1!==this.dataZoomModel.get("show")?(i&&"dataZoom"===i.type&&i.from===this.uid||this._buildView(),this._updateView()):this.group.removeAll()},remove:function(){ZO.superApply(this,"remove",arguments),Nv.clear(this,"_dispatchZoomAction")},dispose:function(){ZO.superApply(this,"dispose",arguments),Nv.clear(this,"_dispatchZoomAction")},_buildView:function(){var t=this.group;t.removeAll(),this._resetLocation(),this._resetInterval();var e=this._displayables.barGroup=new Pp.Group;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(e),this._positionGroup()},_resetLocation:function(){var t=this.dataZoomModel,e=this.api,n=this._findCoordRect(),i={width:e.getWidth(),height:e.getHeight()},r=this._orient===XO?{right:i.width-n.x-n.width,top:i.height-30-7,width:n.width,height:30}:{right:7,top:n.y,width:30,height:n.height},a=ig.getLayoutParams(t.option);du.each(["right","top","width","height"],function(t){"ph"===a[t]&&(a[t]=r[t])});var o=ig.getLayoutRect(a,i,t.padding);this._location={x:o.x,y:o.y},this._size=[o.width,o.height],"vertical"===this._orient&&this._size.reverse()},_positionGroup:function(){var t=this.group,e=this._location,n=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),r=i&&i.get("inverse"),a=this._displayables.barGroup,o=(this._dataShadowInfo||{}).otherAxisInverse;a.attr(n!==XO||r?n===XO&&r?{scale:o?[-1,1]:[-1,-1]}:"vertical"!==n||r?{scale:o?[-1,-1]:[-1,1],rotation:Math.PI/2}:{scale:o?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:o?[1,1]:[1,-1]});var s=t.getBoundingRect([a]);t.attr("position",[e.x-s.x,e.y-s.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var t=this.dataZoomModel,e=this._size,n=this._displayables.barGroup;n.add(new FO({silent:!0,shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:t.get("backgroundColor")},z2:-40})),n.add(new FO({shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:"transparent"},z2:0,onclick:du.bind(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(t){var e=this._size,n=t.series,i=n.getRawData(),r=n.getShadowDim?n.getShadowDim():t.otherDim;if(null!=r){var a=i.getDataExtent(r),o=.3*(a[1]-a[0]);a=[a[0]-o,a[1]+o];var s,l=[0,e[1]],u=[0,e[0]],c=[[e[0],0],[0,0]],h=[],d=u[1]/(i.count()-1),f=0,p=Math.round(i.count()/e[0]);i.each([r],function(t,e){if(p>0&&e%p)f+=d;else{var n=null==t||isNaN(t)||""===t,i=n?0:jO(t,a,l,!0);n&&!s&&e?(c.push([c[c.length-1][0],0]),h.push([h[h.length-1][0],0])):!n&&s&&(c.push([f,0]),h.push([f,0])),c.push([f,i]),h.push([f,i]),f+=d,s=n}});var g=this.dataZoomModel;this._displayables.barGroup.add(new Pp.Polygon({shape:{points:c},style:du.defaults({fill:g.get("dataBackgroundColor")},g.getModel("dataBackground.areaStyle").getAreaStyle()),silent:!0,z2:-20})),this._displayables.barGroup.add(new Pp.Polyline({shape:{points:h},style:g.getModel("dataBackground.lineStyle").getLineStyle(),silent:!0,z2:-19}))}}},_prepareDataShadowInfo:function(){var t=this.dataZoomModel,e=t.get("showDataShadow");if(!1!==e){var n,i=this.ecModel;return t.eachTargetAxis(function(r,a){var o=t.getAxisProxy(r.name,a).getTargetSeriesModels();du.each(o,function(t){if(!(n||!0!==e&&du.indexOf(qO,t.get("type"))<0)){var o,s=i.getComponent(r.axis,a).axis,l=function(t){return{x:"y",y:"x",radius:"angle",angle:"radius"}[t]}(r.name),u=t.coordinateSystem;null!=l&&u.getOtherAxis&&(o=u.getOtherAxis(s).inverse),l=t.getData().mapDimension(l),n={thisAxis:s,series:t,thisDim:r.name,otherDim:l,otherAxisInverse:o}}},this)},this),n}},_renderHandle:function(){var t=this._displayables,e=t.handles=[],n=t.handleLabels=[],i=this._displayables.barGroup,r=this._size,a=this.dataZoomModel;i.add(t.filler=new FO({draggable:!0,cursor:Hs(this._orient),drift:WO(this._onDragMove,this,"all"),onmousemove:function(t){mh.stop(t.event)},ondragstart:WO(this._showDataInfo,this,!0),ondragend:WO(this._onDragEnd,this),onmouseover:WO(this._showDataInfo,this,!0),onmouseout:WO(this._showDataInfo,this,!1),style:{fill:a.get("fillerColor"),textPosition:"inside"}})),i.add(new FO(Pp.subPixelOptimizeRect({silent:!0,shape:{x:0,y:0,width:r[0],height:r[1]},style:{stroke:a.get("dataBackgroundColor")||a.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}}))),YO([0,1],function(t){var r=Pp.createIcon(a.get("handleIcon"),{cursor:Hs(this._orient),draggable:!0,drift:WO(this._onDragMove,this,t),onmousemove:function(t){mh.stop(t.event)},ondragend:WO(this._onDragEnd,this),onmouseover:WO(this._showDataInfo,this,!0),onmouseout:WO(this._showDataInfo,this,!1)},{x:-1,y:0,width:2,height:2}),o=r.getBoundingRect();this._handleHeight=Wp.parsePercent(a.get("handleSize"),this._size[1]),this._handleWidth=o.width/o.height*this._handleHeight,r.setStyle(a.getModel("handleStyle").getItemStyle());var s=a.get("handleColor");null!=s&&(r.style.fill=s),i.add(e[t]=r);var l=a.textStyleModel;this.group.add(n[t]=new Pp.Text({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:l.getTextColor(),textFont:l.getFont()},z2:10}))},this)},_resetInterval:function(){var t=this._range=this.dataZoomModel.getPercentRange(),e=this._getViewExtent();this._handleEnds=[jO(t[0],[0,100],e,!0),jO(t[1],[0,100],e,!0)]},_updateInterval:function(t,e){var n=this.dataZoomModel,i=this._handleEnds,r=this._getViewExtent(),a=n.findRepresentativeAxisProxy().getMinMaxSpan(),o=[0,100];$A(e,i,r,n.get("zoomLock")?"all":t,null!=a.minSpan?jO(a.minSpan,o,r,!0):null,null!=a.maxSpan?jO(a.maxSpan,o,r,!0):null);var s=this._range,l=this._range=HO([jO(i[0],r,o,!0),jO(i[1],r,o,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},_updateView:function(t){var e=this._displayables,n=this._handleEnds,i=HO(n.slice()),r=this._size;YO([0,1],function(t){var i=e.handles[t],a=this._handleHeight;i.attr({scale:[a/2,a/2],position:[n[t],r[1]/2-a/2]})},this),e.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:r[1]}),this._updateDataInfo(t)},_updateDataInfo:function(t){function e(t){var e=Pp.getTransform(i.handles[t].parent,this.group),n=Pp.transformDirection(0===t?"right":"left",e),s=this._handleWidth/2+UO,l=Pp.applyTransform([h[t]+(0===t?-s:s),this._size[1]/2],e);r[t].setStyle({x:l[0],y:l[1],textVerticalAlign:a===XO?"middle":n,textAlign:a===XO?n:"center",text:o[t]})}var n=this.dataZoomModel,i=this._displayables,r=i.handleLabels,a=this._orient,o=["",""];if(n.get("showDetail")){var s=n.findRepresentativeAxisProxy();if(s){var l=s.getAxisModel().axis,u=this._range,c=t?s.calculateDataWindow({start:u[0],end:u[1]}).valueWindow:s.getDataValueWindow();o=[this._formatLabel(c[0],l),this._formatLabel(c[1],l)]}}var h=HO(this._handleEnds.slice());e.call(this,0),e.call(this,1)},_formatLabel:function(t,e){var n=this.dataZoomModel,i=n.get("labelFormatter"),r=n.get("labelPrecision");null!=r&&"auto"!==r||(r=e.getPixelPrecision());var a=null==t||isNaN(t)?"":"category"===e.type||"time"===e.type?e.scale.getLabel(Math.round(t)):t.toFixed(Math.min(r,20));return du.isFunction(i)?i(t,a):du.isString(i)?i.replace("{value}",a):a},_showDataInfo:function(t){t=this._dragging||t;var e=this._displayables.handleLabels;e[0].attr("invisible",!t),e[1].attr("invisible",!t)},_onDragMove:function(t,e,n){this._dragging=!0;var i=this._displayables.barGroup.getLocalTransform(),r=Pp.applyTransform([e,n],i,!0),a=this._updateInterval(t,r[0]),o=this.dataZoomModel.get("realtime");this._updateView(!o),a&&o&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction()},_onClickPanelClick:function(t){var e=this._size,n=this._displayables.barGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(n[0]<0||n[0]>e[0]||n[1]<0||n[1]>e[1])){var i=this._handleEnds,r=(i[0]+i[1])/2,a=this._updateInterval("all",n[0]-r);this._updateView(),a&&this._dispatchZoomAction()}},_dispatchZoomAction:function(){var t=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:t[0],end:t[1]})},_findCoordRect:function(){var t;if(YO(this.getTargetCoordInfo(),function(e){if(!t&&e.length){var n=e[0].model.coordinateSystem;t=n.getRect&&n.getRect()}}),!t){var e=this.api.getWidth(),n=this.api.getHeight();t={x:.2*e,y:.2*n,width:.6*e,height:.6*n}}return t}}),KO=(VO.extend({type:"dataZoom.inside",defaultOption:{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,preventDefaultMouseMove:!0}}),du.curry),$O="\0_ec_dataZoom_roams",JO={register:function(t,e){var n=Ws(t),i=e.dataZoomId,r=e.coordId;du.each(n,function(t,n){var a=t.dataZoomInfos;a[i]&&du.indexOf(e.allCoordIds,r)<0&&(delete a[i],t.count--)}),Ys(n);var a=n[r];a||((a=n[r]={coordId:r,dataZoomInfos:{},count:0}).controller=function(t,e){var n=new _S(t.getZr());return n.on("pan",KO(function(t,e,n,i,r,a,o){Xs(t,function(s){return s.panGetRange(t.controller,e,n,i,r,a,o)})},e)),n.on("zoom",KO(function(t,e,n,i){Xs(t,function(r){return r.zoomGetRange(t.controller,e,n,i)})},e)),n}(t,a),a.dispatchAction=du.curry(function(t,e){t.dispatchAction({type:"dataZoom",batch:e})},t)),!a.dataZoomInfos[i]&&a.count++,a.dataZoomInfos[i]=e;var o=function(t){var e,n={},i={type_true:2,type_move:1,type_false:0,type_undefined:-1};return du.each(t,function(t){var r=!t.disabled&&(!t.zoomLock||"move");i["type_"+r]>i["type_"+e]&&(e=r),du.extend(n,t.roamControllerOpt)}),{controlType:e,opt:n}}(a.dataZoomInfos);a.controller.enable(o.controlType,o.opt),a.controller.setPointerChecker(e.containsPoint),Nv.createOrUpdate(a,"dispatchAction",e.throttleRate,"fixRate")},unregister:function(t,e){var n=Ws(t);du.each(n,function(t){t.controller.dispose();var n=t.dataZoomInfos;n[e]&&(delete n[e],t.count--)}),Ys(n)},generateCoordId:function(t){return t.type+"\0_"+t.id}},QO=du.bind,tk=GO.extend({type:"dataZoom.inside",init:function(t,e){this._range},render:function(t,e,n,i){tk.superApply(this,"render",arguments),this._range=t.getPercentRange(),du.each(this.getTargetCoordInfo(),function(e,i){var r=du.map(e,function(t){return JO.generateCoordId(t.model)});du.each(e,function(e){var a=e.model,o=t.option;JO.register(n,{coordId:JO.generateCoordId(a),allCoordIds:r,containsPoint:function(t,e,n){return a.coordinateSystem.containPoint([e,n])},dataZoomId:t.id,throttleRate:t.get("throttle",!0),panGetRange:QO(this._onPan,this,e,i),zoomGetRange:QO(this._onZoom,this,e,i),zoomLock:o.zoomLock,disabled:o.disabled,roamControllerOpt:{zoomOnMouseWheel:o.zoomOnMouseWheel,moveOnMouseMove:o.moveOnMouseMove,preventDefaultMouseMove:o.preventDefaultMouseMove}})},this)},this)},dispose:function(){JO.unregister(this.api,this.dataZoomModel.id),tk.superApply(this,"dispose",arguments),this._range=null},_onPan:function(t,e,n,i,r,a,o,s,l){var u=this._range,c=u.slice(),h=t.axisModels[0];if(h){var d=ek[e]([a,o],[s,l],h,n,t),f=d.signal*(c[1]-c[0])*d.pixel/d.pixelLength;return $A(f,c,[0,100],"all"),this._range=c,u[0]!==c[0]||u[1]!==c[1]?c:void 0}},_onZoom:function(t,e,n,i,r,a){var o=this._range,s=o.slice(),l=t.axisModels[0];if(l){var u=ek[e](null,[r,a],l,n,t),c=(u.signal>0?u.pixelStart+u.pixelLength-u.pixel:u.pixel-u.pixelStart)/u.pixelLength*(s[1]-s[0])+s[0];i=Math.max(1/i,0),s[0]=(s[0]-c)*i+c,s[1]=(s[1]-c)*i+c;var h=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return $A(0,s,[0,100],0,h.minSpan,h.maxSpan),this._range=s,o[0]!==s[0]||o[1]!==s[1]?s:void 0}}}),ek={grid:function(t,e,n,i,r){var a=n.axis,o={},s=r.model.coordinateSystem.getRect();return t=t||[0,0],"x"===a.dim?(o.pixel=e[0]-t[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=a.inverse?1:-1):(o.pixel=e[1]-t[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=a.inverse?-1:1),o},polar:function(t,e,n,i,r){var a=n.axis,o={},s=r.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return t=t?s.pointToCoord(t):[0,0],e=s.pointToCoord(e),"radiusAxis"===n.mainType?(o.pixel=e[0]-t[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=a.inverse?1:-1):(o.pixel=e[1]-t[1],o.pixelLength=u[1]-u[0],o.pixelStart=u[0],o.signal=a.inverse?-1:1),o},singleAxis:function(t,e,n,i,r){var a=n.axis,o=r.model.coordinateSystem.getRect(),s={};return t=t||[0,0],"horizontal"===a.orient?(s.pixel=e[0]-t[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=a.inverse?1:-1):(s.pixel=e[1]-t[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=a.inverse?-1:1),s}},nk=du.createHashMap,ik=du.each;T_.registerProcessor({getTargetSeries:function(t){var e=nk();return t.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(t,n,i){var r=i.getAxisProxy(t.name,n);ik(r.getTargetSeriesModels(),function(t){e.set(t.uid,t)})})}),e},modifyOutputEnd:!0,overallReset:function(t,e){t.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(t,n,i){i.getAxisProxy(t.name,n).reset(i,e)}),t.eachTargetAxis(function(t,n,i){i.getAxisProxy(t.name,n).filterData(i,e)})}),t.eachComponent("dataZoom",function(t){var e=t.findRepresentativeAxisProxy(),n=e.getDataPercentWindow(),i=e.getDataValueWindow();t.setRawRange({start:n[0],end:n[1],startValue:i[0],endValue:i[1]},!0)})}}),T_.registerAction("dataZoom",function(t,e){var n=DO.createLinkedNodesFinder(du.bind(e.eachComponent,e,"dataZoom"),DO.eachAxisDim,function(t,e){return t.get(e.axisIndex)}),i=[];e.eachComponent({mainType:"dataZoom",query:t},function(t,e){i.push.apply(i,n(t).nodes)}),du.each(i,function(e,n){e.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})});var rk=du.each,ak=function(t){var e=t&&t.visualMap;du.isArray(e)||(e=e?[e]:[]),rk(e,function(t){if(t){Us(t,"splitList")&&!Us(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var e=t.pieces;e&&du.isArray(e)&&rk(e,function(t){du.isObject(t)&&(Us(t,"start")&&!Us(t,"min")&&(t.min=t.start),Us(t,"end")&&!Us(t,"max")&&(t.max=t.end))})}})};ug.registerSubTypeDefaulter("visualMap",function(t){return t.categories||(t.pieces?t.pieces.length>0:t.splitNumber>0)&&!t.calculable?"piecewise":"continuous"});var ok=T_.PRIORITY.VISUAL.COMPONENT;T_.registerVisual(ok,{createOnAllSeries:!0,reset:function(t,e){var n=[];return e.eachComponent("visualMap",function(e){var i=t.pipelineContext;!e.isTargetSeries(t)||i&&i.large||n.push(tO.incrementalApplyVisual(e.stateList,e.targetVisuals,du.bind(e.getValueState,e),e.getDataDimension(t.getData())))}),n}}),T_.registerVisual(ok,{createOnAllSeries:!0,reset:function(t,e){var n=t.getData(),i=[];e.eachComponent("visualMap",function(e){if(e.isTargetSeries(t)){var r=e.getVisualMeta(du.bind(function(t,e,n,i){for(var r=e.targetVisuals[i],a=IM.prepareVisualTypes(r),o={color:t.getData().getVisual("color")},s=0,l=a.length;s<l;s++){var u=a[s],c=r["opacity"===u?"__alphaForOpacity":u];c&&c.applyVisual(n,function(t){return o[t]},function(t,e){o[t]=e})}return o.color},null,t,e))||{stops:[],outerColors:[]},a=e.getDataDimension(n),o=n.getDimensionInfo(a);null!=o&&(r.dimension=o.index,i.push(r))}}),t.getData().setVisual("visualMeta",i)}});var sk={get:function(t,e,n){var i=du.clone((lk[t]||{})[e]);return n&&du.isArray(i)?i[i.length-1]:i}},lk={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},uk=sk,ck=IM.mapVisual,hk=IM.eachVisual,dk=du.isArray,fk=du.each,pk=Wp.asc,gk=Wp.linearMap,mk=du.noop,vk=T_.extendComponentModel({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-1/0,1/0],layoutMode:{type:"box",ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(t,e,n){this._dataExtent,this.targetVisuals={},this.controllerVisuals={},this.textStyleModel,this.itemSize,this.mergeDefaultAndTheme(t,n)},optionUpdated:function(t,e){var n=this.option;Jl.canvasSupported||(n.realtime=!1),!e&&tO.replaceVisualOption(n,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},resetVisual:function(t){var e=this.stateList;t=du.bind(t,this),this.controllerVisuals=tO.createVisualMappings(this.option.controller,e,t),this.targetVisuals=tO.createVisualMappings(this.option.target,e,t)},getTargetSeriesIndices:function(){var t=this.option.seriesIndex,e=[];return null==t||"all"===t?this.ecModel.eachSeries(function(t,n){e.push(n)}):e=Hh.normalizeToArray(t),e},eachTargetSeries:function(t,e){du.each(this.getTargetSeriesIndices(),function(n){t.call(e,this.ecModel.getSeriesByIndex(n))},this)},isTargetSeries:function(t){var e=!1;return this.eachTargetSeries(function(n){n===t&&(e=!0)}),e},formatValueText:function(t,e,n){function i(t){return t===l[0]?"min":t===l[1]?"max":(+t).toFixed(Math.min(s,20))}var r,a,o=this.option,s=o.precision,l=this.dataBound,u=o.formatter;return n=n||["<",">"],du.isArray(t)&&(t=t.slice(),r=!0),a=e?t:r?[i(t[0]),i(t[1])]:i(t),du.isString(u)?u.replace("{value}",r?a[0]:a).replace("{value2}",r?a[1]:a):du.isFunction(u)?r?u(t[0],t[1]):u(t):r?t[0]===l[0]?n[0]+" "+a[1]:t[1]===l[1]?n[1]+" "+a[0]:a[0]+" - "+a[1]:a},resetExtent:function(){var t=this.option,e=pk([t.min,t.max]);this._dataExtent=e},getDataDimension:function(t){var e=this.option.dimension,n=t.dimensions;if(null!=e||n.length){if(null!=e)return t.getDimension(e);for(var i=t.dimensions,r=i.length-1;r>=0;r--){var a=i[r];if(!t.getDimensionInfo(a).isCalculationCoord)return a}}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){function t(t){dk(n.color)&&!t.inRange&&(t.inRange={color:n.color.slice().reverse()}),t.inRange=t.inRange||{color:e.get("gradientColor")},fk(this.stateList,function(e){var n=t[e];if(du.isString(n)){var i=uk.get(n,"active",o);i?(t[e]={},t[e][n]=i):delete t[e]}},this)}var e=this.ecModel,n=this.option,i={inRange:n.inRange,outOfRange:n.outOfRange},r=n.target||(n.target={}),a=n.controller||(n.controller={});du.merge(r,i),du.merge(a,i);var o=this.isCategory();t.call(this,r),t.call(this,a),function(t,e,n){var i=t[e],r=t[n];i&&!r&&(r=t[n]={},fk(i,function(t,e){if(IM.isValidType(e)){var n=uk.get(e,"inactive",o);null!=n&&(r[e]=n,"color"!==e||r.hasOwnProperty("opacity")||r.hasOwnProperty("colorAlpha")||(r.opacity=[0,0]))}}))}.call(this,r,"inRange","outOfRange"),function(t){var e=(t.inRange||{}).symbol||(t.outOfRange||{}).symbol,n=(t.inRange||{}).symbolSize||(t.outOfRange||{}).symbolSize,i=this.get("inactiveColor");fk(this.stateList,function(r){var a=this.itemSize,s=t[r];s||(s=t[r]={color:o?i:[i]}),null==s.symbol&&(s.symbol=e&&du.clone(e)||(o?"roundRect":["roundRect"])),null==s.symbolSize&&(s.symbolSize=n&&du.clone(n)||(o?a[0]:[a[0],a[0]])),s.symbol=ck(s.symbol,function(t){return"none"===t||"square"===t?"roundRect":t});var l=s.symbolSize;if(null!=l){var u=-1/0;hk(l,function(t){t>u&&(u=t)}),s.symbolSize=ck(l,function(t){return gk(t,[0,u],[0,a[0]],!0)})}},this)}.call(this,a)},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:mk,getValueState:mk,getVisualMeta:mk}),yk=[20,140],xk=vk.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:!1,range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(t,e){xk.superApply(this,"optionUpdated",arguments),this.resetExtent(),this.resetVisual(function(t){t.mappingMethod="linear",t.dataExtent=this.getExtent()}),this._resetRange()},resetItemSize:function(){xk.superApply(this,"resetItemSize",arguments);var t=this.itemSize;"horizontal"===this._orient&&t.reverse(),(null==t[0]||isNaN(t[0]))&&(t[0]=yk[0]),(null==t[1]||isNaN(t[1]))&&(t[1]=yk[1])},_resetRange:function(){var t=this.getExtent(),e=this.option.range;!e||e.auto?(t.auto=1,this.option.range=t):du.isArray(e)&&(e[0]>e[1]&&e.reverse(),e[0]=Math.max(e[0],t[0]),e[1]=Math.min(e[1],t[1]))},completeVisualOption:function(){vk.prototype.completeVisualOption.apply(this,arguments),du.each(this.stateList,function(t){var e=this.option.controller[t].symbolSize;e&&e[0]!==e[1]&&(e[0]=0)},this)},setSelected:function(t){this.option.range=t.slice(),this._resetRange()},getSelected:function(){var t=this.getExtent(),e=Wp.asc((this.get("range")||[]).slice());return e[0]>t[1]&&(e[0]=t[1]),e[1]>t[1]&&(e[1]=t[1]),e[0]<t[0]&&(e[0]=t[0]),e[1]<t[0]&&(e[1]=t[0]),e},getValueState:function(t){var e=this.option.range,n=this.getExtent();return(e[0]<=n[0]||e[0]<=t)&&(e[1]>=n[1]||t<=e[1])?"inRange":"outOfRange"},findTargetDataIndices:function(t){var e=[];return this.eachTargetSeries(function(n){var i=[],r=n.getData();r.each(this.getDataDimension(r),function(e,n){t[0]<=e&&e<=t[1]&&i.push(n)},this),e.push({seriesId:n.id,dataIndex:i})},this),e},getVisualMeta:function(t){function e(e,n){r.push({value:e,color:t(e,n)})}for(var n=qs(0,0,this.getExtent()),i=qs(0,0,this.option.range.slice()),r=[],a=0,o=0,s=i.length,l=n.length;o<l&&(!i.length||n[o]<=i[0]);o++)n[o]<i[a]&&e(n[o],"outOfRange");for(u=1;a<s;a++,u=0)u&&r.length&&e(i[a],"outOfRange"),e(i[a],"inRange");for(var u=1;o<l;o++)(!i.length||i[i.length-1]<n[o])&&(u&&(r.length&&e(r[r.length-1].value,"outOfRange"),u=0),e(n[o],"outOfRange"));var c=r.length;return{stops:r,outerColors:[c?r[0].color:"transparent",c?r[c-1].color:"transparent"]}}}),_k=T_.extendComponentView({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(t,e){this.ecModel=t,this.api=e,this.visualMapModel},render:function(t,e,n,i){this.visualMapModel=t,!1!==t.get("show")?this.doRender.apply(this,arguments):this.group.removeAll()},renderBackground:function(t){var e=this.visualMapModel,n=Zp.normalizeCssArray(e.get("padding")||0),i=t.getBoundingRect();t.add(new Pp.Rect({z2:-1,silent:!0,shape:{x:i.x-n[3],y:i.y-n[0],width:i.width+n[3]+n[1],height:i.height+n[0]+n[2]},style:{fill:e.get("backgroundColor"),stroke:e.get("borderColor"),lineWidth:e.get("borderWidth")}}))},getControllerVisual:function(t,e,n){var i=(n=n||{}).forceState,r=this.visualMapModel,a={};if("symbol"===e&&(a.symbol=r.get("itemSymbol")),"color"===e){var o=r.get("contentColor");a.color=o}var s=r.controllerVisuals[i||r.getValueState(t)],l=IM.prepareVisualTypes(s);return du.each(l,function(i){var r=s[i];n.convertOpacityToAlpha&&"opacity"===i&&(i="colorAlpha",r=s.__alphaForOpacity),IM.dependsOn(i,e)&&r&&r.applyVisual(t,function(t){return a[t]},function(t,e){a[t]=e})}),a[e]},positionGroup:function(t){var e=this.visualMapModel,n=this.api;ig.positionElement(t,e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},doRender:du.noop}),bk=ig.getLayoutRect,wk={getItemAlign:function(t,e,n){var i=t.option,r=i.align;if(null!=r&&"auto"!==r)return r;for(var a={width:e.getWidth(),height:e.getHeight()},o="horizontal"===i.orient?1:0,s=[["left","right","width"],["top","bottom","height"]],l=s[o],u=[0,null,10],c={},h=0;h<3;h++)c[s[1-o][h]]=u[h],c[l[h]]=2===h?n[0]:i[l[h]];var d=[["x","width",3],["y","height",0]][o],f=bk(c,a,i.padding);return l[(f.margin[d[2]]||0)+f[d[0]]+.5*f[d[1]]<.5*a[d[1]]?0:1]},convertDataIndex:function(t){return du.each(t||[],function(e){null!=t.dataIndex&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null)}),t}},Sk=Wp.linearMap,Mk=du.each,Ak=Math.min,Ck=Math.max,Ik=12,Pk=6,Tk=_k.extend({type:"visualMap.continuous",init:function(){Tk.superApply(this,"init",arguments),this._shapes={},this._dataInterval=[],this._handleEnds=[],this._orient,this._useHandle,this._hoverLinkDataIndices=[],this._dragging,this._hovering},doRender:function(t,e,n,i){i&&"selectDataRange"===i.type&&i.from===this.uid||this._buildView()},_buildView:function(){this.group.removeAll();var t=this.visualMapModel,e=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(e);var n=t.get("text");this._renderEndsText(e,n,0),this._renderEndsText(e,n,1),this._updateView(!0),this.renderBackground(e),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(e)},_renderEndsText:function(t,e,n){if(e){var i=e[1-n];i=null!=i?i+"":"";var r=this.visualMapModel,a=r.get("textGap"),o=r.itemSize,s=this._shapes.barGroup,l=this._applyTransform([o[0]/2,0===n?-a:o[1]+a],s),u=this._applyTransform(0===n?"bottom":"top",s),c=this._orient,h=this.visualMapModel.textStyleModel;this.group.add(new Pp.Text({style:{x:l[0],y:l[1],textVerticalAlign:"horizontal"===c?"middle":u,textAlign:"horizontal"===c?u:"center",text:i,textFont:h.getFont(),textFill:h.getTextColor()}}))}},_renderBar:function(t){var e=this.visualMapModel,n=this._shapes,i=e.itemSize,r=this._orient,a=this._useHandle,o=wk.getItemAlign(e,this.api,i),s=n.barGroup=this._createBarGroup(o);s.add(n.outOfRange=Zs()),s.add(n.inRange=Zs(null,a?$s(this._orient):null,du.bind(this._dragHandle,this,"all",!1),du.bind(this._dragHandle,this,"all",!0)));var l=e.textStyleModel.getTextRect("国"),u=Ck(l.width,l.height);a&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(s,0,i,u,r,o),this._createHandle(s,1,i,u,r,o)),this._createIndicator(s,i,u,r),t.add(s)},_createHandle:function(t,e,n,i,r){var a=du.bind(this._dragHandle,this,e,!1),o=du.bind(this._dragHandle,this,e,!0),s=Zs(function(t,e){return 0===t?[[0,0],[e,0],[e,-e]]:[[0,0],[e,0],[e,e]]}(e,i),$s(this._orient),a,o);s.position[0]=n[0],t.add(s);var l=this.visualMapModel.textStyleModel,u=new Pp.Text({draggable:!0,drift:a,onmousemove:function(t){mh.stop(t.event)},ondragend:o,style:{x:0,y:0,text:"",textFont:l.getFont(),textFill:l.getTextColor()}});this.group.add(u);var c=["horizontal"===r?i/2:1.5*i,"horizontal"===r?0===e?-1.5*i:1.5*i:0===e?-i/2:i/2],h=this._shapes;h.handleThumbs[e]=s,h.handleLabelPoints[e]=c,h.handleLabels[e]=u},_createIndicator:function(t,e,n,i){var r=Zs([[0,0]],"move");r.position[0]=e[0],r.attr({invisible:!0,silent:!0}),t.add(r);var a=this.visualMapModel.textStyleModel,o=new Pp.Text({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textFont:a.getFont(),textFill:a.getTextColor()}});this.group.add(o);var s=["horizontal"===i?n/2:Pk+3,0],l=this._shapes;l.indicator=r,l.indicatorLabel=o,l.indicatorLabelPoint=s},_dragHandle:function(t,e,n,i){if(this._useHandle){if(this._dragging=!e,!e){var r=this._applyTransform([n,i],this._shapes.barGroup,!0);this._updateInterval(t,r[1]),this._updateView()}e===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),e?!this._hovering&&this._clearHoverLinkToSeries():Ks(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},_resetInterval:function(){var t=this.visualMapModel,e=this._dataInterval=t.getSelected(),n=t.getExtent(),i=[0,t.itemSize[1]];this._handleEnds=[Sk(e[0],n,i,!0),Sk(e[1],n,i,!0)]},_updateInterval:function(t,e){e=e||0;var n=this.visualMapModel,i=this._handleEnds,r=[0,n.itemSize[1]];$A(e,i,r,t,0);var a=n.getExtent();this._dataInterval=[Sk(i[0],r,a,!0),Sk(i[1],r,a,!0)]},_updateView:function(t){var e=this.visualMapModel,n=e.getExtent(),i=this._shapes,r=[0,e.itemSize[1]],a=t?r:this._handleEnds,o=this._createBarVisual(this._dataInterval,n,a,"inRange"),s=this._createBarVisual(n,n,r,"outOfRange");i.inRange.setStyle({fill:o.barColor,opacity:o.opacity}).setShape("points",o.barPoints),i.outOfRange.setStyle({fill:s.barColor,opacity:s.opacity}).setShape("points",s.barPoints),this._updateHandle(a,o)},_createBarVisual:function(t,e,n,i){var r={forceState:i,convertOpacityToAlpha:!0},a=this._makeColorGradient(t,r),o=[this.getControllerVisual(t[0],"symbolSize",r),this.getControllerVisual(t[1],"symbolSize",r)],s=this._createBarPoints(n,o);return{barColor:new ep(0,0,0,1,a),barPoints:s,handlesColor:[a[0].color,a[a.length-1].color]}},_makeColorGradient:function(t,e){var n=[],i=(t[1]-t[0])/100;n.push({color:this.getControllerVisual(t[0],"color",e),offset:0});for(var r=1;r<100;r++){var a=t[0]+i*r;if(a>t[1])break;n.push({color:this.getControllerVisual(a,"color",e),offset:r/100})}return n.push({color:this.getControllerVisual(t[1],"color",e),offset:1}),n},_createBarPoints:function(t,e){var n=this.visualMapModel.itemSize;return[[n[0]-e[0],t[0]],[n[0],t[0]],[n[0],t[1]],[n[0]-e[1],t[1]]]},_createBarGroup:function(t){var e=this._orient,n=this.visualMapModel.get("inverse");return new Pp.Group("horizontal"!==e||n?"horizontal"===e&&n?{scale:"bottom"===t?[-1,1]:[1,1],rotation:-Math.PI/2}:"vertical"!==e||n?{scale:"left"===t?[1,1]:[-1,1]}:{scale:"left"===t?[1,-1]:[-1,-1]}:{scale:"bottom"===t?[1,1]:[-1,1],rotation:Math.PI/2})},_updateHandle:function(t,e){if(this._useHandle){var n=this._shapes,i=this.visualMapModel,r=n.handleThumbs,a=n.handleLabels;Mk([0,1],function(o){var s=r[o];s.setStyle("fill",e.handlesColor[o]),s.position[1]=t[o];var l=Pp.applyTransform(n.handleLabelPoints[o],Pp.getTransform(s,this.group));a[o].setStyle({x:l[0],y:l[1],text:i.formatValueText(this._dataInterval[o]),textVerticalAlign:"middle",textAlign:this._applyTransform("horizontal"===this._orient?0===o?"bottom":"top":"left",n.barGroup)})},this)}},_showIndicator:function(t,e,n,i){var r=this.visualMapModel,a=r.getExtent(),o=r.itemSize,s=[0,o[1]],l=Sk(t,a,s,!0),u=this._shapes,c=u.indicator;if(c){c.position[1]=l,c.attr("invisible",!1),c.setShape("points",function(t,e,n,i){return t?[[0,-Ak(e,Ck(n,0))],[Pk,0],[0,Ak(e,Ck(i-n,0))]]:[[0,0],[5,-5],[5,5]]}(!!n,i,l,o[1]));var h=this.getControllerVisual(t,"color",{convertOpacityToAlpha:!0});c.setStyle("fill",h);var d=Pp.applyTransform(u.indicatorLabelPoint,Pp.getTransform(c,this.group)),f=u.indicatorLabel;f.attr("invisible",!1);var p=this._applyTransform("left",u.barGroup),g=this._orient;f.setStyle({text:(n||"")+r.formatValueText(e),textVerticalAlign:"horizontal"===g?p:"middle",textAlign:"horizontal"===g?"center":p,x:d[0],y:d[1]})}},_enableHoverLinkToSeries:function(){var t=this;this._shapes.barGroup.on("mousemove",function(e){if(t._hovering=!0,!t._dragging){var n=t.visualMapModel.itemSize,i=t._applyTransform([e.offsetX,e.offsetY],t._shapes.barGroup,!0,!0);i[1]=Ak(Ck(0,i[1]),n[1]),t._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=n[0])}}).on("mouseout",function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},_doHoverLinkToSeries:function(t,e){var n=this.visualMapModel,i=n.itemSize;if(n.option.hoverLink){var r=[0,i[1]],a=n.getExtent();t=Ak(Ck(r[0],t),r[1]);var o=function(t,e,n){var i=Ik/2,r=t.get("hoverLinkDataSize");return r&&(i=Sk(r,e,n,!0)/2),i}(n,a,r),s=[t-o,t+o],l=Sk(t,r,a,!0),u=[Sk(s[0],r,a,!0),Sk(s[1],r,a,!0)];s[0]<r[0]&&(u[0]=-1/0),s[1]>r[1]&&(u[1]=1/0),e&&(u[0]===-1/0?this._showIndicator(l,u[1],"< ",o):u[1]===1/0?this._showIndicator(l,u[0],"> ",o):this._showIndicator(l,l,"≈ ",o));var c=this._hoverLinkDataIndices,h=[];(e||Ks(n))&&(h=this._hoverLinkDataIndices=n.findTargetDataIndices(u));var d=Hh.compressBatches(c,h);this._dispatchHighDown("downplay",wk.convertDataIndex(d[0])),this._dispatchHighDown("highlight",wk.convertDataIndex(d[1]))}},_hoverLinkFromSeriesMouseOver:function(t){var e=t.target,n=this.visualMapModel;if(e&&null!=e.dataIndex){var i=this.ecModel.getSeriesByIndex(e.seriesIndex);if(n.isTargetSeries(i)){var r=i.getData(e.dataType),a=r.get(n.getDataDimension(r),e.dataIndex,!0);isNaN(a)||this._showIndicator(a,a)}}},_hideIndicator:function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0)},_clearHoverLinkToSeries:function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",wk.convertDataIndex(t)),t.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},_applyTransform:function(t,e,n,i){var r=Pp.getTransform(e,i?null:this.group);return Pp[du.isArray(t)?"applyTransform":"transformDirection"](t,r,n)},_dispatchHighDown:function(t,e){e&&e.length&&this.api.dispatchAction({type:t,batch:e})},dispose:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()}});T_.registerAction({type:"selectDataRange",event:"dataRangeSelected",update:"update"},function(t,e){e.eachComponent({mainType:"visualMap",query:t},function(e){e.setSelected(t.selected)})}),T_.registerPreprocessor(ak);var Ok=Wp.reformIntervals,kk=vk.extend({type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0,showLabel:null},optionUpdated:function(t,e){kk.superApply(this,"optionUpdated",arguments),this._pieceList=[],this.resetExtent();var n=this._mode=this._determineMode();Dk[this._mode].call(this),this._resetSelected(t,e);var i=this.option.categories;this.resetVisual(function(t,e){"categories"===n?(t.mappingMethod="category",t.categories=du.clone(i)):(t.dataExtent=this.getExtent(),t.mappingMethod="piecewise",t.pieceList=du.map(this._pieceList,function(t){return t=du.clone(t),"inRange"!==e&&(t.visual=null),t}))})},completeVisualOption:function(){function t(t,e,n){return t&&t[e]&&(du.isObject(t[e])?t[e].hasOwnProperty(n):t[e]===n)}var e=this.option,n={},i=IM.listVisualTypes(),r=this.isCategory();du.each(e.pieces,function(t){du.each(i,function(e){t.hasOwnProperty(e)&&(n[e]=1)})}),du.each(n,function(n,i){var a=0;du.each(this.stateList,function(n){a|=t(e,n,i)||t(e.target,n,i)},this),!a&&du.each(this.stateList,function(t){(e[t]||(e[t]={}))[i]=uk.get(i,"inRange"===t?"active":"inactive",r)})},this),vk.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(t,e){var n=this.option,i=this._pieceList,r=(e?n:t).selected||{};if(n.selected=r,du.each(i,function(t,e){var n=this.getSelectedMapKey(t);r.hasOwnProperty(n)||(r[n]=!0)},this),"single"===n.selectedMode){var a=!1;du.each(i,function(t,e){var n=this.getSelectedMapKey(t);r[n]&&(a?r[n]=!1:a=!0)},this)}},getSelectedMapKey:function(t){return"categories"===this._mode?t.value+"":t.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(t){this.option.selected=du.clone(t)},getValueState:function(t){var e=IM.findPieceIndex(t,this._pieceList);return null!=e&&this.option.selected[this.getSelectedMapKey(this._pieceList[e])]?"inRange":"outOfRange"},findTargetDataIndices:function(t){var e=[];return this.eachTargetSeries(function(n){var i=[],r=n.getData();r.each(this.getDataDimension(r),function(e,n){IM.findPieceIndex(e,this._pieceList)===t&&i.push(n)},this),e.push({seriesId:n.id,dataIndex:i})},this),e},getRepresentValue:function(t){var e;if(this.isCategory())e=t.value;else if(null!=t.value)e=t.value;else{var n=t.interval||[];e=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return e},getVisualMeta:function(t){function e(e,a){var o=r.getRepresentValue({interval:e});a||(a=r.getValueState(o));var s=t(o,a);e[0]===-1/0?i[0]=s:e[1]===1/0?i[1]=s:n.push({value:e[0],color:s},{value:e[1],color:s})}if(!this.isCategory()){var n=[],i=[],r=this,a=this._pieceList.slice();if(a.length){var o=a[0].interval[0];o!==-1/0&&a.unshift({interval:[-1/0,o]}),(o=a[a.length-1].interval[1])!==1/0&&a.push({interval:[o,1/0]})}else a.push({interval:[-1/0,1/0]});var s=-1/0;return du.each(a,function(t){var n=t.interval;n&&(n[0]>s&&e([s,n[0]],"outOfRange"),e(n.slice()),s=n[1])},this),{stops:n,outerColors:i}}}}),Dk={splitNumber:function(){var t=this.option,e=this._pieceList,n=Math.min(t.precision,20),i=this.getExtent(),r=t.splitNumber;r=Math.max(parseInt(r,10),1),t.splitNumber=r;for(var a=(i[1]-i[0])/r;+a.toFixed(n)!==a&&n<5;)n++;t.precision=n,a=+a.toFixed(n);var o=0;t.minOpen&&e.push({index:o++,interval:[-1/0,i[0]],close:[0,0]});for(var s=i[0],l=o+r;o<l;s+=a){var u=o===r-1?i[1]:s+a;e.push({index:o++,interval:[s,u],close:[1,1]})}t.maxOpen&&e.push({index:o++,interval:[i[1],1/0],close:[0,0]}),Ok(e),du.each(e,function(t){t.text=this.formatValueText(t.interval)},this)},categories:function(){var t=this.option;du.each(t.categories,function(t){this._pieceList.push({text:this.formatValueText(t,!0),value:t})},this),Js(t,this._pieceList)},pieces:function(){var t=this.option,e=this._pieceList;du.each(t.pieces,function(t,n){du.isObject(t)||(t={value:t});var i={text:"",index:n};if(null!=t.label&&(i.text=t.label),t.hasOwnProperty("value")){var r=i.value=t.value;i.interval=[r,r],i.close=[1,1]}else{for(var a=i.interval=[],o=i.close=[0,0],s=[1,0,1],l=[-1/0,1/0],u=[],c=0;c<2;c++){for(var h=[["gte","gt","min"],["lte","lt","max"]][c],d=0;d<3&&null==a[c];d++)a[c]=t[h[d]],o[c]=s[d],u[c]=2===d;null==a[c]&&(a[c]=l[c])}u[0]&&a[1]===1/0&&(o[0]=0),u[1]&&a[0]===-1/0&&(o[1]=0),a[0]===a[1]&&o[0]&&o[1]&&(i.value=a[0])}i.visual=IM.retrieveVisuals(t),e.push(i)},this),Js(t,e),Ok(e),du.each(e,function(t){var e=t.close,n=[["<","≤"][e[1]],[">","≥"][e[0]]];t.text=t.text||this.formatValueText(null!=t.value?t.value:t.interval,!1,n)},this)}},Ek=jx.createSymbol;_k.extend({type:"visualMap.piecewise",doRender:function(){var t=this.group;t.removeAll();var e=this.visualMapModel,n=e.get("textGap"),i=e.textStyleModel,r=i.getFont(),a=i.getTextColor(),o=this._getItemAlign(),s=e.itemSize,l=this._getViewData(),u=l.endsText,c=du.retrieve(e.get("showLabel",!0),!u);u&&this._renderEndsText(t,u[0],s,c,o),du.each(l.viewPieceList,function(i){var l=i.piece,u=new Pp.Group;u.onclick=du.bind(this._onItemClick,this,l),this._enableHoverLink(u,i.indexInModelPieceList);var h=e.getRepresentValue(l);if(this._createItemSymbol(u,h,[0,0,s[0],s[1]]),c){var d=this.visualMapModel.getValueState(h);u.add(new Pp.Text({style:{x:"right"===o?-n:s[0]+n,y:s[1]/2,text:l.text,textVerticalAlign:"middle",textAlign:o,textFont:r,textFill:a,opacity:"outOfRange"===d?.5:1}}))}t.add(u)},this),u&&this._renderEndsText(t,u[1],s,c,o),ig.box(e.get("orient"),t,e.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},_enableHoverLink:function(t,e){function n(t){var n=this.visualMapModel;n.option.hoverLink&&this.api.dispatchAction({type:t,batch:wk.convertDataIndex(n.findTargetDataIndices(e))})}t.on("mouseover",du.bind(n,this,"highlight")).on("mouseout",du.bind(n,this,"downplay"))},_getItemAlign:function(){var t=this.visualMapModel,e=t.option;if("vertical"===e.orient)return wk.getItemAlign(t,this.api,t.itemSize);var n=e.align;return n&&"auto"!==n||(n="left"),n},_renderEndsText:function(t,e,n,i,r){if(e){var a=new Pp.Group,o=this.visualMapModel.textStyleModel;a.add(new Pp.Text({style:{x:i?"right"===r?n[0]:0:n[0]/2,y:n[1]/2,textVerticalAlign:"middle",textAlign:i?r:"center",text:e,textFont:o.getFont(),textFill:o.getTextColor()}})),t.add(a)}},_getViewData:function(){var t=this.visualMapModel,e=du.map(t.getPieceList(),function(t,e){return{piece:t,indexInModelPieceList:e}}),n=t.get("text"),i=t.get("orient"),r=t.get("inverse");return("horizontal"===i?r:!r)?e.reverse():n&&(n=n.slice().reverse()),{viewPieceList:e,endsText:n}},_createItemSymbol:function(t,e,n){t.add(Ek(this.getControllerVisual(e,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(e,"color")))},_onItemClick:function(t){var e=this.visualMapModel,n=e.option,i=du.clone(n.selected),r=e.getSelectedMapKey(t);"single"===n.selectedMode?(i[r]=!0,du.each(i,function(t,e){i[e]=e===r})):i[r]=!i[r],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:i})}}),T_.registerPreprocessor(ak);var Lk=Zp.addCommas,Nk=Zp.encodeHTML,Rk=T_.extendComponentModel({type:"marker",dependencies:["series","grid","polar","geo"],init:function(t,e,n,i){this.mergeDefaultAndTheme(t,n),this.mergeOption(t,n,i.createdBySelf,!0)},isAnimationEnabled:function(){if(Jl.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},mergeOption:function(t,e,n,i){var r=this.constructor,a=this.mainType+"Model";n||e.eachSeries(function(t){var n=t.get(this.mainType,!0),o=t[a];n&&n.data?(o?o.mergeOption(n,e,!0):(i&&Qs(n),du.each(n.data,function(t){t instanceof Array?(Qs(t[0]),Qs(t[1])):Qs(t)}),o=new r(n,this,e),du.extend(o,{mainType:this.mainType,seriesIndex:t.seriesIndex,name:t.name,createdBySelf:!0}),o.__hostSeries=t),t[a]=o):t[a]=null},this)},formatTooltip:function(t){var e=this.getData(),n=this.getRawValue(t),i=du.isArray(n)?du.map(n,Lk).join(", "):Lk(n),r=e.getName(t),a=Nk(this.name);return(null!=n||r)&&(a+="<br />"),r&&(a+=Nk(r),null!=n&&(a+=" : ")),null!=n&&(a+=Nk(i)),a},getData:function(){return this._data},setData:function(t){this._data=t}});du.mixin(Rk,nv);var Bk=Rk,zk=(Bk.extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}}}),jy.isDimensionStacked),Vk=du.indexOf,Gk=du.curry,Fk={min:Gk(tl,"min"),max:Gk(tl,"max"),average:Gk(tl,"average")},jk={dataTransform:function(t,e){var n=t.getData(),i=t.coordinateSystem;if(e&&!function(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}(e)&&!du.isArray(e.coord)&&i){var r=i.dimensions,a=el(e,n,i,t);if((e=du.clone(e)).type&&Fk[e.type]&&a.baseAxis&&a.valueAxis){var o=Vk(r,a.baseAxis.dim),s=Vk(r,a.valueAxis.dim);e.coord=Fk[e.type](n,a.baseDataDim,a.valueDataDim,o,s),e.value=e.coord[s]}else{for(var l=[null!=e.xAxis?e.xAxis:e.radiusAxis,null!=e.yAxis?e.yAxis:e.angleAxis],u=0;u<2;u++)Fk[l[u]]&&(l[u]=nl(n,n.mapDimension(r[u]),l[u]));e.coord=l}}return e},getAxisInfo:el,dataFilter:function(t,e){return!(t&&t.containData&&e.coord&&!function(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}(e))||t.containData(e.coord)},dimValueGetter:function(t,e,n,i){return i<2?t.coord&&t.coord[i]:t.value},numCalculate:nl},Hk=T_.extendComponentView({type:"marker",init:function(){this.markerGroupMap=du.createHashMap()},render:function(t,e,n){var i=this.markerGroupMap;i.each(function(t){t.__keep=!1});var r=this.type+"Model";e.eachSeries(function(t){var i=t[r];i&&this.renderSeries(t,i,e,n)},this),i.each(function(t){!t.__keep&&this.group.remove(t.group)},this)},renderSeries:function(){}});Hk.extend({type:"markPoint",updateTransform:function(t,e,n){e.eachSeries(function(t){var e=t.markPointModel;e&&(il(e.getData(),t,n),this.markerGroupMap.get(t.id).updateLayout(e))},this)},renderSeries:function(t,e,n,i){var r=t.coordinateSystem,a=t.id,o=t.getData(),s=this.markerGroupMap,l=s.get(a)||s.set(a,new W_),u=function(t,e,n){var i;i=t?du.map(t&&t.dimensions,function(t){var n=e.getData().getDimensionInfo(e.getData().mapDimension(t))||{};return du.defaults({name:t},n)}):[{name:"value",type:"float"}];var r=new Iy(i,n),a=du.map(n.get("data"),du.curry(jk.dataTransform,e));return t&&(a=du.filter(a,du.curry(jk.dataFilter,t))),r.initData(a,null,t?jk.dimValueGetter:function(t){return t.value}),r}(r,t,e);e.setData(u),il(e.getData(),t,i),u.each(function(t){var n=u.getItemModel(t),i=n.getShallow("symbolSize");"function"==typeof i&&(i=i(e.getRawValue(t),e.getDataParams(t))),u.setItemVisual(t,{symbolSize:i,color:n.get("itemStyle.color")||o.getVisual("color"),symbol:n.getShallow("symbol")})}),l.updateData(u),this.group.add(l.group),u.eachItemGraphicEl(function(t){t.traverse(function(t){t.dataModel=e})}),l.__keep=!0,l.group.silent=e.get("silent")||t.get("silent")}}),T_.registerPreprocessor(function(t){t.markPoint=t.markPoint||{}}),Bk.extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end"},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"}});var Wk=function(t,e,n,i){var r=t.getData(),a=i.type;if(!du.isArray(i)&&("min"===a||"max"===a||"average"===a||"median"===a||null!=i.xAxis||null!=i.yAxis)){var o,s;if(null!=i.yAxis||null!=i.xAxis)o=null!=i.yAxis?"y":"x",e.getAxis(o),s=du.retrieve(i.yAxis,i.xAxis);else{var l=jk.getAxisInfo(i,r,e,t);o=l.valueDataDim,l.valueAxis,s=jk.numCalculate(r,o,a)}var u="x"===o?0:1,c=1-u,h=du.clone(i),d={};h.type=null,h.coord=[],d.coord=[],h.coord[c]=-1/0,d.coord[c]=1/0;var f=n.get("precision");f>=0&&"number"==typeof s&&(s=+s.toFixed(Math.min(f,20))),h.coord[u]=d.coord[u]=s,i=[h,d,{type:a,valueIndex:i.valueIndex,value:s}]}return i=[jk.dataTransform(t,i[0]),jk.dataTransform(t,i[1]),du.extend({},i[2])],i[2].type=i[2].type||"",du.merge(i[2],i[0]),du.merge(i[2],i[1]),i};Hk.extend({type:"markLine",updateTransform:function(t,e,n){e.eachSeries(function(t){var e=t.markLineModel;if(e){var i=e.getData(),r=e.__from,a=e.__to;r.each(function(e){ol(r,e,!0,t,n),ol(a,e,!1,t,n)}),i.each(function(t){i.setItemLayout(t,[r.getItemLayout(t),a.getItemLayout(t)])}),this.markerGroupMap.get(t.id).updateLayout()}},this)},renderSeries:function(t,e,n,i){function r(e,n,r){var a=e.getItemModel(n);ol(e,n,r,t,i),e.setItemVisual(n,{symbolSize:a.get("symbolSize")||g[r?0:1],symbol:a.get("symbol",!0)||p[r?0:1],color:a.get("itemStyle.color")||s.getVisual("color")})}var a=t.coordinateSystem,o=t.id,s=t.getData(),l=this.markerGroupMap,u=l.get(o)||l.set(o,new aA);this.group.add(u.group);var c=function(t,e,n){var i;i=t?du.map(t&&t.dimensions,function(t){var n=e.getData().getDimensionInfo(e.getData().mapDimension(t))||{};return du.defaults({name:t},n)}):[{name:"value",type:"float"}];var r=new Iy(i,n),a=new Iy(i,n),o=new Iy([],n),s=du.map(n.get("data"),du.curry(Wk,e,t,n));t&&(s=du.filter(s,du.curry(function(t,e){if("cartesian2d"===t.type){var n=e[0].coord,i=e[1].coord;if(n&&i&&(al(1,n,i,t)||al(0,n,i,t)))return!0}return jk.dataFilter(t,e[0])&&jk.dataFilter(t,e[1])},t)));var l=t?jk.dimValueGetter:function(t){return t.value};return r.initData(du.map(s,function(t){return t[0]}),null,l),a.initData(du.map(s,function(t){return t[1]}),null,l),o.initData(du.map(s,function(t){return t[2]})),o.hasItemOption=!0,{from:r,to:a,line:o}}(a,t,e),h=c.from,d=c.to,f=c.line;e.__from=h,e.__to=d,e.setData(f);var p=e.get("symbol"),g=e.get("symbolSize");du.isArray(p)||(p=[p,p]),"number"==typeof g&&(g=[g,g]),c.from.each(function(t){r(h,t,!0),r(d,t,!1)}),f.each(function(t){var e=f.getItemModel(t).get("lineStyle.color");f.setItemVisual(t,{color:e||h.getItemVisual(t,"color")}),f.setItemLayout(t,[h.getItemLayout(t),d.getItemLayout(t)]),f.setItemVisual(t,{fromSymbolSize:h.getItemVisual(t,"symbolSize"),fromSymbol:h.getItemVisual(t,"symbol"),toSymbolSize:d.getItemVisual(t,"symbolSize"),toSymbol:d.getItemVisual(t,"symbol")})}),u.updateData(f),c.line.eachItemGraphicEl(function(t,n){t.traverse(function(t){t.dataModel=e})}),u.__keep=!0,u.group.silent=e.get("silent")||t.get("silent")}}),T_.registerPreprocessor(function(t){t.markLine=t.markLine||{}}),Bk.extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}}});var Yk=function(t,e,n,i){var r=jk.dataTransform(t,i[0]),a=jk.dataTransform(t,i[1]),o=du.retrieve,s=r.coord,l=a.coord;s[0]=o(s[0],-1/0),s[1]=o(s[1],-1/0),l[0]=o(l[0],1/0),l[1]=o(l[1],1/0);var u=du.mergeAll([{},r,a]);return u.coord=[r.coord,a.coord],u.x0=r.x,u.y0=r.y,u.x1=a.x,u.y1=a.y,u},Xk=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];Hk.extend({type:"markArea",updateTransform:function(t,e,n){e.eachSeries(function(t){var e=t.markAreaModel;if(e){var i=e.getData();i.each(function(e){var r=du.map(Xk,function(r){return ul(i,e,r,t,n)});i.setItemLayout(e,r),i.getItemGraphicEl(e).setShape("points",r)})}},this)},renderSeries:function(t,e,n,i){var r=t.coordinateSystem,a=t.id,o=t.getData(),s=this.markerGroupMap,l=s.get(a)||s.set(a,{group:new Pp.Group});this.group.add(l.group),l.__keep=!0;var u=function(t,e,n){var i,r;t?(i=du.map(t&&t.dimensions,function(t){var n=e.getData(),i=n.getDimensionInfo(n.mapDimension(t))||{};return du.defaults({name:t},i)}),r=new Iy(du.map(["x0","y0","x1","y1"],function(t,e){return{name:t,type:i[e%2].type}}),n)):r=new Iy(i=[{name:"value",type:"float"}],n);var a=du.map(n.get("data"),du.curry(Yk,e,t,n));t&&(a=du.filter(a,du.curry(function(t,e){var n=e.coord[0],i=e.coord[1];return!("cartesian2d"!==t.type||!n||!i||!ll(1,n,i)&&!ll(0,n,i))||jk.dataFilter(t,{coord:n,x:e.x0,y:e.y0})||jk.dataFilter(t,{coord:i,x:e.x1,y:e.y1})},t)));var o=t?function(t,e,n,i){return t.coord[Math.floor(i/2)][i%2]}:function(t){return t.value};return r.initData(a,null,o),r.hasItemOption=!0,r}(r,t,e);e.setData(u),u.each(function(e){u.setItemLayout(e,du.map(Xk,function(n){return ul(u,e,n,t,i)})),u.setItemVisual(e,{color:o.getVisual("color")})}),u.diff(l.__data).add(function(t){var e=new Pp.Polygon({shape:{points:u.getItemLayout(t)}});u.setItemGraphicEl(t,e),l.group.add(e)}).update(function(t,n){var i=l.__data.getItemGraphicEl(n);Pp.updateProps(i,{shape:{points:u.getItemLayout(t)}},e,t),l.group.add(i),u.setItemGraphicEl(t,i)}).remove(function(t){var e=l.__data.getItemGraphicEl(t);l.group.remove(e)}).execute(),u.eachItemGraphicEl(function(t,n){var i=u.getItemModel(n),r=i.getModel("label"),a=i.getModel("emphasis.label"),o=u.getItemVisual(n,"color");t.useStyle(du.defaults(i.getModel("itemStyle").getItemStyle(),{fill:Hu.modifyAlpha(o,.4),stroke:o})),t.hoverStyle=i.getModel("emphasis.itemStyle").getItemStyle(),Pp.setLabelStyle(t.style,t.hoverStyle,r,a,{labelFetcher:e,labelDataIndex:n,defaultText:u.getName(n)||"",isRectText:!0,autoColor:o}),Pp.setHoverStyle(t,{}),t.dataModel=e}),l.__data=u,l.group.silent=e.get("silent")||t.get("silent")}}),T_.registerPreprocessor(function(t){t.markArea=t.markArea||{}});var Uk=function(t){var e=t&&t.timeline;du.isArray(e)||(e=e?[e]:[]),du.each(e,function(t){t&&function(t){var e=t.type,n={number:"value",time:"time"};if(n[e]&&(t.axisType=n[e],delete t.type),cl(t),hl(t,"controlPosition")){var i=t.controlStyle||(t.controlStyle={});hl(i,"position")||(i.position=t.controlPosition),"none"!==i.position||hl(i,"show")||(i.show=!1,delete i.position),delete t.controlPosition}du.each(t.data||[],function(t){du.isObject(t)&&!du.isArray(t)&&(!hl(t,"value")&&hl(t,"name")&&(t.value=t.name),cl(t))})}(t)})};ug.registerSubTypeDefaulter("timeline",function(){return"slider"}),T_.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,e){var n=e.getComponent("timeline");return n&&null!=t.currentIndex&&(n.setCurrentIndex(t.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.setPlayState(!1)),e.resetOption("timeline"),du.defaults({currentIndex:n.option.currentIndex},t)}),T_.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,e){var n=e.getComponent("timeline");n&&null!=t.playState&&n.setPlayState(t.playState)});var qk=ug.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},init:function(t,e,n){this._data,this._names,this.mergeDefaultAndTheme(t,n),this._initData()},mergeOption:function(t){qk.superApply(this,"mergeOption",arguments),this._initData()},setCurrentIndex:function(t){null==t&&(t=this.option.currentIndex);var e=this._data.count();this.option.loop?t=(t%e+e)%e:(t>=e&&(t=e-1),t<0&&(t=0)),this.option.currentIndex=t},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(t){this.option.autoPlay=!!t},getPlayState:function(){return!!this.option.autoPlay},_initData:function(){var t=this.option,e=t.data||[],n=t.axisType,i=this._names=[];if("category"===n){var r=[];du.each(e,function(t,e){var n,a=Hh.getDataItemValue(t);du.isObject(t)?(n=du.clone(t)).value=e:n=e,r.push(n),du.isString(a)||null!=a&&!isNaN(a)||(a=""),i.push(a+"")}),e=r}var a={category:"ordinal",time:"time"}[n]||"number";(this._data=new Iy([{name:"value",type:a}],this)).initData(e,i)},getData:function(){return this._data},getCategories:function(){if("category"===this.get("axisType"))return this._names.slice()}}),Zk=qk.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:!0,width:2,color:"#304654"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#304654"},itemStyle:{color:"#304654",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{label:{show:!0,color:"#c23531"},itemStyle:{color:"#c23531"},controlStyle:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}});du.mixin(Zk,nv);var Kk=wv.extend({type:"timeline"}),$k=function(t,e,n,i){h_.call(this,t,e,n),this.type=i||"value",this.model=null};$k.prototype={constructor:$k,getLabelModel:function(){return this.model.getModel("label")},isHorizontal:function(){return"horizontal"===this.model.get("orient")}},du.inherits($k,h_);var Jk=$k,Qk=jx.createSymbol,tD=Zp.encodeHTML,eD=du.bind,nD=du.each,iD=Math.PI;Kk.extend({type:"timeline.slider",init:function(t,e){this.api=e,this._axis,this._viewRect,this._timer,this._currentPointer,this._mainGroup,this._labelGroup},render:function(t,e,n,i){if(this.model=t,this.api=n,this.ecModel=e,this.group.removeAll(),t.get("show",!0)){var r=this._layout(t,n),a=this._createGroup("mainGroup"),o=this._createGroup("labelGroup"),s=this._axis=this._createAxis(r,t);t.formatTooltip=function(t){return tD(s.scale.getLabel(t))},nD(["AxisLine","AxisTick","Control","CurrentPointer"],function(e){this["_render"+e](r,a,s,t)},this),this._renderAxisLabel(r,o,s,t),this._position(r,t)}this._doPlayStop()},remove:function(){this._clearTimer(),this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(t,e){var n=t.get("label.position"),i=t.get("orient"),r=function(t,e){return ig.getLayoutRect(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},t.get("padding"))}(t,e);null==n||"auto"===n?n="horizontal"===i?r.y+r.height/2<e.getHeight()/2?"-":"+":r.x+r.width/2<e.getWidth()/2?"+":"-":isNaN(n)&&(n={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[i][n]);var a={horizontal:"center",vertical:n>=0||"+"===n?"left":"right"},o={horizontal:n>=0||"+"===n?"top":"bottom",vertical:"middle"},s={horizontal:0,vertical:iD/2},l="vertical"===i?r.height:r.width,u=t.getModel("controlStyle"),c=u.get("show",!0),h=c?u.get("itemSize"):0,d=c?u.get("itemGap"):0,f=h+d,p=t.get("label.rotate")||0;p=p*iD/180;var g,m,v,y,x=u.get("position",!0),_=c&&u.get("showPlayBtn",!0),b=c&&u.get("showPrevBtn",!0),w=c&&u.get("showNextBtn",!0),S=0,M=l;return"left"===x||"bottom"===x?(_&&(g=[0,0],S+=f),b&&(m=[S,0],S+=f),w&&(v=[M-h,0],M-=f)):(_&&(g=[M-h,0],M-=f),b&&(m=[0,0],S+=f),w&&(v=[M-h,0],M-=f)),y=[S,M],t.get("inverse")&&y.reverse(),{viewRect:r,mainLength:l,orient:i,rotation:s[i],labelRotation:p,labelPosOpt:n,labelAlign:t.get("label.align")||a[i],labelBaseline:t.get("label.verticalAlign")||t.get("label.baseline")||o[i],playPosition:g,prevBtnPosition:m,nextBtnPosition:v,axisExtent:y,controlSize:h,controlGap:d}},_position:function(t,e){function n(t){var e=t.position;t.origin=[h[0][0]-e[0],h[1][0]-e[1]]}function i(t){return[[t.x,t.x+t.width],[t.y,t.y+t.height]]}function r(t,e,n,i,r){t[i]+=n[i][r]-e[i][r]}var a=this._mainGroup,o=this._labelGroup,s=t.viewRect;if("vertical"===t.orient){var l=Mu.create(),u=s.x,c=s.y+s.height;Mu.translate(l,l,[-u,-c]),Mu.rotate(l,l,-iD/2),Mu.translate(l,l,[u,c]),(s=s.clone()).applyTransform(l)}var h=i(s),d=i(a.getBoundingRect()),f=i(o.getBoundingRect()),p=a.position,g=o.position;g[0]=p[0]=h[0][0];var m=t.labelPosOpt;if(isNaN(m))r(p,d,h,1,v="+"===m?0:1),r(g,f,h,1,1-v);else{var v=m>=0?0:1;r(p,d,h,1,v),g[1]=p[1]+m}a.attr("position",p),o.attr("position",g),a.rotation=o.rotation=t.rotation,n(a),n(o)},_createAxis:function(t,e){var n=e.getData(),i=e.get("axisType"),r=Dx.createScaleByModel(e,i);r.getTicks=function(){return n.mapArray(["value"],function(t){return t})};var a=n.getDataExtent("value");r.setExtent(a[0],a[1]),r.niceTicks();var o=new Jk("value",r,t.axisExtent,i);return o.model=e,o},_createGroup:function(t){var e=this["_"+t]=new Pp.Group;return this.group.add(e),e},_renderAxisLine:function(t,e,n,i){var r=n.getExtent();i.get("lineStyle.show")&&e.add(new Pp.Line({shape:{x1:r[0],y1:0,x2:r[1],y2:0},style:du.extend({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1}))},_renderAxisTick:function(t,e,n,i){var r=i.getData(),a=n.scale.getTicks();nD(a,function(t){var a=n.dataToCoord(t),o=r.getItemModel(t),s=o.getModel("itemStyle"),l=o.getModel("emphasis.itemStyle"),u={position:[a,0],onclick:eD(this._changeTimeline,this,t)},c=dl(o,s,e,u);Pp.setHoverStyle(c,l.getItemStyle()),o.get("tooltip")?(c.dataIndex=t,c.dataModel=i):c.dataIndex=c.dataModel=null},this)},_renderAxisLabel:function(t,e,n,i){if(n.getLabelModel().get("show")){var r=i.getData(),a=n.getViewLabels();nD(a,function(i){var a=i.tickValue,o=r.getItemModel(a),s=o.getModel("label"),l=o.getModel("emphasis.label"),u=n.dataToCoord(i.tickValue),c=new Pp.Text({position:[u,0],rotation:t.labelRotation-t.rotation,onclick:eD(this._changeTimeline,this,a),silent:!1});Pp.setTextStyle(c.style,s,{text:i.formattedLabel,textAlign:t.labelAlign,textVerticalAlign:t.labelBaseline}),e.add(c),Pp.setHoverStyle(c,Pp.setTextStyle({},l))},this)}},_renderControl:function(t,e,n,i){function r(t,n,r,c){if(t){var h=function(t,e,n,i){return Pp.makePath(t.get(e).replace(/^path:\/\//,""),du.clone(i||{}),new hc(n[0],n[1],n[2],n[3]),"center")}(i,n,u,{position:t,origin:[a/2,0],rotation:c?-o:0,rectHover:!0,style:s,onclick:r});e.add(h),Pp.setHoverStyle(h,l)}}var a=t.controlSize,o=t.rotation,s=i.getModel("controlStyle").getItemStyle(),l=i.getModel("emphasis.controlStyle").getItemStyle(),u=[0,-a/2,a,a],c=i.getPlayState(),h=i.get("inverse",!0);r(t.nextBtnPosition,"controlStyle.nextIcon",eD(this._changeTimeline,this,h?"-":"+")),r(t.prevBtnPosition,"controlStyle.prevIcon",eD(this._changeTimeline,this,h?"+":"-")),r(t.playPosition,"controlStyle."+(c?"stopIcon":"playIcon"),eD(this._handlePlayClick,this,!c),!0)},_renderCurrentPointer:function(t,e,n,i){var r=i.getData(),a=i.getCurrentIndex(),o=r.getItemModel(a).getModel("checkpointStyle"),s=this,l={onCreate:function(t){t.draggable=!0,t.drift=eD(s._handlePointerDrag,s),t.ondragend=eD(s._handlePointerDragend,s),fl(t,a,n,i,!0)},onUpdate:function(t){fl(t,a,n,i)}};this._currentPointer=dl(o,o,this._mainGroup,{},this._currentPointer,l)},_handlePlayClick:function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},_handlePointerDrag:function(t,e,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},_handlePointerDragend:function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},_pointerChangeTimeline:function(t,e){var n=this._toAxisCoord(t)[0],i=this._axis,r=Wp.asc(i.getExtent().slice());n>r[1]&&(n=r[1]),n<r[0]&&(n=r[0]),this._currentPointer.position[0]=n,this._currentPointer.dirty();var a=this._findNearestTick(n),o=this.model;(e||a!==o.getCurrentIndex()&&o.get("realtime"))&&this._changeTimeline(a)},_doPlayStop:function(){this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(eD(function(){var t=this.model;this._changeTimeline(t.getCurrentIndex()+(t.get("rewind",!0)?-1:1))},this),this.model.get("playInterval")))},_toAxisCoord:function(t){var e=this._mainGroup.getLocalTransform();return Pp.applyTransform(t,e,!0)},_findNearestTick:function(t){var e,n=this.model.getData(),i=1/0,r=this._axis;return n.each(["value"],function(n,a){var o=r.dataToCoord(n),s=Math.abs(o-t);s<i&&(i=s,e=a)}),e},_clearTimer:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},_changeTimeline:function(t){var e=this.model.getCurrentIndex();"+"===t?t=e+1:"-"===t&&(t=e-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})}}),T_.registerPreprocessor(Uk);var rD=T_.extendComponentModel({type:"toolbox",layoutMode:{type:"box",ignoreSize:!0},optionUpdated:function(){rD.superApply(this,"optionUpdated",arguments),du.each(this.option.feature,function(t,e){var n=bO.get(e);n&&du.merge(t,n.defaultOption)})},defaultOption:{show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}}}}),aD=(T_.extendComponentView({type:"toolbox",render:function(t,e,n,i){function r(r,c){var h,d=u[r],f=u[c],p=s[d],g=new zp(p,t,t.ecModel);if(d&&!f){if(function(t){return 0===t.indexOf("my")}(d))h={model:g,onclick:g.option.onclick,featureName:d};else{var m=bO.get(d);if(!m)return;h=new m(g,e,n)}l[d]=h}else{if(!(h=l[f]))return;h.model=g,h.ecModel=e,h.api=n}d||!f?g.get("show")&&!h.unusable?(function(i,r,s){var l=i.getModel("iconStyle"),u=i.getModel("emphasis.iconStyle"),c=r.getIcons?r.getIcons():i.get("icon"),h=i.get("title")||{};if("string"==typeof c){var d=c,f=h;h={},(c={})[s]=d,h[s]=f}var p=i.iconPaths={};du.each(c,function(s,c){var d=Pp.createIcon(s,{},{x:-o/2,y:-o/2,width:o,height:o});d.setStyle(l.getItemStyle()),d.hoverStyle=u.getItemStyle(),Pp.setHoverStyle(d),t.get("showTitle")&&(d.__title=h[c],d.on("mouseover",function(){var t=u.getItemStyle();d.setStyle({text:h[c],textPosition:t.textPosition||"bottom",textFill:t.fill||t.stroke||"#000",textAlign:t.textAlign||"center"})}).on("mouseout",function(){d.setStyle({textFill:null})})),d.trigger(i.get("iconStatus."+c)||"normal"),a.add(d),d.on("click",du.bind(r.onclick,r,e,n,c)),p[c]=d})}(g,h,d),g.setIconStatus=function(t,e){var n=this.option,i=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[t]=e,i[t]&&i[t].trigger(e)},h.render&&h.render(g,e,n,i)):h.remove&&h.remove(e,n):h.dispose&&h.dispose(e,n)}var a=this.group;if(a.removeAll(),t.get("show")){var o=+t.get("itemSize"),s=t.get("feature")||{},l=this._features||(this._features={}),u=[];du.each(s,function(t,e){u.push(e)}),new cy(this._featureNames||[],u).add(r).update(r).remove(du.curry(r,null)).execute(),this._featureNames=u,lT.layout(a,t,n),a.add(lT.makeBackground(a.getBoundingRect(),t)),a.eachChild(function(t){var e=t.__title,i=t.hoverStyle;if(i&&e){var r=Xc.getBoundingRect(e,Xc.makeFont(i)),s=t.position[0]+a.position[0],l=!1;t.position[1]+a.position[1]+o+r.height>n.getHeight()&&(i.textPosition="top",l=!0);var u=l?-5-r.height:o+8;s+r.width/2>n.getWidth()?(i.textPosition=["100%",u],i.textAlign="right"):s-r.width/2<0&&(i.textPosition=[0,u],i.textAlign="left")}})}},updateView:function(t,e,n,i){du.each(this._features,function(t){t.updateView&&t.updateView(t.model,e,n,i)})},remove:function(t,e){du.each(this._features,function(n){n.remove&&n.remove(t,e)}),this.group.removeAll()},dispose:function(t,e){du.each(this._features,function(n){n.dispose&&n.dispose(t,e)})}}),Bv.toolbox.saveAsImage);pl.defaultOption={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:aD.title,type:"png",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:aD.lang.slice()},pl.prototype.unusable=!Jl.canvasSupported,pl.prototype.onclick=function(t,e){var n=this.model,i=n.get("name")||t.get("title.0.text")||"echarts",r=document.createElement("a"),a=n.get("type",!0)||"png";r.download=i+"."+a,r.target="_blank";var o=e.getConnectedDataURL({type:a,backgroundColor:n.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")});if(r.href=o,"function"!=typeof MouseEvent||Jl.browser.ie||Jl.browser.edge)if(window.navigator.msSaveOrOpenBlob){for(var s=atob(o.split(",")[1]),l=s.length,u=new Uint8Array(l);l--;)u[l]=s.charCodeAt(l);var c=new Blob([u]);window.navigator.msSaveOrOpenBlob(c,i+"."+a)}else{var h=n.get("lang"),d='<body style="margin:0;"><img src="'+o+'" style="max-width:100%;" title="'+(h&&h[0]||"")+'" /></body>';window.open().document.write(d)}else{var f=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});r.dispatchEvent(f)}},bO.register("saveAsImage",pl);var oD=Bv.toolbox.magicType;gl.defaultOption={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z",tiled:"M2.3,2.2h22.8V25H2.3V2.2z M35,2.2h22.8V25H35V2.2zM2.3,35h22.8v22.8H2.3V35z M35,35h22.8v22.8H35V35z"},title:du.clone(oD.title),option:{},seriesIndex:{}};var sD=gl.prototype;sD.getIcons=function(){var t=this.model,e=t.get("icon"),n={};return du.each(t.get("type"),function(t){e[t]&&(n[t]=e[t])}),n};var lD={line:function(t,e,n,i){if("bar"===t)return du.merge({id:e,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get("option.line")||{},!0)},bar:function(t,e,n,i){if("line"===t)return du.merge({id:e,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get("option.bar")||{},!0)},stack:function(t,e,n,i){if("line"===t||"bar"===t)return du.merge({id:e,stack:"__ec_magicType_stack__"},i.get("option.stack")||{},!0)},tiled:function(t,e,n,i){if("line"===t||"bar"===t)return du.merge({id:e,stack:""},i.get("option.tiled")||{},!0)}},uD=[["line","bar"],["stack","tiled"]];sD.onclick=function(t,e,n){var i=this.model,r=i.get("seriesIndex."+n);if(lD[n]){var a={series:[]};du.each(uD,function(t){du.indexOf(t,n)>=0&&du.each(t,function(t){i.setIconStatus(t,"normal")})}),i.setIconStatus(n,"emphasis"),t.eachComponent({mainType:"series",query:null==r?null:{seriesIndex:r}},function(e){var r=e.subType,o=e.id,s=lD[n](r,o,e,i);s&&(du.defaults(s,e.option),a.series.push(s));var l=e.coordinateSystem;if(l&&"cartesian2d"===l.type&&("line"===n||"bar"===n)){var u=l.getAxesByScale("ordinal")[0];if(u){var c=u.dim+"Axis",h=t.queryComponents({mainType:c,index:e.get(name+"Index"),id:e.get(name+"Id")})[0].componentIndex;a[c]=a[c]||[];for(var d=0;d<=h;d++)a[c][h]=a[c][h]||{};a[c][h].boundaryGap="bar"===n}}}),e.dispatchAction({type:"changeMagicType",currentType:n,newOption:a})}},T_.registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,e){e.mergeOption(t.newOption)}),bO.register("magicType",gl);var cD=Bv.toolbox.dataView,hD=new Array(60).join("-"),dD="\t",fD=new RegExp("["+dD+"]+","g");vl.defaultOption={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:du.clone(cD.title),lang:du.clone(cD.lang),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"},vl.prototype.onclick=function(t,e){function n(){i.removeChild(a),x._dom=null}var i=e.getDom(),r=this.model;this._dom&&i.removeChild(this._dom);var a=document.createElement("div");a.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",a.style.backgroundColor=r.get("backgroundColor")||"#fff";var o=document.createElement("h4"),s=r.get("lang")||[];o.innerHTML=s[0]||r.get("title"),o.style.cssText="margin: 10px 20px;",o.style.color=r.get("textColor");var l=document.createElement("div"),u=document.createElement("textarea");l.style.cssText="display:block;width:100%;overflow:auto;";var c=r.get("optionToContent"),h=r.get("contentToOption"),d=function(t){var e=function(t){var e={},n=[],i=[];return t.eachRawSeries(function(t){var r=t.coordinateSystem;if(!r||"cartesian2d"!==r.type&&"polar"!==r.type)n.push(t);else{var a=r.getBaseAxis();if("category"===a.type){var o=a.dim+"_"+a.index;e[o]||(e[o]={categoryAxis:a,valueAxis:r.getOtherAxis(a),series:[]},i.push({axisDim:a.dim,axisIndex:a.index})),e[o].series.push(t)}else n.push(t)}}),{seriesGroupByCategoryAxis:e,other:n,meta:i}}(t);return{value:du.filter([function(t){var e=[];return du.each(t,function(t,n){var i=t.categoryAxis,r=t.valueAxis.dim,a=[" "].concat(du.map(t.series,function(t){return t.name})),o=[i.model.getCategories()];du.each(t.series,function(t){o.push(t.getRawData().mapArray(r,function(t){return t}))});for(var s=[a.join(dD)],l=0;l<o[0].length;l++){for(var u=[],c=0;c<o.length;c++)u.push(o[c][l]);s.push(u.join(dD))}e.push(s.join("\n"))}),e.join("\n\n"+hD+"\n\n")}(e.seriesGroupByCategoryAxis),function(t){return du.map(t,function(t){var e=t.getRawData(),n=[t.name],i=[];return e.each(e.dimensions,function(){for(var t=arguments,r=arguments.length,a=arguments[r-1],o=e.getName(a),s=0;s<r-1;s++)i[s]=t[s];n.push((o?o+dD:"")+i.join(dD))}),n.join("\n")}).join("\n\n"+hD+"\n\n")}(e.other)],function(t){return t.replace(/[\n\t\s]/g,"")}).join("\n\n"+hD+"\n\n"),meta:e.meta}}(t);if("function"==typeof c){var f=c(e.getOption());"string"==typeof f?l.innerHTML=f:du.isDom(f)&&l.appendChild(f)}else l.appendChild(u),u.readOnly=r.get("readOnly"),u.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",u.style.color=r.get("textColor"),u.style.borderColor=r.get("textareaBorderColor"),u.style.backgroundColor=r.get("textareaColor"),u.value=d.value;var p=d.meta,g=document.createElement("div");g.style.cssText="position:absolute;bottom:0;left:0;right:0;";var m="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",v=document.createElement("div"),y=document.createElement("div");m+=";background-color:"+r.get("buttonColor"),m+=";color:"+r.get("buttonTextColor");var x=this;mh.addEventListener(v,"click",n),mh.addEventListener(y,"click",function(){var t;try{t="function"==typeof h?h(l,e.getOption()):function(t,e){var n=t.split(new RegExp("\n*"+hD+"\n*","g")),i={series:[]};return du.each(n,function(t,n){if(function(t){if(t.slice(0,t.indexOf("\n")).indexOf(dD)>=0)return!0}(t)){var r=function(e){for(var n=t.split(/\n+/g),i=ml(n.shift()).split(fD),r=[],a=du.map(i,function(t){return{name:t,data:[]}}),o=0;o<n.length;o++){var s=ml(n[o]).split(fD);r.push(s.shift());for(var l=0;l<s.length;l++)a[l]&&(a[l].data[o]=s[l])}return{series:a,categories:r}}(),a=e[n],o=a.axisDim+"Axis";a&&(i[o]=i[o]||[],i[o][a.axisIndex]={data:r.categories},i.series=i.series.concat(r.series))}else r=function(e){for(var n=t.split(/\n+/g),i=ml(n.shift()),r=[],a=0;a<n.length;a++){var o,s=ml(n[a]).split(fD),l="",u=!1;isNaN(s[0])?(u=!0,l=s[0],s=s.slice(1),r[a]={name:l,value:[]},o=r[a].value):o=r[a]=[];for(var c=0;c<s.length;c++)o.push(+s[c]);1===o.length&&(u?r[a].value=o[0]:r[a]=o[0])}return{name:i,data:r}}(),i.series.push(r)}),i}(u.value,p)}catch(t){throw n(),new Error("Data view format error "+t)}t&&e.dispatchAction({type:"changeDataView",newOption:t}),n()}),v.innerHTML=s[1],y.innerHTML=s[2],y.style.cssText=m,v.style.cssText=m,!r.get("readOnly")&&g.appendChild(y),g.appendChild(v),mh.addEventListener(u,"keydown",function(t){if(9===(t.keyCode||t.which)){var e=this.value,n=this.selectionStart,i=this.selectionEnd;this.value=e.substring(0,n)+dD+e.substring(i),this.selectionStart=this.selectionEnd=n+1,mh.stop(t)}}),a.appendChild(o),a.appendChild(l),a.appendChild(g),l.style.height=i.clientHeight-80+"px",i.appendChild(a),this._dom=a},vl.prototype.remove=function(t,e){this._dom&&e.getDom().removeChild(this._dom)},vl.prototype.dispose=function(t,e){this.remove(t,e)},bO.register("dataView",vl),T_.registerAction({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,e){var n=[];du.each(t.newOption.series,function(t){var i=e.getSeriesByName(t.name)[0];if(i){var r=i.get("data");n.push({name:t.name,data:function(t,e){return du.map(t,function(t,n){var i=e&&e[n];return du.isObject(i)&&!du.isArray(i)?(du.isObject(t)&&!du.isArray(t)&&(t=t.value),du.defaults({value:t},i)):t})}(t.data,r)})}else n.push(du.extend({type:"scatter"},t))}),e.mergeOption(du.defaults({series:n},t.newOption))});var pD=du.each,gD="\0_ec_hist_store",mD={push:function(t,e){var n=yl(t);pD(e,function(e,i){for(var r=n.length-1;r>=0&&!n[r][i];r--);if(r<0){var a=t.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(a){var o=a.getPercentRange();n[0][i]={dataZoomId:i,start:o[0],end:o[1]}}}}),n.push(e)},pop:function(t){var e=yl(t),n=e[e.length-1];e.length>1&&e.pop();var i={};return pD(n,function(t,n){for(var r=e.length-1;r>=0;r--)if(t=e[r][n]){i[n]=t;break}}),i},clear:function(t){t[gD]=null},count:function(t){return yl(t).length}},vD=(VO.extend({type:"dataZoom.select"}),GO.extend({type:"dataZoom.select"}),Bv.toolbox.dataZoom),yD=du.each,xD="\0_ec_\0toolbox-dataZoom_";xl.defaultOption={show:!0,icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:du.clone(vD.title)};var _D=xl.prototype;_D.render=function(t,e,n,i){this.model=t,this.ecModel=e,this.api=n,function(t,e,n,i,r){var a=n._isZoomActive;i&&"takeGlobalCursor"===i.type&&(a="dataZoomSelect"===i.key&&i.dataZoomSelectActive),n._isZoomActive=a,t.setIconStatus("zoom",a?"emphasis":"normal");var o=new fO(_l(t.option),e,{include:["grid"]});n._brushController.setPanels(o.makePanelOpts(r,function(t){return t.xAxisDeclared&&!t.yAxisDeclared?"lineX":!t.xAxisDeclared&&t.yAxisDeclared?"lineY":"rect"})).enableBrush(!!a&&{brushType:"auto",brushStyle:{lineWidth:0,fill:"rgba(0,0,0,0.2)"}})}(t,e,this,i,n),function(t,e){t.setIconStatus("back",mD.count(e)>1?"emphasis":"normal")}(t,e)},_D.onclick=function(t,e,n){bD[n].call(this)},_D.remove=function(t,e){this._brushController.unmount()},_D.dispose=function(t,e){this._brushController.dispose()};var bD={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(mD.pop(this.ecModel))}};_D._onBrush=function(t,e){function n(t,e,n){var a=e.getAxis(t),o=a.model,s=function(t,e,n){var i;return n.eachComponent({mainType:"dataZoom",subType:"select"},function(n){n.getAxisModel(t,e.componentIndex)&&(i=n)}),i}(t,o,r),l=s.findRepresentativeAxisProxy(o).getMinMaxSpan();null==l.minValueSpan&&null==l.maxValueSpan||(n=$A(0,n.slice(),a.scale.getExtent(),0,l.minValueSpan,l.maxValueSpan)),s&&(i[s.id]={dataZoomId:s.id,startValue:n[0],endValue:n[1]})}if(e.isEnd&&t.length){var i={},r=this.ecModel;this._brushController.updateCovers([]),new fO(_l(this.model.option),r,{include:["grid"]}).matchOutputRanges(t,r,function(t,e,i){if("cartesian2d"===i.type){var r=t.brushType;"rect"===r?(n("x",i,e[0]),n("y",i,e[1])):n({lineX:"x",lineY:"y"}[r],i,e)}}),mD.push(r,i),this._dispatchZoomAction(i)}},_D._dispatchZoomAction=function(t){var e=[];yD(t,function(t,n){e.push(du.clone(t))}),e.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:e})},bO.register("dataZoom",xl),T_.registerPreprocessor(function(t){function e(e,i){if(i){var r=e+"Index",a=i[r];null==a||"all"==a||du.isArray(a)||(a=!1===a||"none"===a?[]:[a]),function(e,n){var i=t[e];du.isArray(i)||(i=i?[i]:[]),yD(i,n)}(e,function(t,i){if(null==a||"all"==a||-1!==du.indexOf(a,i)){var o={type:"select",$fromToolbox:!0,id:xD+e+i};o[r]=i,n.push(o)}})}}if(t){var n=t.dataZoom||(t.dataZoom=[]);du.isArray(n)||(t.dataZoom=n=[n]);var i=t.toolbox;if(i&&(du.isArray(i)&&(i=i[0]),i&&i.feature)){var r=i.feature.dataZoom;e("xAxis",r),e("yAxis",r)}}});var wD=Bv.toolbox.restore;bl.defaultOption={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:wD.title},bl.prototype.onclick=function(t,e,n){mD.clear(t),e.dispatchAction({type:"restore",from:this.uid})},bO.register("restore",bl),T_.registerAction({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,e){e.resetOption("recreate")});var SD,MD="urn:schemas-microsoft-com:vml",AD="undefined"==typeof window?null:window,CD=!1,ID=AD&&AD.document;if(ID&&!Jl.canvasSupported)try{!ID.namespaces.zrvml&&ID.namespaces.add("zrvml",MD),SD=function(t){return ID.createElement("<zrvml:"+t+' class="zrvml">')}}catch(t){SD=function(t){return ID.createElement("<"+t+' xmlns="'+MD+'" class="zrvml">')}}var PD={doc:ID,createNode:function(t){return SD(t)},initVML:function(){if(!CD&&ID){CD=!0;var t=ID.styleSheets;t.length<31?ID.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):t[0].addRule(".zrvml","behavior:url(#default#VML)")}}},TD=pu.applyTransform,OD=Rd.CMD,kD=Math.round,DD=Math.sqrt,ED=Math.abs,LD=Math.cos,ND=Math.sin,RD=Math.max;if(!Jl.canvasSupported){var BD=21600,zD=BD/2,VD=function(t){t.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",t.coordsize=BD+","+BD,t.coordorigin="0,0"},GD=function(t,e,n){return"rgb("+[t,e,n].join(",")+")"},FD=function(t,e){e&&t&&e.parentNode!==t&&t.appendChild(e)},jD=function(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)},HD=function(t,e,n){return 1e5*(parseFloat(t)||0)+1e3*(parseFloat(e)||0)+n},WD=function(t,e){return"string"==typeof t?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t},YD=function(t,e,n){var i=Hu.parse(e);n=+n,isNaN(n)&&(n=1),i&&(t.color=GD(i[0],i[1],i[2]),t.opacity=n*i[3])},XD=function(t,e,n,i){var r="fill"==e,a=t.getElementsByTagName(e)[0];null!=n[e]&&"none"!==n[e]&&(r||!r&&n.lineWidth)?(t[r?"filled":"stroked"]="true",n[e]instanceof Qf&&jD(t,a),a||(a=PD.createNode(e)),r?function(t,e,n){var i=e.fill;if(null!=i)if(i instanceof Qf){var r,a=0,o=[0,0],s=0,l=1,u=n.getBoundingRect(),c=u.width,h=u.height;if("linear"===i.type){r="gradient";var d=n.transform,f=[i.x*c,i.y*h],p=[i.x2*c,i.y2*h];d&&(TD(f,f,d),TD(p,p,d));var g=p[0]-f[0],m=p[1]-f[1];(a=180*Math.atan2(g,m)/Math.PI)<0&&(a+=360),a<1e-6&&(a=0)}else{r="gradientradial";f=[i.x*c,i.y*h],d=n.transform;var v=n.scale,y=c,x=h;o=[(f[0]-u.x)/y,(f[1]-u.y)/x],d&&TD(f,f,d),y/=v[0]*BD,x/=v[1]*BD;var _=RD(y,x);s=0/_,l=2*i.r/_-s}var b=i.colorStops.slice();b.sort(function(t,e){return t.offset-e.offset});for(var w=b.length,S=[],M=[],A=0;A<w;A++){var C=b[A],I=function(t){var e=Hu.parse(t);return[GD(e[0],e[1],e[2]),e[3]]}(C.color);M.push(C.offset*l+s+" "+I[0]),0!==A&&A!==w-1||S.push(I)}if(w>=2){var P=S[0][0],T=S[1][0],O=S[0][1]*e.opacity,k=S[1][1]*e.opacity;t.type=r,t.method="none",t.focus="100%",t.angle=a,t.color=P,t.color2=T,t.colors=M.join(","),t.opacity=k,t.opacity2=O}"radial"===r&&(t.focusposition=o.join(","))}else YD(t,i,e.opacity)}(a,n,i):function(t,e){null!=e.lineDash&&(t.dashstyle=e.lineDash.join(" ")),null==e.stroke||e.stroke instanceof Qf||YD(t,e.stroke,e.opacity)}(a,n),FD(t,a)):(t[r?"filled":"stroked"]="false",jD(t,a))},UD=[[],[],[]];rf.prototype.brushVML=function(t){var e=this.style,n=this._vmlEl;n||(n=PD.createNode("shape"),VD(n),this._vmlEl=n),XD(n,"fill",e,this),XD(n,"stroke",e,this);var i=this.transform,r=null!=i,a=n.getElementsByTagName("stroke")[0];if(a){var o=e.lineWidth;if(r&&!e.strokeNoScale){var s=i[0]*i[3]-i[1]*i[2];o*=DD(ED(s))}a.weight=o+"px"}var l=this.path||(this.path=new Rd);this.__dirtyPath&&(l.beginPath(),this.buildPath(l,this.shape),l.toStatic(),this.__dirtyPath=!1),n.path=function(t,e){var n,i,r,a,o,s,l=OD.M,u=OD.C,c=OD.L,h=OD.A,d=OD.Q,f=[],p=t.data,g=t.len();for(a=0;a<g;){switch(r=p[a++],i="",n=0,r){case l:i=" m ",n=1,o=p[a++],s=p[a++],UD[0][0]=o,UD[0][1]=s;break;case c:i=" l ",n=1,o=p[a++],s=p[a++],UD[0][0]=o,UD[0][1]=s;break;case d:case u:i=" c ",n=3;var m,v,y=p[a++],x=p[a++],_=p[a++],b=p[a++];r===d?(m=_,v=b,_=(_+2*y)/3,b=(b+2*x)/3,y=(o+2*y)/3,x=(s+2*x)/3):(m=p[a++],v=p[a++]),UD[0][0]=y,UD[0][1]=x,UD[1][0]=_,UD[1][1]=b,UD[2][0]=m,UD[2][1]=v,o=m,s=v;break;case h:var w=0,S=0,M=1,A=1,C=0;e&&(w=e[4],S=e[5],M=DD(e[0]*e[0]+e[1]*e[1]),A=DD(e[2]*e[2]+e[3]*e[3]),C=Math.atan2(-e[1]/A,e[0]/M));var I=p[a++],P=p[a++],T=p[a++],O=p[a++],k=p[a++]+C,D=p[a++]+k+C;a++;var E=p[a++],L=I+LD(k)*T,N=P+ND(k)*O,R=(y=I+LD(D)*T,x=P+ND(D)*O,E?" wa ":" at ");Math.abs(L-y)<1e-4&&(Math.abs(D-k)>.01?E&&(L+=.0125):Math.abs(N-P)<1e-4?E&&L<I||!E&&L>I?x-=.0125:x+=.0125:E&&N<P||!E&&N>P?y+=.0125:y-=.0125),f.push(R,kD(((I-T)*M+w)*BD-zD),",",kD(((P-O)*A+S)*BD-zD),",",kD(((I+T)*M+w)*BD-zD),",",kD(((P+O)*A+S)*BD-zD),",",kD((L*M+w)*BD-zD),",",kD((N*A+S)*BD-zD),",",kD((y*M+w)*BD-zD),",",kD((x*A+S)*BD-zD)),o=y,s=x;break;case OD.R:var B=UD[0],z=UD[1];B[0]=p[a++],B[1]=p[a++],z[0]=B[0]+p[a++],z[1]=B[1]+p[a++],e&&(TD(B,B,e),TD(z,z,e)),B[0]=kD(B[0]*BD-zD),z[0]=kD(z[0]*BD-zD),B[1]=kD(B[1]*BD-zD),z[1]=kD(z[1]*BD-zD),f.push(" m ",B[0],",",B[1]," l ",z[0],",",B[1]," l ",z[0],",",z[1]," l ",B[0],",",z[1]);break;case OD.Z:f.push(" x ")}if(n>0){f.push(i);for(var V=0;V<n;V++){var G=UD[V];e&&TD(G,G,e),f.push(kD(G[0]*BD-zD),",",kD(G[1]*BD-zD),V<n-1?",":"")}}}return f.join("")}(l,this.transform),n.style.zIndex=HD(this.zlevel,this.z,this.z2),FD(t,n),null!=e.text?this.drawRectText(t,this.getBoundingRect()):this.removeRectText(t)},rf.prototype.onRemove=function(t){jD(t,this._vmlEl),this.removeRectText(t)},rf.prototype.onAdd=function(t){FD(t,this._vmlEl),this.appendRectText(t)},sh.prototype.brushVML=function(t){var e,n,i=this.style,r=i.image;if(function(t){return"object"==typeof t&&t.tagName&&"IMG"===t.tagName.toUpperCase()}(r)){var a=r.src;if(a===this._imageSrc)e=this._imageWidth,n=this._imageHeight;else{var o=r.runtimeStyle,s=o.width,l=o.height;o.width="auto",o.height="auto",e=r.width,n=r.height,o.width=s,o.height=l,this._imageSrc=a,this._imageWidth=e,this._imageHeight=n}r=a}else r===this._imageSrc&&(e=this._imageWidth,n=this._imageHeight);if(r){var u=i.x||0,c=i.y||0,h=i.width,d=i.height,f=i.sWidth,p=i.sHeight,g=i.sx||0,m=i.sy||0,v=f&&p,y=this._vmlEl;y||(y=PD.doc.createElement("div"),VD(y),this._vmlEl=y);var x,_=y.style,b=!1,w=1,S=1;if(this.transform&&(x=this.transform,w=DD(x[0]*x[0]+x[1]*x[1]),S=DD(x[2]*x[2]+x[3]*x[3]),b=x[1]||x[2]),b){var M=[u,c],A=[u+h,c],C=[u,c+d],I=[u+h,c+d];TD(M,M,x),TD(A,A,x),TD(C,C,x),TD(I,I,x);var P=RD(M[0],A[0],C[0],I[0]),T=RD(M[1],A[1],C[1],I[1]),O=[];O.push("M11=",x[0]/w,",","M12=",x[2]/S,",","M21=",x[1]/w,",","M22=",x[3]/S,",","Dx=",kD(u*w+x[4]),",","Dy=",kD(c*S+x[5])),_.padding="0 "+kD(P)+"px "+kD(T)+"px 0",_.filter="progid:DXImageTransform.Microsoft.Matrix("+O.join("")+", SizingMethod=clip)"}else x&&(u=u*w+x[4],c=c*S+x[5]),_.filter="",_.left=kD(u)+"px",_.top=kD(c)+"px";var k=this._imageEl,D=this._cropEl;k||(k=PD.doc.createElement("div"),this._imageEl=k);var E=k.style;if(v){if(e&&n)E.width=kD(w*e*h/f)+"px",E.height=kD(S*n*d/p)+"px";else{var L=new Image,N=this;L.onload=function(){L.onload=null,e=L.width,n=L.height,E.width=kD(w*e*h/f)+"px",E.height=kD(S*n*d/p)+"px",N._imageWidth=e,N._imageHeight=n,N._imageSrc=r},L.src=r}D||((D=PD.doc.createElement("div")).style.overflow="hidden",this._cropEl=D);var R=D.style;R.width=kD((h+g*h/f)*w),R.height=kD((d+m*d/p)*S),R.filter="progid:DXImageTransform.Microsoft.Matrix(Dx="+-g*h/f*w+",Dy="+-m*d/p*S+")",D.parentNode||y.appendChild(D),k.parentNode!=D&&D.appendChild(k)}else E.width=kD(w*h)+"px",E.height=kD(S*d)+"px",y.appendChild(k),D&&D.parentNode&&(y.removeChild(D),this._cropEl=null);var B="",z=i.opacity;z<1&&(B+=".Alpha(opacity="+kD(100*z)+") "),B+="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+r+", SizingMethod=scale)",E.filter=B,y.style.zIndex=HD(this.zlevel,this.z,this.z2),FD(t,y),null!=i.text&&this.drawRectText(t,this.getBoundingRect())}},sh.prototype.onRemove=function(t){jD(t,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(t)},sh.prototype.onAdd=function(t){FD(t,this._vmlEl),this.appendRectText(t)};var qD,ZD={},KD=0,$D=document.createElement("div");Xc.$override("measureText",function(t,e){var n=PD.doc;qD||((qD=n.createElement("div")).style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",PD.doc.body.appendChild(qD));try{qD.style.font=e}catch(t){}return qD.innerHTML="",qD.appendChild(n.createTextNode(t)),{width:qD.offsetWidth}});for(var JD=new hc,QD=[ah,oh,sh,rf,bf],tE=0;tE<QD.length;tE++){var eE=QD[tE].prototype;eE.drawRectText=function(t,e,n,i){var r=this.style;this.__dirty&&nh.normalizeTextStyle(r,!0);var a=r.text;if(null!=a&&(a+=""),a){if(r.rich){var o=Xc.parseRichText(a,r);a=[];for(var s=0;s<o.lines.length;s++){for(var l=o.lines[s].tokens,u=[],c=0;c<l.length;c++)u.push(l[c].text);a.push(u.join(""))}a=a.join("\n")}var h,d,f=r.textAlign,p=r.textVerticalAlign,g=function(t){var e=ZD[t];if(!e){KD>100&&(KD=0,ZD={});var n,i=$D.style;try{i.font=t,n=i.fontFamily.split(",")[0]}catch(t){}e={style:i.fontStyle||"normal",variant:i.fontVariant||"normal",weight:i.fontWeight||"normal",size:0|parseFloat(i.fontSize||12),family:n||"Microsoft YaHei"},ZD[t]=e,KD++}return e}(r.font),m=g.style+" "+g.variant+" "+g.weight+" "+g.size+'px "'+g.family+'"';n=n||Xc.getBoundingRect(a,m,f,p);var v=this.transform;if(v&&!i&&(JD.copy(e),JD.applyTransform(v),e=JD),i)h=e.x,d=e.y;else{var y=r.textPosition,x=r.textDistance;if(y instanceof Array)h=e.x+WD(y[0],e.width),d=e.y+WD(y[1],e.height),f=f||"left";else{var _=Xc.adjustTextPositionOnRect(y,e,x);h=_.x,d=_.y,f=f||_.textAlign,p=p||_.textVerticalAlign}}h=Xc.adjustTextX(h,n.width,f),d=Xc.adjustTextY(d,n.height,p),d+=n.height/2;var b,w,S,M=PD.createNode,A=this._textVmlEl;A?w=(b=(S=A.firstChild).nextSibling).nextSibling:(A=M("line"),b=M("path"),w=M("textpath"),S=M("skew"),w.style["v-text-align"]="left",VD(A),b.textpathok=!0,w.on=!0,A.from="0 0",A.to="1000 0.05",FD(A,S),FD(A,b),FD(A,w),this._textVmlEl=A);var C=[h,d],I=A.style;v&&i?(TD(C,C,v),S.on=!0,S.matrix=v[0].toFixed(3)+","+v[2].toFixed(3)+","+v[1].toFixed(3)+","+v[3].toFixed(3)+",0,0",S.offset=(kD(C[0])||0)+","+(kD(C[1])||0),S.origin="0 0",I.left="0px",I.top="0px"):(S.on=!1,I.left=kD(h)+"px",I.top=kD(d)+"px"),w.string=function(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}(a);try{w.style.font=m}catch(t){}XD(A,"fill",{fill:r.textFill,opacity:r.opacity},this),XD(A,"stroke",{stroke:r.textStroke,opacity:r.opacity,lineDash:r.lineDash},this),A.style.zIndex=HD(this.zlevel,this.z,this.z2),FD(t,A)}},eE.removeRectText=function(t){jD(t,this._textVmlEl),this._textVmlEl=null},eE.appendRectText=function(t){FD(t,this._textVmlEl)}}bf.prototype.brushVML=function(t){var e=this.style;null!=e.text?this.drawRectText(t,{x:e.x||0,y:e.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(t)},bf.prototype.onRemove=function(t){this.removeRectText(t)},bf.prototype.onAdd=function(t){this.appendRectText(t)}}var nE=du.each;Sl.prototype={constructor:Sl,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(){var t=this.storage.getDisplayList(!0,!0);this._paintList(t)},_paintList:function(t){for(var e=this._vmlRoot,n=0;n<t.length;n++){var i=t[n];i.invisible||i.ignore?(i.__alreadyNotVisible||i.onRemove(e),i.__alreadyNotVisible=!0):(i.__alreadyNotVisible&&i.onAdd(e),i.__alreadyNotVisible=!1,i.__dirty&&(i.beforeBrush&&i.beforeBrush(),(i.brushVML||i.brush).call(i,e),i.afterBrush&&i.afterBrush())),i.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(e),this._firstPaint=!1)},resize:function(t,e){t=null==t?this._getWidth():t,e=null==e?this._getHeight():e;if(this._width!=t||this._height!=e){this._width=t,this._height=e;var n=this._vmlViewport.style;n.width=t+"px",n.height=e+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var t=this.root,e=t.currentStyle;return(t.clientWidth||wl(e.width))-wl(e.paddingLeft)-wl(e.paddingRight)|0},_getHeight:function(){var t=this.root,e=t.currentStyle;return(t.clientHeight||wl(e.height))-wl(e.paddingTop)-wl(e.paddingBottom)|0}},nE(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(t){Sl.prototype[t]=function(t){return function(){Ju('In IE8.0 VML mode painter not support method "'+t+'"')}}(t)});var iE=Sl;(0,Bh.registerPainter)("vml",iE);var rE="http://www.w3.org/2000/svg",aE={createElement:function(t){return document.createElementNS(rE,t)}},oE=aE.createElement,sE=Rd.CMD,lE=Array.prototype.join,uE="none",cE=Math.round,hE=Math.sin,dE=Math.cos,fE=Math.PI,pE=2*Math.PI,gE=180/fE,mE=1e-4,vE={brush:function(t){var e=t.style,n=t.__svgEl;n||(n=oE("path"),t.__svgEl=n),t.path||t.createPathProxy();var i=t.path;if(t.__dirtyPath){i.beginPath(),t.buildPath(i,t.shape),t.__dirtyPath=!1;var r=function(t){for(var e=[],n=t.data,i=t.len(),r=0;r<i;){var a="",o=0;switch(n[r++]){case sE.M:a="M",o=2;break;case sE.L:a="L",o=2;break;case sE.Q:a="Q",o=4;break;case sE.C:a="C",o=6;break;case sE.A:var s=n[r++],l=n[r++],u=n[r++],c=n[r++],h=n[r++],d=n[r++],f=n[r++],p=n[r++],g=Math.abs(d),m=Al(g-pE)&&!Al(g),v=!1;v=g>=pE||!Al(g)&&(d>-fE&&d<0||d>fE)==!!p;var y=Ml(s+u*dE(h)),x=Ml(l+c*hE(h));m&&(d=p?pE-1e-4:1e-4-pE,v=!0,9===r&&e.push("M",y,x));var _=Ml(s+u*dE(h+d)),b=Ml(l+c*hE(h+d));e.push("A",Ml(u),Ml(c),cE(f*gE),+v,+p,_,b);break;case sE.Z:a="Z";break;case sE.R:_=Ml(n[r++]),b=Ml(n[r++]);var w=Ml(n[r++]),S=Ml(n[r++]);e.push("M",_,b,"L",_+w,b,"L",_+w,b+S,"L",_,b+S,"L",_,b)}a&&e.push(a);for(var M=0;M<o;M++)e.push(Ml(n[r++]))}return e.join(" ")}(i);r.indexOf("NaN")<0&&Il(n,"d",r)}Pl(n,e),Cl(n,t.transform),null!=e.text&&bE(t,t.getBoundingRect())}},yE={brush:function(t){var e=t.style,n=e.image;if(n instanceof HTMLImageElement&&(n=n.src),n){var i=e.x||0,r=e.y||0,a=e.width,o=e.height,s=t.__svgEl;s||(s=oE("image"),t.__svgEl=s),n!==t.__imageSrc&&(function(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}(s,"href",n),t.__imageSrc=n),Il(s,"width",a),Il(s,"height",o),Il(s,"x",i),Il(s,"y",r),Cl(s,t.transform),null!=e.text&&bE(t,t.getBoundingRect())}}},xE={},_E=new hc,bE=function(t,e,n){var i=t.style;t.__dirty&&nh.normalizeTextStyle(i,!0);var r=i.text;if(null!=r){r+="";var a=t.__textSvgEl;a||(a=oE("text"),t.__textSvgEl=a);var o,s,l=i.textPosition,u=i.textDistance,c=i.textAlign||"left";"number"==typeof i.fontSize&&(i.fontSize+="px");var h=i.font||[i.fontStyle||"",i.fontWeight||"",i.fontSize||"",i.fontFamily||""].join(" ")||Xc.DEFAULT_FONT,d=Tl(i.textVerticalAlign),f=(n=Xc.getBoundingRect(r,h,c,d)).lineHeight;if(l instanceof Array)o=e.x+l[0],s=e.y+l[1];else{var p=Xc.adjustTextPositionOnRect(l,e,u);o=p.x,s=p.y,d=Tl(p.textVerticalAlign),c=p.textAlign}Il(a,"alignment-baseline",d),h&&(a.style.font=h);var g=i.textPadding;if(Il(a,"x",o),Il(a,"y",s),Pl(a,i,!0),t instanceof bf||t.style.transformText)Cl(a,t.transform);else{if(t.transform)_E.copy(e),_E.applyTransform(t.transform),e=_E;else{var m=t.transformCoordToGlobal(e.x,e.y);e.x=m[0],e.y=m[1]}var v=i.textOrigin;"center"===v?(o=n.width/2+o,s=n.height/2+s):v&&(o=v[0]+o,s=v[1]+s);var y=-i.textRotation||0,x=Mu.create();Mu.rotate(x,t.transform,y),Cl(a,x)}var _=r.split("\n"),b=_.length,w=c;"left"===w?(w="start",g&&(o+=g[3])):"right"===w?(w="end",g&&(o-=g[1])):"center"===w&&(w="middle",g&&(o+=(g[3]-g[1])/2));var S=0;if("baseline"===d?(S=-n.height+f,g&&(S-=g[2])):"middle"===d?(S=(-n.height+f)/2,g&&(s+=(g[0]-g[2])/2)):g&&(S+=g[0]),t.__text!==r||t.__textFont!==h){var M=t.__tspanList||[];for(t.__tspanList=M,C=0;C<b;C++)(I=M[C])?I.innerHTML="":(I=M[C]=oE("tspan"),a.appendChild(I),Il(I,"alignment-baseline",d),Il(I,"text-anchor",w)),Il(I,"x",o),Il(I,"y",s+C*f+S),I.appendChild(document.createTextNode(_[C]));for(;C<M.length;C++)a.removeChild(M[C]);M.length=b,t.__text=r,t.__textFont=h}else if(t.__tspanList.length)for(var A=t.__tspanList.length,C=0;C<A;++C){var I=t.__tspanList[C];I&&(Il(I,"x",o),Il(I,"y",s+C*f+S))}}};xE.drawRectText=bE,xE.brush=function(t){var e=t.style;null!=e.text&&(e.textPosition=[0,0],bE(t,{x:e.x||0,y:e.y||0,width:0,height:0},t.getBoundingRect()))};var wE={path:vE,image:yE,text:xE};Ol.prototype={diff:function(t,e,n){n||(n=function(t,e){return t===e}),this.equals=n;var i=this;t=t.slice();var r=(e=e.slice()).length,a=t.length,o=1,s=r+a,l=[{newPos:-1,components:[]}],u=this.extractCommon(l[0],e,t,0);if(l[0].newPos+1>=r&&u+1>=a){for(var c=[],h=0;h<e.length;h++)c.push(h);return[{indices:c,count:e.length}]}for(;o<=s;){var d=function(){for(var n=-1*o;n<=o;n+=2){var s,u=l[n-1],c=l[n+1],h=(c?c.newPos:0)-n;u&&(l[n-1]=void 0);var d=u&&u.newPos+1<r,f=c&&0<=h&&h<a;if(d||f){if(!d||f&&u.newPos<c.newPos?(s=function(t){return{newPos:t.newPos,components:t.components.slice(0)}}(c),i.pushComponent(s.components,void 0,!0)):((s=u).newPos++,i.pushComponent(s.components,!0,void 0)),h=i.extractCommon(s,e,t,n),s.newPos+1>=r&&h+1>=a)return function(t,e,n,i){for(var r=0,a=e.length,o=0,s=0;r<a;r++){var l=e[r];if(l.removed){for(var u=[],c=s;c<s+l.count;c++)u.push(c);l.indices=u,s+=l.count}else{for(u=[],c=o;c<o+l.count;c++)u.push(c);l.indices=u,o+=l.count,l.added||(s+=l.count)}}return e}(0,s.components);l[n]=s}else l[n]=void 0}o++}();if(d)return d}},pushComponent:function(t,e,n){var i=t[t.length-1];i&&i.added===e&&i.removed===n?t[t.length-1]={count:i.count+1,added:e,removed:n}:t.push({count:1,added:e,removed:n})},extractCommon:function(t,e,n,i){for(var r=e.length,a=n.length,o=t.newPos,s=o-i,l=0;o+1<r&&s+1<a&&this.equals(e[o+1],n[s+1]);)o++,s++,l++;return l&&t.components.push({count:l}),t.newPos=o,s},tokenize:function(t){return t.slice()},join:function(t){return t.slice()}};var SE=new Ol,ME=function(t,e,n){return SE.diff(t,e,n)},AE=aE.createElement,CE=wE.path,IE=wE.image,PE=wE.text;kl.prototype.createElement=AE,kl.prototype.getDefs=function(t){var e=this._svgRoot,n=this._svgRoot.getElementsByTagName("defs");return 0===n.length?t?((n=e.insertBefore(this.createElement("defs"),e.firstChild)).contains||(n.contains=function(t){var e=n.children;if(!e)return!1;for(var i=e.length-1;i>=0;--i)if(e[i]===t)return!0;return!1}),n):null:n[0]},kl.prototype.update=function(t,e){if(t){var n=this.getDefs(!1);if(t[this._domName]&&n.contains(t[this._domName]))"function"==typeof e&&e(t);else{var i=this.add(t);i&&(t[this._domName]=i)}}},kl.prototype.addDom=function(t){this.getDefs(!0).appendChild(t)},kl.prototype.removeDom=function(t){var e=this.getDefs(!1);e&&t[this._domName]&&(e.removeChild(t[this._domName]),t[this._domName]=null)},kl.prototype.getDoms=function(){var t=this.getDefs(!1);if(!t)return[];var e=[];return du.each(this._tagNames,function(n){var i=t.getElementsByTagName(n);e=e.concat([].slice.call(i))}),e},kl.prototype.markAllUnused=function(){var t=this.getDoms(),e=this;du.each(t,function(t){t[e._markLabel]="0"})},kl.prototype.markUsed=function(t){t&&(t[this._markLabel]="1")},kl.prototype.removeUnused=function(){var t=this.getDefs(!1);if(t){var e=this.getDoms(),n=this;du.each(e,function(e){"1"!==e[n._markLabel]&&t.removeChild(e)})}},kl.prototype.getSvgProxy=function(t){return t instanceof rf?CE:t instanceof sh?IE:t instanceof bf?PE:CE},kl.prototype.getTextSvgElement=function(t){return t.__textSvgEl},kl.prototype.getSvgElement=function(t){return t.__svgEl};var TE=kl;du.inherits(Dl,TE),Dl.prototype.addWithoutUpdate=function(t,e){if(e&&e.style){var n=this;du.each(["fill","stroke"],function(i){if(e.style[i]&&("linear"===e.style[i].type||"radial"===e.style[i].type)){var r,a=e.style[i],o=n.getDefs(!0);a._dom?(r=a._dom,o.contains(a._dom)||n.addDom(r)):r=n.add(a),n.markUsed(e);var s=r.getAttribute("id");t.setAttribute(i,"url(#"+s+")")}})}},Dl.prototype.add=function(t){var e;if("linear"===t.type)e=this.createElement("linearGradient");else{if("radial"!==t.type)return Ju("Illegal gradient type."),null;e=this.createElement("radialGradient")}return t.id=t.id||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-gradient-"+t.id),this.updateDom(t,e),this.addDom(e),e},Dl.prototype.update=function(t){var e=this;TE.prototype.update.call(this,t,function(){var n=t.type,i=t._dom.tagName;"linear"===n&&"linearGradient"===i||"radial"===n&&"radialGradient"===i?e.updateDom(t,t._dom):(e.removeDom(t),e.add(t))})},Dl.prototype.updateDom=function(t,e){if("linear"===t.type)e.setAttribute("x1",t.x),e.setAttribute("y1",t.y),e.setAttribute("x2",t.x2),e.setAttribute("y2",t.y2);else{if("radial"!==t.type)return void Ju("Illegal gradient type.");e.setAttribute("cx",t.x),e.setAttribute("cy",t.y),e.setAttribute("r",t.r)}t.global?e.setAttribute("gradientUnits","userSpaceOnUse"):e.setAttribute("gradientUnits","objectBoundingBox"),e.innerHTML="";for(var n=t.colorStops,i=0,r=n.length;i<r;++i){var a=this.createElement("stop");a.setAttribute("offset",100*n[i].offset+"%"),a.setAttribute("stop-color",n[i].color),e.appendChild(a)}t._dom=e},Dl.prototype.markUsed=function(t){if(t.style){var e=t.style.fill;e&&e._dom&&TE.prototype.markUsed.call(this,e._dom),(e=t.style.stroke)&&e._dom&&TE.prototype.markUsed.call(this,e._dom)}};var OE=Dl;du.inherits(El,TE),El.prototype.update=function(t){var e=this.getSvgElement(t);e&&this.updateDom(e,t.__clipPaths,!1);var n=this.getTextSvgElement(t);n&&this.updateDom(n,t.__clipPaths,!0),this.markUsed(t)},El.prototype.updateDom=function(t,e,n){if(e&&e.length>0){var i,r,a=this.getDefs(!0),o=e[0],s=n?"_textDom":"_dom";o[s]?(r=o[s].getAttribute("id"),i=o[s],a.contains(i)||a.appendChild(i)):(r="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,(i=this.createElement("clipPath")).setAttribute("id",r),a.appendChild(i),o[s]=i);var l=this.getSvgProxy(o);if(o.transform&&o.parent.invTransform&&!n){var u=Array.prototype.slice.call(o.transform);Mu.mul(o.transform,o.parent.invTransform,o.transform),l.brush(o),o.transform=u}else l.brush(o);var c=this.getSvgElement(o);i.innerHTML="",i.appendChild(c.cloneNode()),t.setAttribute("clip-path","url(#"+r+")"),e.length>1&&this.updateDom(i,e.slice(1),n)}else t&&t.setAttribute("clip-path","none")},El.prototype.markUsed=function(t){var e=this;t.__clipPaths&&t.__clipPaths.length>0&&du.each(t.__clipPaths,function(t){t._dom&&TE.prototype.markUsed.call(e,t._dom),t._textDom&&TE.prototype.markUsed.call(e,t._textDom)})};var kE=El;du.inherits(Ll,TE),Ll.prototype.addWithoutUpdate=function(t,e){if(e&&Nl(e.style)){var n,i=e.style;i._shadowDom?(n=i._shadowDom,this.getDefs(!0).contains(i._shadowDom)||this.addDom(n)):n=this.add(e),this.markUsed(e);var r=n.getAttribute("id");t.style.filter="url(#"+r+")"}},Ll.prototype.add=function(t){var e=this.createElement("filter"),n=t.style;return n._shadowDomId=n._shadowDomId||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-shadow-"+n._shadowDomId),this.updateDom(t,e),this.addDom(e),e},Ll.prototype.update=function(t,e){var n=e.style;if(Nl(n)){var i=this;TE.prototype.update.call(this,e,function(t){i.updateDom(e,t._shadowDom)})}else this.remove(t,n)},Ll.prototype.remove=function(t,e){null!=e._shadowDomId&&(this.removeDom(e),t.style.filter="")},Ll.prototype.updateDom=function(t,e){var n=e.getElementsByTagName("feDropShadow");n=0===n.length?this.createElement("feDropShadow"):n[0];var i,r,a,o,s=t.style,l=t.scale&&t.scale[0]||1,u=t.scale&&t.scale[1]||1;if(s.shadowBlur||s.shadowOffsetX||s.shadowOffsetY)i=s.shadowOffsetX||0,r=s.shadowOffsetY||0,a=s.shadowBlur,o=s.shadowColor;else{if(!s.textShadowBlur)return void this.removeDom(e,s);i=s.textShadowOffsetX||0,r=s.textShadowOffsetY||0,a=s.textShadowBlur,o=s.textShadowColor}n.setAttribute("dx",i/l),n.setAttribute("dy",r/u),n.setAttribute("flood-color",o);var c=a/2/l+" "+a/2/u;n.setAttribute("stdDeviation",c),e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width",Math.ceil(a/2*200)+"%"),e.setAttribute("height",Math.ceil(a/2*200)+"%"),e.appendChild(n),s._shadowDom=e},Ll.prototype.markUsed=function(t){var e=t.style;e&&e._shadowDom&&TE.prototype.markUsed.call(this,e._shadowDom)};var DE=Ll,EE=aE.createElement,LE=du.each,NE=wE.path,RE=wE.image,BE=wE.text,zE=function(t,e,n,i){this.root=t,this.storage=e,this._opts=n=du.extend({},n||{});var r=EE("svg");r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("version","1.1"),r.setAttribute("baseProfile","full"),r.style.cssText="user-select:none;position:absolute;left:0;top:0;",this.gradientManager=new OE(i,r),this.clipPathManager=new kE(i,r),this.shadowManager=new DE(i,r);var a=document.createElement("div");a.style.cssText="overflow:hidden;position:relative",this._svgRoot=r,this._viewport=a,t.appendChild(a),a.appendChild(r),this.resize(n.width,n.height),this._visibleList=[]};zE.prototype={constructor:zE,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(){var t=this.storage.getDisplayList(!0);this._paintList(t)},setBackgroundColor:function(t){this._viewport.style.background=t},_paintList:function(t){this.gradientManager.markAllUnused(),this.clipPathManager.markAllUnused(),this.shadowManager.markAllUnused();var e,n=this._svgRoot,i=this._visibleList,r=t.length,a=[];for(e=0;e<r;e++){var o=function(t){return t instanceof rf?NE:t instanceof sh?RE:t instanceof bf?BE:NE}(f=t[e]),s=jl(f)||Fl(f);f.invisible||(f.__dirty&&(o&&o.brush(f),this.clipPathManager.update(f),f.style&&(this.gradientManager.update(f.style.fill),this.gradientManager.update(f.style.stroke),this.shadowManager.update(s,f)),f.__dirty=!1),a.push(f))}var l,u=ME(i,a);for(e=0;e<u.length;e++)if((h=u[e]).removed)for(d=0;d<h.count;d++){s=jl(f=i[h.indices[d]]);var c=Fl(f);Gl(n,s),Gl(n,c)}for(e=0;e<u.length;e++){var h=u[e];if(h.added)for(d=0;d<h.count;d++){s=jl(f=a[h.indices[d]]),c=Fl(f);l?zl(n,s,l):Vl(n,s),s?zl(n,c,s):l?zl(n,c,l):Vl(n,c),zl(n,c,s),l=c||s||l,this.gradientManager.addWithoutUpdate(s,f),this.shadowManager.addWithoutUpdate(l,f),this.clipPathManager.markUsed(f)}else if(!h.removed)for(var d=0;d<h.count;d++){var f=a[h.indices[d]];l=s=Fl(f)||jl(f)||l,this.gradientManager.markUsed(f),this.gradientManager.addWithoutUpdate(s,f),this.shadowManager.markUsed(f),this.shadowManager.addWithoutUpdate(s,f),this.clipPathManager.markUsed(f)}}this.gradientManager.removeUnused(),this.clipPathManager.removeUnused(),this.shadowManager.removeUnused(),this._visibleList=a},_getDefs:function(t){var e=this._svgRoot,n=this._svgRoot.getElementsByTagName("defs");return 0===n.length?t?((n=e.insertBefore(EE("defs"),e.firstChild)).contains||(n.contains=function(t){var e=n.children;if(!e)return!1;for(var i=e.length-1;i>=0;--i)if(e[i]===t)return!0;return!1}),n):null:n[0]},resize:function(t,e){var n=this._viewport;n.style.display="none";var i=this._opts;if(null!=t&&(i.width=t),null!=e&&(i.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||this._height!==e){this._width=t,this._height=e;var r=n.style;r.width=t+"px",r.height=e+"px";var a=this._svgRoot;a.setAttribute("width",t),a.setAttribute("height",e)}},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,n=["width","height"][t],i=["clientWidth","clientHeight"][t],r=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var o=this.root,s=document.defaultView.getComputedStyle(o);return(o[i]||Rl(s[n])||Rl(o.style[n]))-(Rl(s[r])||0)-(Rl(s[a])||0)|0},dispose:function(){this.root.innerHTML="",this._svgRoot=this._viewport=this.storage=null},clear:function(){this._viewport&&this.root.removeChild(this._viewport)},pathToDataUrl:function(){return this.refresh(),"data:image/svg+xml;charset=UTF-8,"+this._svgRoot.outerHTML}},LE(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(t){zE.prototype[t]=function(t){return function(){Ju('In SVG mode painter not support method "'+t+'"')}}(t)});var VE=zE;(0,Bh.registerPainter)("svg",VE),function(t){t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")&&t.default}(t(function(t,e){!function(){for(var t in T_){if(null==T_||!T_.hasOwnProperty(t)||"default"===t||"__esModule"===t)return;e[t]=T_[t]}}(),function(){for(var t in P_){if(null==P_||!P_.hasOwnProperty(t)||"default"===t||"__esModule"===t)return;e[t]=P_[t]}}()}));var GE=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},FE="object"==typeof Zl&&Zl&&Zl===Object&&Zl,jE="object"==typeof self&&self&&self.Object===Object&&self,HE=FE||jE||Function("return this")(),WE=function(){return HE.Date.now()},YE=HE.Symbol,XE=Object.prototype,UE=XE.hasOwnProperty,qE=XE.toString,ZE=YE?YE.toStringTag:void 0,KE=function(t){var e=UE.call(t,ZE),n=t[ZE];try{t[ZE]=void 0;var i=!0}catch(t){}var r=qE.call(t);return i&&(e?t[ZE]=n:delete t[ZE]),r},$E=Object.prototype.toString,JE=function(t){return $E.call(t)},QE="[object Null]",tL="[object Undefined]",eL=YE?YE.toStringTag:void 0,nL=function(t){return null==t?void 0===t?tL:QE:eL&&eL in Object(t)?KE(t):JE(t)},iL=function(t){return null!=t&&"object"==typeof t},rL="[object Symbol]",aL=function(t){return"symbol"==typeof t||iL(t)&&nL(t)==rL},oL=NaN,sL=/^\s+|\s+$/g,lL=/^[-+]0x[0-9a-f]+$/i,uL=/^0b[01]+$/i,cL=/^0o[0-7]+$/i,hL=parseInt,dL=function(t){if("number"==typeof t)return t;if(aL(t))return oL;if(GE(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=GE(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(sL,"");var n=uL.test(t);return n||cL.test(t)?hL(t.slice(2),n?2:8):lL.test(t)?oL:+t},fL="Expected a function",pL=Math.max,gL=Math.min,mL=function(t,e,n){function i(e){var n=l,i=u;return l=u=void 0,p=e,h=t.apply(i,n)}function r(t){var n=t-f;return void 0===f||n>=e||n<0||m&&t-p>=c}function a(){var t=WE();if(r(t))return o(t);d=setTimeout(a,function(t){var n=e-(t-f);return m?gL(n,c-(t-p)):n}(t))}function o(t){return d=void 0,v&&l?i(t):(l=u=void 0,h)}function s(){var t=WE(),n=r(t);if(l=arguments,u=this,f=t,n){if(void 0===d)return function(t){return p=t,d=setTimeout(a,e),g?i(t):h}(f);if(m)return d=setTimeout(a,e),i(f)}return void 0===d&&(d=setTimeout(a,e)),h}var l,u,c,h,d,f,p=0,g=!1,m=!1,v=!0;if("function"!=typeof t)throw new TypeError(fL);return e=dL(e)||0,GE(n)&&(g=!!n.leading,c=(m="maxWait"in n)?pL(dL(n.maxWait)||0,e):c,v="trailing"in n?!!n.trailing:v),s.cancel=function(){void 0!==d&&clearTimeout(d),p=0,l=f=u=d=void 0},s.flush=function(){return void 0===d?h:o(WE())},s},vL=null,yL=null,xL='.resize-triggers{visibility:hidden;opacity:0}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',_L=0,bL=null;!function(){if("undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style"),n=" .echarts { width: 600px; height: 400px; } ";e.type="text/css",e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n)),t.appendChild(e)}}();var wL=["legendselectchanged","legendselected","legendunselected","legendunscroll","datazoom","datarangeselected","timelinechanged","timelineplaychanged","restore","dataviewchanged","magictypechanged","geoselectchanged","geoselected","geounselected","pieselectchanged","pieselected","pieunselected","mapselectchanged","mapselected","mapunselected","axisareaselected","focusnodeadjacency","unfocusnodeadjacency","brush","brushselected","rendered","finished","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];return{render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"echarts"})},staticRenderFns:[],props:{options:Object,theme:[String,Object],initOptions:Object,group:String,autoResize:Boolean,watchShallow:Boolean,manualUpdate:Boolean},data:function(){return{lastArea:0}},watch:{group:function(t){this.chart.group=t}},methods:{mergeOptions:function(t,e,n){this.manualUpdate&&(this.manualOptions=t),this.chart?this.delegateMethod("setOption",t,e,n):this.init()},appendData:function(t){this.delegateMethod("appendData",t)},resize:function(t){this.delegateMethod("resize",t)},dispatchAction:function(t){this.delegateMethod("dispatchAction",t)},convertToPixel:function(t,e){return this.delegateMethod("convertToPixel",t,e)},convertFromPixel:function(t,e){return this.delegateMethod("convertFromPixel",t,e)},containPixel:function(t,e){return this.delegateMethod("containPixel",t,e)},showLoading:function(t,e){this.delegateMethod("showLoading",t,e)},hideLoading:function(){this.delegateMethod("hideLoading")},getDataURL:function(t){return this.delegateMethod("getDataURL",t)},getConnectedDataURL:function(t){return this.delegateMethod("getConnectedDataURL",t)},clear:function(){this.delegateMethod("clear")},dispose:function(){this.delegateMethod("dispose")},delegateMethod:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return this.chart||this.init(),(i=this.chart)[t].apply(i,e);var i},delegateGet:function(t,e){return this.chart||this.init(),this.chart[e]()},getArea:function(){return this.$el.offsetWidth*this.$el.offsetHeight},init:function(){var t=this;if(!this.chart){var e=T_.init(this.$el,this.theme,this.initOptions);this.group&&(e.group=this.group),e.setOption(this.manualOptions||this.options||{},!0),wL.forEach(function(n){e.on(n,function(e){t.$emit(n,e)})}),this.autoResize&&(this.lastArea=this.getArea(),this.__resizeHandler=mL(function(){0===t.lastArea?(t.mergeOptions({},!0),t.resize(),t.mergeOptions(t.options||t.manualOptions||{},!0)):t.resize(),t.lastArea=t.getArea()},100,{leading:!0}),function(t,e){if(t.__resize_mutation_handler__||(t.__resize_mutation_handler__=function(){var t=Wl(this),e=t.rendered,n=t.detached;e!==this.__resize_rendered__&&(!n&&this.__resize_triggers__&&(Ul(this),this.addEventListener("scroll",Yl,!0)),this.__resize_rendered__=e,Xl(this))}.bind(t)),!t.__resize_listeners__)if(t.__resize_listeners__=[],window.ResizeObserver){var n=t.offsetWidth,i=t.offsetHeight,r=new ResizeObserver(function(){(t.__resize_observer_triggered__||(t.__resize_observer_triggered__=!0,t.offsetWidth!==n||t.offsetHeight!==i))&&Xl(t)}),a=Wl(t),o=a.detached,s=a.rendered;t.__resize_observer_triggered__=!1===o&&!1===s,t.__resize_observer__=r,r.observe(t)}else if(t.attachEvent&&t.addEventListener)t.__resize_legacy_resize_handler__=function(){Xl(t)},t.attachEvent("onresize",t.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",t.__resize_mutation_handler__);else if(_L||(bL=function(t){var e=document.createElement("style");return e.type="text/css",e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),(document.querySelector("head")||document.body).appendChild(e),e}(xL)),function(t){var e=getComputedStyle(t).position;"static"===e&&(t.style.position="relative"),t.__resize_old_position__=e,t.__resize_last__={};var n=Hl("div",{className:"resize-triggers"}),i=Hl("div",{className:"resize-expand-trigger"}),r=Hl("div"),a=Hl("div",{className:"resize-contract-trigger"});i.appendChild(r),n.appendChild(i),n.appendChild(a),t.appendChild(n),t.__resize_triggers__={triggers:n,expand:i,expandChild:r,contract:a},Ul(t),t.addEventListener("scroll",Yl,!0),t.__resize_last__={width:t.offsetWidth,height:t.offsetHeight}}(t),t.__resize_rendered__=Wl(t).rendered,window.MutationObserver){var l=new MutationObserver(t.__resize_mutation_handler__);l.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),t.__resize_mutation_observer__=l}t.__resize_listeners__.push(e),_L++}(this.$el,this.__resizeHandler)),Object.defineProperties(this,{width:{configurable:!0,get:function(){return t.delegateGet("width","getWidth")}},height:{configurable:!0,get:function(){return t.delegateGet("height","getHeight")}},isDisposed:{configurable:!0,get:function(){return!!t.delegateGet("isDisposed","isDisposed")}},computedOptions:{configurable:!0,get:function(){return t.delegateGet("computedOptions","getOption")}}}),this.chart=e}},destroy:function(){this.autoResize&&function(t,e){if(t.detachEvent&&t.removeEventListener)return t.detachEvent("onresize",t.__resize_legacy_resize_handler__),void document.removeEventListener("DOMSubtreeModified",t.__resize_mutation_handler__);var n=t.__resize_listeners__;n.splice(n.indexOf(e),1),n.length||(t.__resize_observer__?(t.__resize_observer__.unobserve(t),t.__resize_observer__.disconnect(),t.__resize_observer__=null):(t.__resize_mutation_observer__&&(t.__resize_mutation_observer__.disconnect(),t.__resize_mutation_observer__=null),t.removeEventListener("scroll",Yl),t.removeChild(t.__resize_triggers__.triggers),t.__resize_triggers__=null),t.__resize_listeners__=null),!--_L&&bL&&bL.parentNode.removeChild(bL)}(this.$el,this.__resizeHandler),this.dispose(),this.chart=null},refresh:function(){this.chart&&(this.destroy(),this.init())}},created:function(){var t=this;this.manualUpdate||this.$watch("options",function(e,n){!t.chart&&e?t.init():t.chart.setOption(e,e!==n)},{deep:!this.watchShallow}),["theme","initOptions","autoResize","manualUpdate","watchShallow"].forEach(function(e){t.$watch(e,function(){t.refresh()},{deep:!0})})},mounted:function(){this.options&&this.init()},activated:function(){this.autoResize&&this.chart&&this.chart.resize()},beforeDestroy:function(){this.chart&&this.destroy()},connect:function(t){"string"!=typeof t&&(t=t.map(function(t){return t.chart})),T_.connect(t)},disconnect:function(t){T_.disConnect(t)},registerMap:function(t,e,n){T_.registerMap(t,e,n)},registerTheme:function(t,e){T_.registerTheme(t,e)},graphic:T_.graphic}})}).call(this,n("c8ba"))},"27c9":function(t,e,n){"use strict";var i=n("b7a6"),r=n.n(i);r.a},3008:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"menuHide"},[n("ul",{staticClass:"menuUl"},t._l(t.menuList,function(e){return n("li",{key:e.name,staticClass:"iconLi"},[n("div",{staticClass:"sub"},[n("i",{staticClass:"iconfont icon",domProps:{innerHTML:t._s(e.icon)}})]),e.children instanceof Array&&e.children.length>0?n("div",{staticClass:"drops"},[n("dropDownBox",[n("ul",{staticClass:"menuSubUl1"},[t._l(e.children,function(e){return[e.children instanceof Array&&e.children.length>0?n("li",[n("div",{staticClass:"menuTitle"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.title)+"\n\t\t\t\t\t\t\t\t\t"),n("i",{staticClass:"iconfont icon"},[t._v("")])]),n("div",{staticClass:"menuSub"},[n("dropDownBox",[n("ul",{staticClass:"menuSubUl2"},t._l(e.children,function(e){return n("li",{key:e.name},[n("div",{staticClass:"menuSubLi",on:{click:function(n){t.menuClick(e)}}},[t._v(t._s(e.title))])])}),0)])],1)]):n("li",[n("div",{staticClass:"menuTitle",on:{click:function(n){t.menuClick(e)}}},[t._v(t._s(e.title))])])]})],2)])],1):t._e()])}),0)])},r=[],a=(n("7f7f"),n("101e")),o={name:"menuHide",components:{dropDownBox:a["default"]},data:function(){return{}},computed:{menuList:function(){return this.$store.state.app.menuList}},methods:{menuClick:function(t){console.log(t);var e=t.name+","+t.title;this.$store.commit("setTagList",e),this.$store.commit("setActiveName",e),this.$store.commit("setCheckedTag",t.name),this.$store.commit("setOpenNamesList",t),this.$router.push(t.name)}}},s=o,l=(n("dd1b"),n("2877")),u=Object(l["a"])(s,i,r,!1,null,"20b234d6",null);e["default"]=u.exports},3217:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},r=[],a=(n("ac6a"),n("1688")),o=n.n(a),s={name:"editor",data:function(){return{selectedModel:{},curZoom:1,minZoom:.5,maxZoom:2,page:"",editor:"",editorHeight:400}},methods:{initG6:function(){var t=this,e=new o.a,n=new o.a.Minimap({container:"minimap",height:160,width:200}),i=new o.a.Toolbar({container:"toolbar"}),r=new o.a.Contextmenu({container:"contextmenu"}),a=new o.a.Itempannel({container:"itempannel"}),s=new o.a.Detailpannel({container:"detailpannel"}),l=new o.a.Flow({graph:{container:"page",height:this.editorHeight},align:{grid:!0},noEndEdge:!1,edgeResizeable:!1});l.on("afteritemselected",function(e){t.selectedModel=e.item.getModel()}),l.on("afterzoom",function(e){t.selectedModel=e.updateMatrix[0]}),e.add(n),e.add(i),e.add(r),e.add(a),e.add(s),e.add(l),this.page=l,this.editor=e},toggleGrid:function(t){t?this.page.showGrid():this.page.hideGrid()},updateGraph:function(t,e){var n=this;this.editor.executeCommand(function(){var i=n.page.getSelected();i.forEach(function(i){var r={};r[t]=e,n.page.update(i,r)})})},changeZoom:function(t){var e=this.page;e.zoom(t)}}},l=s,u=n("2877"),c=Object(u["a"])(l,i,r,!1,null,null,null);e["default"]=c.exports},3843:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"main",staticClass:"main"},[n("div",{staticClass:"header"},[t._m(0),n("div",{staticClass:"backLogin",on:{click:t.backLogin}},[n("i",{staticClass:"iconfont headerLeft-icon icon"},[t._v("")]),t._v("注销\n\t\t\t")]),n("div",{staticClass:"userImg",on:{mouseenter:t.mouseEnterUser,mouseleave:t.mouseleaveUser}},[n("div",{staticClass:"content"},[t._m(1),n("div",{staticClass:"title col"},[t._v("\n\t\t\t\t\t\tadmin\n\t\t\t\t\t")]),n("div",{staticClass:"menuIcon col"},[n("div",{staticClass:"iconfont headerLeft-icon icon",style:{transform:"rotateZ("+t.iconZ+"deg)"}},[t._v("")])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.popupShow,expression:"popupShow"}],staticClass:"popup"},[t._m(2)])]),n("div",{staticClass:"fullScreen",on:{click:t.fullScreenClick}},[n("Tooltip",{attrs:{content:t.fullScreenType?"退出全屏":"全屏",placement:"bottom"}},[n("i",{staticClass:"iconfont headerLeft-icon icon",domProps:{innerHTML:t._s(t.fullScreenType?"&#xe826;":"&#xe673;")}})])],1),n("div",{staticClass:"lockScreen"},[n("Tooltip",{attrs:{content:"锁屏",placement:"bottom"}},[n("i",{staticClass:"iconfont headerLeft-icon icon",on:{click:t.lockClick}},[t._v("")])])],1),n("div",{staticClass:"message"},[n("Tooltip",{attrs:{content:"消息",placement:"bottom"}},[n("Badge",{attrs:{dot:""}},[n("Icon",{attrs:{type:"ios-notifications-outline icon",size:"26"}})],1)],1)],1)]),n("div",{staticClass:"contentMain"},[n("div",{staticClass:"mainLeft",style:{width:t.menuWidth+"px"}},[n("div",{staticClass:"menuController",on:{click:t.menuClick}},[n("Icon",{staticClass:"icon",attrs:{type:"md-menu",size:"18"}})],1),n("div",{staticClass:"menu",style:{overflow:t.menuShow?"auto":"visible"}},[n("mainMenu",{directives:[{name:"show",rawName:"v-show",value:t.menuShow,expression:"menuShow"}]}),n("menuHide",{directives:[{name:"show",rawName:"v-show",value:!t.menuShow,expression:"!menuShow"}]})],1)]),n("div",{staticClass:"mainRight",style:{marginLeft:t.menuWidth+"px"}},[n("menuTags"),n("div",{staticClass:"contentView"},[n("keep-alive",{attrs:{include:t.keepPage}},[n("router-view")],1)],1)],1)]),n("locking",{ref:"locking"})],1)},r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"logo"},[i("img",{attrs:{src:n("1202")}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"img col"},[i("img",{attrs:{src:n("4523")}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v("个人中心")])])}],a=(n("7f7f"),n("55ff")),o=n("3008"),s=n("0eb9"),l=n("da86"),u={name:"mainHome",components:{mainMenu:a["default"],menuHide:o["default"],menuTags:s["default"],locking:l["default"]},data:function(){return{msg:this.$store.state.app.name,menuWidth:220,menuShow:!0,popupShow:!1,iconZ:0,fullScreenType:!1}},computed:{keepPage:function(){return this.$store.state.app.keepPage}},methods:{initMain:function(){},menuClick:function(){var t=this;this.menuShow?(this.menuWidth=60,this.menuShow=!1):(this.menuWidth=220,setTimeout(function(){t.menuShow=!0},250))},backLogin:function(){sessionStorage.removeItem("jaxUserName"),sessionStorage.removeItem("checkedTag"),sessionStorage.removeItem("activeName"),sessionStorage.removeItem("openNames"),sessionStorage.removeItem("tags"),location.reload()},mouseEnterUser:function(){this.popupShow=!0,this.iconZ=180},mouseleaveUser:function(){this.popupShow=!1,this.iconZ=0},fullScreenClick:function(){this.FullScreen(),this.fullScreenType=!this.fullScreenType},FullScreen:function(){var t=document.body;this.fullScreenType?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()},onEscBack:function(){},lockClick:function(){this.$refs.locking.setBoxValue(1e3),sessionStorage.setItem("locking",1)}},created:function(){},watch:{$route:function(t){this.$store.dispatch("setRoutePageName",t)}},destroyed:function(){window.onresize=function(){}}},c=u,h=(n("27c9"),n("2877")),d=Object(h["a"])(c,i,r,!1,null,"837060a4",null);e["default"]=d.exports},"386b":function(t,e,n){var i=n("5ca1"),r=n("79e5"),a=n("be13"),o=/"/g,s=function(t,e,n,i){var r=String(a(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(i).replace(o,"&quot;")+'"'),s+">"+r+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(s),i(i.P+i.F*r(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},4004:function(t,e,n){},4009:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login"},[i("div",{staticClass:"content"},[i("div",{staticClass:"header"},[t._v("\n\t\t\t欢迎登陆后台系统\n\t\t")]),i("div",{staticClass:"loginInput"},[i("div",{staticClass:"inputLeft"},[i("div",{ref:"userInput",staticClass:"container userInput"},[i("input",{staticClass:"input",attrs:{id:"input",title:"请输入账号"}}),t._m(0)])]),i("div",{staticClass:"icon"},[t._m(1),i("div",{ref:"imgMain",staticClass:"iconMain col"},[i("img",{staticClass:"img",attrs:{src:n("8744")}})]),t._m(2)]),i("div",{staticClass:"inputRight"},[i("div",{ref:"passwordInput",staticClass:"container1 passwordInput"},[i("input",{staticClass:"input1",attrs:{id:"input1",type:"text",title:"请输入密码"}}),t._m(3)])])]),i("div",{staticClass:"loginBut"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.loginTransitionShow,expression:"loginTransitionShow"}],staticClass:"authCode"},[i("input",{staticClass:"authCodeInput",attrs:{placeholder:"输入验证码"}}),i("dropDownTop",[i("div",{staticClass:"popupBoxContent"},[i("canvas",{ref:"canvas",staticClass:"canvas",attrs:{width:"120",height:"40"}}),i("i",{staticClass:"iconfont",attrs:{title:"刷新"},on:{click:t.popupBoxRefresh}},[t._v("")])])])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.loginTransitionShow,expression:"loginTransitionShow"}],staticClass:"submit"},[i("input",{staticClass:"subInput",attrs:{type:"button",value:"登陆"},on:{click:t.login}})]),i("div",{ref:"progressBar",staticClass:"progressBar"},[i("div",{ref:"barContent",staticClass:"barContent"})])])])])},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"border",attrs:{for:"input"}},[n("div",{staticClass:"lableTitle"},[t._v("账号")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"imgLeft_Right col"},[n("div",{staticClass:"iconfont"},[t._v("")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"imgLeft_Right col"},[n("div",{staticClass:"iconfont"},[t._v("")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"border1",attrs:{for:"input1"}},[n("div",{staticClass:"lableTitle1"},[t._v("密码")])])}],a=n("e814"),o=n.n(a),s=n("ab5b"),l=n("18ed"),u=n("c276"),c={name:"login",components:{inputMain:s["default"],dropDownTop:l["default"]},data:function(){return{loginTransitionShow:!0}},methods:{popupBoxRefresh:function(){this.initData()},login:function(){var t=this,e=this.$refs.userInput.style,n=this.$refs.passwordInput.style,i=this.$refs.progressBar.style,r=this.$refs.barContent.style,a=this.$refs.imgMain.style;e.opacity=0,e.marginLeft="18px",n.opacity=0,n.marginRight="18px",setTimeout(function(){t.loginTransitionShow=!1,i.zIndex=1,i.top="-60px",r.width="100%",a.bottom="50px"},300),setTimeout(function(){t.loginTransitionShow=!0,i.zIndex=-1,i.top="-10px",r.width="0%",a.bottom="0",e.opacity=1,e.marginLeft="0",n.opacity=1,n.marginRight="0",sessionStorage.setItem("jaxUserName","admin"),u["a"].getRouterChildren(t)},3e3)},initData:function(){var t="",e=120,n=40,i=this.$refs.canvas.getContext("2d");i.fillStyle="#fff",i.fillRect(0,0,e,n);for(var r="ABCDEFGHIJKLIMNOPQRSTUVWSYZ1234567890",a=0;a<4;a++){var s=r[g(0,r.length)],l=g(23,40),u=g(-30,30);i.font=l+"px Simhei",i.textBaseline="top",i.fillStyle=m(80,150),i.save(),i.translate(30*a+15,15),i.rotate(u*Math.PI/180),i.fillText(s,-10,-10),i.restore(),t+=s}console.log(t);for(var c=0;c<20;c++){var h=r[g(0,r.length)],d=9,f=g(-30,30);i.font=d+"px Simhei",i.textBaseline="top",i.fillStyle="#808695",i.save(),i.translate(g(0,132),g(-2,42)),i.rotate(f*Math.PI/180),i.fillText(h,-10,-15),i.restore()}for(var p=0;p<3;p++)i.beginPath(),i.moveTo(g(0,e),g(0,n)),i.lineTo(g(0,e),g(0,n)),i.strokeStyle="#808695",i.stroke();function g(t,e){return o()(Math.random()*(e-t)+t)}function m(t,e){var n=g(t,e),i=g(t,e),r=g(t,e);return"rgb(".concat(n,",").concat(i,",").concat(r,")")}}},mounted:function(){var t=this;this.$nextTick(function(){t.initData()})},create:function(){}},h=c,d=(n("da56"),n("2877")),f=Object(d["a"])(h,i,r,!1,null,"594c9fc2",null);e["default"]=f.exports},4523:function(t,e,n){t.exports=n.p+"img/logs3.1b414041.jpg"},4575:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("404")])},r=[],a={name:"error404",data:function(){return{}}},o=a,s=n("2877"),l=Object(s["a"])(o,i,r,!1,null,"3ffb7cc3",null);e["default"]=l.exports},4993:function(t,e,n){var i={"./common/InputMain.vue":"ab5b","./common/dropDownBox.vue":"101e","./common/dropDownTop.vue":"18ed","./common/locking.vue":"da86","./login.vue":"4009","./main.vue":"3843","./mainComponents/error/404.vue":"4575","./mainComponents/homeMain.vue":"781d","./mainComponents/menu/menu.vue":"55ff","./mainComponents/menu/menuDrop.vue":"a08c","./mainComponents/menu/menuHide.vue":"3008","./mainComponents/menu/menuTags.vue":"0eb9","./ui/app/articleTitle.vue":"72e1","./ui/app/typeMenage.vue":"1e3c","./ui/user/action.vue":"c003","./ui/user/user.vue":"264e","./ui/user/userMessage.vue":"ac37","./ui/user/userRole.vue":"e789","./ui/workflow/component/Editor.vue":"3217","./ui/workflow/component/navigator.vue":"ef6a","./ui/workflow/component/toolbar.vue":"de1d","./ui/workflow/demo.vue":"6c76","./ui/workflow/workflow.vue":"80fb"};function r(t){var e=a(t);return n(e)}function a(t){var e=i[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}r.keys=function(){return Object.keys(i)},r.resolve=a,t.exports=r,r.id="4993"},"4de6":function(t,e,n){"use strict";var i=n("c226"),r=n.n(i);r.a},"55ff":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Menu",{ref:"sideMenu",attrs:{"active-name":t.activeName,"open-names":t.openNames,width:"auto",theme:"dark"},on:{"on-select":t.onSelectMenu,"on-open-change":t.onOpenChange}},t._l(t.menuList,function(e){return n("Submenu",{key:e.name,attrs:{name:e.name}},[n("template",{slot:"title"},[n("i",{staticClass:"iconfont",domProps:{innerHTML:t._s(e.icon)}}),t._v("\n                    "+t._s(e.title)+"\n                ")]),t._l(e.children,function(e){return[e.children instanceof Array&&e.children.length>0?n("Submenu",{attrs:{name:e.name}},[n("template",{slot:"title"},[n("i",{staticClass:"iconfont",domProps:{innerHTML:t._s(e.icon)}}),t._v("\n\t\t\t\t\t\t\t"+t._s(e.title)+"\n\t\t\t\t\t\t")]),t._l(e.children,function(e){return n("MenuItem",{key:e.name,attrs:{name:t.menuName(e)}},[t._v(t._s(e.title))])})],2):n("MenuItem",{attrs:{name:t.menuName(e)}},[t._v(t._s(e.title))])]})],2)}),1)],1)},r=[],a=(n("7f7f"),n("28a5"),{name:"mainMenu",data:function(){return{}},computed:{menuList:function(){return this.$store.state.app.menuList},activeName:function(){return this.$store.state.app.activeName},openNames:function(){return this.$store.state.app.openNames}},methods:{onSelectMenu:function(t){this.$store.commit("setTagList",t);var e=t.split(",");this.$store.commit("setCheckedTag",e[0]),this.$router.push(e[0])},onOpenChange:function(t){this.$store.commit("setAllOpenNames",t)},menuName:function(t){return t.name+","+t.title}},updated:function(){var t=this;this.$nextTick(function(){t.$refs.sideMenu&&t.$refs.sideMenu.updateOpened()})}}),o=a,s=n("2877"),l=Object(s["a"])(o,i,r,!1,null,null,null);e["default"]=l.exports},"57e7":function(t,e,n){"use strict";n("7f7f");var i={user:function(t){return[{title:"Name",key:"name"},{title:"Age",key:"age"},{title:"Address",key:"address"}]},userRole:function(t){return[{title:"名称",key:"name"},{title:"年轻",key:"age"},{title:"权限",key:"address"},{title:"操作",key:"action",align:"center",width:140,render:function(e,n){var i=[{id:1,name:"修改",color:"blue"},{id:2,name:"删除",color:"red"}],r=i.map(function(i){return e("Button",{props:{type:"default",size:"small"},style:{marginRight:"5px",color:i.color},on:{click:function(){t.edit(i.id,n.row)}}},i.name)});return e("div",r)}}]},action:function(t){return[{title:"凯撒的",key:"name"},{title:"e脸上",key:"age"},{title:"临时道路",key:"address"}]}};e["a"]=i},"5d6b":function(t,e,n){var i=n("e53d").parseInt,r=n("a1ce").trim,a=n("e692"),o=/^[-+]?0[xX]/;t.exports=8!==i(a+"08")||22!==i(a+"0x16")?function(t,e){var n=r(String(t),3);return i(n,e>>>0||(o.test(n)?16:10))}:i},"5f71":function(t,e,n){"use strict";var i=n("4004"),r=n.n(i);r.a},"6b55":function(t,e,n){},"6c76":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("demo")])},r=[],a={name:"demos",data:function(){return{}}},o=a,s=n("2877"),l=Object(s["a"])(o,i,r,!1,null,null,null);e["default"]=l.exports},7128:function(t,e,n){},"72e1":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("文章列表")])},r=[],a={name:"articleTitle",data:function(){return{}}},o=a,s=n("2877"),l=Object(s["a"])(o,i,r,!1,null,null,null);e["default"]=l.exports},7445:function(t,e,n){var i=n("63b6"),r=n("5d6b");i(i.G+i.F*(parseInt!=r),{parseInt:r})},7514:function(t,e,n){"use strict";var i=n("5ca1"),r=n("0a49")(5),a="find",o=!0;a in[]&&Array(1)[a](function(){o=!1}),i(i.P+i.F*o,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(a)},"75cb":function(t,e,n){"use strict";var i=n("1d03"),r=n.n(i);r.a},"781d":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"homes"},[t._m(0),n("div",{staticClass:"rightHome"},[n("div",{staticClass:"home_title"},[t._m(1),n("div",{staticClass:"search"},[n("InputSearch",{attrs:{borderColor:"#fff"}})],1)]),n("div",[n("Row",{attrs:{type:"flex",justify:"space-between"}},t._l(t.cardList,function(e){return n("Col",{key:e.id,staticClass:"colClass",attrs:{span:"5"}},[n("Card",{staticClass:"cardClass",style:{background:e.color},attrs:{padding:0}},[n("div",{staticClass:"context"},[n("div",{staticClass:"context_title"},[t._v("\n                                     "+t._s(e.title)+"\n                                     \n                                 ")]),n("div",{staticClass:"context_number"},[n("ICountUp",{attrs:{startVal:t.startVal,endVal:e.num,decimals:t.decimals,duration:t.duration,options:t.optionsNum},on:{ready:t.onReady}})],1)])])],1)}),1),n("br"),n("Card",[n("Row",[n("Col",[n("div",{staticClass:"echatDiv"},[n("Echats",{ref:"echarts",staticStyle:{width:"100%"},attrs:{options:t.options}})],1)])],1)],1)],1)])])])},r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"leftHome"},[i("div",{staticClass:"homeUser"},[i("div",{staticClass:"leftHome_center"},[i("div",[i("img",{staticClass:"user_img",attrs:{src:n("f076")}})]),i("div",{staticClass:"user_name"},[t._v("\n                         Brandon Jhon\n                     ")]),i("div",{staticClass:"user_icon"},[i("div",{staticClass:"icon1"},[i("i",{staticClass:"iconfont"},[t._v("")])]),i("div",{staticClass:"icon2"},[i("i",{staticClass:"iconfont"},[t._v("")])]),i("div",{staticClass:"icon3"},[i("i",{staticClass:"iconfont icon_3"},[t._v("")])])])])]),i("div",{staticClass:"homeList"},[i("ul",[i("li",[t._v("My Activity")]),i("li"),i("li"),i("li")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home_title_left"},[n("div",{staticClass:"title_top"},[t._v("\n                         Dashboard\n                     ")]),n("div",[t._v("\n                         See the progress and decline\n                     ")])])}],a=n("2651"),o=n.n(a),s={getOptions:function(t){var e=10,n=[["1970-01-01 03:02:01",3],["1970-02-01 04:02:01",15],["1970-03-01 03:02:01",24],["1970-04-01 03:02:01",9],["1970-05-01 03:02:01",30],["1970-06-01 03:02:01",21],["1970-07-01 03:02:01",50]],i=[];return i=t.data,{title:{text:"历史任务执行情况",textStyle:{color:"#0081C6"}},tooltip:{trigger:"axis"},legend:{right:10,top:0,itemGap:16,itemWidth:18,itemHeight:10,data:[{name:"执行成功(个)",icon:"circle",textStyle:{color:"green"}},{name:"总数(个)",icon:"circle",textStyle:{color:"#3399ff"}}],textStyle:{color:"#a8aab0",fontStyle:"normal",fontFamily:"微软雅黑",fontSize:12}},grid:{left:30,right:30,bottom:80},xAxis:{min:"1970-01-01 03:02:01",max:"1970-12-01 03:02:01",type:"time",axisLine:{onZero:!1},splitLine:{show:!1}},yAxis:{min:0,max:60,type:"value",axisLine:{onZero:!1}},dataZoom:[{type:"slider",xAxisIndex:0,filterMode:"none",end:60},{type:"inside",xAxisIndex:0,filterMode:"none"}],series:[{id:"a",name:"执行成功(个)",type:"line",smooth:!0,itemStyle:{color:"green"},symbolSize:e,data:i,label:{normal:{show:!0,position:"top",textStyle:{color:"#000",fontStyle:"normal",fontFamily:"微软雅黑",fontSize:12}}}},{id:"a1",name:"总数(个)",type:"line",smooth:!0,itemStyle:{color:"blue",borderWidth:0},symbolSize:10,data:n}]}},getOptions1:function(t){var e=10,n=[["1970-01-01 03:02:01",3],["1970-02-01 04:02:01",15],["1970-03-01 03:02:01",24],["1970-04-01 03:02:01",9],["1970-05-01 03:02:01",30],["1970-06-01 03:02:01",21],["1970-07-01 03:02:01",50]],i=[];return i=t.data,{title:{text:"历史任务执行情况",textStyle:{color:"#0081C6"}},tooltip:{trigger:"axis"},legend:{right:10,top:0,itemGap:16,itemWidth:18,itemHeight:10,data:[{name:"执行成功(个)",icon:"circle",textStyle:{color:"green"}},{name:"总数(个)",icon:"circle",textStyle:{color:"#3399ff"}}],textStyle:{color:"#a8aab0",fontStyle:"normal",fontFamily:"微软雅黑",fontSize:12}},grid:{left:30,right:30,bottom:80,show:!1},xAxis:{min:"1970-01-01 03:02:01",max:"1970-07-01 03:02:01",type:"time",axisLine:{onZero:!1,show:!1,lineStyle:{color:["#b1a3a3"]}},splitLine:{show:!1},axisTick:{show:!1}},yAxis:{min:0,max:60,type:"value",axisLine:{onZero:!1,show:!1,lineStyle:{color:["#b1a3a3"]}},splitLine:{show:!0,lineStyle:{color:["rgb(235, 223, 223)"]}},axisTick:{show:!1}},series:[{id:"a",name:"执行成功(个)",type:"line",smooth:!0,itemStyle:{normal:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#e26464"},{offset:1,color:"rgb(68, 183, 245)"}],globalCoord:!1}}},markPoint:{data:[{name:"最大值",type:"max"}]},symbolSize:e,data:i,label:{normal:{show:!0,position:"top",textStyle:{color:"#ccc",fontStyle:"normal",fontFamily:"微软雅黑",fontSize:12}}}},{id:"a1",type:"line",smooth:!0,itemStyle:{color:"rgba(128, 128, 128, 0.0)",borderWidth:0},areaStyle:{normal:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgb(68, 183, 245)"},{offset:1,color:"#fff"}]}}},symbolSize:0,data:n}]}}},l=s,u={data:function(){return{data:[["1970-01-01 03:02:01",5],["1970-02-01 04:02:01",20],["1970-03-01 03:02:01",24],["1970-04-01 03:02:01",30],["1970-05-01 03:02:01",40],["1970-06-01 03:02:01",23],["1970-07-01 03:02:01",12]]}},methods:{}},c=n("1ddb"),h=n.n(c),d={components:{Echats:o.a,ICountUp:h.a},mixins:[u],data:function(){return{startVal:0,decimals:0,duration:2,optionsNum:{useEasing:!0,useGrouping:!0,separator:",",decimal:".",prefix:"",suffix:""},data:[["1970-01-01 03:02:01",5],["1970-02-01 04:02:01",20],["1970-03-01 03:02:01",24],["1970-04-01 03:02:01",30],["1970-05-01 03:02:01",40],["1970-06-01 03:02:01",23],["1970-07-01 03:02:01",55]],value:"",inputInitData:"",cardList:[{id:1,title:"Steem Dollar",num:421980,color:"linear-gradient(to right, rgb(87, 202, 87), rgb(179, 247, 179))"},{id:2,title:"Steem Power",num:92300,color:"linear-gradient(to right, rgb(187, 139, 233),rgb(221, 196, 245))"},{id:3,title:"Saving",num:2388,color:"linear-gradient(to right,   rgb(243, 141, 82), rgb(243, 176, 137))"},{id:4,title:"File see",num:4899,color:"linear-gradient(to bottom,  #3b548f, #6a81b6)"}]}},methods:{toggleShow:function(t){console.log(t),console.log(this)},init:function(){var t=this;setTimeout(function(){window.onresize=function(){t.$refs.echarts.resize()}},400)},ButClick:function(){this.toggleShow(11),this.data.push(["1970-08-01 03:02:01",50])},onReady:function(){}},computed:{options:function(){return l.getOptions1(this)}},mounted:function(){var t=this;this.$nextTick(function(){t.init()})},destroyed:function(){window.onresize=function(){}}},f=d,p=(n("20d5"),n("2877")),g=Object(p["a"])(f,i,r,!1,null,"5b8a05e1",null);e["default"]=g.exports},"7abd":function(t,e,n){"use strict";var i=n("b9bb"),r=n.n(i);r.a},"7bcf":function(t,e,n){"use strict";var i=n("cbfb"),r=n.n(i);r.a},"7ffa":function(t,e,n){"use strict";var i=n("7128"),r=n.n(i);r.a},"80fb":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("toolbar"),n("div",{staticClass:"main-content",style:{height:t.editorHeight+"px"}},[t._m(0),n("div",{attrs:{id:"detailpannel"}},[n("div",{staticClass:"pannel",attrs:{"data-status":"node-selected",id:"node_detailpannel"}},[n("div",{staticClass:"pannel-title"},[t._v("模型详情")]),n("div",{staticClass:"block-container"},[t._v("\n                    名称:  "),n("Input",{staticStyle:{width:"120px"},on:{"on-blur":t.onBlur},model:{value:t.pannelVlaue,callback:function(e){t.pannelVlaue=e},expression:"pannelVlaue"}})],1)]),n("div",{staticClass:"pannel",attrs:{"data-status":"group-selected",id:"node_detailpannel"}},[n("div",{staticClass:"pannel-title"},[t._v("群组详情")]),n("div",{staticClass:"block-container"},[t._v("\n                    名称:  "),n("Input",{staticStyle:{width:"120px"},on:{"on-blur":t.onBlur},model:{value:t.pannelVlaue,callback:function(e){t.pannelVlaue=e},expression:"pannelVlaue"}})],1)]),n("div",{staticClass:"pannel",attrs:{"data-status":"canvas-selected",id:"canvas_detailpannel"}},[n("div",{staticClass:"pannel-title"},[t._v("画布")]),n("div",{staticClass:"block-container"},[n("Checkbox",{on:{"on-change":t.canvasChange},model:{value:t.pannelSelect,callback:function(e){t.pannelSelect=e},expression:"pannelSelect"}},[t._v("画布")])],1)])]),n("div",{staticClass:"minimapTitle"},[t._v("导航器")]),n("div",{attrs:{id:"minimap"}}),n("navigator",{on:{navigatorChange:t.navigatorChange}}),n("div",{attrs:{id:"page"}}),t._m(1)],1)],1)},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"itempannel"}},[n("ul",[n("li",{staticClass:"getItem",attrs:{"data-shape":"k-means","data-type":"node","data-size":"170*34"}},[n("span",{staticClass:"pannel-type-icon"}),t._v("K 均值聚类\n                ")]),n("li",{staticClass:"getItem",attrs:{"data-shape":"random-forest","data-type":"node","data-size":"170*34"}},[n("span",{staticClass:"pannel-type-icon"}),t._v("随机森林\n                ")]),n("li",{staticClass:"getItem",attrs:{"data-shape":"PS-SMART","data-type":"node","data-size":"170*34"}},[n("span",{staticClass:"pannel-type-icon"}),t._v("PS-SMART 分类\n                ")]),n("li",{staticClass:"getItem",attrs:{"data-shape":"read-data-base","data-type":"node","data-size":"170*34"}},[n("span",{staticClass:"pannel-type-icon"}),t._v("读数据表\n                ")]),n("li",{attrs:{className:"getItem","data-shape":"Bayes","data-type":"node","data-size":"170*34"}},[n("span",{staticClass:"pannel-type-icon"}),t._v("朴素贝叶斯\n                ")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"contextmenu"}},[n("div",{staticClass:"menu",attrs:{"data-status":"node-selected"}},[n("div",{staticClass:"command",attrs:{"data-command":"copy"}},[n("span",[t._v("复制")]),n("span",[t._v("copy")])]),n("div",{staticClass:"command",attrs:{"data-command":"delete"}},[n("span",[t._v("删除")]),n("span",[t._v("delete")])])]),n("div",{staticClass:"menu",attrs:{"data-status":"edge-selected"}},[n("div",{staticClass:"command",attrs:{"data-command":"delete"}},[n("span",[t._v("删除")]),n("span",[t._v("delete")])])]),n("div",{staticClass:"menu",attrs:{"data-status":"group-selected"}},[n("div",{staticClass:"command",attrs:{"data-command":"copy"}},[n("span",[t._v("复制")]),n("span",[t._v("copy")])]),n("div",{staticClass:"command",attrs:{"data-command":"delete"}},[n("span",[t._v("删除")]),n("span",[t._v("delete")])]),n("div",{staticClass:"command",attrs:{"data-command":"unGroup"}},[n("span",[t._v("解组")]),n("span",[t._v("unGroup")])])]),n("div",{staticClass:"menu",attrs:{"data-status":"canvas-selected"}},[n("div",{staticClass:"command",attrs:{"data-command":"undo"}},[n("span",[t._v("撤销")]),n("span",[t._v("undo")])]),n("div",{staticClass:"command",attrs:{"data-command":"redo"}},[n("span",[t._v("重做")]),n("span",[t._v("redo")])]),n("div",{staticClass:"command",attrs:{"data-command":"pasteHere"}},[n("span",[t._v("粘贴")]),n("span",[t._v("pasteHere")])])]),n("div",{staticClass:"menu",attrs:{"data-status":"multi-selected"}},[n("div",{staticClass:"command",attrs:{"data-command":"copy"}},[n("span",[t._v("复制")]),n("span",[t._v("copy")])]),n("div",{staticClass:"command",attrs:{"data-command":"paste"}},[n("span",[t._v("粘贴")]),n("span",[t._v("paste")])]),n("div",{staticClass:"command",attrs:{"data-command":"addGroup"}},[n("span",[t._v("归组")]),n("span",[t._v("addGroup")])]),n("div",{staticClass:"command",attrs:{"data-command":"delete"}},[n("span",[t._v("删除")]),n("span",[t._v("delete")])])])])}],a=(n("8449"),n("7514"),n("1688")),o=n.n(a),s=n("3217"),l=n("de1d"),u=n("ef6a"),c={name:"hostTwo",components:{toolbar:l["default"],navigator:u["default"]},extends:s["default"],data:function(){return{pannelVlaue:"",msg:"设置",editor:"",pannelSelect:!1,inputingLabel:!1,flow:"",value:{edges:[{id:"de78a7c7",index:3,source:"c4e20589",sourceAnchor:1,target:"7ed2580f",targetAnchor:0},{id:"8ef89cf7",index:4,source:"c4e20589",sourceAnchor:1,target:"75ee11e6",targetAnchor:0}],nodes:[{id:"c4e20589",index:0,label:"开始",shape:"k-means",size:"170*34",type:"node",x:210,y:60,style:{fill:"red",stroke:"blue"}},{id:"7ed2580f",index:1,label:"节点1",shape:"random-forest",size:"170*34",type:"node",x:108,y:206},{id:"75ee11e6",index:2,label:"节点2",shape:"random-forest",size:"170*34",type:"node",x:358,y:208}]}}},methods:{butClick:function(t){var e=this,n={nodes:[{shape:"customNode",id:"node1",x:50,y:100},{shape:"customNode",id:"node2",x:250,y:100}]};if(1===t)this.page.read(n);else{var i=[{id:"node1",x:200,y:300,label:"节点1",parent:"group1",size:"60*60"},{id:"node2",x:100,y:300,label:"节点2",parent:"group1",size:"60*60"}];i.forEach(function(t){e.page.add("node",{id:t.id,x:t.x,y:t.y,label:t.lable,parent:t.parent,size:"60*60"})})}},canvasChange:function(t){this.toggleGrid(t)},onBlur:function(){var t=this.pannelVlaue;null!==t&&""!==t&&(this.updateGraph("label",t),this.pannelVlaue="")},navigatorChange:function(t){var e=t/100;this.changeZoom(e)},initFlow:function(){var t=o.a.Flow;t.registerGuide("tag",{draw:function(t){console.log(t);var e=t.getGraphicGroup(),n=t.getModel(),i=n.nodeId,r=n.label,a=t.getGraph(),o=a.find(i);console.log(o);var s=o.getBBox(),l=32,u=[8,16],c=e.addShape("text",{attrs:{id:222,x:s.centerX,y:s.minY-l-18,text:r,fill:"#333",textAlign:"center"}}),h=c.getBBox(),d=e.addShape("path",{attrs:{path:[["M",h.minX-u[1],h.minY-u[0]],["L",h.maxX+u[1],h.minY-u[0]],["L",h.maxX+u[1],h.maxY+u[0]],["L",h.minX-u[1],h.maxY+u[0]],["Z"]],stroke:"blue"}});return d}}),t.registerNode("model-card",{draw:function(t){console.log(t);var e=t.getGraphicGroup(),n=t.getModel(),i=184,r=40,a=-i/2,o=-r/2,s=4,l=e.addShape("rect",{attrs:{x:a,y:o,width:i,height:r,radius:s,fill:"white",stroke:"#CED4D9"}});e.addShape("path",{attrs:{path:[["M",a,o+s],["L",a,o+r-s],["A",s,s,0,0,0,a+s,o+r],["L",a+s,o],["A",s,s,0,0,0,a,o+s]],fill:this.color_type}}),e.addShape("image",{attrs:{img:this.type_icon_url,x:a+16,y:o+12,width:20,height:16}});var u=n.label?n.label:this.label;return e.addShape("text",{attrs:{text:u,x:a+52,y:o+13,textAlign:"start",textBaseline:"top",fill:"rgba(0,0,0,0.65)"}}),e.addShape("image",{attrs:{img:this.state_icon_url,x:a+158,y:o+12,width:16,height:16}}),l},anchor:[[.5,0],[.5,1]]}),t.registerNode("k-means",{label:"k 均值聚类",color_type:"#1890FF",type_icon_url:"https://gw.alipayobjects.com/zos/rmsportal/czNEJAmyDpclFaSucYWB.svg",state_icon_url:"https://gw.alipayobjects.com/zos/rmsportal/MXXetJAxlqrbisIuZxDO.svg",anchor:[[.5,0,{type:"input"}],[.5,1,{type:"output"}]]},"model-card"),t.registerNode("random-forest",{label:"随机森林",color_type:"#9254DE",type_icon_url:"https://gw.alipayobjects.com/zos/rmsportal/czNEJAmyDpclFaSucYWB.svg",state_icon_url:"https://gw.alipayobjects.com/zos/rmsportal/MXXetJAxlqrbisIuZxDO.svg",anchor:[[.5,0,{type:"input"}],[.5,1,{type:"output"}]]},"model-card"),t.registerNode("PS-SMART",{label:"PS-SMART 分类",color_type:"#1890FF",type_icon_url:"https://gw.alipayobjects.com/zos/rmsportal/czNEJAmyDpclFaSucYWB.svg",state_icon_url:"https://gw.alipayobjects.com/zos/rmsportal/MXXetJAxlqrbisIuZxDO.svg",anchor:[[.5,0,{type:"input"}],[.33,1,{type:"output"}],[.66,1,{type:"output"}]]},"model-card"),t.registerNode("Bayes",{label:"朴素贝叶斯",color_type:"#9254DE",type_icon_url:"https://gw.alipayobjects.com/zos/rmsportal/czNEJAmyDpclFaSucYWB.svg",state_icon_url:"https://gw.alipayobjects.com/zos/rmsportal/uZVdwjJGqDooqKLKtvGA.svg",anchor:[[.5,0,{type:"input"}],[.5,1,{type:"output"}]]},"model-card"),t.registerNode("read-data-base",{label:"读数据表",color_type:"#FAAD14",type_icon_url:"https://gw.alipayobjects.com/zos/rmsportal/czNEJAmyDpclFaSucYWB.svg",state_icon_url:"https://gw.alipayobjects.com/zos/rmsportal/MXXetJAxlqrbisIuZxDO.svg",anchor:[[.5,1,{type:"output"}]]},"model-card"),this.flow=t},initOnPage:function(){var t=this.page;t.on("afterchange",function(t){console.log(t)}),t.on("hoveranchor:beforeaddedge",function(t){"input"===t.anchor.type&&(t.cancel=!0)}),t.on("dragedge:beforeshowanchor",function(e){"input"===e.targetAnchor.type&&"output"===e.sourceAnchor.type||(e.cancel=!0),"target"===e.dragEndPointType&&t.anchorHasBeenLinked(e.target,e.targetAnchor)&&(e.cancel=!0),"source"===e.dragEndPointType&&t.anchorHasBeenLinked(e.source,e.sourceAnchor)&&(e.cancel=!0)}),t.on("node:mouseenter",function(e){console.log(e.item.id);var n=t.find(e.item.id),i=n.getBBox(),r=32;t.add("node",{id:"2222",x:i.centerX,y:i.minY-r-8,label:"节点2",parent:"group1",size:"60*60",shape:"flow-circle"})}),t.on("node:mouseleave",function(){t.remove("2222")})}},mounted:function(){var t=this;this.initG6(),this.initFlow(),this.$nextTick(function(){t.initOnPage()})},created:function(){var t=document.body.clientHeight;this.editorHeight=t-162}},h=c,d=(n("75cb"),n("2877")),f=Object(d["a"])(h,i,r,!1,null,"7dd4ba68",null);e["default"]=f.exports},8381:function(t,e,n){},8449:function(t,e,n){"use strict";n("386b")("anchor",function(t){return function(e){return t(this,"a","name",e)}})},8601:function(t,e,n){},8744:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABZ0RVh0Q3JlYXRpb24gVGltZQAxMC8xNi8xNNQKZMoAAAAcdEVYdFNvZnR3YXJlAEFkb2JlIEZpcmV3b3JrcyBDUzbovLKMAAAMDklEQVR4nO2da4xdVRXHf3OnDPIq0sqjpcBUoOCATWotYrEBGxQUkYfY+kEwoSFBEENaSBRNUT4hIuERAxEk4eWjpdAGNDy0iuVlWyhBpjxUOoXSocA0WEpnpu3w98M6t3Nmn3PPPffes/e9tP0lJ+09s89ea691zt7nsfbabZJocTqBycBxwMTo9zhgLDAG2NMpPwhsBPqAXqAHWAN0Ay9Gv1uWthZ0yGTgNGAGMB0zfJH0AU8Dy4BHMSe1DK3gkBJwEjALOAc4NLD8t4AHgQXAU8BHgeWPoJkOmQBcCMwBDm+WEg5vAL8F7gTWNUOBZjhkKjAXmA205zxmO/AK8CrwOma4vmjbCnwQldsP6MC6ubGYoz8NHAMcC4zKKW8I+CNwA/BczmMKIaRDpgBXA2flKPs+8DjWzz+N9fPbGpS/BzY+TcfGp68An8xx3BLg58CqBuXnQ5Lvbbyku1Wd9ZJukvQlSe0B9GqPZN0Uya7G3VFbvOrlu8FzJW3OaOR2SYskfU1SyXdjM7ZSpMOiSKdKbI7a5O2E8dXALkkrMhrWL+lmSZ2BDF7L1hnp1p+h/4qojS3vkDZJl2Q0ZqusixjXAoavto2LdN1aoS39UVvbipRbZAP2lbSggvKS9JCkSS1g6Fq3SZHulVgQtb2lHDJRUncFhXslndsChm10OzdqSxrdkQ1awiEnSNpQQdGFksa0gDGL2sZEbUpjQ2SLpjpkpqQtKcoNSLoooKEOlvQbSbcHkndR1EaXLZFNmuKQb1ZQ6k1J0zwbpMP5fV9M/imeZZe3aVFbXQYi2wR1yEylO2OV/D08lWT9+EuShiT9QdJtkp7RyAe7XklHeXREfBsftdllQHVeKfUocYLSu6mlkkZ7aviJkp5PkVmJPklzlLySfGyjo7a7bFEdY0qtwicqfQB/TNLeHhpbknSN7Iqoh02SnpB0lfxeNXtHNnDZoBrvvmoRuq/Sb22Xyo8zOiQ9kG7nuvmzpCkedC07Je1K6VYNzyl5hbUp/aFvlfx0Ux3KfhhrhI8k3Sg/J9FopY8pC5TziT6voEtShLwpfwP4XZkmLYZVkg73oPt4pd99XZLn+DwCupR8NzUgf7e2c3MYsyjekp+xZZqSd6H9yvFCslrF7Up/a+vroW+apG15LFkg/5afbveiFFkrVOXVfT1n60IPyped/1IOA/rg5pw61rqlvWaZm3VM1ifc8cBrwD6xfW9j8VEbPXy8PAN42EO9ediGxXutL7jeMVg82CGxfR8CkyrJKmVUdi0jnQFwKX6cAXCmp3rzsAdwvod6N2I2i7MPZtt0Klw6U1IutYc8Xdbl7dk8fYtHVshf29Ju4VOfhyp1WYsZGR2yDTge68J8sY7wQXJxhoD9sS6laCYBL2FXYpklwNluwbQuayrJUJ1b8esMyBeS45N2LH7LB69hNoxzFmbrEaQ5ZK7ze4CsPq843PGqGfi8Qq/FbBnHtXXCIROwiMI4t2NR5L5pNBCuCEZ7rLsXs2Wc2ZjNd+A65EJGhncOYeGUIdgSSE4Wmz3XfwNm0zLtmM13UHL+P8epYAnh5lP0BZKTxVrP9fdgNo0zh5gf4g45iWQU+h1e1ErnnYCy0hgCXg4gx7Xp4ZjtgZEOmeUU7MUmtISiJ6CsNFZjs6988yjJMXmH7eMOOccptJCwk1f+G1BWGisCyfkIs22cHbYvO2QyyVs+9yDfdAeW5xLKIZC07aGYD3Y45DSnwPvAM56VijMauCqgvDSOCCjrGczGcU6DYYfMcP74OCNvz3wzBXs100zOCyhrCLNxnBkw7JDpzh+X+dbIIcRgWo0DA8tzbTwdzCGdJKcePx1AoTit8AyyJrA818Zjgc4S0WASYzvh52730PxXJ08GlvciZus4k0vYF8A4rxDeONuw19PN5K+B5W3DbB3nuBKWriLOq2H0SeAOciHZCixtglzX1hPLY0ic18PokuDuJskF+yC3qQlyXVt3lrBELnHeCKSMSzewqAlyBfyqCXIhaetxJZJ3WM2847mU4iM/qnEVsDywzDKurceWsFCVrEIh2YCltAjFWsJ8Da2Ea+sxJZL5prYGUqYSvwso6/6AstJwbb1n2jf1D1L2hWQl8EQAOZuA6wPIySJh6zSHhHyHVYmfBJDxQywSs5kkPm+kOaTZ4ThgicR8dl23And5rD8v+7s7SiRf7HWE0aUql+PnDF4OXOah3npwbT1YIhmr2wpXCMC7wD891NtLa3TLkLT1xhLJW6+DAymTh7wZ52qhVZwBcJDzu69E8oN7M+NrXXy8V3vEQ531MsH53VsiGe1xVBhdcnELxZ7RfcC9BdbXKEc6v3tKJD/MHB1ImTysBR4osL6bgf4C62sU19ZrSiSjPboYGTYfGvdW/LqC6t0E/NrZ52OMyssewGecfd0lkl8HR5H8ihiCUdjLxd87+1cCjxVQ/3Ukb2D+AcwsoO566CJ52/tieebOe87snh94nE3kbiVJ35H0ciT7uZQyM7InP1VlrdITBQxGf39Y0hcDthlJ33d0fE/Sju7B/eB+ivfzw86O7wIvYFfFsdH+T6WUXUZjE0IvIxldP4rhM/QMzAZPAN8ge+5lUZzs/DYfRN660vHWJvnLpHOYpJ/KJu2nMVDhuGOUnhKqGosq1HdIxjFrJV0t6cgG2lmtV3B7pSul4Xnqk1OUOrVABQ6SdLGkv8lyjVTjgAr1zMtxbJy3JR1Yoa7P5qzjWUlXqNhMqiemyJksjUwcsM4pcGODQjskzZKlLao1vVKlFBRtqi0pzdcz9Du9Rp22S1qsYjLW/dKpe135b/FCtziF3pY0qg5hbbKroVIGzzycnVH/AZL+k6OOa6roeXED+i2VdHyV+itt7Uomp7ml/Pf44LXAGWQOxga7WujAvsLdysjsBbXixoqBBWNcgSX0r3YbPAh8FZuitgKYllKmkQfgL2PJ+S+v49jTSb4yGbZ9zHMl2WAWp5ZkAe2S7m/grItzn1P3mZI+aKC+TZLOcer8U4M6lqk1T8pi5/i1iuW9dwvPdwpvV/787D8rqIGS9EKs3tNVf4q/OEOSzovV20iX6nKW8tnoMCWzHc2Pl3EPmKDk6gC35RB0sooxWpkB2RU3SdL7BdbbL2mqrJ1FskbSXqpupxud47ZHulR0CBqZA1eyZPRZmeP2U3oGtUY5RtJKD/W+Jul8D/WOONNTtnFKJoJzu+ZUh0xNEZbVT15fYKPiPOmpXkn6n4c6+5XdvbtXh2S2ruqQtIFnm9KfDbqUvQDKrsa9Srfn0Rp+b1ZmcVrZStmApgDPO/v+gq3bFMfNGrSrI+DzJG33CMl5nJ8jZV2rSi/RVgH3OPtOBb4V+30Cu53h0gb8wtl3Lkln3EOFRcZqTfH3DjY5811sam/IiZIfJ74M/B0LZP8XI2cY1J3ibz0w39l3ELbw4hEkEw3sZpgfR//eQXK6x3wyIvyrrWPYDjyL9YtxVmHjzG4qcz32qifOSuBEMgI38iws2YWtdvmJRrTbDQNYBrnVWYXyfBlbDcwrQqNdnHlUcQbkX3q1DZtI8+0GldpVWYhlj6tq7FrWwt0Xi7Xtql+vXZLVwBfIma2ulo/5m7EAgGYnGvs48Q5ms9ypA2uNrliDZaBupei/VqUfs1VNKTvqCXdZjnm9FRLGtCqDmI1qnt1bb/zRUiwt3W6nJBnEbFNXZohGF7ifiQWw7dVIJTsR/diVUXeajkYj9JZiUY67B3qzwSk0mDOliJDJ5djrgKoPPTsxqzEbNJwRoqgY1jXYvXboxJmtwEKs7YUkQCsyqHgz9jR6Kcmk8zsjA1hbZ1NgivJGB/VKdGHzwN23xDsLK4Hv4aGb9hV2X+5T5+FngZRm8SHWJm9jpq8rJM54LOOOjzWeQnIP8CM8p48KMTFlPXAB9lHfXRng48ASTPcLCJDLK8QV4jIVW1lmNs2ddJnFEPa54Qbs41wwmuGQMhOwxUzmkFwmo1m8gcUM3IktUhacZjqkTAlbP2MWFjgROpPEW8CD2JSApwi7IkSCVnCIy2QsjmkGln7bzQnZKH3YBMtl2FoeoZNGZ9KKDnHpxJx0HJZjuBMLrRmL5Yt0UxQOYhmO+rA8Lj3YU3Q3Zvwe7xo3wP8BCIgD4mYrpEAAAAAASUVORK5CYII="},8888:function(t,e,n){},"889d":function(t,e,n){"use strict";var i=n("167d"),r=n.n(i);r.a},"916f":function(t,e,n){"use strict";var i=n("fd87"),r=n.n(i);r.a},a08c:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("dropDownBox")],1)},r=[],a=n("101e"),o={name:"menuDrop",components:{dropDownBox:a["default"]},data:function(){return{}},methods:{}},s=o,l=n("2877"),u=Object(l["a"])(s,i,r,!1,null,null,null);e["default"]=u.exports},a1ce:function(t,e,n){var i=n("63b6"),r=n("25eb"),a=n("294c"),o=n("e692"),s="["+o+"]",l="​",u=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),h=function(t,e,n){var r={},s=a(function(){return!!o[t]()||l[t]()!=l}),u=r[t]=s?e(d):o[t];n&&(r[n]=u),i(i.P+i.F*s,"String",r)},d=h.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(c,"")),t};t.exports=h},ab5b:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{ref:"passwordInput",staticClass:"container passwordInput"},[n("input",{staticClass:"input",attrs:{id:"input",type:"text",title:"请输入密码"}}),n("label",{staticClass:"border",attrs:{for:t.labelFor}},[n("div",{staticClass:"lableTitle"},[t._v("密码")])])])])},r=[],a={name:"inputMain",props:{labelFor:{type:String}},data:function(){return{}},methods:{}},o=a,s=(n("7ffa"),n("2877")),l=Object(s["a"])(o,i,r,!1,null,"6249adcb",null);e["default"]=l.exports},ac37:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("\n\t\t基本信息\n        "),n("button",{on:{click:t.demoBut}},[t._v("点击")]),t._m(0)])},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"divs"},[n("span",{staticClass:"a1"},[t._v("CSS3 Animations")])])}],a={name:"userMessage",data:function(){return{}},methods:{demoBut:function(){}}},o=a,s=(n("916f"),n("2877")),l=Object(s["a"])(o,i,r,!1,null,"39b42b4d",null);e["default"]=l.exports},b7a6:function(t,e,n){},b9bb:function(t,e,n){},b9e9:function(t,e,n){n("7445"),t.exports=n("584a").parseInt},c003:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Table",{staticStyle:{height:"calc(100vh - 116px)"},attrs:{columns:t.columns1,data:t.data1}})},r=[],a=n("57e7"),o={name:"action",data:function(){return{height:300,columns1:a["a"].action(this),data1:[{name:"John Brown",age:18,address:"New York No. 1 Lake Park",date:"2016-10-03"},{name:"Jim Green",age:24,address:"London No. 1 Lake Park",date:"2016-10-01"},{name:"Joe Black",age:30,address:"Sydney No. 1 Lake Park",date:"2016-10-02"},{name:"Jon Snow",age:26,address:"Ottawa No. 2 Lake Park",date:"2016-10-04"}]}},computed:{},created:function(){}},s=o,l=n("2877"),u=Object(l["a"])(s,i,r,!1,null,null,null);e["default"]=u.exports},c226:function(t,e,n){},cbfb:function(t,e,n){},cd1c:function(t,e,n){var i=n("e853");t.exports=function(t,e){return new(i(t))(e)}},da56:function(t,e,n){"use strict";var i=n("8888"),r=n.n(i);r.a},da86:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"locking",style:{boxShadow:"0 0 0 "+t.boxValue+"px rgba(0,0,0,0.5) inset",zIndex:t.zIndex}},[n("div",{ref:"deblocking",staticClass:"deblocking",style:{top:t.lockingTop}},[n("i",{staticClass:"iconfont"},[t._v("")]),n("div",{staticClass:"input"},[n("input",{staticClass:"inputContent",attrs:{placeholder:"请输入登陆密码"}}),n("button",{staticClass:"butSubmit",on:{click:t.deblocking}},[t._v("解锁")])])])])},r=[],a={name:"locking",data:function(){return{}},computed:{boxValue:function(){return this.$store.state.app.lockingType},zIndex:function(){return this.$store.state.app.zIndex},lockingTop:function(){return this.$store.state.app.lockingTop}},methods:{setBoxValue:function(){this.$store.commit("setlocking","1")},setPasswordShow:function(){this.$refs.deblocking.style.top="20%"},deblocking:function(){this.$store.commit("setlocking",0),sessionStorage.setItem("locking",0)}}},o=a,s=(n("889d"),n("2877")),l=Object(s["a"])(o,i,r,!1,null,"47932633",null);e["default"]=l.exports},dd1b:function(t,e,n){"use strict";var i=n("8381"),r=n.n(i);r.a},de1d:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"toolbar"}},[n("i",{staticClass:"command iconfont icon-undo",attrs:{"data-command":"undo",title:"撤销"}}),n("i",{staticClass:"command iconfont icon-redo",attrs:{"data-command":"redo",title:"重做"}}),n("div",{staticClass:"hr"}),n("i",{staticClass:"command iconfont icon-copy-o",attrs:{"data-command":"copy",title:"复制"}}),n("i",{staticClass:"command iconfont icon-paster-o",attrs:{"data-command":"paste",title:"粘贴"}}),n("i",{staticClass:"command iconfont icon-delete-o",attrs:{"data-command":"delete",title:"删除"}}),n("div",{staticClass:"hr"}),n("i",{staticClass:"command iconfont icon-zoom-in-o",attrs:{"data-command":"zoomIn",title:"放大"}}),n("i",{staticClass:"command iconfont icon-zoom-out-o",attrs:{"data-command":"zoomOut",title:"缩小"}}),n("i",{staticClass:"command iconfont icon-fit",attrs:{"data-command":"autoZoom",title:"适应画布"}}),n("i",{staticClass:"command iconfont icon-actual-size-o",attrs:{"data-command":"resetZoom",title:"实际尺寸"}}),n("span",{staticClass:"hr"}),n("i",{staticClass:"command iconfont icon-to-back",attrs:{"data-command":"toBack",title:"层级后置"}}),n("i",{staticClass:"command iconfont icon-to-front",attrs:{"data-command":"toFront",title:"层级前置"}}),n("span",{staticClass:"hr"}),n("i",{staticClass:"command iconfont icon-select",attrs:{"data-command":"multiSelect",title:"多选"}}),n("i",{staticClass:"command iconfont icon-group",attrs:{"data-command":"addGroup",title:"成组"}}),n("i",{staticClass:"command iconfont icon-ungroup",attrs:{"data-command":"unGroup",title:"解组"}})])}],a={name:"toolbar",data:function(){return{}},methods:{}},o=a,s=(n("7abd"),n("2877")),l=Object(s["a"])(o,i,r,!1,null,"8d40aef4",null);e["default"]=l.exports},e692:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},e789:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Card",[n("div",{staticClass:"role_header"},[n("div",{staticClass:"header_left"},[n("TabChange",{attrs:{tabList:t.tabList},on:{tabClick:t.tabClick}})],1),n("div",{staticClass:"header_right"},[n("InputSearch",{attrs:{placeHolder:"搜索..."},on:{onSearch:t.onSearch}})],1)]),n("Table",{staticStyle:{height:"calc(100vh - 206px)","margin-top":"20px"},attrs:{columns:t.columns,data:t.data1}})],1)],1)},r=[],a=n("57e7"),o={name:"userRole",components:{},data:function(){return{searchValue:"",tabList:[{id:1,name:"全部"},{id:2,name:"已发布"},{id:3,name:"审核中"},{id:4,name:"已拒绝"}],columns:a["a"].userRole(this),data1:[{name:"John Brown",age:18,address:"New York No. 1 Lake Park",date:"2016-10-03"},{name:"Jim Green",age:24,address:"London No. 1 Lake Park",date:"2016-10-01"},{name:"Joe Black",age:30,address:"Sydney No. 1 Lake Park",date:"2016-10-02"},{name:"Jon Snow",age:26,address:"Ottawa No. 2 Lake Park",date:"2016-10-04"}]}},methods:{edit:function(t,e){var n=2,i=/^[0-9]{0,1}$/;if(i.test(n));},tabClick:function(t){},onSearch:function(t){console.log(t),this.searchValue=t}}},s=o,l=(n("2303"),n("2877")),u=Object(l["a"])(s,i,r,!1,null,"22293782",null);e["default"]=u.exports},e814:function(t,e,n){t.exports=n("b9e9")},e853:function(t,e,n){var i=n("d3f4"),r=n("1169"),a=n("2b4c")("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),i(e)&&(e=e[a],null===e&&(e=void 0))),void 0===e?Array:e}},ef6a:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navigator"},[n("Row",[n("Col",{attrs:{span:"17"}},[n("div",{staticClass:"slider"},[n("Slider",{attrs:{max:200},on:{"on-change":t.dropClick},model:{value:t.percent,callback:function(e){t.percent=e},expression:"percent"}})],1)]),n("Col",{attrs:{span:"7"}},[n("div",{staticClass:"dropDown"},[n("Dropdown",{staticStyle:{width:"60px",margin:"8px 0 0 7px"},attrs:{placement:"top"},on:{"on-click":t.dropClick}},[n("a",{attrs:{href:"javascript:void(0)"}},[t._v("\n                            "+t._s(t.percent)+"%\n                            "),n("Icon",{attrs:{type:"ios-arrow-down"}})],1),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[n("DropdownItem",{attrs:{name:"50"}},[t._v("50%")]),n("DropdownItem",{attrs:{name:"100"}},[t._v("100%")]),n("DropdownItem",{attrs:{name:"150"}},[t._v("150%")]),n("DropdownItem",{attrs:{name:"200"}},[t._v("200%")])],1)],1)],1)])],1)],1)},r=[],a=n("e814"),o=n.n(a),s={name:"navigator",data:function(){return{percent:100}},methods:{dropClick:function(t){this.percent=o()(t),this.$emit("navigatorChange",t)},setValue:function(t){this.percent=t}}},l=s,u=(n("4de6"),n("2877")),c=Object(u["a"])(l,i,r,!1,null,"69fc650c",null);e["default"]=c.exports},f076:function(t,e,n){t.exports=n.p+"img/homeLogo.85ba3c57.png"},fd87:function(t,e,n){}}]);
//# sourceMappingURL=chunk-7160a840.8b2a4b6f.js.map